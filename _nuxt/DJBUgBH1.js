import{W as d}from"./D9PjJnFw.js";import{W}from"./DpGpKT4E.js";import{W as S}from"./CJbvcseS.js";import{d as v,o as B}from"./B3Wmi0DA.js";import{d as F,k as s,r as p,O as u,a0 as P,o as M,a1 as A,y as N,z as f,A as h,C as c,S as z,ac as D,D as E,F as U,I as R,_ as $}from"./BkRx7U8b.js";const O={class:"wb-module-files-elements-file-select"},T=F({__name:"FileSelect",props:{modelValue:{},fileSystem:{},fsItem:{},backLabel:{},upLabel:{},downLabel:{},maxVisibleItems:{}},emits:["update:model-value","select","refresh"],setup(y,{emit:k}){const o=k,l=y,w=s(()=>l.backLabel||"../"),g=s(()=>l.upLabel||"Up"),b=s(()=>l.downLabel||"Down"),r=s(()=>l.maxVisibleItems||5),I=s(()=>({title:"",items:V.value,modelValue:l.modelValue,"onUpdate:model-value":a=>{o("update:model-value",a)}})),e=p(l.fsItem||u(l.fileSystem.root)),n=p([]),t=p(0),i=s(()=>({back:!e.value.parent,up:t.value-1<0,down:t.value+1>n.value.length-r.value})),_=s(()=>l.modelValue),V=s(()=>{const a=n.value.slice(t.value,t.value+r.value).map(m=>({label:m.id,value:m.getPath()})).concat(Array(Math.max(r.value-n.value.length,0)).fill({label:"&nbsp;",disabled:!0}));return n.value.length<1&&(a[Math.floor(a.length/2)]={label:"Empty",disabled:!0}),a});P(()=>_.value,async()=>{typeof l.modelValue=="string"&&(e.value=u(await l.fileSystem.get(l.modelValue)),e.value instanceof v&&(n.value=Array.from((await e.value.getItems()).values()).map(u),t.value=0),(e.value instanceof B||e.value instanceof v)&&o("select",e.value))}),M(async()=>{n.value=Array.from((await e.value?.getItems()||[]).values()).map(a=>u(a)),A(()=>{o("refresh",{reset:!0,resize:!1,scroll:!1})})});const x=()=>{let a;if(!(e.value instanceof v)&&e.value?.parent?.parent?a=e.value?.parent?.parent?.getPath():e.value.parent&&(a=e.value.parent?.getPath()),a)o("update:model-value",a);else throw new Error("No parent found")},C=()=>{t.value=Math.max(t.value-1,0)},L=()=>{t.value=Math.min(t.value+1,n.value.length-r.value)};return(a,m)=>(f(),N("div",O,[h("div",null,[c(S,z(D(I.value)),null,16)]),h("div",null,[c(W,{align:"outer",full:"",direction:"vertical"},{default:E(()=>[c(d,{"style-type":"secondary",label:w.value,disabled:i.value.back,onClick:x},null,8,["label","disabled"]),c(d,{"style-type":"secondary",label:g.value,disabled:i.value.up,onClick:C},null,8,["label","disabled"]),b.value?(f(),U(d,{key:0,"style-type":"secondary",label:b.value,disabled:i.value.down,onClick:L},null,8,["label","disabled"])):R("",!0)]),_:1})])]))}}),K=$(T,[["__scopeId","data-v-a0eb7037"]]);export{K as W};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./tZLQdaL9.js","./CpIyErmU.js","./BH9FFkim.js","./D4lI5vpz.js","./RAasLaaH.js","./DdQrQ7-5.js","./6C4StZv5.js","./CV0dHcg-.js","./On0xenC3.js","./CZZPvNTk.js","./B2exwp0w.js","./djI3_XgP.js","./Ce6njBYG.js","./BE-N3i2n.js","./6jpuwjT2.js","./_x3G38tN.js","./Bx1Gqxs7.js","./ZHhSaUdj.js","./DNvW6rqi.js","./jI0uH-Zs.js","./A4CL5M2A.js","./CXbNF4JJ.css","./BTa_gj15.js","./B1hUkwaW.js","./CDq1CnCn.js","./DERgicKR.css"])))=>i.map(i=>d[i]);
import{d as H,y as a,z as n,A as i,I as x,B as V,_ as g,r as h,a7 as b,k as C,o as z,a1 as A,W as U,F as k,G as M,V as y,$ as B,X as D,Y as L,R as P,Q as O,K as W}from"./Bx1Gqxs7.js";import{i as j}from"./CpIyErmU.js";import{d as S}from"./On0xenC3.js";import{S as G}from"./6C4StZv5.js";import{S as N,T as Q}from"./B1hUkwaW.js";import{U as R}from"./CDq1CnCn.js";import{S as X}from"./BTa_gj15.js";const Y={class:"wb-env-element-context-menu-text"},q={class:"inner"},J={key:0,class:"title"},Z=H({__name:"Text",props:{item:{}},setup(s){return(e,w)=>{var c;return n(),a("li",Y,[i("div",q,[(c=e.item)!=null&&c.text?(n(),a("span",J,V(e.item.text),1)):x("",!0)])])}}}),ee=g(Z,[["__scopeId","data-v-62bea091"]]),te={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};function ne(s,e){return n(),a("svg",te,e[0]||(e[0]=[i("g",{class:"svg-primary"},[i("path",{d:"M20 2V0H2v2H0v12h2v2h18v-2h2V2zm-1 12h-5v-2H8v2H3v-2h2v-2h2V8h2V6h2V4h2V2h3.667v10H19z"}),i("path",{d:"M12 6h2v4h-4V8h2z"})],-1)]))}const oe={render:ne},se={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};function re(s,e){return n(),a("svg",se,e[0]||(e[0]=[i("path",{"fill-rule":"evenodd",d:"M2 0h18v2h2v12h-2v2H2v-2H0V2h2zm7 9H5V8h1V7h1V6h1V5h1V4h1V3h2v1h1v1h1v1h1v1h1v1h1v1h-4v3H9z",class:"svg-primary","clip-rule":"evenodd"},null,-1)]))}const ae={render:re},ie={class:"wb-env-element-context-menu-upload"},ce={class:"inner"},le={key:0,class:"title"},ue={key:1,class:"hotkey"},de=["accept"],me="application/json",pe=H({__name:"Upload",props:{core:{},item:{}},emits:["files","update:model-value"],setup(s,{expose:e,emit:w}){const c=h(),u=b("closeContextMenu",()=>{});e({closeContextMenu:u});const o=s,I=C(()=>Array.isArray(o.item.accept)?o.item.accept.join(","):o.item.accept||me),m=w,$=new G;z(()=>{A(()=>{o.item.hotKey&&o.item.action&&$.add(S.keyDown.subscribe(t=>{var l;o.item.hotKey&&S.resolveHotKey(o.item.hotKey,t)&&((l=c.value)==null||l.click())}))})}),U(()=>{$.unsubscribe()});const p=async t=>{var l;if(t.target instanceof HTMLInputElement){const f=Array.from((t instanceof InputEvent?t.dataTransfer:t.target).files||[]);if(t.target.value="",typeof o.item.action=="function")try{await o.item.action({files:f,closeContextMenu:u})}catch(_){console.error(_),(l=o.core)==null||l.errorObserver.next(_)}else m("files",f),m("update:model-value",f)}};return(t,l)=>(n(),a("li",ie,[i("div",ce,[t.item.title?(n(),a("span",le,V(t.item.title),1)):x("",!0),t.item.hotKey?(n(),a("span",ue,[t.item.hotKey.alt?(n(),k(M(oe),{key:0})):x("",!0),t.item.hotKey.shift?(n(),k(M(ae),{key:1})):x("",!0),i("span",null,V(t.item.hotKey.title),1)])):x("",!0),i("input",{ref_key:"inputEl",ref:c,accept:I.value,type:"file",onChange:p},null,40,de)])]))}}),ve=g(pe,[["__scopeId","data-v-0ce9a5c5"]]),he={},fe={class:"wb-env-element-context-menu-separator"};function _e(s,e){return n(),a("li",fe,e[0]||(e[0]=[i("span",null,null,-1)]))}const ye=g(he,[["render",_e],["__scopeId","data-v-745ab079"]]),xe={},ge={class:"wb-env-element-context-menu-spacer"};function we(s,e){return n(),a("li",ge)}const Ie=g(xe,[["render",we],["__scopeId","data-v-920e8b47"]]),$e=["data-index"];var Ve=(s=>(s.TOP="top",s.BOTTOM="bottom",s))(Ve||{});const be=H({__name:"ContextMenu",props:{core:{},direction:{},parentLayout:{},items:{}},emits:["update:model-value"],setup(s,{expose:e,emit:w}){const c=h(),u=h(!1),o=h(b("contextMenuIndex",{index:0}));y("contextMenuIndex",{index:o.value.index++});const I=C(()=>p.value>0||u.value);y("hasFocusedItems",I);const m=h(!1),$=b("closeContextMenu",()=>{});y("closeContextMenu",()=>{console.log("Context menu close"),u.value=!1,m.value=!0,$(),window.setTimeout(()=>{m.value=!1},500)});const p=h(0);y("addItemFocus",()=>{p.value++}),y("removeItemFocus",()=>{p.value--}),e({$el:c,hasFocusedItem:I});const t=O(()=>W(()=>import("./tZLQdaL9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url)),l="bottom",f={size:j(window.innerWidth,window.innerHeight)},_=s,T=w,E=C(()=>(_.items||[]).sort((v,d)=>(v.order||0)-(d.order||0)));function F(...r){T("update:model-value",...r)}function K(r){return r instanceof N?Ie:r instanceof X?ye:r instanceof Q?ee:r instanceof R?ve:t}return(r,v)=>(n(),a("ul",{ref_key:"rootEl",ref:c,class:B(["wb-element-context-menu",{"ignore-hover":m.value,[`direction-${r.direction}`]:r.direction}]),"data-index":o.value.index,onPointerover:v[0]||(v[0]=d=>u.value=!0),onPointerout:v[1]||(v[1]=d=>{p.value=0,u.value=!1})},[(n(!0),a(D,null,L(E.value,d=>(n(),k(P(K(d)),{key:d.id,core:_.core,tag:"li",item:d,direction:r.direction||M(l),"parent-layout":r.parentLayout||f,"onUpdate:modelValue":F},null,8,["core","item","direction","parent-layout"]))),128))],42,$e))}}),Fe=g(be,[["__scopeId","data-v-ae97fd8f"]]);export{Ve as D,oe as S,Fe as W,ae as a};

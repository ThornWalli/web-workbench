


import{Q as w,j as I,k as y,u as T,q as o,U as C}from"./index.7c17a2aa.js";import{getDefaultDocumentModel as O,PROPERTY as a,FONT_FAMILES as p,FONT_TYPES as S,FONT_SIZES as k,CONFIG_NAMES as _}from"./index.8741620b.js";import{_ as D,S as g,f as F,k as P,l as x,q as M,E as N}from"./entry.0f459a47.js";const b={components:{AtomMarkdown:w},props:{...I,model:{type:Object,default(){return{value:O()}}}},emits:[...y],setup(e,n){const r=g(e,"model"),i=T(e,n);return i.setContextMenu(U,{model:r.value}),i},data(){return{content:["# Document Editor",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},h={class:"wb-disks-workbench13-document-editor-info"};function R(e,n,r,i,l,d){const u=F("atom-markdown");return P(),x("div",h,[M(u,{content:l.content},null,8,["content"])])}const A=D(b,[["render",R],["__scopeId","data-v-e1f499f6"]]),U=({model:e,core:n})=>{const{windows:r}=n.modules;return[{order:0,title:"Document Editor",items:[{title:"New",hotKey:"N",keyCode:78,action:d},{title:"Open…",hotKey:"O",keyCode:79,action:l},{title:"Save",hotKey:"S",keyCode:83,action:u},{title:"Save As…",action:E},{type:o.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:v},{title:"Close",action:i}]},{order:1,title:"Document Settings",items:[{title:"Open maximized",type:o.CHECKBOX,name:a.OPEN_MAXIMIZED,model:e.value},{title:"Output Format",items:[{title:"Markdown",type:o.RADIO,name:a.OUTPUT_TYPE,value:"markdown",model:e.value},{title:"HTML",type:o.RADIO,name:a.OUTPUT_TYPE,value:"html",model:e.value}]},{title:"Font Family",items:Object.keys(p).map(t=>{const s=p[String(t)];return{title:S[String(t)],items:Object.keys(s).map(c=>{const m=s[String(c)];return{title:c,type:o.RADIO,name:a.FONT_FAMILY,value:m,model:e.value}})}})},{title:"Font Size",items:k.map(t=>({title:`${t}px`,type:o.RADIO,name:a.FONT_SIZE,value:t,model:e.value}))}]},{order:2,title:"Preview",type:o.CHECKBOX,name:_.DOCUMENT_EDITOR_SHOW_PREVIEW,model:n.config.observable,action(t){return n.config.set(_.DOCUMENT_EDITOR_SHOW_PREVIEW,t)}}];function i(){return e.actions.close()}async function l(){const t=await n.executeCommand("openFileDialog");if(t)if("content"in t.value)e.fsItem=t.fsItem,e.value=Object.assign(e.value,O(),t.value);else throw new Error("Can't read file content")}function d(){e.actions.reset()}function u(){return f()}function E(){return f(!0)}async function f(t=!1){const s=await C(JSON.stringify(e.value));let c;if(!t&&e.fsItem)return c=await n.executeCommand(`editfile "${e.fsItem.getPath()}" --data="${s}"`),c?n.executeCommand('openDialog "File saved."'):n.executeCommand('openDialog "File could not be saved."');{const m={html:"html",markdown:"md"}[String(e.value[a.OUTPUT_TYPE])];return e.fsItem=N(await n.executeCommand(`saveFileDialog --data="${s}" --extension="${m}"`)),e.fsItem}}function v(){r.addWindow({title:"Info",component:A,componentData:{model:e},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentEditor"})}};export{U as c};

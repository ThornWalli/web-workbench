import{i as t}from"./BHmTNEz3.js";import{c as e}from"./BjBlmVH-.js";import{u as a}from"./Dkhtr-D7.js";import{d as o,r as n,k as l,o as r,W as s,y as i,z as c,A as d,B as h,_ as m}from"./BfpYGSxR.js";import"./D1WZfvAb.js";import"./jSR9Z_uS.js";import"./Cy0zoxeo.js";function generatesSprites(e,a,o,n){const l=e/2-5,r=t(()=>l+5),s=[(t,e)=>{t.translate(r.x,r.y);const a=[.5,.34];t.beginPath(),t.moveTo(0,0),t.lineTo(-3,0-e.width/2*a[1]),t.lineTo(0,0-e.width/2*a[0]),t.lineTo(3,0-e.width/2*a[1]),t.lineTo(0,0),t.strokeStyle=n[1],t.fillStyle=n[1],t.stroke(),t.fill()},(t,e)=>{t.translate(r.x,r.y);const a=[.7,.54];t.beginPath(),t.moveTo(0,0),t.lineTo(-4,0-e.width/2*a[1]),t.lineTo(0,0-e.width/2*a[0]),t.lineTo(4,0-e.width/2*a[1]),t.lineTo(0,0),t.strokeStyle=n[1],t.fillStyle=n[1],t.stroke(),t.fill()},(t,e)=>{t.translate(r.x,r.y);t.beginPath(),t.moveTo(0,0),t.lineTo(0,0-e.width/2*.74),t.lineTo(0,0),t.strokeStyle=n[2],t.stroke()},t=>{t.translate(r.x,r.y),function drawDial(t,e,a,o){t.beginPath(),t.arc(0,0,e-a,0,2*Math.PI,!1),t.fillStyle=o[0],t.fill()}(t,l,o,n)},t=>{t.translate(r.x,r.y),function drawSegments(t,e,a){let o;for(o=0;o<60;o++){t.rotate(-Math.PI/2),t.beginPath();const o=0-e+12,n=6;t.moveTo(0,o),t.lineTo(0,o-n),t.rotate(Math.PI/3/5),t.lineWidth=2,t.strokeStyle=a[1],t.stroke()}for(t.rotate(-Math.PI/3/5*60),o=0;o<16;o++){t.rotate(-Math.PI/2),t.beginPath();const o=0-e+15,n=6,l=10;t.moveTo(0,o),t.lineTo(0+n/2,o-l/2),t.lineTo(0,o-l),t.lineTo(0-n/2,o-l/2),t.lineTo(0,o),t.rotate(Math.PI/3),t.fillStyle=a[1],t.fill()}t.rotate(-Math.PI/3*16)}(t,l,n)}];return s.map(t=>{const o=document.createElement("canvas");o.width=e,o.height=a;const n=o.getContext("2d");return n&&(n.imageSmoothingEnabled=!1,t(n,o)),o})}const u={class:"period"},f=m(o({__name:"Clock",props:{model:{}},setup(o){const{setContextMenu:m}=a();m(e,{model:o.model});const f=n(null),g=n(null),w=n(["#888888","#000000","#FFAA55"]),y=n([]),v=n(!1);let x;const I=l(()=>v.value?"PM":"AM");return r(()=>{if(f.value&&g.value){const e=g.value;e.width=f.value.offsetWidth,e.height=f.value.offsetHeight,y.value=generatesSprites(e.width,e.height,2,w.value);const a=e.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("Failed to get canvas context");!function render(e,a){const o=5,n=e.width/2-o,l=t(()=>n+o),r=t(e.width,e.height);a.imageSmoothingEnabled=!1,a.setTransform(1,0,0,1,0,0),a.translate(l.x,l.y),a.scale(1,1.015),a.beginPath(),a.arc(0,0,n,0,2*Math.PI,!1),a.fillStyle=w.value[1],a.fill(),a.scale(1,.985);const s=y.value,renderTick=t=>{window.requestAnimationFrame(()=>{a.drawImage(s[3],-l.x,-l.y,r.x,r.y),a.drawImage(s[4],-l.x,-l.y,r.x,r.y),a.strokeStyle=w.value[1],a.setTransform(1,0,0,1,0,0);const e=new Date;v.value=e.getHours()>12,a.translate(l.x,l.y),function drawClockHands(t,e,a,o,n){const l=e.getHours()*(2*Math.PI/12)+2*Math.PI/12*e.getMinutes()/60,r=e.getMinutes()*(2*Math.PI/60),s=e.getSeconds()*(2*Math.PI/60);a.rotate(l),a.drawImage(t[0],-o.x,-o.y,n.x,n.y),a.rotate(-l),a.rotate(r),a.drawImage(t[1],-o.x,-o.y,n.x,n.y),a.rotate(-r),a.rotate(s),a.drawImage(t[2],-o.x,-o.y,n.x,n.y),a.rotate(-s)}(s,e,a,l,r);const o=a.getImageData(0,0,r.x,r.y),n=o.data;for(let t=0;t<n.length;t+=4){const e=n[Number(t)],a=n[t+1],o=n[t+2];if(255!==e||170!==a||85!==o){const l=.2126*e+.7152*a+.0722*o>=50?255:0;.2126*e+.7152*a+.0722*o>=50&&(n[Number(t)]=n[t+1]=n[t+2]=l)}}a.putImageData(o,0,0),t&&t()})};renderTick(()=>{x=window.setInterval(renderTick,1e3)})}(e,a)}}),s(()=>{window.clearInterval(x)}),(t,e)=>(c(),i("div",{ref_key:"rootEl",ref:f,class:"wb-disks-workbench13-clock"},[d("canvas",{ref_key:"canvasEl",ref:g},null,512),d("span",u,h(I.value),1)],512))}}),[["__scopeId","data-v-809b7edb"]]);export{f as default};

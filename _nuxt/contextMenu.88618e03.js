import{al as w,_ as y,J as I,ad as E,e as d,G as s,K as f,am as O,a1 as g}from"./index.d1a8617f.js";import{_ as b,f as x,k as N,l as W,q as S}from"./entry.afaf31f9.js";const T={components:{AtomMarkdown:w},mixins:[y],props:{model:{type:Object,default(){return{value:I()}}}},data(){return{content:["# WebBasic",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}},computed:{contextMenu(){return new E(M,{core:this.core,model:this.model})}}},h={class:"wb-disks-extras13-web-basic-info"};function k(e,n,r,l,c,u){const i=x("atom-markdown");return N(),W("div",h,[S(i,{content:c.content},null,8,["content"])])}const B=b(T,[["render",k],["__scopeId","data-v-5e9891d0"]]),M=({model:e,core:n})=>{const{windows:r}=n.modules;return[{order:0,title:"Editor",items:[{title:"New",hotKey:"N",keyCode:78,action:l},{title:"Open…",hotKey:"O",keyCode:79,action:m},{title:"Save",hotKey:"S",keyCode:83,action:c},{title:"Save As…",action:u},{separator:!0},{hotKey:"I",keyCode:73,title:"Info",action:C},{title:"Close",action:_}]},{order:1,title:"Document Settings",items:[{title:"Has Window Output",type:d.CHECKBOX,name:s.HAS_WINDOW_OUTPUT,model:e.value}]},{order:1,title:"Run",hotKey:"R",keyCode:82,action:p},{order:2,title:"Preview",type:d.CHECKBOX,name:f.WEB_BASIC_SHOW_PREVIEW,model:n.config.observable,action(t){return n.config.set(f.WEB_BASIC_SHOW_PREVIEW,t)}}];function l(){e.reset()}function c(){return i()}function u(){return i(!0)}async function i(t=!1){let a=Object.assign({},e.value,{content:e.value.content.split(/\n/g)});a=await O(JSON.stringify(a));let o;return!t&&e.fsItem?(o=await n.executeCommand(`editfile "${e.fsItem.getPath()}" --data="${a}"`),o?n.executeCommand('openDialog "File saved."'):n.executeCommand('openDialog "File could not be saved."')):(e.fsItem=await n.executeCommand(`saveFileDialog --data="${a}" --extension="bs"`),e.fsItem)}async function m(){const t=await n.executeCommand("openFileDialog");if(t)if(s.CONTENT in t.value){const a=Object.assign({},t.value,{[s.CONTENT]:[].concat(t.value[s.CONTENT]).join(`
`)});e.fsItem=t.fsItem,e.openValue=a}else throw new Error("Can't read file content")}async function p(){const t=[];await n.modules.parser.parseBasic(e.value[s.CONTENT].split(/\n/),async(a,o)=>{const v=await n.executeCommand(a,o);return o.message&&t.push(o.message),v}),e.output=t.map(a=>g(a))}function _(){return e.actions.close()}function C(){r.addWindow({title:"Info",component:B,componentData:{model:e},options:{scale:!1,scrollX:!1,scrollY:!1}},{group:"extras13WebBasic"})}};export{M as c};

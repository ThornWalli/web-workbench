import{i as e,I as t,o}from"./BHmTNEz3.js";import{C as n,S as a,B as l,W as r}from"./CWPvID7d.js";import{d as s}from"./DdO-3S9B.js";import{T as v}from"./Cah-phv7.js";import{y as i,z as h,M as u,A as c,d as p,r as d,k as m,o as f,W as w,X as y,Y as g,Z as z,$ as b,F as M,R as S,_ as x,O as C,B as k,C as V,G as H,a0 as E,a1 as P,I as A,J as T,a2 as B,D as L,a3 as O,a4 as R,a5 as I,V as D,P as F,a6 as _,a7 as W,N as U,x as j,H as N,a8 as X}from"./BfpYGSxR.js";import{C as G,P as J}from"./CB0fCJMd.js";import{S as q}from"./CrNGlbV0.js";import{g as Y,M as K,s as Q,n as $,c as Z}from"./B1k18Rg6.js";import{B as ee,C as te}from"./g1R7VqXM.js";import{u as oe,C as ne,N as ae,W as le}from"./D1WZfvAb.js";import{W as re}from"./KaHav87i.js";import{I as se,W as ve,a as ie}from"./BlFo7Aw2.js";import{C as he}from"./GLWL0ZEA.js";import{f as ue}from"./N5kgPtk_.js";import{f as ce}from"./D3xLGof4.js";import pe from"./CBvk_XFr.js";import{u as de}from"./Dkhtr-D7.js";import{u as me}from"./Cy8OiAEg.js";import{l as fe,c as we,t as ye}from"./ytSRQE8W.js";import{f as ge}from"./Dw-z6kis.js";import"./BSzGBLGV.js";import"./D3MPJlJW.js";import"./B-meQdOw.js";import"./D7Us3e3D.js";import"./BdLbwnUH.js";import"./CJFEEUyp.js";import"./C98WWl5r.js";import"./CVVDEXDJ.js";import"./Cy0zoxeo.js";import"./CIasQYz1.js";import"./Caivkp23.js";import"./DL1FsYWj.js";import"./tbUmQ5LT.js";import"./jSR9Z_uS.js";import"./v8FPNFzi.js";import"./BfgCdWpr.js";import"./BB6FUOrg.js";import"./B15fucc8.js";import"./CJYzpMQ6.js";import"./CEDL6M7l.js";import"./CxZzHJhT.js";import"./I81pZH22.js";import"./CV0dHcg-.js";function getLayoutFromElement(t){const{x:o,y:n,width:a,height:l}=t.getBoundingClientRect();return{size:e(a,l),position:e(o,n)}}const ze={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 900 815"};const be={render:function render$m(e,t){return h(),i("svg",ze,t[0]||(t[0]=[u('<path d="M887 5H13c-4.4 0-8 3.6-8 8v764c0 4.4 3.6 8 8 8h874c4.4 0 8-3.6 8-8V13c0-4.4-3.6-8-8-8m-97 633s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#aea59f;"></path><path d="M25 25v690h850V25zm765 613s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#928c7f;"></path><path d="M35 35v670h830V35zm755 603s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#837c72;"></path><path d="M813 72H87c-4.4 0-8 3.6-8 8v580c0 4.4 3.6 8 8 8h726c4.4 0 8-3.6 8-8V80c0-4.4-3.6-8-8-8m-23 566s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#615a52;"></path><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="opacity:.1;fill:#fff;"></path><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="opacity:.2;"></path><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="opacity:.1;"></path><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="opacity:.1;fill:#fff;"></path><linearGradient id="a" x1="670.572" x2="964.642" y1="283.613" y2="610.211" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="fill:url(#a);"></path><linearGradient id="b" x1="284.95" x2="615.999" y1="924.997" y2="557.329" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="fill:url(#b);"></path><linearGradient id="c" x1="-66.233" x2="229.922" y1="297.922" y2="594.078" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="fill:url(#c);"></path><linearGradient id="d" x1="265.69" x2="634.31" y1="334.62" y2="-34" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="fill:url(#d);"></path><linearGradient id="e" x1="284.95" x2="615.999" y1="924.997" y2="557.329" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="fill:url(#e);"></path><linearGradient id="f" x1="670.572" x2="964.642" y1="283.613" y2="610.211" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="fill:url(#f);"></path><linearGradient id="g" x1="265.69" x2="634.31" y1="334.62" y2="-34" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="fill:url(#g);"></path><linearGradient id="h" x1="-66.233" x2="229.922" y1="297.922" y2="594.078" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="fill:url(#h);"></path><path d="M70 785h760v25H70z" style="fill:#9d958a;"></path><path d="M887 5c4.4 0 8 3.6 8 8v764c0 4.4-3.6 8-8 8H13c-4.4 0-8-3.6-8-8V13c0-4.4 3.6-8 8-8zm0-5H13C5.8 0 0 5.8 0 13v764c0 7.2 5.8 13 13 13h874c7.2 0 13-5.8 13-13V13c0-7.2-5.8-13-13-13" style="fill:#7e776e;"></path><path d="M70 790h760v5H70z" style="opacity:.3;"></path><path d="M25 25h850v2H25zM33 33h834v2H33zM25 27h2v686h-2zM873 27h2v686h-2zM25 713h850v2H25zM33 705h834v2H33zM33 35h2v670h-2zM865 35h2v670h-2zM835 790h-5v20H70v-20H40v5h25v20h770v-20h25v-5zM343 715h2v70h-2z" style="opacity:.2;"></path><path d="M345 715h406v70H345zM753 715h66v70h-66z" style="opacity:.3;"></path><path d="M345 715v70h406v-70zm403 67H348v-64h400z" style="opacity:.1;"></path><path d="M343 713v74h410v-74zm408 72H345v-70h406z" style="fill:#757066;"></path><path d="M753 715v70h66v-70zm63 67h-60v-64h60z" style="opacity:.1;"></path><path d="M751 715h2v70h-2zM819 715h2v70h-2zM753 785h68v2h-68z" style="fill:#757066;"></path><path d="M751 713v74h70v-74zm68 72h-66v-70h66z" style="fill:#757066;"></path><path d="M25.3 738.9h133.6v31.2H25.3z" style="opacity:.2;fill:#fff;"></path><path d="M68.8 743.1c-.3.3-.6.6-.9.8h3.3l.2-.8zm15.7 0c-1.1 0-2.2.3-3.1.8h6.1c-.9-.5-1.9-.8-3-.8m17 0c-1.3 0-2.5.3-3.5.8h7.2c-1-.5-2.2-.8-3.7-.8m19.7.1-.6.7h4.2l.1-.7zM66.5 745c-.5.4-1 .8-1.5 1.1h5.8l.2-1.1zm13.3 0c-.1 0-.1.1 0 0-.4.4-.7.7-1 1.1h10.9c-.2-.4-.5-.7-.8-1l-.1-.1zm16.5 0c-.3.3-.7.7-.9 1.1h11.9c-.2-.4-.5-.8-.8-1.1zm23.4 0-1 1.1h5.6l.3-1.1zm-56.6 2.3c-.7.4-1.4.7-2.2 1.1h9.4l.2-1.1zm14.8 0c-.2.4-.4.7-.6 1.1h4.5c.1-.2.3-.5.4-.6.1-.2.3-.3.4-.5zm7.8 0q.15 0 0 0c.3.3.4.7.5 1.1h4.2c-.1-.4-.2-.8-.3-1.1zm9.2 0c-.1.4-.2.7-.3 1.1h4.1c.1-.4.3-.7.6-1l.1-.1zm8.3 0c.3.3.4.7.5 1.1h4.2c0-.4-.1-.8-.2-1.1zm14.6 0-1 1.1h7.1l.2-1.1zm-58 2.2-.3 1.1h5c.3-.2.7-.4 1-.6l-.1.6h4.4l.3-1.1zm17 0c-.2.3-.3.7-.4 1.1h4.5c.1-.4.3-.8.5-1.1zm9.6 0v.3c0 .2-.1.6-.1.8h4.4c0-.4 0-.8-.1-1.1zm8.2 0c0 .4.1.8.2 1.1h4c-.1-.3-.2-.7-.2-1.1zm9.2 0c-.1.4-.3.8-.6 1.1h4.2c.2-.4.3-.7.3-1.1zm12.1 0-.9 1.1h4.2l.2-.3-.1.3h4.1l.2-1.1zm-56.5 2.2-.2 1c.9-.2 1.9-.5 3-1zm5.8 0-.2 1.1h4.3l.3-1.1zm10.7 0c-.1.4-.2.7-.3 1.1h4.5c.1-.4.2-.8.3-1.1zm10.3 0c0 .4-.1.7-.2 1.1h4.5c0-.4.1-.7.1-1.1zm9.1 0c.3.4.6.8 1 1.1h9c.5-.3 1-.7 1.4-1.1h-5.1c-.3.1-.5.1-.8.1-.2 0-.4-.1-.6-.1zm18.7 0-1 1.1h4.2l1-1.1zm5.1 0-.3 1.1h4.1l.3-1.1zM64.7 754l-.2 1.1h4.4l.2-1.1zm10.7 0c-.1.4-.1.7-.2 1.1h4.5c.1-.4.1-.7.2-1.1zm10.5 0c-.1.4-.1.7-.2 1.1h4.5c.1-.4.2-.7.2-1.1zm9.6 0c-.5.3-1.1.7-1.5 1.1h11.7c-.3-.4-.7-.8-1.1-1.1zm16.6 0-1 1.1h4.2l1-1.1zm6.5 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.2 1.1h4.4l.2-1.1zm10.7 0c0 .4-.1.7-.1 1.1h4.4c0-.4.1-.7.1-1.1zm10.5 0c-.1.4-.2.8-.3 1.1h4.5c.1-.4.3-.7.3-1.1zm7.8 0c-.2.4-.4.7-.6 1.1h4.5c.1-.3.3-.6.5-.8l.3-.3zm8.9 0c.2.3.4.7.4 1.1h4.2c-.1-.4-.2-.8-.3-1.1zm8.1 0-.9 1.1h4.2l1-1.1zm8 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.3 1.1h4.4l.3-1.1zm11 0c0 .4 0 .8.1 1.1h4.2v-.3c0-.2.1-.5.1-.8zm10 0c-.1.4-.3.8-.4 1.1h4.5c.2-.4.3-.7.4-1.1zm7.6 0c-.1.4-.1.7-.1 1.1h4.3c0-.4.1-.8.1-1.1zm10.1 0c0 .4 0 .8-.1 1.1h4.3c.1-.4.1-.7.1-1.1zm6.5 0-.3 1.1h15.6l.3-1.1zm-45.7 2.2-.3 1.1h4.4l.3-1.1zm11.8 0c.1.4.2.8.3 1.1h4.4l-.1-.1c-.2-.3-.3-.6-.4-1zm8.7 0c-.1.2-.3.5-.4.6l-.5.5h4.8c.2-.3.4-.7.6-1.1zm8.5 0c0 .4.1.8.2 1.1h4.7c-.3-.3-.4-.7-.5-1.1zm9.6 0c-.1.1-.1.2-.2.3-.2.3-.3.6-.6.8h4.9c.2-.4.3-.7.4-1.1zm6.6 0-.1.3h8.8l-.1.8h4.1l.1-.8h2.7l.1-.3zm-45.7 2.3-.2 1.1H67l.2-1.1zm13.1 0c.2.4.5.8.8 1.1H86l.1-.1c.3-.3.6-.7.9-1zm17.1 0c.2.4.4.8.8 1.1h10.4c.4-.3.7-.7 1-1l.1-.1zm23.8 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.1.4h4.4l.1-.4zm15.6 0c.9.5 1.9.8 3.1.8 1.1 0 2.2-.3 3.1-.8zm17.3 0c1 .5 2.2.8 3.5.8 1.4 0 2.7-.3 3.8-.8zm21 0-.1.4h4.1l.1-.4z" style="fill:#2c5aa0;"></path><path d="M790 102S620 87 450 87s-340 15-340 15-10 134-10 268 10 268 10 268 170 15 340 15 340-15 340-15 10-134 10-268-10-268-10-268z" style="fill:none;stroke:#333;stroke-width:1.5px;stroke-miterlimit:10;"></path>',37)]))}},Me={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer"};const Se={render:function render$l(e,t){return h(),i("svg",Me,t[0]||(t[0]=[c("path",{d:"M0 12h2v2h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2h-2V0H0z"},null,-1),c("path",{fill:"red",d:"M2 2v10h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z"},null,-1),c("path",{fill:"#fff",d:"M2 2v2h8v2H8v2h2v2h2v2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z"},null,-1)]))}},xe={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"26",class:"wb_cursor_pointer_mooncity"};const Ce={render:function render$k(e,t){return h(),i("svg",xe,t[0]||(t[0]=[c("path",{fill:"#0666cc",d:"M2 2h2v2H2zm2 2h2v2H4zm2 2h2v2H6zm2 2h2v2H8zm6 6v-2h-2v-2h-2v4h2zm-6 0h2v4H8zm2 4h2v4h-2zm0 6h2v2h-2zm2-2h2v2h-2z"},null,-1),c("path",{fill:"#0688cc",d:"M8 18h2v4H8zm2-4v-4H8V8H6V6H4V4H2v12h4v2h2v-4zm0 8h2v2h-2z"},null,-1),c("path",{fill:"#0accff",d:"M2 16V0H0v20h2v-2h4v-2zm4 2h2v4H6zm2 4h2v4H8z"},null,-1)]))}},ke={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"48",class:"wb_cursor_wait"};const Ve={render:function render$j(e,t){return h(),i("svg",ke,t[0]||(t[0]=[c("path",{d:"M32 20v-4h-2v-4h-2v-2h-2V6h-2V4h-2V2h-2v2h-2V2h-2V0h-4v2h-2v2H6v2H4v2H2v6H0v2h2v4h2v2H2v2h2v2h2v2h2v2h4v2h-2v2H8v2h2v2h2v2h4v4h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-4h2v-2h-2v-2h4v-2h2v-2h2v-2h2v-4h2v-2z"},null,-1),c("path",{fill:"red",d:"M30 20v-4h-2v-4h-2v-2h-2V6h-2V4h-2v2h-2V4h-2V2h-4v2h-2v2H6v2H4v6H2v2h2v4h2v2H4v2h2v2h2v2h4v2h4v2h-4v2h-2v2h2v2h4v-2h2v2h2v-2h2v-2h-4v-2h4v-2h4v-2h2v-2h2v-4h2v-2zm-8 20h-4v4h2v2h2v-2h2v-2h-2z"},null,-1),c("path",{fill:"#fff",d:"M18 18v2h4v2h-2v2h-2v2h8v-2h-4v-2h2v-2h2v-2zM8 10v2h4v2h-2v2H8v2h8v-2h-4v-2h2v-2h2v-2z"},null,-1)]))}},He={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer_crosshair"};const Ee={render:function render$i(e,t){return h(),i("svg",He,t[0]||(t[0]=[c("path",{d:"M10 0h2v8h-2zM10 14h2v8h-2zM0 10h8v2H0zM14 10h8v2h-8z"},null,-1)]))}},Pe={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer_crosshair"};const Ae={render:function render$h(e,t){return h(),i("svg",Pe,t[0]||(t[0]=[c("path",{d:"M10 10h1v1h-1z",class:"crosshair-center"},null,-1)]))}},Te=["data-index"],Be=x(p({__name:"Cursor",props:{parentLayout:{type:Object,default:()=>({position:e(5,5)})},cursor:{type:Object,default:()=>new J},offset:{type:t,default:()=>e(0,0)}},setup(t){const o=t,n=d(e(0,0)),a=new q;let l;const r=m(()=>({[G.POINTER_1]:[Se],[G.POINTER_MOONCITY]:[Ce],[G.WAIT]:[Ve],[G.CROSSHAIR]:[Ee,Ae]}[o.cursor.name])),v=m(()=>Object.assign(o.cursor.toCSSVars(),{"--position-x":`${n.value.x}px`,"--position-y":`${n.value.y}px`})),u=m(()=>({[`cursor-${o.cursor.name}`]:o.cursor.name}));f(()=>{a.add(s.pointerMove.subscribe(onPointerMove))}),w(()=>{a.unsubscribe()});const onPointerMove=t=>{window.cancelAnimationFrame(l),l=window.requestAnimationFrame(()=>{const a=o.offset;n.value=e(()=>Math.round(Math.min(Math.max(e(t.x,t.y)-o.parentLayout.position-a,0),o.parentLayout.size)))})};return(e,t)=>(h(!0),i(y,null,g(r.value,(e,t)=>(h(),i("i",{key:t,"data-index":t,class:b(["wb-env-element-cursor",u.value]),style:z(v.value)},[(h(),M(S(e)))],14,Te))),128))}}),[["__scopeId","data-v-b027e06b"]]);function approximate(e,t,o,n,a){if(0===e||1===e)return e;const l=(n-o)/2+o,r=t(l);return Math.abs(r-e)<a?l:r>e?approximate(e,t,o,l,a):approximate(e,t,l,n,a)}function reverse(e=linear,t=0,o=1,n=1e-5){return function createMemoizedFormula(e,t){const o=new Array(t+1).fill(void 0);return n=>{const a=Math.round(n*t);let l=o[Number(a)];return void 0===l&&(l=e(a/t),o[Number(a)]=l),l}}(a=>approximate(a,e,t,o,n),Math.round(1/n))}function linear(e){return e}const Le={class:"handle-wrapper"},Oe=x(p({__name:"RadialSlider",props:{styleType:{type:String,default:null},name:{type:String,default:"value"},modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},easing:{type:Function,default:e=>e},circumference:{type:Number,default:()=>2*Math.PI}},emits:["update:model-value"],setup(t,{emit:o}){const n=t,a=o,l=d(null),r=d(!1);let v=new q;const u=d(reverse(n.easing)),p=d(0),f=d(0),y=m(()=>({"transition-active":r.value,[`type-${n.styleType}`]:n.styleType})),g=m(()=>({"--rad":2*x.value*Math.PI*M.value})),M=m(()=>S.value/(2*Math.PI)),S=m(()=>n.circumference/2),x=m(()=>u.value(Math.max(n.modelValue,0)/n.max));w(()=>{resetSubscriptions()});const resetSubscriptions=()=>{v.unsubscribe(),v=new q,r.value=!1},onPointerDown=e=>{v.add(s.pointerMove.subscribe(onPointerMove.bind(this))),v.add(s.pointerUp.subscribe(onPointerUp.bind(this))),r.value=!0,p.value=getNormRadFromPosition(e),f.value=n.modelValue/n.max},getNormRadFromPosition=t=>{if(l.value){const o=function getRadOfElement(e){const t=window.getComputedStyle(e).transform,o=new DOMMatrix(t);return Math.atan2(o.b,o.a)}(l.value),n=function addRadToVector(t,o){const n=Math.cos(o)*t.x-Math.sin(o)*t.y,a=Math.sin(o)*t.x+Math.cos(o)*t.y;return e(n,a)}(Y(t,l.value.getBoundingClientRect()),-o-Math.PI-S.value),a=function getRadOfVector(e){return Math.atan2(e.y,e.x)+Math.PI}(n)-Math.PI;return(function clamp(e,t=0,o=1){return Math.min(Math.max(e,t),o)}(a/S.value,-1,1)+1)/2}return 0},onPointerMove=e=>{let t=getNormRadFromPosition(e);const o=t-p.value;let l;t=Math.min(Math.max(f.value+o,0),1),l=Math.abs(x.value-t)<.5?n.easing(t)*n.max:Math.round(x.value)*n.max,a("update:model-value",l)},onPointerUp=()=>{resetSubscriptions()};return(e,t)=>(h(),i("div",{ref_key:"rootEl",ref:l,class:b(["wb-element-radial-slider",y.value]),"touch-action":"none",style:z(g.value)},[c("div",Le,[c("div",{class:"handle",onPointerdown:onPointerDown},null,32),t[0]||(t[0]=c("div",{class:"indicator"},null,-1))])],6))}}),[["__scopeId","data-v-48d6333b"]]),Re={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 105 80"};const Ie={render:function render$g(e,t){return h(),i("svg",Re,t[0]||(t[0]=[c("path",{d:"M45 11c15.24 0 30.17.93 37.63 1.48C83.18 18.43 84 29.06 84 40c0 10.93-.82 21.56-1.37 27.52C75.16 68.07 60.24 69 45 69c-15.14 0-29.97-.92-37.48-1.47C6.96 59.88 6 45.75 6 40s.96-19.88 1.52-27.53C15.03 11.92 29.86 11 45 11m0-6C22.98 5 1.91 6.89 1.91 6.89S0 31.64 0 40s1.91 33.11 1.91 33.11S22.98 75 45 75s43.09-1.89 43.09-1.89S90 57.03 90 40 88.09 6.89 88.09 6.89 67.02 5 45 5"},null,-1),c("path",{d:"M70 22.9c11.11 0 22 .53 28.08.88.42 3.92.92 9.98.92 16.22 0 6.22-.51 12.29-.92 16.22-6.07.36-16.96.88-28.08.88-11.02 0-21.83-.52-27.94-.87C41.62 51.17 41 43.33 41 40s.62-11.17 1.06-16.23c6.1-.35 16.91-.87 27.94-.87m0-5.4c-17.13 0-33.51 1.22-33.51 1.22S35 34.63 35 40s1.49 21.28 1.49 21.28S52.87 62.5 70 62.5s33.51-1.22 33.51-1.22S105 50.94 105 40s-1.49-21.28-1.49-21.28S87.13 17.5 70 17.5"},null,-1)]))}},De={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};const Fe={render:function render$f(e,t){return h(),i("svg",De,t[0]||(t[0]=[c("path",{d:"M50 31c10.48 0 19 8.52 19 19s-8.52 19-19 19-19-8.52-19-19 8.52-19 19-19m0-6c-13.81 0-25 11.19-25 25s11.19 25 25 25 25-11.19 25-25-11.19-25-25-25M50 100c-1.66 0-3-1.34-3-3V83c0-1.66 1.34-3 3-3s3 1.34 3 3v14c0 1.66-1.34 3-3 3M50 20c-1.66 0-3-1.34-3-3V3c0-1.66 1.34-3 3-3s3 1.34 3 3v14c0 1.66-1.34 3-3 3M85.36 85.36a3 3 0 0 1-4.24 0l-9.9-9.9a3 3 0 0 1 0-4.24 3 3 0 0 1 4.24 0l9.9 9.9c1.17 1.16 1.17 3.06 0 4.24M28.79 28.79a3 3 0 0 1-4.24 0l-9.9-9.9a3 3 0 0 1 0-4.24 3 3 0 0 1 4.24 0l9.9 9.9a3 3 0 0 1 0 4.24M14.64 85.36a3 3 0 0 1 0-4.24l9.9-9.9a3 3 0 0 1 4.24 0 3 3 0 0 1 0 4.24l-9.9 9.9c-1.16 1.17-3.06 1.17-4.24 0M71.21 28.79a3 3 0 0 1 0-4.24l9.9-9.9a3 3 0 0 1 4.24 0 3 3 0 0 1 0 4.24l-9.9 9.9a3 3 0 0 1-4.24 0M100 50c0 1.66-1.34 3-3 3H83c-1.66 0-3-1.34-3-3s1.34-3 3-3h14c1.66 0 3 1.34 3 3M20 50c0 1.66-1.34 3-3 3H3c-1.66 0-3-1.34-3-3s1.34-3 3-3h14c1.66 0 3 1.34 3 3"},null,-1)]))}},_e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};const We={render:function render$e(e,t){return h(),i("svg",_e,t[0]||(t[0]=[c("path",{d:"M50 6c24.26 0 44 19.74 44 44S74.26 94 50 94 6 74.26 6 50 25.74 6 50 6m0-6C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),c("path",{d:"M50 0v100c27.61 0 50-22.39 50-50S77.61 0 50 0"},null,-1)]))}},Ue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};const je={render:function render$d(e,t){return h(),i("svg",Ue,t[0]||(t[0]=[c("path",{fill:"none",d:"M62 54v20c5.52 0 10-4.48 10-10s-4.48-10-10-10"},null,-1),c("path",{d:"M50 6c24.26 0 44 19.74 44 44S74.26 94 50 94 6 74.26 6 50 25.74 6 50 6m0-6C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),c("circle",{cx:"30",cy:"64",r:"10"},null,-1),c("path",{d:"M43 24c0 4.48 2.94 8.27 7 9.54V14.46c-4.06 1.27-7 5.06-7 9.54M50 0v14.46c.95-.3 1.95-.46 3-.46 5.52 0 10 4.48 10 10s-4.48 10-10 10c-1.05 0-2.05-.16-3-.46V100c27.61 0 50-22.39 50-50S77.61 0 50 0m25 68c-5.52 0-10-4.48-10-10s4.48-10 10-10 10 4.48 10 10-4.48 10-10 10"},null,-1)]))}},Ne={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 80"};const Xe={render:function render$c(e,t){return h(),i("svg",Ne,t[0]||(t[0]=[c("path",{d:"M50 11c15.24 0 30.17.93 37.63 1.48C88.18 18.43 89 29.06 89 40c0 10.93-.82 21.56-1.37 27.52C80.16 68.07 65.24 69 50 69c-15.14 0-29.97-.92-37.48-1.47C11.96 59.88 11 45.75 11 40s.96-19.88 1.52-27.53C20.03 11.92 34.86 11 50 11m0-6C27.98 5 6.91 6.89 6.91 6.89S5 31.64 5 40s1.91 33.11 1.91 33.11S27.98 75 50 75s43.09-1.89 43.09-1.89S95 57.03 95 40 93.09 6.89 93.09 6.89 72.02 5 50 5"},null,-1),c("path",{d:"M49 69V10h16L54 69z"},null,-1)]))}},Ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};const Je={render:function render$b(e,t){return h(),i("svg",Ge,t[0]||(t[0]=[c("path",{d:"M94 34.71V69H25.42zm6-9.71L0 75h100z"},null,-1)]))}},qe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"};const Ye={render:function render$a(e,t){return h(),i("svg",qe,t[0]||(t[0]=[c("path",{d:"M7.5 3.5v4",style:{stroke:"#000","stroke-linecap":"round","stroke-miterlimit":"10"}},null,-1),c("path",{d:"M7.5-.5v16M-.5 7.5h16M1.84 1.84l11.32 11.32M1.84 13.16 13.16 1.84",style:{fill:"none",stroke:"#faf100","stroke-miterlimit":"10"}},null,-1)]))}},Ke={class:"wb-env-screen-panel"},Qe=["disabled"],$e={class:"label"},Ze=["aria-label","onPointerdown"],et={class:"knob"},tt=["aria-label","onPointerdown"],ot=x(p({__name:"Panel",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:model-value"],setup(e,{emit:t}){const o=e,n=t,a=d(1),l=m(()=>[{name:"horizontalCentering",svg:C(Ie),label:"H. Centering",min:0,max:1,step:.01},{name:"brightness",svg:C(Fe),label:"Brightness",min:0,max:1,step:.01},{name:"contrast",svg:C(We),label:"Contrast",min:0,max:1,step:.01},{name:"color",svg:C(je),label:"Color",min:0,max:1,step:.01},{name:"sharpness",svg:C(Xe),label:"Sharpness",min:0,max:1,step:.01},{name:"soundVolume",svg:C(Je),label:"Volume",min:0,max:1,step:.01}]);function onUpdateModelValue(e,t){n("update:model-value",{...o.modelValue,[e]:t})}let r;function onPointerDown(e,t,n){e.preventDefault(),window.clearInterval(r),r=setInterval(()=>{const e=t.step*a.value;onUpdateModelValue(t.name,n?Math.min(Number(o.modelValue[t.name])+e,t.max):Math.max(Number(o.modelValue[t.name])-e,t.min)),a.value=Math.min(a.value+1,10)},125)}function onPointerUp(e){e.preventDefault(),window.clearInterval(r),a.value=1}return(t,o)=>(h(),i("div",Ke,[(h(!0),i(y,null,g(l.value,(t,n)=>(h(),i("figure",{key:n,class:"control",disabled:t.disabled},[(h(),M(S(t.svg))),c("figcaption",$e,k(t.label),1),c("div",null,[c("button",{"aria-label":`Decrease ${t.label}`,onPointerdown:e=>onPointerDown(e,t,!1),onPointerup:onPointerUp},null,40,Ze),c("div",et,[c("i",{style:z({"--value":e.modelValue[t.name]})},[c("div",null,[V(H(Ye)),o[0]||(o[0]=c("span",null,null,-1))])],4),V(Oe,{"model-value":e.modelValue[t.name],"style-type":"screen-panel-control-knob",min:0,max:1,"onUpdate:modelValue":e=>onUpdateModelValue(t.name,e)},null,8,["model-value","onUpdate:modelValue"])]),c("button",{"aria-label":`Increase ${t.label}`,onPointerdown:e=>onPointerDown(e,t,!0),onPointerup:onPointerUp},null,40,tt)])],8,Qe))),128))]))}}),[["__scopeId","data-v-9eb8c4b4"]]),nt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};const at={render:function render$9(e,t){return h(),i("svg",nt,t[0]||(t[0]=[c("path",{d:"M50 8c23.16 0 42 18.84 42 42S73.16 92 50 92 8 73.16 8 50 26.84 8 50 8m0-8C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),c("path",{d:"M50 77c-2.21 0-4-1.79-4-4V27c0-2.21 1.79-4 4-4s4 1.79 4 4v46c0 2.21-1.79 4-4 4"},null,-1)]))}},lt=["aria-label"],rt=x(p({__name:"PowerButton",props:{active:{type:Boolean,default:!1},label:{type:String,default:"Power"}},emits:["click"],setup(e,{emit:t}){const o=e,n=t,a=d(!1),l=d(0),r=m(()=>({active:o.active,broken:a.value}));let s;function onClickForeground(e){a.value||(l.value>=10?a.value=!0:(onClick(e),l.value++),window.clearTimeout(s),s=window.setTimeout(()=>{l.value=0},500))}function onClickBackground(e){onClick(e)}function onClick(e){n("click",e)}return w(()=>{window.clearTimeout(s)}),(t,o)=>(h(),i("div",{class:b(["wb-env-screen-power-button",r.value]),"aria-label":e.active?"Turn Off":"Turn On"},[c("div",{class:"background"},[o[0]||(o[0]=c("i",{class:"light"},null,-1)),c("button",{onClick:onClickBackground})]),c("button",{class:"foreground",onClick:onClickForeground},[o[1]||(o[1]=c("i",{class:"light"},null,-1)),c("span",null,k(e.label),1),V(H(at))])],10,lt))}}),[["__scopeId","data-v-9d2d3534"]]),st={class:"content"},vt={key:0,class:"scanlines"},it={key:0,class:"frame"},ht={class:"panel"},ut=x(p({__name:"Screen",props:{core:{type:Object,default:()=>null},theme:{type:Object,default:()=>null},cursor:{type:[n,null],default:null},hasScanLines:{type:Boolean,default:!1},hasRealLook:{type:Boolean,default:!1},bootSequence:{type:[String,Number],default:ee.SEQUENCE_3},frameActive:{type:Boolean,default:!0},hasActiveAnimation:{type:Boolean,default:!0},modelValue:{type:Object,default:()=>({contrast:0,brightness:0,color:0,sharpness:-1,horizontalCentering:0,soundVolume:1})}},emits:["update:model-value","toggleScreenActive"],setup(t,{expose:o,emit:n}){const a=t,l=n,r=d(null),v=d(null),u=d(null),p=d(null),y=d(!1),g=d(!1),S=d({name:"",duration:0,resolve:null}),x=d(!1),C=d(),k=d(),I=m(()=>{var t;const o=(null==(t=k.value)?void 0:t.size)||e(0,0);return e(()=>o*e(a.modelValue.horizontalCentering-.5,0))}),D=m(()=>a.cursor?a.cursor.current:null),F=m(()=>a.theme.colors.screen.background),_=m(()=>({animate:x.value,"active-animation":a.hasActiveAnimation,"frame-active":a.frameActive,"screen-active":g.value,"real-look":a.hasRealLook,"open-panel":y.value,["boot-sequence-"+a.bootSequence]:!0})),W=m(()=>({"--turn-duration":S.value.duration+"ms","--horizontal-centering":a.modelValue.horizontalCentering-.5})),U=m(()=>({"backdrop-filter":[`contrast(${2*a.modelValue.contrast*100}%)`,`brightness(${2*a.modelValue.brightness*100}%)`,`saturate(${2*a.modelValue.color*100}%)`,`blur(${20*a.modelValue.sharpness/(window.devicePixelRatio||1)}px)`].join(" ")})),j=m(()=>{if(C.value){const t=e(()=>Math.round(C.value||e(0,0)));return{"--wrapper-position-x":t.x+"px","--wrapper-position-y":t.y+"px"}}return{}});E(()=>g.value,e=>{l("toggleScreenActive",e)}),E(()=>a.frameActive,()=>{P(()=>{onResize()})}),E(()=>F.value,e=>{var t;document.querySelector('[name="theme-color"]')&&(null==(t=document.querySelector('[name="theme-color"]'))||t.setAttribute("content",e))}),E(()=>a.bootSequence,e=>{var t;let o;o="number"==typeof e&&e<4?getComputedStyle(document.documentElement).getPropertyValue("--color-boot-sequence-"+e):getComputedStyle(document.documentElement).getPropertyValue("--color-background"),document.querySelector('[name="theme-color"]')&&(null==(t=document.querySelector('[name="theme-color"]'))||t.setAttribute("content",o))});const N=new q;function afterEnterTurn(){S.value.resolve&&S.value.resolve()}function afterLeaveTurn(){S.value.resolve&&S.value.resolve()}function onResize(){v.value&&u.value&&(C.value=e(()=>(e(window.innerWidth,window.innerHeight)-getLayoutFromElement(v.value).size)/2),P(()=>{k.value=getLayoutFromElement(u.value)}))}function turnOn(e=4e3){return x.value?Promise.resolve(!1):(a.hasActiveAnimation||(e=0),S.value.duration=e,x.value=!0,new Promise(e=>{S.value.resolve=e,P(()=>g.value=!0)}).then(()=>(x.value=!1,!0)).catch(e=>{throw e}))}function turnOff(e=550){return x.value?Promise.resolve(!1):(a.hasActiveAnimation||(e=0),S.value.duration=e,x.value=!0,new Promise(e=>{S.value.resolve=e,P(()=>g.value=!1)}).then(()=>(x.value=!1,!0)).catch(e=>{throw e}))}function togglePanel(e=!y.value){y.value=e}function onClickPanelCover(){togglePanel()}function onClickPowerButton(){g.value?turnOff():turnOn()}return f(()=>{N.add(s.resize.subscribe(onResize)),onResize()}),w(()=>{N.unsubscribe()}),o({turnOn:turnOn,turnOff:turnOff,togglePanel:togglePanel}),(e,o)=>(h(),i("div",{ref_key:"rootEl",ref:r,class:b(["wb-env-screen",_.value]),style:z(W.value)},[c("div",{ref_key:"wrapperEl",ref:v,class:"wrapper",style:z(j.value)},[c("div",{ref_key:"containerEl",ref:u,class:"container"},[V(B,{name:"animation-turn",onAfterEnter:afterEnterTurn,onAfterLeave:afterLeaveTurn},{default:L(()=>[O(c("div",{ref_key:"backgroundEl",ref:p,class:"background"},[c("div",st,[T(e.$slots,"default",{},void 0,!0)]),t.hasScanLines&&g.value?(h(),i("div",vt,o[1]||(o[1]=[c("div",null,null,-1)]))):A("",!0),D.value&&k.value?(h(),M(Be,{key:1,"parent-layout":k.value,offset:I.value,cursor:D.value},null,8,["parent-layout","offset","cursor"])):A("",!0),c("div",{class:"manipulation",style:z(U.value)},null,4)],512),[[R,g.value]])]),_:3}),T(e.$slots,"container",{containerLayout:k.value},void 0,!0)],512),t.frameActive?(h(),i("div",it,[V(H(be)),V(rt,{active:g.value,class:"power-button",options:t.modelValue,onClick:onClickPowerButton},null,8,["active","options"]),c("div",ht,[V(ot,{"model-value":t.modelValue,"onUpdate:modelValue":o[0]||(o[0]=e=>l("update:model-value",e))},null,8,["model-value"]),c("button",{class:"cover",onClick:onClickPanelCover},o[2]||(o[2]=[c("span",null,"Push",-1)]))])])):A("",!0)],4)],6))}}),[["__scopeId","data-v-a1cb5f9a"]]),ct={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"260",height:"262"};const pt={render:function render$8(e,t){return h(),i("svg",ct,t[0]||(t[0]=[u('<path d="M258 24v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h-2V4h-2V2h-2V0H48v88h-2v2h-4v2h-4v2h-4v2h-2v2h-2v4h-2v4h-2v4h-2v6h-2v4h-2v2h-2v2h-4v2h-2v2h-2v2H8v2H6v4H4v2H2v4H0v58h2v62h102v-22h2v-2h4v-2h4v-2h4v-2h2v-2h2v-4h2v-2h2v-4h2v-2h2v-4h2v-2h4v-2h2v-2h2v-2h2v-2h2v-4h2v-2h2v-4h2v-4h2v-4h2v-4h2v-10h104V24z"></path><path fill="#77c" d="M54 4v118h4v-2h2v-2h4v-2h2v-2h2v-2h4V92h14v-4h22v2h2v2h128v76h16V24h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h-2V4z"></path><g fill="#fff"><path d="M116 96v24h-2v2h-2v2h-2v2h-4v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-4v2h-2v2h-2v22h2v2h144V96zM80 100h2v-4h-4v6h2zM92 172h-2v6h4v-2h2v-2h-3zM116 186v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2H96v2h4v2h4v2h2v2h2v2h2v2h2v2zM138 174h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h4v-2h6v2h4v2h2v2h2v4h-2v4h4v-4h2v-2h2v-4h2v-4h2v-4h2v-4h2v-10h-14z"></path><path d="M134 196v-2h-4v-2h-6v2h-4v6h2v4h8v-2h4v-2h2v-4zM88 182h2v8h-2zM102 192h6v-4h2v-2h-2v-2h-2v-2h-2v-2h-8v2h-4v6h2v2h8zM90 190h4v2h-4zM94 192h8v2h-8zM130 204h4v2h-4zM130 208v4h2v-2h4v-2h2v-2h-4v2zM116 200h2v2h-2zM104 236h2v2h-2zM120 206v-2h-2v2h1z"></path><path d="M120 208h-2v-2h-2v-4h-2v-2h-2v-4H94v-2h-4v16h-2v2h-2v2h-2v2h-2v2h-2v2H66v38h34v-22h4v-2h6v-2h4v-2h4v-4h2v-2h2v-4h2v-2h2v-4h2v-4h-8z"></path><path d="M120 206h2v2h-2zM102 92h-8v-2h-6v4h-2v6h-2v4h2v2h2v2h2v2h14V94h-2zM38 134h2v2h-2z"></path><path d="M80 214h2v-2h2v-2h2v-40h-2v-4h-2v-22h2v-2h2v-2h2v-2h4v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2h2v-2h2V94h-4v-2h-4v2h2v2h2v16h-2v2H90v-2h-2v-2h-2v-2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-4v2h-4v2h-4v2h-4v2h-4v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v-4h2v-2h2v-2h4v-2h2v-2h2v-2h4v-2h2v-2h2v-2h2v-2h-6v-2h-2v-2h-2v-2h-2v-2h2v2h4v2h4v2h6v-2h4V92h-4v2h-2v2h-4v2h-4v4h-2v4h-2v4h-2v4h-2v6h-2v2h-2v2h-2v2h-4v2h-2v2h-2v2h-2v4H8v2H6v4H4v56h2v60h56v-42h18z"></path><path d="M30 140h2v2h-2zM22 146h2v2h-2zM54 124.12v1.85l4 .03v-1.88z"></path></g><path fill="#333" d="M144 8h24v30h-24z"></path><g fill="#77c"><path d="M130 118v-2h-4v-2h-4v2h2v2zM132 122h6v-2h-2v-6h2v-4h2v-2h-10v2h2v4h-2v2h2zM152 112h2v-2h4v-2h-14v2h4v2h-2v2h6z"></path><path d="M144 118h10v-2h2v-4h-2v2h-2v2h-6v-2h-4v2h2zM162 118h12v-10h-6v2h-2v2h4v4h-6v-4h-4v4h2zM178 116h2v2h10v-2h2v-4h-14zm4-2h6v2h-6zM210 120v-8h-2v-2h-2v-2h-12v2h-2v2h4v4h2v2h6v-2h-4v-4h6v2h-2v2h2v6h6v-2zM198 130h-2v2h-4v-2h-2v-2h-4v14h4v-8h2v2h4v-2h2v8h4v-14h-4zM180 128h-10v2h-2v6h2v2h10v-2h2v-6h-2zm-2 8h-6v-6h6zM156 130h2v4h-2v2h2v2h6v-2h-2v-6h2v-2h-8zM152 132h-4v4h2v2h6v-2h-4zM140 132h-4v-2h-2v-2h-4v2h2v2h2v2h-2v2h-2v2h4v-2h2v-2h4v8h6v-2h-2v-10h2v-2h-6z"></path></g><g fill="#bbb"><path d="M146 160v-2h2v-6h-2v-2h-4v-2h-24v2h2v2h-8v-2h2v-2h-12v2h4v14h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v4h-2v2h10v-2h-2v-4h2v2h2v2h2v4h-2v2h-2v2h-4v-2h-2v-2h-2v6h14v-2h2v-2zm-30-4h-2v2h-2v-4h4z"></path><path d="M210 148v2h2v2h-8v-2h2v-2h-20v2h4v2h-2v2h-2v2h-2v-8h-6v4h-2v2h-2v2h-2v-4h2v-2h2v-2h-28v2h4v6h-2v4h-4v2h-2v2h28v-2h2v-2h2v-2h2v6h10v-2h-2v-4h2v-2h2v-2h2v-2h4v-2h2v14h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2zm-44 8h-2v4h-2v2h-8v-2h2v-4h2v-4h2v-2h6zm42 0h-2v2h-2v-4h4z"></path></g><path d="M108 164h2v-2h2v-2h2v-2h-6zM140 160h-2v2h4v-2h2v-2h-4zM130 158h-2v6h10v-2h-8zM154 158h-4v4h-4v2h10v-2h-2zM170 160h-2v-2h-4v4h-2v2h8v-2h2v-2h2v-2h-4zM178 164h8v-2h-2v-2h2v-2h-8zM200 158v6h2v-2h2v-2h2v-2zM98 0v48h112V0zm106 44H104V4h100z"></path><path d="M198 8h-24v30h24zm-6 26h-12V12h12z"></path><path fill="#bbb" d="M104 4v40h100V4zm94 34h-24V8h24z"></path><path d="M188 182h4v2h-2v2h-2v2h-2v2h-2v2h-2v-10h2v-2h-10v2h2v18h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2h-14zM218 180h-6v2h-2v2h-2v2h4v10h-4v4h14v-4h-4zM226 196h4v4h-4zM252 188v-2h2v-2h-2v-2h-2v-2h-12v2h-2v2h-2v2h8v-2h4v4h-4v4h4v4h-4v-2h-8v2h2v2h2v2h12v-2h2v-2h2v-2h-2v-2h-2v-4z"></path>',10)]))}},dt={class:"wb-env-no-disk"},mt=x(p({__name:"NoDisk",setup:e=>(e,t)=>(h(),i("div",dt,[V(H(pt))]))}),[["__scopeId","data-v-8c8ee13c"]]),ft={key:0,ref:"menu",class:"menu"},wt={key:1,class:"cover"},yt=x(p({__name:"Header",props:{core:{},parentLayout:{},title:{},showCover:{type:Boolean},items:{}},emits:["inputContextMenu"],setup(t,{emit:o}){const n={size:e(window.innerWidth,window.innerHeight)},a=t,l=o,r=d(!1),s=m(()=>{var e,t;return a.items||(null==(t=null==(e=a.core)?void 0:e.modules.windows)?void 0:t.contextMenu.activeItems.items)||[]});function onUpdateModelValueContextMenu(...e){l("inputContextMenu",...e)}function onMouseOut(){r.value=!1}function onPointerDown(e){e.button===K.RIGHT&&(e.preventDefault(),r.value=!0)}function onPointerUp(e){e.button===K.RIGHT&&(r.value=!1)}return(e,t)=>(h(),i("header",{class:"wb-env-fragment-header",onMouseout:onMouseOut,onPointerdown:onPointerDown,onPointerup:onPointerUp},[e.showCover||r.value?A("",!0):(h(),i("nav",ft,[V(re,{core:e.core,items:s.value,"parent-layout":e.parentLayout||n,"onUpdate:modelValue":onUpdateModelValueContextMenu},null,8,["core","items","parent-layout"])],512)),e.showCover||r.value?(h(),i("div",wt,[c("span",null,k(e.title||"Web-Workbench release. Version 1.3"),1)])):A("",!0)],32))}}),[["__scopeId","data-v-e92564a5"]]),gt={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"14"};const zt={render:function render$7(e,t){return h(),i("svg",gt,t[0]||(t[0]=[c("path",{d:"M6 4V0H0v6h4v8h8V4zM4 4H2V2h2zm6 8H6V6h4z",class:"svg-primary"},null,-1)]))}},bt={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12",viewBox:"4 4 14 12"};const Mt={render:function render$6(e,t){return h(),i("svg",bt,t[0]||(t[0]=[c("g",{class:"svg-primary"},[c("path",{d:"M4 8h2v2H4zM6 6h2v2H6zM14 6h2v2h-2zM16 8h2v2h-2zM8 4h6v2h-2v10h-2V6H8z"})],-1)]))}},St={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12"};const xt={render:function render$5(e,t){return h(),i("svg",St,t[0]||(t[0]=[c("g",{class:"svg-primary"},[c("path",{d:"M0 6h2v2H0zM6 0h2v10h2v2H4v-2h2zM2 8h2v2H2zM10 8h2v2h-2zM12 6h2v2h-2z"})],-1)]))}},Ct={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"14"};const kt={render:function render$4(e,t){return h(),i("svg",Ct,t[0]||(t[0]=[c("path",{d:"M1 2v2H0v6h1v2h2v2h3v-2H4v-2H2V8h9V6H2V4h2V2h2V0H3v2z",class:"svg-primary"},null,-1)]))}},Vt={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"14"};const Ht={render:function render$3(e,t){return h(),i("svg",Vt,t[0]||(t[0]=[c("path",{d:"M10 2v2h1v6h-1v2H8v2H5v-2h2v-2h2V8H0V6h9V4H7V2H5V0h3v2z",class:"svg-primary"},null,-1)]))}},Et={class:"sidebar-left"},Pt={key:0,class:"scrollbar scrollbar-right"},At={class:"range"},Tt={key:1,class:"scrollbar-corner"},Bt={key:2,class:"scrollbar scrollbar-bottom"},Lt={class:"range"},Ot=x(p({__name:"ScrollContent",props:{debug:{type:Boolean},options:{},setTriggerReset:{type:Boolean},setTriggerRefresh:{},embed:{type:Boolean},rootLayout:{},parentLayout:{},setParentLayout:{type:Function},parentLayoutSizeOffset:{}},emits:["click","refresh"],setup(t,{emit:n}){const a=t,l=d(a.parentLayout.size),r=n,v=d(null),p=d(null),w=d(null),y=d(null),g=d(null),M=d(!0),S=d({}),x=d({spacer:e(0,0),helper:e(0,0),content:e(0,0),wrapper:e(0,0),inner:e(0,0)}),C=d({startScroll:0,current:e(0,0),start:null,move:null}),k=I(),B=m(()=>a.options.scrollX||a.options.scrollY||!!k.corner),L=m(()=>({"--scroll-bar-size":`${Math.max(16-Q.size,0)}`,...S.value})),O=m(()=>({active:M.value,"axis-x":a.options.scrollX,"axis-y":a.options.scrollY,embed:a.embed}));function setParentSize(){var t,o,n;const r=getScrollInnerSize(),s=e(a.options.scroll||a.options.scrollY?20:0,a.options.scroll||a.options.scrollX?20:0),v=a.parentLayout;if(v){let l=e(a.parentLayout.size.x||r.x,a.parentLayout.size.y||r.y);debugLog("ScrollContent:ParentLayout:Size",a.parentLayout.size.toString()),debugLog("ScrollContent:innerSize",r.toString());const v=e(()=>s+a.parentLayoutSizeOffset);debugLog("ScrollContent:Size:1",l.toString(),null==(t=a.rootLayout)?void 0:t.size.toString()),a.options.scrollX||a.options.scrollY||(l=e(()=>Math.max(Math.max(l+v,l),r+v))),debugLog("ScrollContent:Size:2",l.toString(),null==(o=a.rootLayout)?void 0:o.size.toString()),l=e(()=>{var t;return Math.min(l,(null==(t=a.rootLayout)?void 0:t.size)||e(1/0,1/0))}),debugLog("ScrollContent:Size:3",l.toString(),null==(n=a.rootLayout)?void 0:n.size.toString()),a.setParentLayout({size:l})}l.value=v.size}function getScrollInnerSize(){var t,o;return e((null==(t=p.value)?void 0:t.offsetWidth)||0,(null==(o=p.value)?void 0:o.offsetHeight)||0)}function onScroll(){var e;window.requestAnimationFrame(()=>{refreshScrollbar(),updateEl()}),null==(e=a.setParentLayout)||e.call(a,{scrollOffset:getScrollValue()}),r("refresh",{scroll:!0})}function refresh(){var t,o,n,l,s;x.value.content=function getScrollContentSize(){var t,o;return e((null==(t=v.value)?void 0:t.offsetWidth)||0,(null==(o=v.value)?void 0:o.offsetHeight)||0)}(),x.value.wrapper=e((null==(t=w.value)?void 0:t.offsetWidth)||0,(null==(o=w.value)?void 0:o.offsetHeight)||0),x.value.inner=getScrollInnerSize(),x.value.helper=e(y.value&&(null==(n=y.value)?void 0:n.offsetWidth)||0,g.value&&(null==(l=g.value)?void 0:l.offsetHeight)||0),x.value.spacer=e(()=>Math.min(x.value.wrapper/x.value.inner,1)*x.value.helper);const i=getScrollValue();a.setParentLayout({scrollOffset:i}),refreshScrollbar(),updateEl(),r("refresh",{}),null==(s=v.value)||s.scrollTo(a.options.clampLeft?0:i.x,a.options.clampBottom?x.value.inner.y:i.y)}function updateEl(){const t=e(()=>C.value.current*(1-x.value.spacer/x.value.helper)),o=e(()=>x.value.spacer/x.value.helper);S.value=Object.assign(t.toCSSVars("helper-position"),o.toCSSVars("helper-size"))}function getScrollValue(){var t,o;return e((null==(t=v.value)?void 0:t.scrollLeft)||0,(null==(o=v.value)?void 0:o.scrollTop)||0)}function refreshScrollbar(){const t=e(a.options.scrollY?Q.size:0,a.options.scrollX?Q.size:0),n=getScrollValue();C.value.current=o(()=>n/(x.value.inner-x.value.content+t))}function onPointerDownRightSpacer(t){var n;$(t),t.preventDefault(),C.value.start=e(t.x,t.y),C.value.startScroll=(null==(n=v.value)?void 0:n.scrollTop)||0;const a=s.pointerMove.subscribe(t=>{var n;C.value&&v.value&&(C.value.move=o(()=>e(t.x,t.y)-(C.value.start||0)),v.value.scrollTop=C.value.startScroll+x.value.inner.y*((null==(n=C.value.move)?void 0:n.y)||0)/x.value.helper.y)});s.pointerUp.pipe(ue()).subscribe(()=>{a.unsubscribe()})}function onPointerDownBottomSpacer(t){if(t.preventDefault(),v.value){C.value.start=e(t.x,t.y),C.value.startScroll=v.value.scrollLeft||0;const n=s.pointerMove.subscribe(t=>{var n;C.value&&v.value&&(C.value.move=o(()=>e(t.x,t.y)-C.value.start),v.value.scrollLeft=C.value.startScroll+x.value.inner.x*((null==(n=C.value.move)?void 0:n.x)||0)/x.value.helper.x)});s.pointerUp.pipe(ue()).subscribe(()=>{n.unsubscribe()})}}function onPointerDownScrollBarArrowTop(){setScrollByEvent(1)}function onPointerDownScrollBarArrowBottom(){setScrollByEvent(3)}function onPointerDownScrollBarArrowLeft(){setScrollByEvent(0)}function onPointerDownScrollBarArrowRight(){setScrollByEvent(2)}let R;function onPointerUpScrollBarArrow(){window.clearInterval(R)}function setScrollByEvent(e){window.clearInterval(R),R=setInterval(()=>{if(v.value)switch(e){case 0:v.value.scrollLeft-=16;break;case 1:v.value.scrollTop-=16;break;case 2:v.value.scrollLeft+=16;break;case 3:v.value.scrollTop+=16}},125)}function debugLog(...e){a.debug&&console.debug("[ScrollContent]",...e)}return E(()=>a.setTriggerReset,()=>{refresh()}),E(()=>a.setTriggerRefresh,t=>{t&&t.reset?function resetTest(){a.setParentLayout({size:e(0,0)}),P(()=>{setParentSize()})}():t&&t.scroll&&refresh()}),f(()=>{window.requestAnimationFrame(()=>{setParentSize()})}),D("scrollContent",{refresh:refresh,setParentSize:setParentSize}),(e,t)=>(h(),i("div",{class:b(["wb-env-scroll-content",O.value]),style:z(L.value)},[c("div",{ref_key:"scrollWrapperEl",ref:w,class:"wrapper"},[c("div",Et,[T(e.$slots,"sidebarLeft",{},void 0,!0)]),c("div",{ref_key:"scrollContentEl",ref:v,class:"content",onScroll:onScroll},[c("div",{ref_key:"scrollInnerEl",ref:p,class:"inner"},[c("div",null,[T(e.$slots,"default",{},()=>[t[0]||(t[0]=u('<div style="width:680px;height:100px;margin:20px;background:red;" data-v-2f2c1e47></div><div style="width:250px;height:240px;margin:20px;background:red;" data-v-2f2c1e47></div><div style="width:500px;height:240px;margin:20px;background:green;" data-v-2f2c1e47></div><div style="width:800px;height:240px;margin:20px;background:yellow;" data-v-2f2c1e47></div><div style="width:250px;height:240px;margin:20px;background:red;" data-v-2f2c1e47></div><div style="width:500px;height:3000px;margin:20px;background:green;" data-v-2f2c1e47></div><div style="width:800px;height:240px;margin:20px;background:yellow;" data-v-2f2c1e47></div>',7))],!0)])],512)],544)],512),M.value&&a.options.scrollY?(h(),i("div",Pt,[c("button",{class:"helper-top","touch-action":"none",onPointerdown:onPointerDownScrollBarArrowTop,onPointerup:onPointerUpScrollBarArrow},[V(H(Mt))],32),c("span",At,[c("span",{ref_key:"scrollRightHelperEl",ref:g,class:"helper"},[c("button",{class:"spacer","touch-action":"none",onPointerdown:onPointerDownRightSpacer},null,32)],512)]),c("button",{class:"helper-bottom","touch-action":"none",onPointerdown:onPointerDownScrollBarArrowBottom,onPointerup:onPointerUpScrollBarArrow},[V(H(xt))],32)])):A("",!0),B.value?(h(),i("span",Tt,[T(e.$slots,"corner",{},void 0,!0)])):A("",!0),M.value&&a.options.scrollX?(h(),i("div",Bt,[c("button",{class:"helper-left","touch-action":"none",onPointerdown:onPointerDownScrollBarArrowLeft,onPointerup:onPointerUpScrollBarArrow},[V(H(kt))],32),c("span",Lt,[c("span",{ref_key:"scrollBottomHelperEl",ref:y,class:"helper"},[c("button",{ref:"scrollBottomSpacerEl",class:"spacer","touch-action":"none",onPointerdown:onPointerDownBottomSpacer},null,544)],512)]),c("button",{class:"helper-right","touch-action":"none",onPointerdown:onPointerDownScrollBarArrowRight,onPointerup:onPointerUpScrollBarArrow},[V(H(Ht))],32)])):A("",!0)],6))}}),[["__scopeId","data-v-2f2c1e47"]]),Rt={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"};const It={render:function render$2(e,t){return h(),i("svg",Rt,t[0]||(t[0]=[c("g",{class:"svg-primary"},[c("path",{d:"M4 4h12v12H4z"}),c("path",{d:"M0 0v20h20V0zm18 18H2V2h16z"})],-1),c("path",{fill:"#FFF",d:"M8 8h4v4H8z",class:"svg-secondary"},null,-1)]))}},Dt={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20"};const Ft={render:function render$1(e,t){return h(),i("svg",Dt,t[0]||(t[0]=[u('<g class="svg-primary"><path d="M0 0v20h22V0zm16 14H2V2h14z"></path><path d="M4 4h10v8H4z"></path></g><g fill="#FFF" class="svg-secondary"><path fill="#" d="M6 6h14v12H6z" class="svg-secondary"></path></g>',2)]))}},_t={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20"};const Wt={render:function render(e,t){return h(),i("svg",_t,t[0]||(t[0]=[c("g",{class:"svg-primary"},[c("path",{d:"M8 6h10v10H8z"}),c("path",{d:"M0 0v20h22V0zm20 18H6V4h14z"})],-1),c("path",{fill:"#A4A5A5",d:"M2 2h14v2H6v10H2z",class:"svg-secondary"},null,-1)]))}},Ut={key:0,ref:"windowTitleWrapper",class:"title"},jt={class:"handlers handlers-right"},Nt=x(p({__name:"WindowHeader",props:{close:{type:Boolean},overlay:{type:Boolean},title:{},focused:{type:Boolean}},emits:["close","up","down","click:header"],setup(e,{emit:t}){const o=e,n=t,a=m(()=>({focused:o.focused}));function onClickClose(e){e.preventDefault(),n("close",e)}function onPointerDownTitleWrapper(e){e.preventDefault(),n("click:header",$(e))}function onClickOverlayTop(e){e.preventDefault(),n("up",e)}function onClickOverlayBottom(e){e.preventDefault(),n("down",e)}function onPointerupOverlayTop(e){e.target instanceof HTMLButtonElement&&e.target.blur()}function onPointerupOverlayBottom(e){e.target instanceof HTMLButtonElement&&e.target.blur()}return(e,t)=>(h(),i("header",{class:b(["wb-env-fragment-window-header",a.value])},[c("div",{class:b(["handlers handlers-left",{"has-close":e.close}])},[e.close?(h(),i("button",{key:0,"aria-label":"Close Window",class:"control close","touch-action":"none",onClick:onClickClose},[V(H(It))])):A("",!0)],2),c("button",{tabindex:"-1",class:"title-wrapper",onPointerdown:onPointerDownTitleWrapper},[t[0]||(t[0]=c("span",{class:"background"},[c("span",{class:"line"}),c("span",{class:"line"}),c("span",{class:"dots"})],-1)),e.title?(h(),i("span",Ut,[c("span",{ref:"windowTitle"},k(e.title),513)],512)):A("",!0)],32),c("div",jt,[e.overlay?(h(),i("button",{key:0,"aria-label":"Move Window Up",class:"control overlay-top","touch-action":"none",onClick:onClickOverlayTop,onPointerup:onPointerupOverlayTop},[V(H(Ft))],32)):A("",!0),e.overlay?(h(),i("button",{key:1,"aria-label":"Move Window Down",class:"control overlay-bottom","touch-action":"none",onClick:onClickOverlayBottom,onPointerup:onPointerupOverlayBottom},[V(H(Wt))],32)):A("",!0)])],2))}}),[["__scopeId","data-v-31b54484"]]),Xt=["data-id"],Gt=x(p({__name:"Window",props:{window:{type:ie,default:null},id:{type:String,default:()=>null},wrapper:{type:ve,default:()=>null},sidebarComponent:{type:Object,default:()=>null},sidebarComponentData:{type:Object,default:()=>null},component:{type:Object,default:()=>null},componentData:{type:Object,default:()=>null},symbolWrapper:{type:se,default:()=>null}},emits:["focus","ready","up","down","close","refresh"],setup(t,{emit:o}){const{core:n}=oe(),a=d(null),l=d(null),r=t,v=o,u=d(r.window.options.hideRootHeader?0:20),p=m(()=>e(4,r.window.options.embed?0:u.value+2)),y=d(!0),g=d({start:void 0,move:void 0,offset:void 0}),x=d({start:void 0,move:void 0});const C=new q,k=d(!1),B=d(!1),O=d(!1),R=d(),I=d(!0),W=d(0),U=m(()=>({size:e(()=>Q.value.size-e(16,0)),position:Q.value.position})),j=m(()=>{var e;return te.value.sidebar&&(null==(e=n.value)?void 0:e.config.observable[he.SHOW_STORAGE_SPACE])||!1}),N=m(()=>r.wrapper?{...r.wrapper.layout,size:e(()=>r.wrapper.layout.size+(r.window.options.hideRootHeader?20:0))}:{size:e(window.innerWidth,window.innerHeight)}),X=m(()=>({focused:te.value.focused})),G=m(()=>({close:te.value.close,overlay:te.value.overlay,title:te.value.title,focused:te.value.focused,fill:te.value.fillHeader||te.value.filled})),J=m(()=>Object.assign({"--header-height":W.value},Q.value.size.toCSSVars("size"),Q.value.position.toCSSVars("position"))),Y=m(()=>({moving:k.value,scaling:B.value,scale:ae.value,scroll:le.value,"scroll-x":te.value.scroll||te.value.scrollX,"scroll-y":te.value.scroll||te.value.scrollY,freeze:te.value.freeze,visible:y.value,embed:te.value.embed,focused:te.value.focused,borderless:te.value.borderless,"style-filled":te.value.filled})),K=m(()=>N.value.size),Q=m(()=>r.window.layout),ee=m(()=>Q.value.size),te=m(()=>r.window.options),ne=m(()=>te.value.focused||!1),ae=m(()=>te.value.scale||te.value.scaleX||te.value.scaleY),le=m(()=>te.value.scroll||te.value.scrollX||te.value.scrollY);function setLayout(e){r.window.setLayout(e)}function onFreeze(){te.value.focused=!1,te.value.freeze=!0}function onUnfreeze(){P(()=>{te.value.freeze=!1,te.value.focused=!0})}function onComponentReady(){v("ready",getEventContext())}function getRootSize(){return e(()=>K.value-Q.value.size)}function onRefreshScrollContent(e){R.value=e,P(()=>R.value=void 0)}function onCloseComponent(e=void 0){close(e)}function onRefreshComponent(e){refresh(e)}function refresh(e){R.value=Object.assign({scroll:!0,resize:!0,reset:!1},e||{}),P(()=>R.value=void 0)}function onPointerDown(){te.value.freeze||r.wrapper.setActiveWindow(r.id)}function onClickHeader(t){if(!te.value.freeze){!function resetPositions(){x.value.start=void 0,x.value.move=void 0,x.value.offset=void 0}();const o=e(t.x,t.y);x.value.start=o,x.value.offset=e(()=>o-Q.value.position);const n=getRootSize();k.value=!0;const a=s.pointerMove.subscribe(t=>{setPosition(e(t.x,t.y),n)});s.pointerUp.pipe(ue()).subscribe(()=>{a.unsubscribe(),k.value=!1,refresh(),r.wrapper.savePosition(r.id,Q.value.position)})}}function setPosition(t,o){t=e(()=>Math.min(t,r.wrapper.layout.position+K.value));const n=x.value.start||e(0,0),a=x.value.move||e(0,0),l=x.value.offset||e(0,0);x.value.move=e(()=>t-n);const s=e(()=>Math.round(n+a-l)),v=e(Math.max(re.value.x?Math.min(s.x,o.x):s.x,0),Math.max(re.value.y?Math.min(s.y,o.y):Math.min(s.y,o.y+Q.value.size.y-u.value),0));r.window.setLayout({position:v})}E(()=>ee.value,()=>{!B.value&&x.value&&(x.value.start=Q.value.position,x.value.offset=0,setPosition(Q.value.position,getRootSize()))}),E(()=>ne.value,e=>{P(()=>{v("focus",getEventContext())}),e?C.add(s.pointerDown.pipe(ce(({target:e})=>!(!e||!l.value)&&!Z(e,l.value)),ue()).subscribe(()=>{te.value.focused=!1})):C.unsubscribe()}),f(()=>{a.value&&(W.value=a.value.offsetHeight),r.wrapper&&I&&(I.value=!1,refresh({scroll:!0}),te.value.center&&window.requestAnimationFrame(()=>{r.wrapper.centerWindow(r.id)})),ne.value&&window.setTimeout(()=>{C.add(s.pointerDown.pipe(ce(({target:e})=>!(!e||!l.value)&&(!!e.closest(`.wb-components-window[data-id="${r.id}"]`)&&!!e.closest(".wb-env-fragment-header"))),ue()).subscribe(()=>{te.value.focused=!1}))},300)}),w(()=>{C.unsubscribe()});const re=m(()=>{const e=te.value.clampX||te.value.clamp,t=te.value.clampY||te.value.clamp;return{x:void 0===e||e,y:void 0!==t&&t}});function getEventContext(){return{id:r.id,scope:r.window,focused:ne.value,refresh:refresh}}function onClickUp(){v("up",getEventContext())}function onClickDown(){v("down",getEventContext())}function close(e=void 0){P(()=>{v("close",{...getEventContext(),componentData:e})})}function onClickClose(){close()}function onPointerDownHelperScale(t){$(t);const o=e(t.x,t.y);g.value.start=o,g.value.offset=e(()=>o-Q.value.size);const n=K.value,a=s.pointerMove.subscribe(t=>{const o=g.value.start||e(0,0),a=e(()=>e(t.x,t.y)-o),l=g.value.offset||e(0,0);g.value.move=a;let s=e(()=>Math.round(o+a-l));const{scaleX:v,scaleY:i}=te.value;(!v||v&&s.x+Q.value.position.x<=n.x)&&(!i||i&&s.y+Q.value.position.y<=n.y)&&(!v&&i?s=e(Q.value.size.x,s.y):v&&!i&&(s=e(s.x,Q.value.size.y)),s=e(()=>Math.min(s,n-r.window.layout.position)),r.window.layout.minSize&&(s=e(()=>Math.max(s,r.window.layout.minSize))),r.window.layout.maxSize&&(s=e(()=>Math.min(s,r.window.layout.maxSize))),r.window.setLayout({size:s}))});B.value=!0,s.pointerUp.pipe(ue()).subscribe(()=>{a.unsubscribe(),B.value=!1,refresh(),r.wrapper.saveSize(r.id,Q.value.size)})}return D("window",r.window),D("core",n.value),D("root-element",l.value),D("parentFocused",m(()=>te.value.focused)),D("parentLayout",U),D("options",X),D("window:refresh",refresh),(e,o)=>(h(),i("aside",{ref_key:"rootEl",ref:l,"data-id":t.id,class:b(["wb-components-window",Y.value]),style:z(J.value),onPointerdown:onPointerDown},[c("div",null,[c("div",{ref_key:"headerEl",ref:a},[te.value.embed?A("",!0):(h(),M(Nt,F({key:0},G.value,{"onClick:header":onClickHeader,onUp:onClickUp,onDown:onClickDown,onClose:onClickClose}),null,16))],512),V(Ot,{options:te.value,class:"content",embed:"","set-parent-layout":setLayout,"parent-layout":Q.value,"parent-layout-size-offset":p.value,"root-layout":N.value,"set-trigger-refresh":R.value,"set-trigger-reset":O.value,onRefresh:onRefreshScrollContent},_({sidebarLeft:L(()=>[j.value?(h(),M(S(t.sidebarComponent),F({key:0},t.sidebarComponentData,{class:"sidebar-left"}),null,16)):A("",!0)]),default:L(()=>[T(e.$slots,"default",{},()=>[(h(),M(S(t.component),F(t.componentData,{"set-trigger-refresh":R.value,onRefresh:onRefreshComponent,onClose:onCloseComponent,onFreeze:onFreeze,onUnfreeze:onUnfreeze,onReady:onComponentReady}),null,16,["set-trigger-refresh"]))],!0)]),_:2},[ae.value?{name:"corner",fn:L(()=>[c("button",{"aria-label":"Scale Window",tabindex:"-1",class:"helper-scale","touch-action":"none",onPointerdown:onPointerDownHelperScale},[V(H(zt))],32)]),key:"0"}:void 0]),1032,["options","parent-layout","parent-layout-size-offset","root-layout","set-trigger-refresh","set-trigger-reset"])])],46,Xt))}}),[["__scopeId","data-v-1edbc575"]]),Jt=x(p({__name:"WindowWrapper",props:{wrapper:{type:ve,default:null}},setup(t,{expose:o}){var n;const{core:a}=oe(),l=t,r=W("parentLayout",d({position:e(0,0),size:e(window.innerWidth,window.innerHeight)})),v=new q,u=d(!1),c=null==(n=a.value)?void 0:n.modules.screen,p=m(()=>null==c?void 0:c.contentLayout.size),z=m(()=>Array.from(l.wrapper.models).sort((e,t)=>(e.layout.zIndex||0)-(t.layout.zIndex||0)));E(()=>r,()=>{refresh()},{deep:!0}),E(()=>p.value,e=>{e&&l.wrapper.setLayout({size:e})}),E(()=>l.wrapper,()=>{refresh()}),f(async()=>{v.add(s.resize.subscribe(onRefresh)),await refresh(!0),u.value=!0}),w(()=>{v.unsubscribe()});const refresh=(e=!1)=>e?(onRefresh(),Promise.resolve()):new Promise(e=>{P(()=>{window.setTimeout(()=>{onRefresh(),e(void 0)},500)})}),b=d(null),onRefresh=()=>{if(b.value){const{x:t,y:o,width:n,height:a}=b.value.getBoundingClientRect();l.wrapper.setLayout({position:e(t,o),size:e(n,a)})}},onReadyWindow=({id:e})=>{var t;l.wrapper.get(e)&&(null==(t=l.wrapper.get(e))||t.ready())},onFocusWindow=({id:e,focused:t})=>{var o;l.wrapper.get(e)&&t&&(null==(o=l.wrapper.get(e))||o.focus())},onUpWindow=({id:e})=>{l.wrapper.setWindowUpDown(e,!1)},onDownWindow=({id:e})=>{l.wrapper.setWindowUpDown(e,!0)},onCloseWindow=({id:e,componentData:t})=>{var o;l.wrapper.get(e)&&(null==(o=l.wrapper.get(e))||o.close(t))};return o({refresh:refresh}),(e,o)=>(h(),i("div",{ref_key:"rootEl",ref:b,class:"wb-components-window-wrapper"},[T(e.$slots,"default",{},void 0,!0),t.wrapper&&u.value?(h(!0),i(y,{key:0},g(z.value,e=>(h(),M(Gt,F({key:e.id},{ref_for:!0},(e=>{const{id:t,layout:o,sidebarComponent:n,sidebarComponentData:a,component:r,componentData:s}=e;return{window:e,id:t,wrapper:l.wrapper,layout:o,sidebarComponent:n,sidebarComponentData:a,component:r,componentData:s}})(e),{onReady:onReadyWindow,onFocus:onFocusWindow,onClose:onCloseWindow,onUp:onUpWindow,onDown:onDownWindow}),null,16))),128)):A("",!0)],512))}}),[["__scopeId","data-v-8c1bc858"]]),qt=x(p({__name:"WebDos",props:{command:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){var o;const{core:n}=oe(),a=t;de();const l=d([`Make by Lammpee ${(new Date).getFullYear()}`,`Release ${null==(o=n.value)?void 0:o.version}`]);function onStartCommandsComplete(){window.setTimeout(()=>{a("close")},1e3*(2+Math.floor(3*Math.random())))}return(t,o)=>(h(),M(pe,{"show-introduction":!1,"delimiter-prefix":"","start-commands":e.command,core:H(n),class:"wb-module-core-web-dos","pre-rows":l.value,onStartCommandsComplete:onStartCommandsComplete},null,8,["start-commands","core","pre-rows"]))}}),[["__scopeId","data-v-012d5740"]]),Yt=""+new URL("BeVVWLrE.woff2",import.meta.url).href,Kt=""+new URL("CgUqqV_4.woff2",import.meta.url).href,Qt=[{preload:!0,fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[Yt,"woff2"]},{preload:!0,fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[Kt,"woff2"]},{fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[Yt,"woff2"]},{fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[Kt,"woff2"]},{fontFamily:"BitFont",fontVariant:"normal",fontFeatureSettings:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:["data:font/woff2;base64,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","woff2"]}];async function createBootScript(e,{disks:t,cloudStorages:o,withWebDos:n}){var a;const l=!n,optionalSleep=e=>l?void 0:function sleep(e=0){return"SLEEP "+Number(e)}(e);const r=["// Functions","SUB Separator(stars) STATIC",'PRINT STRING$(stars, "*")',"END SUB","SUB Headline(title$) STATIC",'LET title$ = "*** " + title + " ***"','PRINT ""',"Separator(LEN(title$))","PRINT title$","Separator(LEN(title$))",'PRINT ""',"END SUB","// Output"];var s,v;r.push(...(s=t,s.length?[optionalSleep(1e3),'Headline("Mount Disks")',optionalSleep(1e3),...s.reduce((e,t)=>t.hidden?e.concat([`mountDisk "${t.name}"`]):e.concat([`mountDisk "${t.name}"`,optionalSleep(1e3)]),[])]:[])),r.push(...(v=o,v.length<1?[]:[optionalSleep(1e3),'Headline("Mount Cloud Storages")',optionalSleep(1e3),...v.reduce((e,t)=>{const{type:o,config:n}=function getStorageConfig(e){const t=Object.values(ne).filter(t=>e[t]);if(t.length>1)throw new Error("Multiple cloud storage types are not supported");const o=t[0];return{type:o,config:e[o]}}(t);if(!n)throw new Error("Invalid storage configuration");if(o!==ne.FIREBASE)throw new Error(`Unsupported cloud storage type: ${o}`);if(!n.apiKey||!n.url)throw new Error("Missing Firebase configuration");return e.push(`cloudMountFirebase "${t.name}" --api-key="${n.apiKey}" --url="${n.url}"`),e.push(optionalSleep(1e3)),e},[])])),r.push(optionalSleep(1e3),'PRINT ""','PRINT "<strong>Waiting is user experience </strong>"'),await(null==(a=e.modules.files)?void 0:a.fs.createTmpFile("BOOT.basic","BOOT.basic",{type:"basic",content:r.filter(e=>void 0!==e)}))}const $t=""+new URL("BzxBJWeE.ttf",import.meta.url).href,Zt=x(p({__name:"Core",props:{config:{},core:{}},emits:["ready"],async setup(t,{emit:o}){let n,u;const p=d(null),y=d(null),g=d(null),S=d(null),x=d(null),C=t,k=o,{registerFont:T}=me(),B=new FontFace("BitFontCanvas",`url(${$t})`,{});document.fonts.add(B),T(Qt),[n,u]=U(()=>document.fonts.load('10px "BitFontCanvas"')),await n,u();const O=m(()=>{var e;return null==(e=C.core.modules.windows)?void 0:e.contentWrapper}),R=m(()=>{var e;return(null==(e=C.core.modules.screen)?void 0:e.currentTheme)?C.core.modules.screen.currentTheme:new v}),I=m(()=>{var e;const t=null==(e=R.value)?void 0:e.toCSSVars();return t?`:root {\n        ${Object.keys(t).map(e=>`${e}: ${t[String(e)]};`).join("\n")}\n      }`:null});j(()=>({style:[I.value&&{key:"wb-core-vars",type:"text/css",innerHTML:I.value}].filter(Boolean)}));const _=N();D("core",C.core);const W=m(()=>"no-boot"in _.query),G=m(()=>"no-webdos"in _.query),J=d(C.config.noDisk===ae.FORCE),Y=m(()=>J.value||"no-disk"in _.query),K=m(()=>"no-cloud-storage"in _.query),Q=new q,$=d({position:e(0,0),size:e(0,0)});D("parentLayout",$);const Z=d(!1),oe=d(!1),ne=d(!1),re=d([]),se=m(()=>C.core.config.observable),ve=d(ee.SEQUENCE_1),ie=m({get:()=>C.core.config.observable[te.SCREEN_CONFIG],set(e){C.core.config.set(te.SCREEN_CONFIG,e)}}),he=m(()=>({"--default-cursor":"url(data:image/svg+xml,%3csvg%20class='wb_cursor_pointer'%20xmlns='http://www.w3.org/2000/svg'%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%3e%3cpath%20d='M0%2012h2v2h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2h-2V0H0z'%20/%3e%3cpath%20fill='%23f00'%20d='M2%202v10h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z'%20/%3e%3cpath%20fill='%23fff'%20d='M2%202v2h8v2H8v2h2v2h2v2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z'%20/%3e%3c/svg%3e)"})),ue=m(()=>ve.value===ee.NO_DISK),ce=m(()=>ie.value.horizontalCentering),pe=m(()=>!C.core.modules.windows||C.core.modules.windows.contentWrapper.isHeaderVsible()),de=m(()=>ke.value?ee.ERROR:ve.value),ze=m(()=>C.core.modules.screen?C.core.modules.screen.cursor:null),be=m(()=>({frameActive:se.value[te.SCREEN_1084_FRAME],hasRealLook:se.value[te.SCREEN_REAL_LOOK],hasScanLines:se.value[te.SCREEN_SCAN_LINES],hasActiveAnimation:!W.value&&se.value[te.SCREEN_ACTIVE_ANIMATION]})),Me=m(()=>({ready:ne.value,waiting:Se.value})),Se=m(()=>C.core.executionCounter>0),xe=m(()=>{var e;return null==(e=C.core.modules.windows)?void 0:e.contextMenu.activeItems.items});E(()=>ce.value,()=>{onResize()});let Ce=-1;function onToggleScreenActive(e){ne.value||e||(J.value=!0),e&&P(()=>{onResize()})}function onResize(){var t,o;if(p.value&&y.value&&S.value){const{left:n,top:a,width:l,height:r}=y.value.getBoundingClientRect();$.value={position:e(n,a),size:e(l,r)},y.value&&(null==(t=C.core.modules.screen)||t.updateContentLayout(y.value),null==(o=C.core.modules.screen)||o.updateScreenLayout(S.value))}}function onClickError(){ke.value=Ve.value.shift()}E(()=>Se.value,(e,t)=>{ze.value&&(e&&!t?Ce=window.setTimeout(()=>{var e;null==(e=ze.value)||e.setWait(!0)},0):e||(window.clearTimeout(Ce),ze.value.setWait(!1)))}),f(async()=>{var e,t;window.setTimeout(()=>{window.localStorage.removeItem("firebase:previous_websocket_failure")},2e3),Q.add(s.resize.subscribe(onResize)),window.fileSystem=null==(e=C.core.modules.files)?void 0:e.fs,y.value&&C.core.addModule(a,{contentEl:y.value}),await C.core.setup({firebase:C.config.firebase,symbols:C.config.symbols,disks:C.config.disks}),onResize(),Q.add(C.core.errorObserver.subscribe(e=>{!function setError(e,t=!0){console.warn(e);const o={input:"Press left mouse button or touch to continue.",message:e.message,stack:null,code:`#${Math.floor(99999999*Math.random())}.${Math.floor(99999999*Math.random())}`};t||(o.input=void 0);o.userInteraction=t,ke.value?Ve.value.push(o):ke.value=o}(e)})),await function screenActiveAnimation(){var e,t;let o,n=!1;W.value||(o=se.value[te.BOOT_WITH_SEQUENCE]?new Promise(e=>window.setTimeout(async()=>{var t;await(null==(t=g.value)?void 0:t.turnOn(1500)),e(!0)},1e3)):se.value[te.BOOT_WITH_WEBDOS]?null==(e=g.value)?void 0:e.turnOn(2e3):null==(t=g.value)?void 0:t.turnOn(0));n=!!o,!n&&g.value&&(o=g.value.turnOn(2e3).then(()=>{var e;return null==(e=x.value)?void 0:e.refresh()}).catch(e=>{throw e}));if(o=null==o?void 0:o.then(()=>{var e;return null==(e=g.value)?void 0:e.togglePanel(!0)}),n)return o}(),await async function onReady(){const e=C.core.addExecution(),t=!W.value&&(se.value[te.BOOT_WITH_SEQUENCE]||!1);await async function startBootSequence(e){const t=[ee.SEQUENCE_1,ee.SEQUENCE_2,ee.SEQUENCE_3];if(e){let e=t.length;const sequence=async()=>{e--,ve.value=t[t.length-Number(e)],e>0&&(await new Promise(e=>{window.setTimeout(e,l)}),await sequence())};await new Promise(e=>window.setTimeout(e,l/2)),await sequence()}else ve.value=t[t.length-1]}(t),Y.value?ve.value=ee.NO_DISK:(ve.value=ee.READY,onResize(),Z.value=!0,await new Promise(e=>{P(async()=>{var t,o;y.value&&S.value&&(null==(t=C.core.modules.screen)||t.updateContentLayout(y.value),null==(o=C.core.modules.screen)||o.updateScreenLayout(S.value)),oe.value=!0;const n=!G.value&&(se.value[te.BOOT_WITH_WEBDOS]||!1);await async function boot(e){await void 0;const t=K.value?[]:C.config.cloudStorages;await createBootScript(C.core,{withWebDos:e,disks:C.config.disks,cloudStorages:t});const o=['remove "TMP:BOOT.basic"'];e?await function startWebDos(){var e,t;const o=null==(e=C.core.modules.windows)?void 0:e.addWindow({component:qt,componentData:{core:C.core,command:'basic "TMP:BOOT.basic"'},options:{title:"WebDOS",scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!0,embed:!0}},{full:!0});if(o)return null==(t=o.wrapper)||t.centerWindow(o),o.focus(),null==o?void 0:o.awaitClose()}():o.unshift('basic "TMP:BOOT.basic"');return C.core.executeCommands(o)}(n),ne.value=!0,e(void 0)})}),e(),k("ready"))}(),(null==(t=C.config.rootItems)?void 0:t.length)&&await C.core.addRootItems(await C.config.rootItems({core:C.core})),window.matchMedia("(max-width: 640px)").matches?C.core.executeCommand("rearrangeIcons -root -force"):C.core.executeCommand("rearrangeIcons -root"),C.config.startCommands.length&&await fe(ge(C.config.startCommands).pipe(we(e=>C.core.executeCommand(e)),ye()))}),w(()=>{var e;re.value.forEach(e=>{var t;return null==(t=C.core.modules.files)?void 0:t.fs.removeFloppyDisk(e)}),null==(e=C.core.modules.windows)||e.clear(),Q.unsubscribe()});const ke=d(),Ve=d([]);return(e,t)=>(h(),i("div",{ref_key:"rootEl",ref:p,class:b(["wb-env-core",H(Me)]),style:z(H(he))},[V(ut,F({ref_key:"screenEl",ref:g,modelValue:H(ie),"onUpdate:modelValue":t[0]||(t[0]=e=>X(ie)?ie.value=e:null),"boot-sequence":H(de),theme:H(R),cursor:H(ze)},H(be),{onToggleScreenActive:onToggleScreenActive}),{default:L(()=>{var t;return[c("div",{ref_key:"innerEl",ref:S,class:"inner"},[H(Z)&&H(pe)?(h(),M(yt,{key:0,core:e.core,"show-cover":!H(ne),items:H(xe),"parent-layout":null==(t=e.core.modules.windows)?void 0:t.contentWrapper.layout},null,8,["core","show-cover","items","parent-layout"])):A("",!0),c("div",{ref_key:"contentEl",ref:y,class:"content"},[H(Z)?(h(),M(Jt,{key:0,ref_key:"windowWrapperEl",ref:x,core:e.core,wrapper:H(O),"clamp-y":!1},{default:L(()=>{var t,o,n;return[H(oe)&&(null==(o=null==(t=e.core.modules.symbols)?void 0:t.defaultWrapper)?void 0:o.id)?(h(),M(r,{key:0,core:e.core,"wrapper-id":null==(n=e.core.modules.symbols.defaultWrapper)?void 0:n.id,"parent-scrollable":!1,class:"symbol-wrapper","clamp-symbols":!0,"show-storage-bar":!1},null,8,["core","wrapper-id"])):A("",!0)]}),_:1},8,["core","wrapper"])):A("",!0),H(ue)?(h(),M(mt,{key:1})):A("",!0),H(ke)?(h(),M(le,F({key:2},H(ke),{onClose:onClickError}),null,16)):A("",!0)],512)],512)]}),_:1},16,["modelValue","boot-sequence","theme","cursor"])],6))}}),[["__scopeId","data-v-780f0ddb"]]);export{Zt as default};

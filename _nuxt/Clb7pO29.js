const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DrLItpjK.js","./CVVDEXDJ.js"])))=>i.map(i=>d[i]);
import{d as e,r as a,k as t,a0 as l,y as r,z as o,A as s,C as n,B as c,D as i,K as d,_ as u}from"./BfpYGSxR.js";import{c as p}from"./BuNWPiFF.js";import{u as v}from"./Dkhtr-D7.js";import{W as m}from"./Dnkwg0NB.js";import{W as b}from"./CCnhm4BD.js";import{W as y}from"./Caob76XJ.js";import"./D1WZfvAb.js";import"./jSR9Z_uS.js";import"./Cy0zoxeo.js";import"./BWKGU6Bw.js";const h={class:"wb-disks-extras13-base64-converter"},f={class:"buttons"},x=u(e({__name:"Base64Converter",props:{model:{}},setup(e){const{setContextMenu:u}=v();u(p,{model:e.model});const x=a(500),prepareDisplayValue=e=>(null==e?void 0:e.length)>x.value?`${e.slice(0,x.value)}...`:String(e),g=a("data:text/plain;base64,"),R=a(),_=t(()=>{try{return btoa(g.value.split(",")[1])}catch(e){return"ERROR!"}}),C=t(()=>{try{return atob(g.value.split(",")[1])}catch(e){return"ERROR!"}}),U=t(()=>{try{return g.value.split(":")[1].split(";")[0]}catch(e){return"ERROR!"}}),w=t(()=>"ERROR!"===U.value);l(()=>R.value,e=>{if(null==e?void 0:e.length){const a=new FileReader;a.onload=e=>{var a;"string"==typeof(null==(a=e.target)?void 0:a.result)&&(g.value=e.target.result)},a.readAsDataURL(e[0])}});const onClickDownload=async()=>{const e=await d(()=>import("./DrLItpjK.js").then(e=>e.F),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default);try{const a=new Blob([dataURLtoBlob(g.value)],{type:"application/json;charset=utf-8"});await e.saveAs(a,`file.${U.value}`)}catch(a){console.error("An error occurred during export.",a)}},onInputPlainText=e=>{try{g.value=`data:text/plain;base64,${btoa(e)}`}catch(a){console.error("Error converting plain text to base64",a)}},onInputdataUrl=e=>{try{g.value=e}catch(a){console.error("Error converting plain text to base64",a)}},onInputBase64=e=>{try{g.value=`data:text/plain;base64,${e}`}catch(a){console.error("Error converting plain text to base64",a)}},onInputMimeType=e=>{try{g.value=`data:${e};base64,${_.value}`}catch(a){console.error("Error converting plain text to base64",a)}},onClickCopy=e=>{try{switch(e){case"base64":navigator.clipboard.writeText(_.value);break;case"dataUrl":navigator.clipboard.writeText(g.value);break;case"plainText":navigator.clipboard.writeText(C.value)}}catch(a){console.error("Error copying to clipboard",a)}};function dataURLtoBlob(e){var a;const t=e.split(","),l=null==(a=t[0].match(/:(.*?);/))?void 0:a[1],r=atob(t[1]);let o=r.length;const s=new Uint8Array(o);for(;o--;)s[Number(o)]=r.charCodeAt(o);return new Blob([s],{type:l})}return(e,a)=>(o(),r("div",h,[s("p",null," The display is truncated if the length exceeds "+c(x.value)+" characters. ",1),n(m,{class:"form"},{default:i(()=>[n(b,{"model-value":U.value,placeholder:"MimeType",label:"MimeType","onUpdate:modelValue":onInputMimeType},{after:i(()=>[n(y,{"style-type":"secondary",label:"COPY",onClick:a[0]||(a[0]=e=>onClickCopy("base64"))})]),_:1},8,["model-value"]),n(b,{"model-value":prepareDisplayValue(_.value),placeholder:"Base64…",label:"Base64","onUpdate:modelValue":onInputBase64},{after:i(()=>[n(y,{"style-type":"secondary",label:"COPY",onClick:a[1]||(a[1]=e=>onClickCopy("base64"))})]),_:1},8,["model-value"]),n(b,{"model-value":prepareDisplayValue(g.value),placeholder:"Data Url",label:"Data Url","onUpdate:modelValue":onInputdataUrl},{after:i(()=>[n(y,{"style-type":"secondary",label:"COPY",onClick:a[2]||(a[2]=e=>onClickCopy("dataUrl"))})]),_:1},8,["model-value"]),n(b,{"model-value":prepareDisplayValue(C.value),placeholder:"Plain Text…",label:"Plain Text","onUpdate:modelValue":onInputPlainText},{after:i(()=>[n(y,{"style-type":"secondary",label:"COPY",onClick:a[3]||(a[3]=e=>onClickCopy("plainText"))})]),_:1},8,["model-value"]),s("div",f,[n(y,{modelValue:R.value,"onUpdate:modelValue":a[4]||(a[4]=e=>R.value=e),accept:void 0,type:"upload",label:"Upload File"},null,8,["modelValue"]),n(y,{disabled:w.value,"style-type":"secondary",label:"Download",onClick:onClickDownload},null,8,["disabled"])])]),_:1})]))}}),[["__scopeId","data-v-d2769625"]]);export{x as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Ds07YMDC.js","./Do8_-Ux3.js","./Dhinf-AH.js","./BHV1diwp.js","./BYXSjlja.js","./CEMoWgfm.js","./CXbNF4JJ.css","./c1FWBGi4.css","./CuqlnsaG.js","./Cw6MfX_O.js","./BGIFtisS.js","./RAasLaaH.js","./D4lI5vpz.js","./DdQrQ7-5.js","./6C4StZv5.js","./CSlkdJUE.js","./B5gsEXs2.js","./BH7uj3v3.css"])))=>i.map(i=>d[i]);
import{M as p,I as E}from"./BHV1diwp.js";import{z as T}from"./Cw6MfX_O.js";import{d as _,a as n,q as s,b as l,k as S,r as D,F as g,s as y,t as F,v as P,f as m,e as C}from"./Dhinf-AH.js";import{S as N}from"./B5gsEXs2.js";const x=_(({core:a,model:e})=>{return[new n({order:0,title:"Document Editor",items:[new n({title:"New",hotKey:{alt:!0,code:"KeyN",title:"N"},action:I}),new n({title:"Open…",hotKey:{alt:!0,code:"KeyO",title:"O"},action:w}),new n({title:"Save",hotKey:{alt:!0,code:"KeyS",title:"S"},action:O}),new n({title:"Save As…",action:v}),new N,new n({hotKey:{alt:!0,code:"KeyI",title:"I"},title:"Info",action:d}),new n({title:"Close",action:f})]}),new n({order:1,title:"Document Settings",items:[new n({title:"Open maximized",type:l.CHECKBOX,name:s.OPEN_MAXIMIZED,model:e.value}),new n({title:"Output Format",items:[new n({title:"Markdown",type:l.RADIO,name:s.OUTPUT_TYPE,value:"markdown",model:e.value}),new n({title:"HTML",type:l.RADIO,name:s.OUTPUT_TYPE,value:"html",model:e.value})]}),new n({title:"Font Family",items:Object.values(S).map(t=>{const i=g[t];return new n({title:D[t],items:Object.entries(i).map(([o,r])=>new n({title:o,type:l.RADIO,name:s.FONT_FAMILY,value:r,model:e.value}))})})}),new n({title:"Font Size",items:y(e.value)}),new n({title:"Line Height",items:F(e.value)}),new n({title:"Modular Scale",items:P(e.value)})]}),new n({order:2,title:"Preview",type:l.CHECKBOX,name:m.DOCUMENT_EDITOR_SHOW_PREVIEW,model:a.config.observable,action(t){return a.config.set(m.DOCUMENT_EDITOR_SHOW_PREVIEW,t)}})];function f(){var t;return(t=e.actions)==null?void 0:t.close()}async function w(){const t=await a.executeCommand("openFileDialog");if(t)if("content"in t.value)e.fsItem=t.fsItem,e.value=Object.assign(e.value,C(),t.value);else throw new Error("Can't read file content")}function I(){var t;(t=e.actions)==null||t.reset()}function O(){return u()}function v(){return u(!0)}async function u(t=!1){const i=await T(JSON.stringify(e.value));let o;if(!t&&e.fsItem)return o=await a.executeCommand(`editfile "${e.fsItem.getPath()}" --data="${i}"`),o?a.executeCommand('openDialog "File saved."'):a.executeCommand('openDialog "File could not be saved."');{const r={html:"html",markdown:"md"}[String(e.value[s.OUTPUT_TYPE])],c=await a.executeCommand(`saveFileDialog --data="${i}" --extension="${r}"`);return c?(e.fsItem=p(c),e.fsItem):null}}async function d(){var i;const t=await E(()=>import("./Ds07YMDC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url).then(o=>o.default);(i=a.modules.windows)==null||i.addWindow({component:t,componentData:{model:e},options:{title:"Info",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentEditor"})}});export{x as c};

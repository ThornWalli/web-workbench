var n=Object.defineProperty;var v=(a,t,e)=>t in a?n(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var i=(a,t,e)=>v(a,typeof t!="symbol"?t+"":t,e);import{n as h,a as s}from"./DXnSAPcy.js";import{b as o,f}from"./DN3eHOnZ.js";import{s as c}from"./nufkX4jA.js";class A{constructor(){i(this,"observers",new Map);i(this,"capsLockActive",!1);i(this,"shiftLeftActive",!1);i(this,"shiftRightActive",!1);i(this,"cmdLeftActive",!1);i(this,"cmdRightActive",!1);i(this,"altLeftActive",!1);i(this,"altRightActive",!1);i(this,"pointerDown");i(this,"pointerUp");i(this,"pointerMove");i(this,"keyDown");i(this,"keyUp");i(this,"keyPress");i(this,"resize");var t,e;this.resize=this.get("resize",window).pipe(c()),this.pointerDown=this.getPointerDown(),this.pointerUp=this.getPointerUp(),this.pointerMove=this.getPointerMove(),this.keyPress=this.get("kexypress").pipe(c()),this.keyDown=this.get("keydown").pipe(c()),this.keyUp=this.get("keyup").pipe(c()),(t=this.keyDown)==null||t.subscribe(({code:r})=>{switch(r){case s.META_LEFT:this.cmdLeftActive=!0;break;case s.CONTEXT_MENU:this.cmdRightActive=!0;break;case s.SHIFT_LEFT:this.shiftLeftActive=!0;break;case s.SHIFT_RIGHT:this.shiftRightActive=!0;break;case s.ALT_LEFT:this.altLeftActive=!0;break;case s.ALT_RIGHT:this.altRightActive=!0;break;case s.CAPS_LOCK:this.capsLockActive=!this.capsLockActive;break}}),(e=this.keyUp)==null||e.subscribe(({code:r})=>{switch(r){case s.META_LEFT:this.cmdLeftActive=!1;break;case s.CONTEXT_MENU:this.cmdRightActive=!1;break;case s.SHIFT_LEFT:this.shiftLeftActive=!1;break;case s.SHIFT_RIGHT:this.shiftRightActive=!1;break;case s.ALT_LEFT:this.altLeftActive=!1;break;case s.ALT_RIGHT:this.altRightActive=!1;break}})}getPointerDown(t){return this.get("pointerdown",t).pipe(o(e=>h(e))).pipe(c())}getPointerUp(t){return this.get("pointerup",t).pipe(o(e=>h(e))).pipe(c())}getPointerMove(t){return this.get("pointermove",t).pipe(o(e=>h(e))).pipe(c())}get(t,e){e=e||document,this.observers.has(e)||this.observers.set(e,new Map);const r=this.observers.get(e);if(r&&!r.has(t)){const p={passive:!0,capture:!1};r.set(t,f(e,t,p))}return r.get(t)}reset(){this.observers.clear()}get cmdActive(){return this.cmdLeftActive||this.cmdRightActive}get altActive(){return this.altLeftActive||this.altRightActive}get shiftActive(){return this.shiftLeftActive||this.shiftRightActive}resolveHotKey(t,e){const r=typeof e=="string"?e:e.code;return![t.shift?this.shiftActive:!0,t.alt?this.altActive:!0,t.cmd?this.cmdActive:!0,t.caps?this.capsLockActive:!0,t.code?(t==null?void 0:t.code)===r:!0].includes(!1)}}const L=new A;export{L as d};

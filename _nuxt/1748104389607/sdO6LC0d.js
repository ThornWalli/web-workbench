const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./2zqo_JIM.js","./BGIFtisS.js","./DwXabkis.js","./BVsX1iIx.js","./D4lI5vpz.js","./RAasLaaH.js","./DdQrQ7-5.js","./6C4StZv5.js","./nufkX4jA.js","./Ce6njBYG.js","./B3mcEltb.js","./DXnSAPcy.js","./DN3eHOnZ.js","./CSlkdJUE.js","./D4zXtHPg.js","./BHV1diwp.js","./Cw6MfX_O.js","./BYXSjlja.js","./Dhinf-AH.js","./CEMoWgfm.js","./CXbNF4JJ.css","./B5gsEXs2.js","./D69hJOPr.js","./BlnwQcI7.js","./DAfiyvHT.css"])))=>i.map(i=>d[i]);
import{d as V,v as a,x as o,y as i,G as h,z as $,_,r as f,o as T,a3 as z,Y as K,D as g,E as w,W as D,S as I,k as b,$ as F,a0 as P,a1 as U,P as L,O as B,I as O}from"./BHV1diwp.js";import{i as A}from"./BGIFtisS.js";import{d as S}from"./B3mcEltb.js";import{S as W}from"./6C4StZv5.js";import{S as j,T as G}from"./D69hJOPr.js";import{U as N}from"./BlnwQcI7.js";import{S as Y}from"./B5gsEXs2.js";const q={class:"wb-env-atom-context-menu-text"},J={class:"inner"},Q={key:0,class:"title"},R=V({__name:"Text",props:{item:{}},setup(s){return(t,m)=>{var n;return o(),a("li",q,[i("div",J,[(n=t.item)!=null&&n.text?(o(),a("span",Q,$(t.item.text),1)):h("",!0)])])}}}),X=_(R,[["__scopeId","data-v-5e3ccad9"]]),Z={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};function ee(s,t){return o(),a("svg",Z,t[0]||(t[0]=[i("g",{class:"svg-primary"},[i("path",{d:"M20 2V0H2v2H0v12h2v2h18v-2h2V2zm-1 12h-5v-2H8v2H3v-2h2v-2h2V8h2V6h2V4h2V2h3.667v10H19z"}),i("path",{d:"M12 6h2v4h-4V8h2z"})],-1)]))}const te={render:ee},oe={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};function ne(s,t){return o(),a("svg",oe,t[0]||(t[0]=[i("path",{"fill-rule":"evenodd",d:"M2 0h18v2h2v12h-2v2H2v-2H0V2h2zm7 9H5V8h1V7h1V6h1V5h1V4h1V3h2v1h1v1h1v1h1v1h1v1h1v1h-4v3H9z",class:"svg-primary","clip-rule":"evenodd"},null,-1)]))}const se={render:ne},re={class:"wb-env-atom-context-menu-upload"},ae={class:"inner"},ie={key:0,class:"title"},ce={key:1,class:"hotkey"},le=["accept"],ue="application/json",de=V({__name:"Upload",props:{core:{},item:{}},emits:["files","update:model-value"],setup(s,{emit:t}){const m=f(),n=s,u=t,p=new W;T(()=>{z(()=>{n.item.hotKey&&n.item.action&&p.add(S.keyDown.subscribe(e=>{var c;n.item.hotKey&&S.resolveHotKey(n.item.hotKey,e)&&((c=m.value)==null||c.click())}))})}),K(()=>{p.unsubscribe()});const y=async e=>{var c;if(e.target instanceof HTMLInputElement){const v=Array.from((e instanceof InputEvent?e.dataTransfer:e.target).files||[]);if(e.target.value="",typeof n.item.action=="function")try{await n.item.action(v)}catch(x){console.error(x),(c=n.core)==null||c.errorObserver.next(x)}else u("files",v),u("update:model-value",v)}};return(e,c)=>(o(),a("li",re,[i("div",ae,[e.item.title?(o(),a("span",ie,$(e.item.title),1)):h("",!0),e.item.hotKey?(o(),a("span",ce,[e.item.hotKey.alt?(o(),g(w(te),{key:0})):h("",!0),e.item.hotKey.shift?(o(),g(w(se),{key:1})):h("",!0),i("span",null,$(e.item.hotKey.title),1)])):h("",!0),i("input",{ref_key:"inputEl",ref:m,accept:e.item.accept||ue,type:"file",onChange:y},null,40,le)])]))}}),me=_(de,[["__scopeId","data-v-9798af75"]]),pe={},ve={class:"wb-env-atom-context-menu-separator"};function he(s,t){return o(),a("li",ve,t[0]||(t[0]=[i("span",null,null,-1)]))}const fe=_(pe,[["render",he],["__scopeId","data-v-ede44fe1"]]),_e={},ye={class:"wb-env-atom-context-menu-spacer"};function xe(s,t){return o(),a("li",ye)}const Ie=_(_e,[["render",xe],["__scopeId","data-v-78f98ca7"]]),$e=["data-index"];var ge=(s=>(s.TOP="top",s.BOTTOM="bottom",s))(ge||{});const we=V({__name:"ContextMenu",props:{core:{},direction:{},parentLayout:{},items:{}},emits:["update:model-value"],setup(s,{expose:t,emit:m}){const n=f(),u=f(!1),p=f(D("contextMenuIndex",{index:0}));I("contextMenuIndex",{index:p.value.index++});const y=b(()=>e.value>0||u.value);I("hasFocusedItems",y);const e=f(0);I("addItemFocus",()=>{e.value++}),I("removeItemFocus",()=>{e.value--}),t({$el:n,hasFocusedItem:y});const c=B(()=>O(()=>import("./2zqo_JIM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url)),v="bottom",x={size:A(window.innerWidth,window.innerHeight)},k=s,H=m,M=b(()=>(k.items||[]).sort((d,l)=>(d.order||0)-(l.order||0)));function C(...r){H("update:model-value",...r)}function E(r){return r instanceof j?Ie:r instanceof Y?fe:r instanceof G?X:r instanceof N?me:c}return(r,d)=>(o(),a("ul",{ref_key:"rootEl",ref:n,class:F(["wb-atom-context-menu",{[`direction-${r.direction}`]:r.direction}]),"data-index":p.value.index,onPointerover:d[0]||(d[0]=l=>u.value=!0),onPointerout:d[1]||(d[1]=l=>{e.value=0,u.value=!1})},[(o(!0),a(P,null,U(M.value,l=>(o(),g(L(E(l)),{key:l.id,core:k.core,tag:"li",item:l,direction:r.direction||w(v),"parent-layout":r.parentLayout||x,"onUpdate:modelValue":C},null,8,["core","item","direction","parent-layout"]))),128))],42,$e))}}),Ee=_(we,[["__scopeId","data-v-20fd4253"]]);export{ge as D,te as S,Ee as W,se as a};

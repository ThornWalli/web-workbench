import{i as p}from"./CpIyErmU.js";import{c as _,h as O}from"./BndwZjjR.js";import{d as N,r as R,k as A,a0 as H,o as U,y as F,z as X,A as j,Z as Q,$ as Y,_ as z}from"./BUU1NkbK.js";function Z(r,u,c,l){const t=l/2;if(!(t<=0))for(let a=0;a<=360;a++){const o=(a-1)*Math.PI/180,i=a*Math.PI/180,e=x(a,1,1);r.beginPath(),r.moveTo(u+l/2,c+l/2),r.arc(u+l/2,c+l/2,t,o,i),r.closePath(),r.fillStyle=`rgb(${e.r},${e.g},${e.b})`,r.fill()}}function J(r,u,c,l,t=p(1,1)){if(t===1)return Z(r,u,c,l);const a=l/2;if(!(a<=0))for(let o=0;o<l;o+=t.y)for(let i=0;i<l;i+=t.x){const e=i+t.x/2-a,n=o+t.y/2-a;if(Math.sqrt(e*e+n*n)<=a){let m=Math.atan2(n,e)*180/Math.PI;m<0&&(m+=360);const v=x(m,1,1);r.fillStyle=`rgb(${v.r},${v.g},${v.b})`,r.fillRect(Math.round(u+i),Math.round(c+o),Math.round(t.x),Math.round(t.y))}}}function K(r,u,c,l,t=p(1,1)){const a=p(()=>l/t);if(!(a.x<=0||a.y<=0))for(let o=0;o<a.y;o++)for(let i=0;i<a.x;i++){const e=(i/a.x-1)*360,n=1-o/a.y,m=O(e,n,.5);r.fillStyle=`rgb(${m.r},${m.g},${m.b})`,r.fillRect(u+i*t.x,c+o*t.y,t.x,t.y)}}function x(r,u,c){let l,t,a;const o=Math.floor(r/60),i=r/60-o,e=c*(1-u),n=c*(1-i*u),b=c*(1-(1-i)*u);switch(o%6){case 0:l=c,t=b,a=e;break;case 1:l=n,t=c,a=e;break;case 2:l=e,t=c,a=b;break;case 3:l=e,t=n,a=c;break;case 4:l=b,t=e,a=c;break;case 5:l=c,t=e,a=n;break;default:l=0,t=0,a=0}return{r:Math.round(l*255),g:Math.round(t*255),b:Math.round(a*255)}}function L(r,u,c,l,t){if(r<0||r>=l||u<0||u>=t)return new _(0,0,0,0);const a=c.getImageData(r*window.devicePixelRatio,u*window.devicePixelRatio,1,1).data,o=a[0],i=a[1],e=a[2],n=a[3];return new _(o,i,e,n)}function C(r,u,c,l,t,a,o=p(1,1),i=new _(0,0,0,255)){if(!(t<=0||a<=0))switch(r){case"red":{const e=o.y;for(let n=0;n<a;n+=e){const b=Math.floor(n/(a-e)*255);u.fillStyle=`rgba(${b}, ${i.g}, ${i.b}, ${i.a})`,u.fillRect(c,l+n,t,e)}}break;case"green":{const e=o.y;for(let n=0;n<a;n+=e){const b=Math.floor(n/(a-e)*255);u.fillStyle=`rgba(${i.r}, ${b}, ${i.b}, ${i.a})`,u.fillRect(c,l+n,t,e)}}break;case"blue":{const e=o.y;for(let n=0;n<a;n+=e){const b=Math.floor(n/(a-e)*255);u.fillStyle=`rgba(${i.r}, ${i.g}, ${b}, ${i.a})`,u.fillRect(c,l+n,t,e)}}break;case"alpha":{const e=o.y;for(let n=0;n<a;n+=e){const b=n/(a-e);u.fillStyle=`rgba(${i.r}, ${i.g}, ${i.b}, ${b})`,u.fillRect(c,l+n,t,e)}}break}}function S(r,u,c,l,t,a,o=p(1,1),i=new _(0,0,0,255)){if(t<=0||a<=0)return;const[e,n,b]=i.toHsl();switch(r){case"hue":{const m=o.y;for(let v=0;v<a;v+=m){const g=Math.min(v/(a-m),1)*360,d=_.fromHsl(g,n,b);u.fillStyle=d.toHex(),u.fillRect(c,l+v,t,m)}}break;case"saturation":{const m=o.y;for(let v=0;v<a;v+=m){const g=v/a,d=_.fromHsl(e,g,b);u.fillStyle=d.toHex(),u.fillRect(c,l+v,t,m)}}break;case"lightness":{const m=o.y;for(let v=0;v<a;v+=m){const g=v/(a-m),d=_.fromHsl(e,n,g);u.fillStyle=d.toHex(),u.fillRect(c,l+v,t,m)}}break;case"alpha":{const m=o.y;for(let v=0;v<a;v+=m){const g=v/(a-m),d=_.fromHsl(e,n,g);d.a=Math.round(g*255),u.fillStyle=d.toHex(),u.fillRect(c,l+v,t,m)}}break}}function T(r,u,c,l,t=p(1,1),a=new _(255,0,0,255)){const o=p(()=>l/t);if(o.x<=0||o.y<=0)return;const i=a.toHsv()[0];for(let e=0;e<o.y;e++)for(let n=0;n<o.x;n++){const b=1-e/(o.y-1),m=n/(o.x-1),v=x(i,b,m);r.fillStyle=`rgb(${v.r},${v.g},${v.b})`,r.fillRect(u+n*t.x,c+e*t.y,t.x,t.y)}}var ee=(r=>(r.CIRCLE="circle",r.SQUARE="square",r.SQUARE_EXTEND="square_extend",r.HSLA_HUE="hsla_hue",r.HSLA_SATURATION="hsla_saturation",r.HSLA_LIGHTNESS="hsla_lightness",r.HSLA_ALPHA="hsla_alpha",r.RGBA_RED="rgba_red",r.RGBA_GREEN="rgba_green",r.RGBA_BLUE="rgba_blue",r.RGBA_ALPHA="rgba_alpha",r.ALPHA="alpha",r))(ee||{});const ae=N({__name:"ColorPicker",props:{width:{},height:{},modelValue:{},type:{},density:{},grid:{type:Boolean}},emits:["hover","update:model-value"],setup(r,{emit:u}){const c=R(null),l=R(null),t="square",a=u,o=4*window.devicePixelRatio;let i=p(0,0);const e=R(p(0,0)),n=R(p(o,o)),b=r,m=A(()=>b.type||t),v=A(()=>b.density),g=A(()=>p(()=>Math.round(i/v.value))),d=R(null);H(()=>b.modelValue,()=>{w({background:!1})}),H(()=>b.density,()=>{E(),w()}),U(()=>{d.value=document.createElement("canvas"),E(),w()});function E(){if(!(!c.value||!l.value||!d.value)){if(e.value=p(b.width*window.devicePixelRatio,(b.height||b.width)*window.devicePixelRatio),b.type!=="circle"){const s=p(()=>(e.value-n.value)/window.devicePixelRatio),f=p(()=>Math.round(s/v.value)*v.value*window.devicePixelRatio);e.value=f}i=p(()=>e.value-o*2),l.value.style.width=e.value.x/window.devicePixelRatio+"px",l.value.style.height=e.value.y/window.devicePixelRatio+"px",l.value.width=e.value.x,l.value.height=e.value.y,d.value&&(d.value.width=i.x,d.value.height=i.y)}}const $=R();function q(s){if(!l.value)return;const f=l.value.getBoundingClientRect(),k=s.clientX-f.left-o/window.devicePixelRatio,h=s.clientY-f.top-o/window.devicePixelRatio;if(!l.value.getContext("2d"))return;const y=L(k,h,d.value.getContext("2d"),d.value.width,d.value.height),M=g.value;P.value=p(()=>Math.floor(p(k,h)/(g.value/window.devicePixelRatio))*M),w({background:!1}),a("update:model-value",y)}function D(){!l.value||!l.value.getContext("2d")||($.value=void 0,w({background:!1}))}function I(s){if(!l.value)return;const f=l.value.getBoundingClientRect(),k=s.clientX-f.left-o/window.devicePixelRatio,h=s.clientY-f.top-o/window.devicePixelRatio;if(!l.value.getContext("2d"))return;const y=L(k,h,d.value.getContext("2d"),d.value.width,d.value.height),M=g.value;$.value=p(()=>Math.floor(p(k,h)/(g.value/window.devicePixelRatio))*M),w({background:!1}),a("hover",y)}function w({background:s}={background:!0}){const f=l.value.getContext("2d"),k=d.value.getContext("2d");f.clearRect(0,0,e.value.x,e.value.y),s&&(k.clearRect(0,0,e.value.x,e.value.y),W(k,d.value.width,d.value.height)),V(f)}H(()=>b.modelValue,()=>{switch(m.value){case"hsla_hue":d.value&&w();break;case"hsla_saturation":d.value&&w();break;case"hsla_lightness":d.value&&w();break;case"square_extend":d.value&&w();break;case"hsla_alpha":d.value&&w();break;case"rgba_alpha":d.value&&w();break}});function W(s,f,k){if(!s||!l.value)return;const h=b.modelValue;switch(m.value){case"hsla_hue":S("hue",s,0,0,f,k,g.value,h);break;case"hsla_saturation":S("saturation",s,0,0,f,k,g.value,h);break;case"hsla_lightness":S("lightness",s,0,0,f,k,g.value,h);break;case"hsla_alpha":S("alpha",s,0,0,f,k,g.value,h);break;case"rgba_red":C("red",s,0,0,f,k,g.value);break;case"rgba_green":C("green",s,0,0,f,k,g.value);break;case"rgba_blue":C("blue",s,0,0,f,k,g.value);break;case"rgba_alpha":C("alpha",s,0,0,f,k,g.value,h);break;case"circle":J(s,0,0,Math.min(f,k),g.value);break;case"square_extend":T(s,0,0,f,g.value,h);break;default:K(s,0,0,f,g.value);break}}const P=R(),B=R(null);function V(s){window.cancelAnimationFrame(B.value),B.value=window.requestAnimationFrame(()=>{if(!s||!l.value||!d.value)return;s.drawImage(d.value,n.value.x,n.value.y);const f=$.value;f&&f.x>=0&&f.y>=0&&f.x<i.x-o*2&&f.y<i.y-o*2&&f&&(!P.value||P.value&&f&&!f.equals(P.value))&&(s.globalCompositeOperation="difference",s.strokeStyle="rgba(255, 255, 255, 1)",s.lineWidth=o,s.strokeRect(o/2+f.x,o/2+f.y,g.value.x+o,g.value.y+o),s.setLineDash([]),s.lineWidth=1,s.globalCompositeOperation="source-over"),P.value&&(s.globalCompositeOperation="hard-light",s.lineWidth=o,s.strokeStyle="rgba(255, 255, 255, 1)",s.strokeRect(o/2+P.value.x,o/2+P.value.y,g.value.x+o,g.value.y+o),s.globalCompositeOperation="source-over"),s.lineWidth=1})}return(s,f)=>(X(),F("div",{ref_key:"rootEl",ref:c,class:Y(["wb-disks-extras13-web-paint-color-picker",{grid:s.grid}]),style:Q({...n.value.toCSSVars("offset"),...e.value.toCSSVars("outer-dimension")})},[j("canvas",{ref_key:"canvasEl",ref:l,onPointerdown:q,onPointermove:I,onPointerout:D},null,544)],6))}}),ne=z(ae,[["__scopeId","data-v-52c86cdd"]]);export{ne as C,ee as T};

import{n as I,e as r,c as T,g as u,b as p,q as C}from"./index.56b84025.js";import{W as w}from"./Core.4138940a.js";import{k as i,l as c,m as l,_ as M,f as h,z as m,s as v,F as y,H as S,P as O,a1 as A,B as a,q as _,t as f,v as V,K as E}from"./entry.d9fe636d.js";import{v as H}from"./viewport.f4a0cff0.js";import"./layout.1cd97be8.js";import"./math.7c035145.js";import"./Page.e42e5d53.js";import"./Console.33f550c7.js";import"./InputText.8d59c03a.js";import"./async.412e6e09.js";const z={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"},R=l("g",{class:"svg__primary"},[l("path",{d:"M20 2V0H2v2H0v12h2v2h18v-2h2V2h-2zm-1 12h-5v-2H8v2H3v-2h2v-2h2V8h2V6h2V4h2V2h3.667v10H19v2z"}),l("path",{d:"M12 6h2v4h-4V8h2z"})],-1),D=[R];function B(t,n){return i(),c("svg",z,D)}const P={render:B},j={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"},N=l("path",{d:"M0 0h2v2h2v2h2v2H4v2H2v2H0z",class:"svg__primary"},null,-1),K=[N];function F(t,n){return i(),c("svg",j,K)}const L={render:F};const s={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3},W={components:{WbEnvMoleculeContextMenu:w,SvgControlInputCheckbox:I,SvgControlContextInputHotkey:P,SvgControlContextMenuItemIndicatorContext:L},props:{id:{type:String,default:null},tag:{type:String,default:"div"},options:{type:Object,default(){return{checked:!1,disabled:!1}}},model:{type:Object,default:null},contentSize:{type:Object,default(){return H.screenSize}},title:{type:String,default:"Item Title"},hotKey:{type:String,default:null},command:{type:String,default:null},action:{type:Function,default:null},url:{type:String,default:null},name:{type:String,default:null},value:{type:[String,Number],default:null},type:{type:Number,default:r.DEFAULT},items:{type:Array,default(){return T([{title:"Sub Item 1",hotKey:"S",keyCode:73},{separator:!0},{title:"Sub Item 2",items:[{title:"Sub Item 2.1"},{title:"Sub Item 2.2"}]},{title:"Sub Item 3"}])}}},emits:["click","update:modelValue"],data(){return{contextReady:!1,contextAlign:u(s.RIGHT,s.BOTTOM),subscriptions:[],optionsWrapper:{disabled:!1,checked:!1}}},computed:{inputType(){return this.isInputRadio?"radio":"checkbox"},hasInput(){return this.type===r.CHECKBOX||this.type===r.RADIO},isInputRadio(){return this.type===r.RADIO},clickTag(){return this.hasInput?"label":this.url?"a":"button"},clickData(){const t={class:"item__inner"};return this.hasInput?t.is="label":this.url&&(t.is="a",t.href=this.url),t},disabled(){return this.options.disabled},styleClasses(){return{"js--context-ready":this.contextReady,"js--context-halign-left":this.contextAlign.x===s.LEFT,"js--context-halign-right":this.contextAlign.x!==s.LEFT,"js--context-halign-top":this.contextAlign.y===s.TOP,"js--context-valign-bottom":this.contextAlign.y!==s.TOP,"js--disabled":this.optionsWrapper.disabled}}},watch:{options(t){this.optionsWrapper=t}},mounted(){this.optionsWrapper=this.options,this.hotKey&&this.subscriptions.push(p.keyDown.subscribe(t=>{p.cmdActive&&this.hotKey.charCodeAt(0)===t.keyCode&&(t.preventDefault(),this.executeAction())}))},unmounted(){this.subscriptions.forEach(t=>t.unsubscribe())},methods:{onInputContextMenu(...t){this.$emit("update:modelValue",...t)},executeAction(){this.action?this.action():this.$refs.click.click()},onInput(t){const n=this.model[this.name];this.$emit("update:modelValue",this.name,n),typeof this.action=="function"&&Promise.resolve(this.action(n)).catch(e=>{throw e})},onClick(t){t.stopPropagation(),!this.hasInput&&typeof this.action=="function"?Promise.resolve(this.action()).catch(n=>{throw n}):this.$emit("click",t)},onMouseOver(){this.contextReady||(this.contextReady=!0,this.$nextTick(()=>{window.setTimeout(()=>{if(this.$refs.contextMenu){const t=this.$refs.contextMenu.$el.getBoundingClientRect(),n=this.contentSize,e=C(()=>u(t.left,t.top)+u(t.width,t.height));this.contextAlign=u(n.x<e.x?s.LEFT:s.RIGHT,n.y<e.y?s.TOP:s.BOTTOM)}},500)}))}}},G=["type","name","value"],U={key:1,class:"item__checkbox"},q={class:"item__title"},X={key:2,class:"item__hotkey"},Y={key:3,class:"item__indicator-context"};function J(t,n,e,Q,Z,o){const g=h("svg-control-input-checkbox"),x=h("svg-control-context-input-hotkey"),b=h("svg-control-context-menu-item-indicator-context"),k=h("wb-env-molecule-context-menu");return i(),m(y(e.tag),{class:E(["wb-env-atom-context-menu-item",o.styleClasses]),onMouseover:o.onMouseOver,onTouchstart:o.onMouseOver,onClick:o.onClick},{default:v(()=>[(i(),m(y(o.clickTag),S({ref:"click"},o.clickData),{default:v(()=>[o.hasInput?O((i(),c("input",{key:0,ref:"input","onUpdate:modelValue":n[0]||(n[0]=d=>e.model[e.name]=d),type:o.inputType,name:e.name,value:e.value,onChange:n[1]||(n[1]=(...d)=>o.onInput&&o.onInput(...d))},null,40,G)),[[A,e.model[e.name]]]):a("",!0),o.hasInput?(i(),c("span",U,[_(g)])):a("",!0),l("span",q,f(e.title),1),e.hotKey?(i(),c("span",X,[_(x),V(" "+f(e.hotKey),1)])):a("",!0),e.items.length>0?(i(),c("span",Y,[_(b)])):a("",!0)]),_:1},16)),e.items.length>0?(i(),m(k,{key:0,ref:"contextMenu",items:e.items,"content-size":e.contentSize,onInput:o.onInputContextMenu},null,8,["items","content-size","onInput"])):a("",!0)]),_:1},40,["class","onMouseover","onTouchstart","onClick"])}const rt=M(W,[["render",J],["__scopeId","data-v-7dbed75d"]]);export{rt as default};

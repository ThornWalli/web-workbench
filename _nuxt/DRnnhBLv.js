import{S as D,u as se,g as Te,a as Pe,B as ne,b as _e,R as Me,F as ke,I as K,T as d,c as U,D as F,C as oe,P as Ce,d as De,e as ye,f as be,h as Le,W as Ae,i as Be,j as We,k as Ie}from"./Dv1mzSl-.js";import{d as ae,a as i,b as O,u as Ne}from"./ClLpnmyR.js";import{U as ze}from"./CoWiVqj-.js";import{S as H}from"./B9nPFJJ2.js";import{K as C,a as V}from"./B4rpyJsK.js";import{i as x}from"./OlYXjGCK.js";import{k as y,d as A,r as T,a0 as Y,o as X,W as Q,y as u,z as r,Z as Re,G as P,A as p,_ as B,$ as ie,C as G,ab as He,O as g,F as I,I as j,R as he,B as fe,D as xe,X as pe,Y as ue,N as Ke}from"./BkRx7U8b.js";import{f as Ue,g as Fe,l as Ye,h as Ge}from"./D7YMvfqk.js";import{u as Ze}from"./JsFOm8c5.js";import{n as J,a as qe}from"./Ds4KxLLa.js";import{S as le}from"./Wv4Ty0OG.js";import{f as ee,a as te}from"./KQEr41HO.js";import{d as L}from"./DeEbP9sG.js";import{f as je}from"./C723tzWh.js";import{W as Se}from"./BPnw8H1C.js";import{W as we,C as Xe}from"./Ca7ITM_r.js";import{T as Qe,S as Je}from"./Bg2SjdcQ.js";import{W as et}from"./BJC40ZHD.js";import{C as $e}from"./7gmBHocL.js";import"./rEnmFtaA.js";import"./BnD3zOT9.js";import"./312NxIbt.js";import"./Bpi429LP.js";import"./OAVrZOa6.js";import"./D4lI5vpz.js";import"./D4b9WN8K.js";import"./CVx03s7S.js";import"./DFTH32ee.js";import"./CTpy3bpH.js";import"./BtH6r1li.js";import"./QwGUwJAP.js";import"./BoZA8JgY.js";import"./Cpj98o6Y.js";import"./DG6QdPnO.js";import"./B3Wmi0DA.js";import"./CtlMGvom.js";import"./CxKYomUj.js";import"./CJzlme9J.js";import"./CcuCSIbb.js";import"./Gl1UmUM-.js";import"./CV0dHcg-.js";import"./CaAbksje.js";import"./BTMT_sH9.js";import"./CNkvSXuu.js";import"./CL1V9BUB.js";import"./CuTSLZpO.js";const tt=ae(({model:n})=>{const{t:e}=se(),o={[D.STROKED]:{hotKey:{alt:!0,code:C.KEY_S,title:"S"},title:e(`shape_style.${D.STROKED}`)},[D.FILLED]:{hotKey:{alt:!0,code:C.KEY_F,title:"F"},title:e(`shape_style.${D.FILLED}`)},[D.STROKED_FILLED]:{hotKey:{shift:!0,alt:!0,code:C.KEY_F,title:"F"},title:e(`shape_style.${D.STROKED_FILLED}`)}},v=Te().reduce((t,s)=>(t[s.value.type]=t[s.value.type]||[],t[s.value.type].push(s.value.size),t),{}),a=Array(8).fill(void 0).concat(12,16,20,24,32,48,64);return[new i({title:e("context_menu.tools.title"),items:[new i({title:e("context_menu.tools.items.select_tool.title",{overrides:{type:e(`tool.${n.app.options.select.tool.value||"select"}`)}}),items:Pe({app:n.app}).filter(t=>!t.passive&&!t.disabled).map(t=>new i({title:t.title,type:O.CUSTOM,hotKey:t.hotKey,options:{checked:y(()=>n.app.options.select.tool.value===t.value)},action(){n.app.setSelectOptions("tool",{...t,segmentLength:1,gapLength:0},!0)}}))}),new i({title:y(()=>e("context_menu.tools.items.brush_type.title",{overrides:{type:e(`brush_type.${n.app.options.select.brush?.type||ne.CIRCLE}`)}})),items:Object.values(ne).map(t=>new i({type:O.CUSTOM,title:e(`brush_type.${t}`),options:{checked:y(()=>n.app.options.select.brush?.type===t)},value:t,action(){n.app.setSelectOptions("brush",{...n.app.options.select.brush,type:t})}}))}),new i({title:y(()=>e("context_menu.tools.items.brush_mode.title",{overrides:{mode:e(`brush_mode.${n.app.options.select.brush?.mode||_e.NORMAL}`)}})),items:Object.values(_e).map(t=>({title:e(`brush_mode.${t}`),value:t})).map(({title:t,value:s})=>new i({title:t,type:O.CUSTOM,value:s,options:{checked:y(()=>n.app.options.select.brush?.mode===s)},action:()=>{n.app.setSelectOptions("brush",{...n.app.options.select.brush,mode:s})}}))}),new i({title:y(()=>e("context_menu.tools.items.brush_size.title",{overrides:{size:n.app.options.select.brush?.size}})),items:[new i({title:e("context_menu.tools.items.brush_size.items.set_custom.title"),async action(){const t=(await(await n.actions.openValueInput({text:e("context_menu.tools.items.brush_size.items.set_custom.text"),value:n.app.options.select.brush?.size||1,type:"number",min:1})).awaitClose())?.value||1;n.app.setSelectOptions("brush",{...n.app.options.select.brush,size:t})}}),new H,...a.map((t,s)=>{const l=t||s+1;return new i({type:O.CUSTOM,title:y(()=>`${l}px ${v[n.app.options.select.brush.type].includes(l)?"*":""}`),options:{checked:y(()=>n.app.options.select.brush?.size===l)},value:l,action(){n.app.setSelectOptions("brush",{...n.app.options.select.brush,size:l})}})})]}),new i({title:y(()=>e("context_menu.tools.items.dotted_gap.title",{overrides:{gap:n.app.options.select.tool.dottedGap}})),async action(){const t=(await await n.actions.prompt({text:e("context_menu.tools.items.dotted_gap.items.set_custom.text"),value:n.app.options.select.tool.dottedGap||0,type:"number",min:0,step:1}))?.value||1;n.app.setSelectOptions("tool",{...n.app.options.select.tool,dottedGap:t})}}),new H,new i({title:y(()=>e("context_menu.tools.items.segment_length.title",{overrides:{length:n.app.options.select.tool.segmentLength}})),items:[new i({title:e("context_menu.tools.items.segment_length.items.set_custom.title"),async action({closeContextMenu:t}){t();const s=(await await n.actions.prompt({text:e("context_menu.tools.items.segment_length.items.set_custom.text"),value:n.app.options.select.tool.segmentLength||1,type:"number",min:1}))?.value||1;n.app.setSelectOptions("tool",{...n.app.options.select.tool,segmentLength:s})}}),new H,...[1,2,4,8,12,16,20].map((t,s)=>{const l=t||s;return new i({type:O.CUSTOM,title:y(()=>`${l}px`),options:{checked:y(()=>n.app.options.select.tool.segmentLength===l)},value:l,action(){n.app.setSelectOptions("tool",{...n.app.options.select.tool,segmentLength:l})}})})]}),new i({title:y(()=>e("context_menu.tools.items.gap_length.title",{overrides:{length:n.app.options.select.tool.gapLength}})),items:[new i({title:e("context_menu.tools.items.gap_length.items.set_custom.title"),async action(){const t=(await await n.actions.prompt({text:e("context_menu.tools.items.gap_length.items.set_custom.text"),value:n.app.options.select.tool.gapLength||0,type:"number",min:0})).value||1;n.app.setSelectOptions("tool",{...n.app.options.select.tool,gapLength:t})}}),new H,...[0,1,2,4,8,12,16,20].map((t,s)=>{const l=t||s;return new i({type:O.CUSTOM,title:y(()=>`${l}px`),options:{checked:y(()=>n.app.options.select.tool.gapLength===l)},value:l,action(){n.app.setSelectOptions("tool",{...n.app.options.select.tool,gapLength:l})}})})]}),new i({title:y(()=>e("context_menu.tools.items.air_brush_strength.title",{overrides:{strength:n.app.options.select.tool.airBrushStrength}})),async action(){const t=(await await n.actions.prompt({text:e("context_menu.tools.items.air_brush_strength.text"),value:n.app.options.select.tool.airBrushStrength||0,type:"number",min:1,step:1,max:1e3}))?.value||1;n.app.setSelectOptions("tool",{...n.app.options.select.tool,airBrushStrength:t})}}),new i({title:y(()=>e("context_menu.tools.items.air_brush_weight.title",{overrides:{weight:n.app.options.select.tool.airBrushWeight}})),async action(){const t=(await await n.actions.prompt({text:"Set custom AirBrush weight (0.01 - 1)",value:n.app.options.select.tool.airBrushWeight||0,type:"number",min:.01,step:.01,max:1}))?.value||1;n.app.setSelectOptions("tool",{...n.app.options.select.tool,airBrushWeight:t})}}),new i({title:y(()=>e("context_menu.tools.items.air_brush_interval.title",{overrides:{interval:n.app.options.select.tool.airBrushInterval}})),async action(){const t=(await await n.actions.prompt({text:e("context_menu.tools.items.air_brush_interval.text"),value:n.app.options.select.tool.airBrushInterval||0,type:"number",min:0,step:1}))?.value||1;n.app.setSelectOptions("tool",{...n.app.options.select.tool,airBrushInterval:t})}}),new i({title:e("context_menu.tools.items.interpolate_segments.title"),model:n.app.options.select.tool,type:O.CUSTOM,options:{checked:y(()=>n.app.options.select.tool.interpolateSegments)},action(){n.app.setSelectOptions("tool",{...n.app.options.select.tool,interpolateSegments:!n.app.options.select.tool.interpolateSegments})}}),new H,...Object.values(D).map(t=>new i({title:o[t].title,model:n.app.options.select.tool,name:t,hotKey:o[t].hotKey,type:O.CUSTOM,options:{checked:y(()=>n.app.options.select.tool.shapeStyle===t)},action(){n.app.setSelectOptions("tool",{...n.app.options.select.tool,shapeStyle:t})}}))]})].filter(Boolean)}),nt=ae(n=>{const{model:e}=n,{t:o}=se();return[new i({title:o("context_menu.image.title"),items:[new i({title:o("context_menu.image.items.rotate.title"),items:[new i({title:o("context_menu.image.items.rotate.items.rotate_90.title"),hotKey:{alt:!0,code:C.KEY_R,title:"R"},async action(){await e.app.actions.rotate(Me.ROTATE_90_DEGRESS)}}),new i({title:o("context_menu.image.items.rotate.items.rotate_180.title"),async action(){await e.app.actions.rotate(Me.ROTATE_180_DEGRESS)}}),new i({title:o("context_menu.image.items.rotate.items.rotate_270.title"),async action(){await e.app.actions.rotate(Me.ROTATE_270_DEGRESS)}})]}),new i({title:o("context_menu.image.items.flip.title"),items:[new i({title:o("context_menu.image.items.flip.items.horizontal.title"),async action(){await e.app.actions.flip(ke.HORIZONTAL)}}),new i({title:o("context_menu.image.items.flip.items.vertical.title"),async action(){await e.app.actions.flip(ke.VERTICAL)}})]}),new H,new i({title:o("context_menu.image.items.operation.title"),items:[new i({title:o("context_menu.image.items.operation.items.invert.title"),action(){v(K.INVERT)}}),new i({title:o("context_menu.image.items.operation.items.grayscale.title"),action(){v(K.GRAYSCALE)}}),new i({title:o("context_menu.image.items.operation.items.sepia.title"),action(){v(K.SEPIA)}}),new i({title:o("context_menu.image.items.operation.items.brightness.title"),async action(){const a=(await e.actions?.prompt({type:"number",text:o("context_menu.image.items.operation.items.brightness.text"),value:0,min:-100,max:100,size:4,step:1,required:!0}))?.value;a!==void 0&&v(K.BRIGHTNESS,{value:a})}}),new i({title:o("context_menu.image.items.operation.items.contrast.title"),async action(){const a=(await e.actions?.prompt({type:"number",text:o("context_menu.image.items.operation.items.contrast.text"),value:0,size:4,step:1,required:!0}))?.value;a!==void 0&&v(K.CONTRAST,{value:a})}}),new i({title:o("context_menu.image.items.operation.items.saturation.title"),async action(){const a=(await e.actions?.prompt({type:"number",text:o("context_menu.image.items.operation.items.saturation.text"),value:0,min:-100,max:100,size:4,step:1,required:!0}))?.value;a!==void 0&&v(K.SATURATION,{value:a})}}),new i({title:o("context_menu.image.items.operation.items.sharpen.title"),async action(){const a=(await(await e.actions.openImageSharpness()).awaitClose()).value;if(a){const{radius:t,threshold:s}=a;v(K.SHARPEN,{radius:t,threshold:s})}}}),new i({title:o("context_menu.image.items.operation.items.blur.title"),async action(){const a=(await e.actions?.prompt({type:"number",text:o("context_menu.image.items.operation.items.blur.text"),value:0,min:0,size:4,step:1,required:!0}))?.value;a!==void 0&&v(K.BLUR,{value:a})}}),new i({title:o("context_menu.image.items.operation.items.emboss.title"),async action(){const a=(await e.actions?.prompt({type:"number",text:o("context_menu.image.items.operation.items.emboss.text"),value:0,min:-100,max:100,size:4,step:1,required:!0}))?.value;a!==void 0&&v(K.EMBOSS,{value:a})}})]}),new H,new i({title:o("context_menu.image.items.operation.items.resize.title"),hotKey:{ctrl:!0,code:C.KEY_R,title:"R"},action(){e.actions?.openDocumentResize()}}),new i({title:o("context_menu.image.items.operation.items.resize_canvas.title"),hotKey:{ctrl:!0,alt:!0,code:C.KEY_R,title:"R"},action(){e.actions?.openDocumentResizeCanvas()}})]})].filter(Boolean);async function v(a,t){await e.actions.useAbstractTool(d.IMAGE_OPERATION,{type:a,...t})}}),ot=ae(n=>{const{model:e}=n;return[new i({title:"Debug",items:[new i({title:"Document",items:[new i({title:"Lenna",async action(){return e.app.setDocument(await U(F.LENNA))}}),new i({title:"Disk",async action(){return e.app.setDocument(await U(F.DISK))}}),new i({title:"Web Painting",async action(){return e.app.setDocument(await U(F.WEB_PAINTING))}}),new i({title:"Cuby",async action(){return e.app.setDocument(await U(F.CUBY))}})]}),new i({title:"Display",items:[new i({title:"Add",options:{disabled:y(()=>e.app.hasMaxDisplays)},action(){return e.app.addDisplay()}}),new i({title:"Remove",options:{disabled:y(()=>!e.app.displays.length)},action(){return e.app.removeDisplay(e.app.displays[e.app.displays.length-1])}})]}),new i({title:"Color Pickers…",action(){return e.actions?.openDebugColorPickers()}})]})].filter(Boolean)}),it=ae(n=>{const{model:e}=n;return[new i({title:"Example",items:[new i({title:"Lenna",async action(){return e.app.setDocument(await U(F.LENNA))}}),new i({title:"Disk",async action(){return e.app.setDocument(await U(F.DISK))}}),new i({title:"Web Painting",async action(){return e.app.setDocument(await U(F.WEB_PAINTING))}}),new i({title:"Cuby",async action(){return e.app.setDocument(await U(F.CUBY))}}),new i({title:"Cuby (1080p)",async action(){return e.app.setDocument(await U(F.CUBY_1080))}})]})].filter(Boolean)}),st=ae(n=>{const{model:e,core:o}=n,v=o.config.get(oe.WEB_PAINT_PALETTES)||[],a=o.config.get(oe.WEB_PAINT_DEBUG)||!1,{t}=se();function s(c){const M=c.map(z=>new i({title:z.name,action(){return e.app.setColorPalette(new ye(z))}}));return M.unshift(new i({title:t("context_menu.color_palette.items.no_palettes.title"),options:{disabled:!0}})),M}return[new i({title:t("context_menu.general.title"),items:[new i({title:"Settings…",action(){return e.actions?.openSettings()}}),new i({hotKey:{alt:!0,code:C.KEY_I,title:"I"},title:t("context_menu.general.items.help.title"),action(){return e.actions?.openHelp()}}),new H,new i({hotKey:{alt:!0,code:C.KEY_I,title:"I"},title:t("context_menu.general.items.info.title"),action(){return e.actions?.openInfo()}}),new H,...it(n),new H,new i({hotKey:{ctrl:!0,code:C.KEY_Q,title:"Q"},title:t("context_menu.general.items.close.title"),action:l})]}),new i({title:"File",items:[new i({title:t("context_menu.file.items.new.title"),hotKey:{ctrl:!0,code:C.KEY_N,title:"N"},action(){return e.actions?.openNewDocument()}}),new i({title:t("context_menu.file.items.open.title"),hotKey:{ctrl:!0,code:C.KEY_O,title:"O"},action(){return e.actions?.openDocument()}}),new i({title:t("context_menu.file.items.save.title"),hotKey:{ctrl:!0,code:C.KEY_S,title:"S"},action(){return e.actions?.saveDocument()}}),new i({title:t("context_menu.file.items.save_as.title"),hotKey:{alt:!0,ctrl:!0,code:C.KEY_S,title:"S"},action(){return e.actions?.saveAsDocument()}}),new H,new i({title:t("context_menu.file.items.export.title"),hotKey:{ctrl:!0,code:C.KEY_E,title:"E"},action(){return e.actions?.openExport()}}),new H,new ze({title:t("context_menu.file.items.import_document.title"),accept:[".wpd","application/zip"],action({files:c}){return e.actions?.importDocument(c[0])}}),new i({title:t("context_menu.file.items.export_document.title"),action(){return e.actions?.exportDocument()}}),new H,new ze({title:t("context_menu.file.items.import.title"),accept:["image/png","image/jpeg","image/webp","image/svg+xml"],hotKey:{ctrl:!0,code:C.KEY_I,title:"I"},action({files:c}){return e.actions?.import(c[0])}}),new i({title:t("context_menu.file.items.import_clipboard.title"),hotKey:{ctrl:!0,alt:!0,code:C.KEY_I,title:"I"},async action(){return e.actions?.importClipboard()}}),new H,new i({title:t("context_menu.file.items.document_settings.title"),action(){return e.actions?.openDocumentSettings()}})]}),new i({title:t("context_menu.edit.title"),items:[new i({title:t("context_menu.edit.items.undo.title"),hotKey:{meta:!0,ctrl:!0,key:V.KEY_Z,title:"Z"},options:{disabled:y(()=>!(e.app.state.stackIndex>-1&&e.app.state.stackCount>0))},action(){e.app.actions.stackUndo()}}),new i({title:t("context_menu.edit.items.redo.title"),hotKey:{meta:!0,ctrl:!0,key:V.KEY_Y,title:"Y"},options:{disabled:y(()=>!(e.app.state.stackCount>0&&e.app.state.stackIndex<e.app.state.stackCount-1))},action(){e.app.actions.stackRedo()}}),new H,new i({title:t("context_menu.edit.items.copy.title"),hotKey:{meta:!0,key:V.KEY_C,title:"C"},action(){return e.actions.clipboardCopy()}}),new H,new i({title:t("context_menu.edit.items.insert_image.title"),items:[new i({title:t("context_menu.edit.items.insert_image.items.paste.title"),hotKey:{meta:!0,key:V.KEY_V,title:"V"},options:{},async action(){const c=["image/png","image/jpeg","image/webp"];(await navigator.clipboard.read()).forEach(async z=>{const m=z.types.find(f=>c.includes(f));m&&e.actions.openInsertImage(await z.getType(m))})}}),new i({title:t("context_menu.edit.items.insert_image.items.open.title"),async action(){const c=await o.executeCommand("openFileDialog");if(c)if(Ce.CONTENT in c.value)e.actions.openInsertImage(Ue(c.value[Ce.CONTENT]));else throw new Error("Can't read file content")}}),new ze({title:t("context_menu.edit.items.insert_image.items.import.title"),accept:["image/png","image/jpeg","image/webp","image/svg+xml"],multiple:!0,action({files:c}){c?.forEach(async M=>{if(M.type.startsWith("image/")){let z;M.type.includes("svg")?z=await Fe(await Ye(URL.createObjectURL(M))):z=await Ge(M),e.actions.openInsertImage(z)}})}})]})]}),...nt(n),...tt(n),new i({title:t("context_menu.color_palette.title"),items:[new i({title:t("context_menu.color_palette.items.settings.title"),action(){return e.actions?.openColorPalette()}}),new H,...s(v),new H,...De().map(c=>new i({title:c.name,action(){return e.app.setColorPalette(new ye(c))}}))]}),new i({title:t("context_menu.display.title"),items:[new i({title:t("context_menu.display.items.grid.title"),action(){return e.actions?.openGridSettings()}}),new H,new i({title:t("context_menu.display.items.split.title"),items:[new i({title:t("context_menu.display.items.split.items.one_display.title"),action(){return e.app.setDisplays(1)}}),new i({title:t("context_menu.display.items.split.items.two_displays.title"),action(){return e.app.setDisplays(2)}}),new i({title:t("context_menu.display.items.split.items.three_displays.title"),action(){return e.app.setDisplays(3)}}),new i({title:t("context_menu.display.items.split.items.four_displays.title"),action(){return e.app.setDisplays(4)}})]}),new i({title:t("context_menu.display.items.reset.title"),items:[new i({title:t("context_menu.display.items.reset.items.all.title"),action(){return Promise.all([e.app.currentDisplay?.actions.setPosition(x(0,0)),e.app.currentDisplay?.actions.setZoom(x(0,0),0)])}}),new H,new i({title:t("context_menu.display.items.reset.items.position.title"),action(){return e.app.currentDisplay?.actions.setPosition(x(0,0))}}),new i({title:t("context_menu.display.items.reset.items.zoom.title"),action(){return e.app.currentDisplay?.actions.setZoom(x(0,0),0)}})]})]}),...a?ot(n):[]].filter(Boolean);function l(){return e.actions?.close()}}),at=1,lt=A({__name:"InteractionCanvas",props:{background:{},foreground:{},density:{},dimension:{},interactingMove:{type:Boolean}},emits:["start","move","end","cancel","context-menu","over","move-static"],setup(n,{expose:e,emit:o}){const v=new le,a=T(null),t=T(null),s=T(null),l=new be(0,0,0,0),c=new be(0,0,0,0),M=n,z=y(()=>M.dimension||x(800,600)),m=o;Y(()=>z.value,h=>{t.value&&(t.value.width=h.x,t.value.height=h.y,s.value=t.value.getContext("2d",{willReadFrequently:!0}),s.value.imageSmoothingEnabled=!1)},{immediate:!0}),X(()=>{if(a.value&&t.value){const{width:h,height:Z}=a.value.getBoundingClientRect();a.value.width=h*f.value,a.value.height=Z*f.value,t.value.width=a.value.width,t.value.height=a.value.height,s.value=t.value.getContext("2d",{willReadFrequently:!0}),s.value.imageSmoothingEnabled=!1}t.value&&(v.add(ee(t.value,"pointermove",{passive:!0}).pipe(te(h=>J(h))).subscribe(re)),v.add(ee(t.value,"pointerleave",{passive:!0}).pipe(te(h=>J(h))).subscribe(W)),v.add(ee(t.value,"pointercancel",{passive:!0}).pipe(te(h=>J(h))).subscribe(W)),v.add(ee(t.value,"contextmenu").pipe(te(h=>J(h))).subscribe(h=>{const Z=x(Math.round(h.x),Math.round(h.y));m("context-menu",{position:R(Z),ctx:s.value})})),v.add(ee(t.value,"pointerup",{passive:!0}).pipe(te(h=>J(h))).subscribe(ve))),_=S()}),Q(()=>{v?.unsubscribe()});const f=y(()=>M.density||at);let _=x(0,0);function S(){const{x:h,y:Z}=t.value.getBoundingClientRect();return x(h,Z)}const k=T(x(0,0));function b(h){k.value=x(Math.round(h.x),Math.round(h.y))}function $(h){t.value&&(N=!0,_=S(),b(h),m("start",{position:R(k.value),ctx:s.value}))}function E(){m("over",{position:R(k.value),ctx:s.value})}function q(h){N||m("move-static",{position:R(x(Math.round(h.x),Math.round(h.y))),ctx:s.value})}function ve(h){w(h)}function W(){N&&(N=!1),m("cancel",{position:R(k.value),ctx:s.value})}let N=!1;function re(h){M.interactingMove&&!N||(b(h),m("move",{position:R(k.value),ctx:s.value}))}function R(h){return x(()=>f.value*(h-_))}function w(h){N&&(N=!1,b(h),m("end",{position:R(k.value),ctx:s.value}))}return e({canvasEl:a,interactionCanvasEl:t,interactionCtx:s}),(h,Z)=>(r(),u("div",{class:"wb-disks-extras13-web-paint-interaction-canvas",style:Re({"--color-background":(h.background||P(l)).toHex(),"--color-foreground":(h.foreground||P(c)).toHex()})},[p("canvas",{ref_key:"canvasEl",ref:a},null,512),p("canvas",{ref_key:"interactionCanvasEl",ref:t,onPointermovePassive:q,onPointerdownPassive:$,onPointeroverPassive:E},null,544)],4))}}),rt=B(lt,[["__scopeId","data-v-10186352"]]),ht=["model-value","value","checked"],ct=A({__name:"Display",props:{core:{},modelValue:{},model:{},display:{},currentTool:{}},emits:["update:model-value"],setup(n,{emit:e}){const o=new le,v=T(null),a=e,t=n,s=y(()=>t.model.app),l=T(),c=new ResizeObserver(([{contentRect:w}])=>{v.value?.canvasEl&&(l.value=x(w.width,w.height))}),M=y(()=>t.modelValue===t.display.id);Y(()=>l.value,(w,h)=>{w&&h&&!w.equals(h)&&v.value?.canvasEl&&t.display.worker&&m()}),X(async()=>{v.value?.canvasEl&&(await s.value.setDisplayCanvas(t.display,v.value.canvasEl),v.value?.canvasEl&&c.observe(v.value.canvasEl),o.add(L.keyDown.pipe(je(w=>M.value&&w.target===document.body)).subscribe(async w=>{let h=x(0,0);switch(w.key){case V.ARROW_UP:h=x(0,-.01);break;case V.ARROW_DOWN:h=x(0,.01);break;case V.ARROW_LEFT:h=x(-.01,0);break;case V.ARROW_RIGHT:h=x(.01,0);break;default:return}L.shiftLeftActive&&(h=x(()=>h*10)),h=x(()=>t.display.options.position+h),z(h)})))}),Q(()=>{o.unsubscribe(),v.value?.canvasEl&&(c.unobserve(v.value.canvasEl),s.value.removeDisplayCanvas(t.display))}),Y(()=>t.currentTool,(w,h)=>{if(h){if(!v.value?.interactionCtx)throw new Error("Interaction context is not available for the last tool cancel.");h.cancel({dimension:l.value,ctx:v.value.interactionCtx})}});function z(w){t.display.actions.setPosition(w)}async function m(){await s.value.actionDisplay(t.display,{type:Ae.REFRESH,payload:{dimension:l.value}})}function f(w){t.currentTool?.pointerUp(W(w))}function _(w){t.currentTool?.pointerDown(W(w))}function S(w){t.currentTool?.pointerOver(W(w))}function k(w){R("onMoveStatic",W(w),h=>{t.currentTool?.pointerMoveStatic(h)})}function b(w){R("onMove",W(w),h=>{t.currentTool?.pointerMove(h)})}function $({ctx:w}){t.currentTool?.pointerCancel({dimension:l.value,ctx:w})}function E(w){t.currentTool?.contextMenu(W(w))}function q(){a("update:model-value",t.display.id)}function ve(){t.modelValue!==t.display.id&&a("update:model-value",t.display.id)}function W({position:w,ctx:h}){return new Le({seed:N(0,1e6),dimension:l.value,position:w,ctx:h,documentMeta:s.value.currentDocument.meta,displayOptions:s.value.currentDisplay.options})}function N(w,h){return Math.floor(Math.random()*(h-w+1))+w}const re=new Map;function R(w,h,Z){const de=re.get(w),Ee=de?x(Math.floor(de.realPosition.x),Math.floor(de.realPosition.y)):void 0;let me=h.realPosition;me=x(()=>Math.floor(me)),(!Ee||!Ee.equals(me))&&(Z(h),re.set(w,h))}return(w,h)=>(r(),u("div",{class:ie(["wb-disks-extras13-web-paint-display",{selected:M.value}]),style:Re({"--color-background":w.display.options.colors.background.toHex()}),onClick:ve},[p("input",{"model-value":w.modelValue,type:"radio",value:w.display.id,name:"display",checked:w.modelValue===w.display.id,onInput:q},null,40,ht),G(rt,{ref_key:"interactionCanvasComponent",ref:v,"interacting-move":w.currentTool?.interactingMove,dimension:l.value,"worker-manager":s.value.workerManager,onStart:_,onOver:S,onMove:b,onMoveStatic:k,onEnd:f,onCancel:$,onContextMenu:E},null,8,["interacting-move","dimension","worker-manager"]),h[0]||(h[0]=p("div",{class:"helper highlight"},null,-1))],6))}}),pt=B(ct,[["__scopeId","data-v-4003ff9b"]]),ut={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function vt(n,e){return r(),u("svg",ut,e[0]||(e[0]=[p("path",{d:"M0 0h1v1H0zM1 1h1v1H1zM0 2h1v1H0zM1 3h1v1H1zM0 4h1v1H0zM1 5h1v1H1zM1 7h1v1H1zM0 8h1v1H0zM1 9h1v1H1zM0 6h1v1H0zM0 10h1v1H0zM0 12h1v1H0zM0 14h1v1H0zM0 18h1v1H0zM1 19h1v1H1zM1 17h1v1H1zM0 20h1v1H0zM1 21h1v1H1zM1 13h1v1H1zM1 11h1v1H1zM1 15h1v1H1zM0 16h1v1H0zM2 0h1v1H2zM3 1h1v1H3zM2 2h1v1H2zM3 3h1v1H3zM2 4h1v1H2zM3 5h1v1H3zM3 7h1v1H3zM2 8h1v1H2zM3 9h1v1H3zM2 6h1v1H2zM2 10h1v1H2zM2 12h1v1H2zM2 14h1v1H2zM2 18h1v1H2zM3 19h1v1H3zM3 17h1v1H3zM2 20h1v1H2zM3 21h1v1H3zM3 13h1v1H3zM3 11h1v1H3zM3 15h1v1H3zM2 16h1v1H2zM4 0h1v1H4zM5 1h1v1H5zM4 2h1v1H4zM5 3h1v1H5zM4 4h1v1H4zM5 5h1v1H5zM5 7h1v1H5zM4 8h1v1H4zM5 9h1v1H5zM4 6h1v1H4zM4 10h1v1H4zM4 12h1v1H4zM4 14h1v1H4zM4 18h1v1H4zM5 19h1v1H5zM5 17h1v1H5zM4 20h1v1H4zM5 21h1v1H5zM5 13h1v1H5zM5 11h1v1H5zM5 15h1v1H5zM4 16h1v1H4zM6 0h1v1H6zM7 1h1v1H7zM6 2h1v1H6zM7 3h1v1H7zM6 4h1v1H6zM7 5h1v1H7zM7 7h1v1H7zM6 8h1v1H6zM7 9h1v1H7zM6 6h1v1H6zM6 10h1v1H6zM6 12h1v1H6zM6 14h1v1H6zM6 18h1v1H6zM7 19h1v1H7zM7 17h1v1H7zM6 20h1v1H6zM7 21h1v1H7zM7 13h1v1H7zM7 11h1v1H7zM7 15h1v1H7zM6 16h1v1H6zM8 0h1v1H8zM9 1h1v1H9zM8 2h1v1H8zM9 3h1v1H9zM8 4h1v1H8zM9 5h1v1H9zM9 7h1v1H9zM8 8h1v1H8zM9 9h1v1H9zM8 6h1v1H8zM8 10h1v1H8zM8 12h1v1H8zM8 14h1v1H8zM8 18h1v1H8zM9 19h1v1H9zM9 17h1v1H9zM8 20h1v1H8zM9 21h1v1H9zM9 13h1v1H9zM9 11h1v1H9zM9 15h1v1H9zM8 16h1v1H8zM10 0h1v1h-1zM11 1h1v1h-1zM10 2h1v1h-1zM11 3h1v1h-1zM10 4h1v1h-1zM11 5h1v1h-1zM11 7h1v1h-1zM10 8h1v1h-1zM11 9h1v1h-1zM10 6h1v1h-1zM10 10h1v1h-1zM10 12h1v1h-1zM10 14h1v1h-1zM10 18h1v1h-1zM11 19h1v1h-1zM11 17h1v1h-1zM10 20h1v1h-1zM11 21h1v1h-1zM11 13h1v1h-1zM11 11h1v1h-1zM11 15h1v1h-1zM10 16h1v1h-1zM12 0h1v1h-1zM13 1h1v1h-1zM12 2h1v1h-1zM13 3h1v1h-1zM12 4h1v1h-1zM13 5h1v1h-1zM13 7h1v1h-1zM12 8h1v1h-1zM13 9h1v1h-1zM12 6h1v1h-1zM12 10h1v1h-1zM12 12h1v1h-1zM12 14h1v1h-1zM12 18h1v1h-1zM13 19h1v1h-1zM13 17h1v1h-1zM12 20h1v1h-1zM13 21h1v1h-1zM13 13h1v1h-1zM13 11h1v1h-1zM13 15h1v1h-1zM12 16h1v1h-1zM14 0h1v1h-1zM15 1h1v1h-1zM14 2h1v1h-1zM15 3h1v1h-1zM14 4h1v1h-1zM15 5h1v1h-1zM15 7h1v1h-1zM14 8h1v1h-1zM15 9h1v1h-1zM14 6h1v1h-1zM14 10h1v1h-1zM14 12h1v1h-1zM14 14h1v1h-1zM14 18h1v1h-1zM15 19h1v1h-1zM15 17h1v1h-1zM14 20h1v1h-1zM15 21h1v1h-1zM15 13h1v1h-1zM15 11h1v1h-1zM15 15h1v1h-1zM14 16h1v1h-1zM16 0h1v1h-1zM17 1h1v1h-1zM16 2h1v1h-1zM17 3h1v1h-1zM16 4h1v1h-1zM17 5h1v1h-1zM17 7h1v1h-1zM16 8h1v1h-1zM17 9h1v1h-1zM16 6h1v1h-1zM16 10h1v1h-1zM16 12h1v1h-1zM16 14h1v1h-1zM16 18h1v1h-1zM17 19h1v1h-1zM17 17h1v1h-1zM16 20h1v1h-1zM17 21h1v1h-1zM17 13h1v1h-1zM17 11h1v1h-1zM17 15h1v1h-1zM16 16h1v1h-1zM18 0h1v1h-1zM19 1h1v1h-1zM18 2h1v1h-1zM19 3h1v1h-1zM18 4h1v1h-1zM19 5h1v1h-1zM19 7h1v1h-1zM18 8h1v1h-1zM19 9h1v1h-1zM18 6h1v1h-1zM18 10h1v1h-1zM18 12h1v1h-1zM18 14h1v1h-1zM18 18h1v1h-1zM19 19h1v1h-1zM19 17h1v1h-1zM18 20h1v1h-1zM19 21h1v1h-1zM19 13h1v1h-1zM19 11h1v1h-1zM19 15h1v1h-1zM18 16h1v1h-1zM20 0h1v1h-1zM21 1h1v1h-1zM20 2h1v1h-1zM21 3h1v1h-1zM20 4h1v1h-1zM21 5h1v1h-1zM21 7h1v1h-1zM20 8h1v1h-1zM21 9h1v1h-1zM20 6h1v1h-1zM20 10h1v1h-1zM20 12h1v1h-1zM20 14h1v1h-1zM20 18h1v1h-1zM21 19h1v1h-1zM21 17h1v1h-1zM20 20h1v1h-1zM21 21h1v1h-1zM21 13h1v1h-1zM21 11h1v1h-1zM21 15h1v1h-1zM20 16h1v1h-1z",class:"svg-primary"},null,-1)]))}const ce={render:vt},dt={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"12"};function mt(n,e){return r(),u("svg",dt,e[0]||(e[0]=[p("path",{d:"M0 0v12h6V0zm4 8H2V6h2z"},null,-1)]))}const Oe={render:mt},Mt={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"6"};function zt(n,e){return r(),u("svg",Mt,e[0]||(e[0]=[p("path",{d:"M6 2H4V0H2v2H0v2h2v2h2V4h2z"},null,-1)]))}const wt={render:zt},gt={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"};function _t(n,e){return r(),u("svg",gt,e[0]||(e[0]=[p("path",{d:"M10 2H8V0H2v2H0v6h2v2h6V8h2z"},null,-1)]))}const yt={render:_t},bt={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"};function ft(n,e){return r(),u("svg",bt,e[0]||(e[0]=[p("path",{d:"M14 4h-2V2h-2V0H4v2H2v2H0v6h2v2h2v2h6v-2h2v-2h2z"},null,-1)]))}const Ht={render:ft},xt={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"};function St(n,e){return r(),u("svg",xt,e[0]||(e[0]=[p("path",{d:"M0 0h10v10H0z"},null,-1)]))}const Et={render:St},kt={xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8"};function Ct(n,e){return r(),u("svg",kt,e[0]||(e[0]=[p("path",{d:"M0 0h8v8H0z"},null,-1)]))}const It={render:Ct},$t={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"6"};function Ot(n,e){return r(),u("svg",$t,e[0]||(e[0]=[p("path",{d:"M0 0h6v6H0z"},null,-1)]))}const Vt={render:Ot},Tt={xmlns:"http://www.w3.org/2000/svg",width:"4",height:"4"};function Pt(n,e){return r(),u("svg",Tt,e[0]||(e[0]=[p("path",{d:"M0 0h4v4H0z"},null,-1)]))}const Rt={render:Pt},Dt={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"6"};function Lt(n,e){return r(),u("svg",Dt,e[0]||(e[0]=[p("path",{d:"M4 4h2v2H4zM0 2h2v2H0zM4 0h2v2H4z"},null,-1)]))}const At={render:Lt},Bt={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12"};function Wt(n,e){return r(),u("svg",Bt,e[0]||(e[0]=[p("path",{d:"M6 6h2v2H6zM0 4h2v2H0zM6 0h2v2H6zM12 6h2v2h-2zM6 10h2v2H6z"},null,-1)]))}const Nt={render:Wt},Kt=["title"],Ut={key:1,class:"wb-disks-extras13-web-paint-brush-select-item"},Ft=["id","disabled","value","checked"],Yt=["for","title"],Gt=A({__name:"Item",props:{name:{},modelValue:{},passive:{type:Boolean},disabled:{type:Boolean},title:{},value:{}},emits:["update:model-value","click"],setup(n,{emit:e}){const o=He(),v={[ne.CIRCLE]:{1:g(Oe),3:g(wt),5:g(yt),7:g(Ht)},[ne.SQUARE]:{2:g(Rt),3:g(Vt),4:g(It),5:g(Et)},[ne.DOTS]:{4:g(At),8:g(Nt)}},a=e,t=n,s=y(()=>v[t.value.type][t.value.size]||Oe);function l({type:c,size:M}){a("update:model-value",{...t.modelValue,type:c,size:M})}return(c,M)=>c.passive?(r(),u("button",{key:0,class:"wb-disks-extras13-web-paint-brush-select-item",title:c.title,onClick:M[0]||(M[0]=z=>a("click",z,c.value))},[(r(),I(he(s.value))),c.disabled?(r(),I(P(ce),{key:0,class:"controls-tools-disabled"})):j("",!0),p("span",null,fe(c.title),1)],8,Kt)):(r(),u("div",Ut,[p("input",{id:P(o),disabled:c.disabled,type:"radio",name:"index",value:`${c.value.type}_${c.value.size}`,checked:`${c.modelValue?.type}_${c.modelValue?.size}`==`${c.value.type}_${c.value.size}`,onInput:M[1]||(M[1]=z=>l(c.value))},null,40,Ft),p("label",{for:P(o),title:c.title},[(r(),I(he(s.value))),c.disabled?(r(),I(P(ce),{key:0,class:"controls-tools-disabled"})):j("",!0)],8,Yt)]))}}),Zt=B(Gt,[["__scopeId","data-v-a5505726"]]),qt=A({__name:"BrushSelect",props:{modelValue:{}},emits:["update:model-value","click"],setup(n,{emit:e}){const o=n,v=e,a=y(()=>s.value[l.value].value.type),t=new le,s=T(Te().map(z=>({...z,value:{...o.modelValue,...z.value}}))),l=T(s.value.findIndex(({value:z})=>z.type===o.modelValue?.type&&z.size===o.modelValue?.size));Y(()=>l.value,z=>{c(s.value[z].value)}),Q(()=>{t.unsubscribe()}),X(()=>{t.add(L.keyPress.subscribe(z=>{let m=!1;const f=o.modelValue?.size||1;switch(z.key){case V.HOME:l.value=Math.max(f-1,0),m=!0;break;case V.INSERT:l.value=Math.min(f+1),m=!0;break}m&&c({...o.modelValue,type:a.value,size:f})}))});function c(z){v("update:model-value",z)}function M(z,{type:m,size:f}){v("click",z,{...o.modelValue,type:m,size:f})}return(z,m)=>(r(),I(Se,{class:"wb-disks-extras13-web-paint-brush-select"},{default:xe(()=>[p("ul",null,[(r(!0),u(pe,null,ue(s.value,({title:f,value:_},S)=>(r(),u("li",{key:S},[G(Zt,{name:"brush-select",title:f,value:_,"model-value":o.modelValue,"onUpdate:modelValue":c,onClick:M},null,8,["title","value","model-value"])]))),128))])]),_:1}))}}),jt=B(qt,[["__scopeId","data-v-19a18cad"]]),Xt={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Qt(n,e){return r(),u("svg",Xt,e[0]||(e[0]=[p("path",{d:"M6 4h2v2H6zM10 6h2v2h-2zM12 10h2v2h-2zM12 14h2v2h-2z",class:"st1"},null,-1)]))}const Jt={render:Qt},en={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function tn(n,e){return r(),u("svg",en,e[0]||(e[0]=[p("path",{d:"M2 6h2v2H2zM4 4h4v2H4zM10 8h2v10h-2zM8 6h2v2H8zM12 18h4v2h-4zM18 18h-2v-2h2zM18 14h2v2h-2z"},null,-1)]))}const nn={render:tn},on={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function sn(n,e){return r(),u("svg",on,e[0]||(e[0]=[p("path",{d:"M4 16h2v2H4zM6 14h2v2H6zM8 12h2v2H8zM10 10h2v2h-2zM14 6h2v2h-2zM16 4h2v2h-2zM12 8h2v2h-2z",class:"svg-primary"},null,-1)]))}const an={render:sn},ln={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function rn(n,e){return r(),u("svg",ln,e[0]||(e[0]=[p("path",{d:"M2 4h8v2H2zM14 8h2v2h-2zM18 14h2v6h-2zM16 10h2v4h-2zM10 6h4v2h-4z",class:"svg-primary"},null,-1)]))}const hn={render:rn},cn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function pn(n,e){return r(),u("svg",cn,e[0]||(e[0]=[p("path",{d:"M4 8h2v2H4zM16 8h2v2h-2zM14 10h2v2h-2zM14 6h2v2h-2zM12 4h2v2h-2zM12 12h2v2h-2zM6 10h2v2H6zM6 6h2v2H6zM8 4h2v2H8zM10 12H8v6H4v2h8v-2h-2v-2h2v-2h-2zM10 2h2v2h-2z",class:"svg-primary"},null,-1)]))}const un={render:pn},vn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function dn(n,e){return r(),u("svg",vn,e[0]||(e[0]=[p("path",{d:"M8 8h2v2H8zM8 12h2v2H8zM10 10h2v2h-2zM2 10h6v2H2zM14 8h2v2h-2zM14 12h2v2h-2zM18 8h2v2h-2zM18 12h2v2h-2zM10 6h2v2h-2zM12 4h2v2h-2zM16 4h2v2h-2zM10 14h2v2h-2zM12 16h2v2h-2zM16 16h2v2h-2z",class:"svg-primary"},null,-1)]))}const mn={render:dn},Mn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function zn(n,e){return r(),u("svg",Mn,e[0]||(e[0]=[p("path",{d:"M4 18h14V4H4zM16 6v10H6V6z"},null,-1)]))}const wn={render:zn},gn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function _n(n,e){return r(),u("svg",gn,e[0]||(e[0]=[p("path",{d:"M14 2H8v2h6zM6 6h2V4H4v4h2zM14 4v2h2v2h2v6h-2v2h-2v2H8v-2H6v-2H4v4h4v2h6v-2h4v-4h2V8h-2V4zM4 8H2v6h2z"},null,-1)]))}const yn={render:_n},bn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function fn(n,e){return r(),u("svg",bn,e[0]||(e[0]=[p("path",{d:"M4 10H2v2h2zM6 8H4v2h2zM6 12H4v2h2zM6 6v2h10v2h2v2h-2v2H6v2h10v-2h2v-2h2v-2h-2V8h-2V6z"},null,-1)]))}const Hn={render:fn},xn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Sn(n,e){return r(),u("svg",xn,e[0]||(e[0]=[p("path",{d:"M4 10H2v2h2zM6 8H4v2h2zM8 6H6v2h2zM10 4H8v2h2zM14 6v2h2v2h2v2h-2v2h-2v2h-2v2h-2v-2H8v-2H6v2h2v2h2v2h2v-2h2v-2h2v-2h2v-2h2v-2h-2V8h-2V6zM12 2h-2v2h2zM14 4h-2v2h2zM6 12H4v2h2z"},null,-1)]))}const En={render:Sn},kn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Cn(n,e){return r(),u("svg",kn,e[0]||(e[0]=[p("path",{d:"M20 2h-2v2h2zM4 18H2v2h2zM4 4v14h14V4z"},null,-1)]))}const In={render:Cn},$n={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function On(n,e){return r(),u("svg",$n,e[0]||(e[0]=[p("path",{d:"M14 4V2H8v2H4v4H2v6h2v4h4v2h6v-2h4v-4h2V8h-2V4zM20 2h-2v2h2zM4 18H2v2h2z"},null,-1)]))}const Vn={render:On},Tn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Pn(n,e){return r(),u("svg",Tn,e[0]||(e[0]=[p("path",{d:"M18 4h-2v2h2zM20 2h-2v2h2zM4 18H2v2h2zM6 16H4v2h2zM6 6v2H4v2H2v2h2v2h2v2h10v-2h2v-2h2v-2h-2V8h-2V6z"},null,-1)]))}const Rn={render:Pn},Dn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Ln(n,e){return r(),u("svg",Dn,e[0]||(e[0]=[p("path",{d:"M6 16H4v2h2z"},null,-1),p("path",{d:"M14 6V4h-2V2h-2v2H8v2H6v2H4v2H2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h2v-2h2v-2h-2V8h-2V6z"},null,-1),p("path",{d:"M18 4h-2v2h2zM4 18H2v2h2zM20 2h-2v2h2z"},null,-1)]))}const An={render:Ln},Bn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Wn(n,e){return r(),u("svg",Bn,e[0]||(e[0]=[p("path",{d:"M20 2h-2v2h2zM4 18H2v2h2zM4 18h14V4H4zM14 6v2h-2v2h-2v2H8v2H6V6z"},null,-1)]))}const Nn={render:Wn},Kn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Un(n,e){return r(),u("svg",Kn,e[0]||(e[0]=[p("path",{d:"M14 2H8v2h6zM6 6h2V4H4v4h2zM14 4v4h-2v2h-2v2H8v2H4v4h4v2h6v-2h4v-4h2V8h-2V4zM20 2h-2v2h2zM4 8H2v6h2zM4 18H2v2h2z"},null,-1)]))}const Fn={render:Un},Yn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Gn(n,e){return r(),u("svg",Yn,e[0]||(e[0]=[p("path",{d:"M18 4h-2v2h2zM20 2h-2v2h2zM4 18H2v2h2zM6 16H4v2h2zM4 10H2v2h2zM6 8H4v2h2zM6 12H4v2h2zM6 6v2h6v2h-2v2H8v2H6v2h10v-2h2v-2h2v-2h-2V8h-2V6z"},null,-1)]))}const Zn={render:Gn},qn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function jn(n,e){return r(),u("svg",qn,e[0]||(e[0]=[p("path",{d:"M4 10H2v2h2zM6 8H4v2h2zM8 6H6v2h2zM10 4H8v2h2zM6 16H4v2h2zM14 6v2h-2v2h-2v2H8v2H6v2h2v2h2v2h2v-2h2v-2h2v-2h2v-2h2v-2h-2V8h-2V6zM18 4h-2v2h2zM12 2h-2v2h2zM14 4h-2v2h2zM6 12H4v2h2zM4 18H2v2h2zM20 2h-2v2h2z"},null,-1)]))}const Xn={render:jn},Qn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function Jn(n,e){return r(),u("svg",Qn,e[0]||(e[0]=[p("path",{d:"M4 4v4h2V6h2V4H6zM16 4h-2v2h2v2h2V4zM6 14H4v4h4v-2H6zM16 16h-2v2h4v-4h-2z",class:"svg-primary"},null,-1)]))}const eo={render:Jn},to={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function no(n,e){return r(),u("svg",to,e[0]||(e[0]=[p("path",{d:"M14 8V6h-2V4H8v2H6v2H4v10h4v-4h4v4h4V8zm-2 4H8V8h4z",class:"svg-primary"},null,-1)]))}const oo={render:no},io={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function so(n,e){return r(),u("svg",io,e[0]||(e[0]=[p("path",{d:"M2 2v18h18V2zm2 2h6v6H4zm0 14v-6h6v6zm14 0h-6v-6h6zm0-8h-6V4h6z",class:"svg-primary"},null,-1)]))}const Ve={render:so},ao={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function lo(n,e){return r(),u("svg",ao,e[0]||(e[0]=[p("path",{d:"M10 2h6v2h-6zM16 4h2v2h-2zM18 6h2v6h-2zM8 4h2v2H8zM16 12h2v2h-2zM10 12H8V6H6v8H4v2H2v4h4v-2h2v-2h8v-2h-6z",class:"svg-primary"},null,-1)]))}const ro={render:lo},ho={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function co(n,e){return r(),u("svg",ho,e[0]||(e[0]=[p("path",{d:"M2 2v18h18V2zm16 16H4V4h14z",class:"svg-primary"},null,-1),p("path",{d:"M16 14V6H6v10h10zm-8 0V8h6v6z",class:"svg-primary"},null,-1),p("path",{d:"M10 10h2v2h-2z",class:"svg-primary"},null,-1)]))}const po={render:co},uo={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function vo(n,e){return r(),u("svg",uo,e[0]||(e[0]=[p("path",{d:"M2 2h2v6H2zM8 2h2v6H8zM4 8h4v2H4zM14 12h4v2h-4zM14 18h4v2h-4zM12 14h2v4h-2zM18 14h2v4h-2zM18 2v4h-2v2h2v2h2V2zM14 4V2h-2v8h2V6h2V4zM8 14h2v4H8zM4 14h4v-2H2v8h6v-2H4z",class:"svg-primary"},null,-1)]))}const mo={render:vo},Mo={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function zo(n,e){return r(),u("svg",Mo,e[0]||(e[0]=[p("path",{"fill-rule":"evenodd",d:"M2 2v8h2V8h4v2h2V8H8V6h2V2zm6 4V4H4v2z",class:"svg-primary","clip-rule":"evenodd"},null,-1),p("path",{d:"M18 12h-4v2h4zM18 18h-4v2h4zM14 14h-2v4h2zM20 14h-2v4h2zM20 2h-8v8h8V8h-6V7h6V5h-6V4h6zM10 14H8v4h2zM4 14h4v-2H2v8h6v-2H4z",class:"svg-primary"},null,-1)]))}const wo={render:zo},go={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function _o(n,e){return r(),u("svg",go,e[0]||(e[0]=[p("path",{d:"M2 3v16h4v-2H4V5h2V3H4zM10 3H8v16h4v-2h-2zM20 11V5h-2v4h-2V5h2V3h-4v16h2v-6h2v-2z"},null,-1),p("path",{d:"M18 13h2v6h-2z"},null,-1)]))}const yo={render:_o},bo={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function fo(n,e){return r(),u("svg",bo,e[0]||(e[0]=[p("path",{d:"M4 18H2v2h2zM6 18H4v2h2zM10 14H8v2h2zM12 12h-2v2h2zM4 16H2v2h2zM6 14H4v2h2zM8 16H6v2h2zM8 12H6v2h2zM10 10H8v2h2zM12 4v4h-2v2h2v2h2v-2h4V6h2V2h-4v2z"},null,-1)]))}const Ho={render:fo},xo={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"};function So(n,e){return r(),u("svg",xo,e[0]||(e[0]=[p("path",{d:"M6 8v2h2V8h2V6H8V4h2V2H2v8h2V8zM14 2h-2v2h2v2h-2v2h2v2h2V8h2v2h2V2zM8 16h2v-2H8v-2H6v2H4v-2H2v8h8v-2H8zM16 14v-2h-2v2h-2v2h2v2h-2v2h8v-8h-2v2zM4 10h2v2H4zM10 4h2v2h-2zM16 10h2v2h-2zM10 16h2v2h-2zM10 10h2v2h-2z",class:"svg-primary"},null,-1)]))}const Eo={render:So},ko={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"none"};function Co(n,e){return r(),u("svg",ko,e[0]||(e[0]=[p("path",{fill:"#000",d:"M2 12h2v2H2zM12 2h2v2h-2zM4 10h2v2H4zM14 12h2v2h-2zM6 8h2v2H6zM16 10h2v2h-2zM10 16h2v2h-2z"},null,-1),p("path",{fill:"#000",d:"M10 6h2V4h2v2h2v2h2v2h-2v2h-2v2h-2l-4-4V8h2z"},null,-1),p("path",{fill:"#000",d:"M8 6h2v2H8zM12 14h2v2h-2zM10 4h2v2h-2zM4 14h2v2H4zM14 4h2v2h-2zM6 16h2v2H6zM16 6h2v2h-2zM8 18h2v2H8zM18 8h2v2h-2z"},null,-1)]))}const ge={render:Co},Io=["title"],$o=["id","disabled","name","value","checked"],Oo=["for","title"],Vo=A({__name:"Item",props:{name:{},modelValue:{},title:{},value:{},selected:{type:Boolean},passive:{type:Boolean},disabled:{type:Boolean}},emits:["update:model-value","click"],setup(n,{emit:e}){const o=He(),v={[d.NONE]:void 0,[d.DOTTED_FREEHAND]:void 0,[d.CONTINUOUS_FREEHAND]:void 0,[d.STRAIGHT_LINE]:void 0,[d.CURVE_LINE]:void 0,[d.FILL_TOOL]:void 0,[d.AIR_BRUSH]:void 0,[d.CROP]:void 0,[d.TEXT]:void 0,[d.GRID]:void 0,[d.SPLIT_SCREEN]:void 0,[d.MAGNIFY]:void 0,[d.ZOOM]:void 0,[d.STACK_REDO]:void 0,[d.STACK_UNDO]:void 0,[d.CLEAR]:void 0,[d.COLOR_PICKER]:void 0,[d.ZOOM_FIT]:void 0,[d.IMAGE_OPERATION]:void 0},a={...v,[d.DOTTED_FREEHAND]:g(Jt),[d.CONTINUOUS_FREEHAND]:g(nn),[d.STRAIGHT_LINE]:g(an),[d.CURVE_LINE]:g(hn),[d.FILL_TOOL]:g(un),[d.AIR_BRUSH]:g(mn),[d.RECTANGLE]:g(Nn),[d.CIRCLE]:g(Fn),[d.ELLIPSE]:g(Zn),[d.POLYGON]:g(Xn),[d.CROP]:g(eo),[d.TEXT]:g(oo),[d.GRID]:g(Ve),[d.SPLIT_SCREEN]:g(Ve),[d.MAGNIFY]:g(ro),[d.ZOOM]:g(po),[d.STACK_UNDO]:g(mo),[d.STACK_REDO]:g(wo),[d.CLEAR]:g(yo),[d.COLOR_PICKER]:g(Ho),[d.ZOOM_FIT]:g(Eo),[d.ERASER]:g(ge)},t={...v,[d.RECTANGLE]:g(In),[d.CIRCLE]:g(Vn),[d.ELLIPSE]:g(Rn),[d.POLYGON]:g(An),[d.ERASER]:g(ge)},s={...v,[d.RECTANGLE]:g(wn),[d.CIRCLE]:g(yn),[d.ELLIPSE]:g(Hn),[d.POLYGON]:g(En),[d.ERASER]:g(ge)},l=e,c=n,M=y(()=>c.modelValue?.shapeStyle===D.FILLED&&t[c.value]?t[c.value]:c.modelValue?.shapeStyle===D.STROKED&&s[c.value]?s[c.value]:a[c.value]);function z(m){l("update:model-value",m)}return(m,f)=>m.passive?(r(),u("button",{key:0,title:m.title,class:ie(["wb-disks-extras13-web-paint-tool-select-item",{selected:m.selected}]),onClick:f[0]||(f[0]=_=>l("click",_,m.value))},[(r(),I(he(M.value))),m.disabled?(r(),I(P(ce),{key:0,class:"controls-tools-disabled"})):j("",!0),p("span",null,fe(m.title),1)],10,Io)):(r(),u("div",{key:1,class:ie(["wb-disks-extras13-web-paint-tool-select-item",{selected:m.selected||m.modelValue?.value===m.value}])},[p("input",{id:P(o),disabled:m.disabled,type:"radio",name:m.name,value:m.value,checked:m.modelValue?.value===m.value,onInput:f[1]||(f[1]=_=>z(m.value))},null,40,$o),p("label",{for:P(o),title:m.title},[(r(),I(he(M.value))),m.disabled?(r(),I(P(ce),{key:0,class:"controls-tools-disabled",title:m.title},null,8,["title"])):j("",!0),p("span",null,fe(m.title),1)],8,Oo)],2))}}),To=B(Vo,[["__scopeId","data-v-121b250e"]]),Po=A({__name:"ToolSelect",props:{modelValue:{},app:{}},emits:["update:model-value","click"],setup(n,{emit:e}){const o=n,v=e,a=new le,t=y(()=>Pe({app:o.app,shiftActive:s.value,canRedo:z.value,canUndo:m.value})),s=T(!1);X(()=>{a.add(L.keyDown.subscribe(()=>{s.value=L.shiftActive})),a.add(L.keyUp.subscribe(()=>{s.value=L.shiftActive}))}),Q(()=>{a.unsubscribe()});function l(f){return{...o.app.options.select.tool,value:f,shapeStyle:o.modelValue?.shapeStyle??D.STROKED,segmentLength:o.modelValue?.segmentLength??1,gapLength:o.modelValue?.gapLength??0}}function c(f){v("update:model-value",l(f))}function M(f,_){v("click",f,l(_))}const z=y(()=>o.app.state.stackCount>0&&o.app.state.stackIndex<o.app.state.stackCount-1),m=y(()=>o.app.state.stackIndex>-1&&o.app.state.stackCount>0);return(f,_)=>(r(),I(Se,{class:"wb-disks-extras13-web-paint-tool-select"},{default:xe(()=>[p("ul",null,[(r(!0),u(pe,null,ue(t.value,({passive:S,title:k,selected:b,disabled:$,value:E})=>(r(),u("li",{key:E,class:ie(E)},[G(To,{name:"tool-select",passive:S,title:k,selected:b,disabled:$,value:E,"model-value":o.modelValue,"onUpdate:modelValue":c,onClick:M},null,8,["passive","title","selected","disabled","value","model-value"])],2))),128))])]),_:1}))}}),Ro=B(Po,[["__scopeId","data-v-b656b44b"]]),Do={"data-hook":"colorPaletteItems",class:"style-filled style-scrollbar style-scrollbar-invert"},Lo=["id","name","value","checked","onInput"],Ao=["for"],Bo=A({__name:"ColorSelect",props:{modelValue:{}},emits:["update:model-value"],setup(n,{emit:e}){const o=He(),{core:v}=Ne(),a=n,t=e,s=new le,l=T(),c=T(!0);Y(()=>l.value,b=>{b&&(c.value?z("primaryColor",b):z("secondaryColor",b))}),X(()=>{s.add(L.keyPress.subscribe(b=>{switch(b.key){case V.FUNCTION_9:case V.KEY_X:m();break}}))}),Q(()=>{s.unsubscribe()});const M=y(()=>{const b=a.modelValue.palette.colors;return[new Be({id:"blank",color:new be(0,0,0,0)}),...b]});function z(b,$){t("update:model-value",{...a.modelValue,[b]:$})}function m(){const b=a.modelValue.secondaryColor,$=a.modelValue.primaryColor;t("update:model-value",{...a.modelValue,primaryColor:b,secondaryColor:$})}function f(b){b.preventDefault(),m()}const _=y({get:()=>(v.value.config.get(oe.WEB_PAINT_PALETTES)||[]).map(b=>new ye(b)),set:b=>{v.value.config.set(oe.WEB_PAINT_PALETTES,b)}});function S(){_.value=[..._.value]}function k(b,$){$.setColor(b),S()}return(b,$)=>(r(),I(Se,{class:"wb-disks-extras13-web-paint-color-select"},{default:xe(()=>[p("div",{class:"color-select",onContextmenu:f},[G(we,{class:"secondary center",size:22,readonly:"",embed:"",ratio:11/22,"model-value":a.modelValue.secondaryColor.color},null,8,["model-value"]),G(we,{class:"primary",size:44,readonly:"",embed:"",ratio:22/44,"model-value":a.modelValue.primaryColor.color},null,8,["model-value"])],32),p("ul",Do,[(r(!0),u(pe,null,ue(M.value,E=>(r(),u("li",{key:E.id},[p("input",{id:E.id,type:"radio",name:`${P(o)}-palette-color`,value:E.id,checked:E.equal(l.value),onInput:q=>l.value=E},null,40,Lo),p("label",{for:E.id},[(r(),I(we,{key:E.color.toHex(),size:P(Xe).SEMI,selected:E.equal(l.value),hoverable:!E.equal(l.value),readonly:a.modelValue.palette.locked||!E.equal(l.value),embed:"","model-value":E.color,"onUpdate:modelValue":q=>k(q,E)},null,8,["size","selected","hoverable","readonly","model-value","onUpdate:modelValue"]))],8,Ao)]))),128))])]),_:1}))}}),Wo=B(Bo,[["__scopeId","data-v-73a13778"]]),No={class:"wb-disks-extras13-web-paint-sidebar"},Ko=A({__name:"Sidebar",props:{app:{}},emits:["click:brush","click:tool","click:color"],setup(n,{emit:e}){const o=e;function v(s,l){o("click:brush",s,l)}function a(s,l){o("click:tool",s,l)}function t(s,l){o("click:color",s,l)}return(s,l)=>(r(),u("div",No,[G(jt,{"model-value":s.app.options.select.brush,class:"brush-select","onUpdate:modelValue":l[0]||(l[0]=c=>s.app.setSelectOptions("brush",c)),onClick:v},null,8,["model-value"]),G(Ro,{app:s.app,"model-value":s.app.options.select.tool,class:"tool-select","onUpdate:modelValue":l[1]||(l[1]=c=>s.app.setSelectOptions("tool",c)),onClick:a},null,8,["app","model-value"]),G(Wo,{"model-value":s.app.options.select.color,class:"color-select","onUpdate:modelValue":l[2]||(l[2]=c=>s.app.setSelectOptions("color",c)),onClick:t},null,8,["model-value"])]))}}),Uo=B(Ko,[["__scopeId","data-v-84506e24"]]);function Fo(n,e=2){const o=Math.pow(10,e);return Math.round(n*o)/o}const Yo=A({__name:"Footer",props:{core:{},model:{}},setup(n){const{t:e}=se(),o=n,v=y(()=>{const a=o.model.app.state.layers.find(t=>t.id===o.model.app.state.currentLayerId);return[new i({key:"menuitem-layers",title:e("context_menu.layers.title",{overrides:{name:a?`#${a.order}`:"N/A"}}),items:[...o.model.app.state.layers.map(t=>new i({key:`menuitem-layer-${t.id}`,title:`#${t.order} ${t.name}`,type:O.CUSTOM,value:t.id,options:{checked:t.id===o.model.app.state.currentLayerId},action:()=>{o.model.app.actions.selectLayer(t.id)},items:[new i({key:`menuitem-layer-visible-${t.id}`,type:O.CUSTOM,title:e("context_menu.layers.items.visible.title"),action:()=>{o.model.app.actions.updateLayer(t.id,{visible:!t.visible})},options:{checked:t.visible}}),new H,new i({key:"menuitem-layer-blend-mode",title:e("context_menu.layers.items.blend_mode.title",{overrides:{mode:e(`blend_mode.${t.blendMode}`)}}),items:Object.values(We).map(s=>({title:e(`blend_mode.${s}`),value:s})).map(({title:s,value:l})=>new i({key:`menuitem-layer-blend-mode-${l}`,title:s,type:O.CUSTOM,value:l,options:{checked:t.blendMode===l},action:()=>{o.model.app.actions.updateLayer(t.id,{blendMode:l})}}))}),new H,new i({key:"menuitem-layer-move-up",title:e("context_menu.layers.items.move_up.title"),action:()=>{const s=o.model.app.state.layers,l=s.find(M=>M.order===t.order-1&&M.id!==t.id),c=t.order;l&&(t.order=l.order,l.order=c),s.sort((M,z)=>M.order-z.order),o.model.app.actions.moveLayers(s)},options:{disabled:o.model.app.state.layers.length<=1||o.model.app.state.layers.indexOf(t)===0}}),new i({key:"menuitem-layer-move-down",title:e("context_menu.layers.items.move_down.title"),action:()=>{const s=o.model.app.state.layers,l=s.find(M=>M.order===t.order-1&&M.id!==t.id),c=t.order;l&&(t.order=l.order,l.order=c),s.sort((M,z)=>M.order-z.order),o.model.app.actions.moveLayers(s)},options:{disabled:o.model.app.state.layers.length<=1||o.model.app.state.layers.indexOf(t)===o.model.app.state.layers.length-1}}),new H,new i({key:"menuitem-layer-rename",title:e("context_menu.layers.items.rename.title"),action:async()=>{const{value:s}=await o.model.actions.prompt({text:e("context_menu.layers.items.rename.text"),type:"text",value:t.name});s&&o.model.app.actions.updateLayer(t.id,{name:s})}}),new i({key:"menuitem-layer-remove",title:e("context_menu.layers.items.remove.title"),action:()=>{o.model.app.actions.removeLayer(t.id)},options:{disabled:o.model.app.state.layers.length<=1}}),new i({key:"menuitem-layer-duplicate",title:e("context_menu.layers.items.duplicate.title"),action:()=>{o.model.app.actions.duplicateLayer(t.id)}}),new i({key:"menuitem-layer-merge",title:e("context_menu.layers.items.merge.title"),action:()=>{o.model.app.actions.mergeLayers([t.id])},options:{disabled:t.id===o.model.app.state.currentLayerId}}),new i({key:"menuitem-layer-opacity",title:e("context_menu.layers.items.opacity.title",{overrides:{opacity:Math.round(t.opacity*100)}}),action:async()=>{const{value:s}=await o.model.actions.prompt({text:e("context_menu.layers.items.opacity.text"),value:t.opacity*100,type:"number",min:0,max:100,step:1});s&&o.model.app.actions.updateLayer(t.id,{opacity:Fo(s/100,2)})}})]})),new H,new i({key:"menuitem-add-layer",title:e("context_menu.layers.items.add.title"),action:()=>{o.model.app.actions.addLayer({name:e("context_menu.layers.items.add.default_name"),dimension:o.model.app.currentDocument?.meta.dimension})}}),new i({key:"menuitem-duplicate-layer",title:e("context_menu.layers.items.remove.title"),action:()=>{o.model.app.actions.removeLayer(o.model.app.state.currentLayerId??"")},options:{disabled:o.model.app.state.layers.length<=1||!o.model.app.state.currentLayerId}})]}),new Qe({key:"menuitem-document-name",text:e("context_menu.dimension.text",{overrides:{x:o.model.app.currentDocument?.meta.dimension.x,y:o.model.app.currentDocument?.meta.dimension.y}})}),new Je,new i({key:"menuitem-brush-mode",title:e("context_menu.brush_mode.title",{overrides:{mode:e(`brush_mode.${o.model.app.options.select.brush?.mode}`)}}),items:Object.values(_e).map(t=>({title:e(`brush_mode.${t}`),value:t})).map(({title:t,value:s})=>new i({key:`menuitem-brush-mode-${s}`,title:t,type:O.CUSTOM,value:s,options:{checked:o.model.app.options.select.brush?.mode===s},action:()=>{o.model.app.setSelectOptions("brush",{...o.model.app.options.select.brush,mode:s})}}))}),new H,new i({key:"menuitem-zoom-mode",title:e("context_menu.zoom.title",{overrides:{zoom:o.model.app.currentDisplay?.options.zoomLevel.toFixed(2)||0}}),items:[new i({title:e("context_menu.zoom.items.set_zoom.title"),async action(){const{value:t}=await o.model.actions.prompt({text:e("context_menu.zoom.items.set_zoom.text"),value:o.model.app.currentDisplay?.options.zoomLevel.toFixed(2),type:"number",min:.1,step:.01});t&&o.model.app.currentDisplay?.actions.setZoom(x(0,0),parseFloat(t),!0)}}),new i({title:e("context_menu.zoom.items.fit.title"),action:()=>{o.model.app.currentDisplay?.actions.fitZoom()}}),new H,new i({title:e("context_menu.zoom.items.reset.title"),action:()=>{o.model.app.currentDisplay?.actions.setZoom(x(0,0),0)}})]})]});return(a,t)=>(r(),I(et,{class:"wb-disks-extras13-web-paint-footer",items:v.value,"parent-layout":a.core.modules.windows.contentWrapper.layout},null,8,["items","parent-layout"]))}}),Go=B(Yo,[["__scopeId","data-v-c0ddc9b6"]]),Zo={class:"main-content"},qo=A({__name:"App",props:{core:{},model:{}},async setup(n){let e,o;const{t:v}=se(),a=n;[e,o]=Ke(()=>qe()),e=await e,o(),!e&&a.core?.errorObserver.next(new Error("WebAssembly is not supported in this environment."));const{setContextMenu:t,preserveContextMenu:s}=Ze();t(st,{model:a.model}),s();const l=T(!1);X(async()=>{await a.model.app.ready,l.value=!0,a.core.modules.screen?.cursor.setCurrent($e.CROSSHAIR),a.core.config.get(oe.WEB_PAINT_DEBUG)||window.addEventListener("beforeunload",c)});function c(_){return _.preventDefault(),v("warning.page_change")}Q(()=>{a.core.modules.screen?.cursor.setCurrent(void 0),window.removeEventListener("beforeunload",c)}),Y(()=>a.model.app.options.select.tool,M,{immediate:!0}),Y(()=>a.model.app.options.select.color,M,{}),Y(()=>a.model.app.options.select.brush,M,{});function M(){const _=a.model.app.options.select.tool;if(_?.value){a.model.app.setSelectOptions("tool",_);const S=Ie(_.value);a.model.app.setTool(new S({app:a.model.app,actions:a.model.actions,domEvents:L,options:{}}))}}async function z(_,S){const k=Ie(S.value),b=new k({app:a.model.app,actions:a.model.actions,domEvents:L,options:{}});await b.click(_,S),b.destroy()}Y(()=>a.model.app.options.select.color.primaryColor,({color:_})=>{if(a.core.modules.screen?.cursor.current){const S=a.core.modules.screen.cursor.current;S.options.color=_.toHex(),console.log("Cursor color updated to:",S.options.color)}});function m(){a.core.modules.screen?.cursor.setCurrent($e.CROSSHAIR)}function f(_){_.target&&_.target.closest(".wb-disks-extras13-web-paint")||a.core.modules.screen?.cursor.setCurrent(void 0)}return(_,S)=>(r(),u("div",{ref:"rootEl",class:"wb-disks-extras13-web-paint",onMouseover:m,onMouseout:f},[p("div",Zo,[l.value?(r(),u("div",{key:0,class:ie(["displays",`display-${_.model.app.displays.length}`])},[(r(!0),u(pe,null,ue(_.model.app.displays,(k,b)=>(r(),I(pt,{key:b,core:_.core,"model-value":_.model.app.currentDisplay?.id,display:k,"current-tool":_.model.app.currentTool,model:_.model,"onUpdate:modelValue":S[0]||(S[0]=$=>_.model.app.setDisplay($))},null,8,["core","model-value","display","current-tool","model"]))),128))],2)):j("",!0),G(Go,{core:_.core,model:_.model},null,8,["core","model"])]),l.value?(r(),I(Uo,{key:0,app:_.model.app,"onClick:tool":z},null,8,["app"])):j("",!0)],544))}}),Ni=B(qo,[["__scopeId","data-v-d60e8638"]]);export{Ni as default};

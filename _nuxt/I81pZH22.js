import{e as t,c as i,d as e}from"./B-meQdOw.js";import{S as n,a as s}from"./CrNGlbV0.js";import{d as c}from"./CV0dHcg-.js";var r=function(i){function Action2(t,e){return i.call(this)||this}return t(Action2,i),Action2.prototype.schedule=function(t,i){return this},Action2}(n),intervalProvider_setInterval=function(t,n){for(var s=[],c=2;c<arguments.length;c++)s[c-2]=arguments[c];return setInterval.apply(void 0,i([t,n],e(s)))},intervalProvider_clearInterval=function(t){return clearInterval(t)},o=function(i){function AsyncAction2(t,e){var n=i.call(this,t,e)||this;return n.scheduler=t,n.work=e,n.pending=!1,n}return t(AsyncAction2,i),AsyncAction2.prototype.schedule=function(t,i){var e;if(void 0===i&&(i=0),this.closed)return this;this.state=t;var n=this.id,s=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(s,n,i)),this.pending=!0,this.delay=i,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(s,this.id,i),this},AsyncAction2.prototype.requestAsyncId=function(t,i,e){return void 0===e&&(e=0),intervalProvider_setInterval(t.flush.bind(t,this),e)},AsyncAction2.prototype.recycleAsyncId=function(t,i,e){if(void 0===e&&(e=0),null!=e&&this.delay===e&&!1===this.pending)return i;null!=i&&intervalProvider_clearInterval(i)},AsyncAction2.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(t,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction2.prototype._execute=function(t,i){var e,n=!1;try{this.work(t)}catch(s){n=!0,e=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),e},AsyncAction2.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,e=this.scheduler,n=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,s(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,i.prototype.unsubscribe.call(this)}},AsyncAction2}(r),h=function(){function Scheduler2(t,i){void 0===i&&(i=Scheduler2.now),this.schedulerActionCtor=t,this.now=i}return Scheduler2.prototype.schedule=function(t,i,e){return void 0===i&&(i=0),new this.schedulerActionCtor(this,t).schedule(e,i)},Scheduler2.now=c.now,Scheduler2}(),u=new(function(i){function AsyncScheduler2(t,e){void 0===e&&(e=h.now);var n=i.call(this,t,e)||this;return n.actions=[],n._active=!1,n}return t(AsyncScheduler2,i),AsyncScheduler2.prototype.flush=function(t){var i=this.actions;if(this._active)i.push(t);else{var e;this._active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=i.shift());if(this._active=!1,e){for(;t=i.shift();)t.unsubscribe();throw e}}},AsyncScheduler2}(h))(o),l=u;export{u as a,l as b};

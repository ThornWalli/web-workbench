import{c as E,d as j}from"./D4lI5vpz.js";import{i as S}from"./OAVrZOa6.js";import{S as y}from"./CtlMGvom.js";import{o as A,b as _}from"./Wv4Ty0OG.js";function q(e){e===void 0&&(e={});var t=e.connector,i=t===void 0?function(){return new y}:t,r=e.resetOnError,s=r===void 0?!0:r,C=e.resetOnComplete,g=C===void 0?!0:C,O=e.resetOnRefCountZero,x=O===void 0?!0:O;return function(R){var o,n,u,c=0,f=!1,d=!1,v=function(){n?.unsubscribe(),n=void 0},m=function(){v(),o=u=void 0,f=d=!1},w=function(){var a=o;m(),a?.unsubscribe()};return A(function(a,h){c++,!d&&!f&&v();var b=u=u??i();h.add(function(){c--,c===0&&!d&&!f&&(n=p(w,x))}),b.subscribe(h),!o&&c>0&&(o=new _({next:function(l){return b.next(l)},error:function(l){d=!0,v(),n=p(m,s,l),b.error(l)},complete:function(){f=!0,v(),n=p(m,g),b.complete()}}),S(a).subscribe(o))})(R)}}function p(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var s=new _({next:function(){s.unsubscribe(),e()}});return S(t.apply(void 0,E([],j(i)))).subscribe(s)}}export{q as s};

import{ad as w,j as _,k as v,u as g}from"./D5MpIc4o.js";import{a as $,N as l}from"./CpPyRClI.js";import{N}from"./IFI4et4d.js";import{_ as h,t as r,v as i,$ as R,a0 as b,x as o,i as m,z as c,C as y,D as x}from"./BVOdMTUx.js";import"./CTgiTu_k.js";import"./D4JSo15z.js";import"./DM622SyD.js";import"./CDVn3xLg.js";import"./CiQW3Z2k.js";const k={emits:["refresh"],data:function(){return{noteRenderer:null,svgNode:null,notes:[[["C#","2m"],["C#2","2m"],["C#2","2m."],["C#","1m"],["C#2","1m"],["C#2","1m."],["C#","2n."],["C#2","2n"],["C#2","2n."],["C#2","4n."]],[["","2m"],["","1m"],["","2n"],["","4n"],["","8n"],["","16n"],["","32n"]],[["C4","2m"],["C4","1m"],["C4","2n"],["C4","4n"],["C4","8n"],["C4","16n"],["C4","32n"]],[["C4","2m."],["C4","1m."],["C4","2n."],["C4","4n."],["C4","8n."],["C4","16n."],["C4","32n."]]].flat().map(([e,n])=>new N({note:e,time:n})),durations:[["1m","2m","2n","4n","8n","16n","32n"],["1m","2m","2n","4n.","8n.","16n.","32n."]].flat()}},computed:{visibleNotes(){return this.noteRenderer?this.notes:[]}},mounted(){const e=new DOMParser;window.svgNode=this.svgNode=e.parseFromString($,"image/svg+xml").querySelector("svg"),this.noteRenderer=new l(this.svgNode),this.$nextTick(async()=>{const n=Array.from(this.$el.querySelectorAll("canvas"));await Promise.all(n.map((t,s)=>this.render(t,this.notes[Number(s)]))),this.$emit("refresh")})},methods:{async render(e,n){const t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);const s=await this.noteRenderer.render(n,{colors:{primary:"#ffffff",secondary:"#000000",tertiary:"#ff0000"}});e.width=s.canvas.width,e.height=s.canvas.height,t.drawImage(s.canvas,0,0)}}},S=["width","height"];function B(e,n,t,s,u,d){return r(),i("ul",null,[(r(!0),i(R,null,b(d.visibleNotes,a=>(r(),i("li",{key:a},[o("canvas",{width:e.noteRenderer.dimension.x,height:e.noteRenderer.dimension.y},null,8,S)]))),128))])}const I=h(k,[["render",B],["__scopeId","data-v-299820b6"]]),D={components:{NoteCanvas:I,WbButton:w},props:{..._},emits:[...v,"refresh"],setup(e,n){return{...g(e,n)}},data:function(){return{noteRenderer:new l}},mounted(){console.log("DEBUG",{noteRenderer:this.noteRenderer}),this.$nextTick(()=>{this.$emit("refresh")})}},p=e=>(y("data-v-ec5e3f25"),e=e(),x(),e),E={class:"wb-disks-extras13-synthesizer-debug-notes"},z=p(()=>o("legend",null,"Note Cache",-1)),P=p(()=>o("legend",null,"Notes",-1));function q(e,n,t,s,u,d){const a=m("wb-button"),f=m("note-canvas");return r(),i("div",E,[o("fieldset",null,[z,c(a,{label:`Clear Cache (${e.noteRenderer.cache.size} Bitmaps)`,onClick:n[0]||(n[0]=C=>e.noteRenderer.cache.clear())},null,8,["label"])]),o("fieldset",null,[P,c(f,{onRefresh:n[1]||(n[1]=C=>e.$emit("refresh"))})])])}const O=h(D,[["render",q],["__scopeId","data-v-ec5e3f25"]]);export{O as default};

(window.webpackJsonp=window.webpackJsonp||[]).push([[17,39],{315:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return h}));var r=n(277);function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(t){return Math.atan2(t.y,t.x)+Math.PI}function l(t){var e=window.getComputedStyle(t).transform,n=new DOMMatrix(e);return Math.atan2(n.b,n.a)}function h(t,e){var n=Math.cos(e)*t.x-Math.sin(e)*t.y,c=Math.sin(e)*t.x+Math.cos(e)*t.y;return new r.c(n,c)}},336:function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return y}));var r=n(283),c=function(t){function e(e,n){return t.call(this)||this}return Object(r.e)(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(357).b),o={setInterval:function(t,e){for(var n=[],c=2;c<arguments.length;c++)n[c-2]=arguments[c];var l=o.delegate;return(null==l?void 0:l.setInterval)?l.setInterval.apply(l,Object(r.h)([t,e],Object(r.g)(n))):setInterval.apply(void 0,Object(r.h)([t,e],Object(r.g)(n)))},clearInterval:function(t){var e=o.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},l=n(360),h=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return Object(r.e)(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),o.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;o.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,r=!1;try{this.work(t)}catch(t){r=!0,n=t||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Object(l.a)(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(c),f=n(378),d=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=f.a.now,t}(),v=new(function(t){function e(e,n){void 0===n&&(n=d.now);var r=t.call(this,e,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return Object(r.e)(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(d))(h),y=v},337:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));n(273);var r=n(138),c=n(276),o=n(274),l=n(275);function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var f=function(t){Object(c.a)(n,t);var e=h(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return n}(n(277).b)},453:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return m}));var r=n(138),c=n(139),o=(n(29),n(336)),l=n(318),h=n(324),f=n(344),d={leading:!0,trailing:!1};var v=n(340),y=n(317);function w(t,e,n){void 0===t&&(t=0),void 0===n&&(n=o.a);var r,c=-1;return null!=e&&((r=e)&&Object(y.a)(r.schedule)?n=e:c=e),new v.a((function(e){var r=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;r<0&&(r=0);var o=0;return n.schedule((function(){e.closed||(e.next(o++),0<=c?this.schedule(void 0,c):e.complete())}),r)}))}function O(t,e,n){void 0===e&&(e=o.b),void 0===n&&(n=d);var r=w(t,e);return function(t,e){return void 0===e&&(e=d),Object(l.a)((function(source,n){var r=e.leading,c=e.trailing,o=!1,l=null,d=null,v=!1,y=function(){null==d||d.unsubscribe(),d=null,c&&(j(),v&&n.complete())},w=function(){d=null,v&&n.complete()},O=function(e){return d=Object(f.a)(t(e)).subscribe(Object(h.a)(n,y,w))},j=function(){if(o){o=!1;var t=l;l=null,n.next(t),!v&&O(t)}};source.subscribe(Object(h.a)(n,(function(t){o=!0,l=t,(!d||d.closed)&&(r?j():O(t))}),(function(){v=!0,(!(c&&o&&d)||d.closed)&&n.complete()})))}))}((function(){return r}),n)}var j=n(315),x=n(288),k=n(337),m=function(){function t(e){Object(r.a)(this,t),this.subscriptions=[],this._app=e}return Object(c.a)(t,[{key:"register",value:function(){this.subscriptions.push(x.a.keydown.pipe(O(200)).subscribe(_.bind(this)),x.a.keyup.subscribe(I.bind(this)))}},{key:"unregister",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}},{key:"registerDisplay",value:function(t){}},{key:"unregisterDisplay",value:function(t){}}]),t}();function I(t){switch(t.keyCode){case 17:t.preventDefault(),this.holdCrtl=!1;break;case 18:t.preventDefault(),this.holdAlt=!1}}function _(t){if(this._app.display){var e=1;switch(this.holdAlt&&(e*=10),t.keyCode){case 17:t.preventDefault(),this.holdCrtl=!0;break;case 18:t.preventDefault(),this.holdAlt=!0;break;case 37:t.preventDefault(),this._app.display.offset.x-=e;break;case 38:t.preventDefault(),this._app.display.offset.y-=e;break;case 39:t.preventDefault(),this._app.display.offset.x+=e;break;case 40:t.preventDefault(),this._app.display.offset.y+=e}var n=this._app.display;this._app.display.offset=new k.default(Object(j.b)(n.offset.x,-n.zoomBounds.min.x,n.canvasLayout.naturalSize.x-n.zoomBounds.max.x),Object(j.b)(n.offset.y,-n.zoomBounds.min.y,n.canvasLayout.naturalSize.y-n.zoomBounds.max.y)),this._app.display.renderImageData()}}}}]);
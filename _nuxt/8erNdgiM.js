import{Z as b,j as y,k,u as _,g}from"./D2Od5ZZC.js";import{_ as I,i as v,t as P,v as M,z as A,x as p,y as S}from"./CGxhFLb4.js";import"./CTgiTu_k.js";const $={components:{AtomMarkdown:b},props:{...y},emits:[...k],setup(e,t){const a=_(e,t);return a.setContextMenu(T),a},data(){return{content:["# Clock",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},W={class:"wb-disks-workbench13-clock-info"};function D(e,t,a,r,o,l){const n=v("atom-markdown");return P(),M("div",W,[A(n,{content:o.content},null,8,["content"])])}const H=I($,[["render",D],["__scopeId","data-v-1e6fd1ed"]]),T=({core:e})=>{const{windows:t}=e.modules;return[{title:"Clock",items:[{hotKey:"I",keyCode:73,title:"Info",action(){t.addWindow({title:"Info",component:H,componentData:{},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Clock"})}}]}]};function E(e,t,a,r){e.beginPath(),e.arc(0,0,t-a,0,2*Math.PI,!1),e.fillStyle=r[0],e.fill()}function X(e,t,a){let r;for(r=0;r<60;r++){e.rotate(-Math.PI/2),e.beginPath();const o=0-t+12,l=6;e.moveTo(0,o),e.lineTo(0,o-l),e.rotate(Math.PI/3/5),e.lineWidth=2,e.strokeStyle=a[1],e.stroke()}for(e.rotate(-(Math.PI/3/5)*60),r=0;r<16;r++){e.rotate(-Math.PI/2),e.beginPath();const o=0-t+15,l=6,n=10;e.moveTo(0,o),e.lineTo(0+l/2,o-n/2),e.lineTo(0,o-n),e.lineTo(0-l/2,o-n/2),e.lineTo(0,o),e.rotate(Math.PI/3),e.fillStyle=a[1],e.fill()}e.rotate(-Math.PI/3*16)}function Y(e,t,a,r,o){const l=t.getHours()*(Math.PI*2/12)+Math.PI*2/12*t.getMinutes()/60,n=t.getMinutes()*(Math.PI*2/60),w=t.getSeconds()*(Math.PI*2/60);a.rotate(l),a.drawImage(e[0],-r.x,-r.y,o.x,o.y),a.rotate(-l),a.rotate(n),a.drawImage(e[1],-r.x,-r.y,o.x,o.y),a.rotate(-n),a.rotate(w),a.drawImage(e[2],-r.x,-r.y,o.x,o.y),a.rotate(-w)}function N(e,t,a,r){const l=e/2-5,n=g(()=>l+5);return[(s,d)=>{s.translate(n.x,n.y);const m=3,f=[.5,.34],i=0,h=0;s.beginPath(),s.moveTo(i,h),s.lineTo(i-m,h-d.width/2*f[1]),s.lineTo(i,h-d.width/2*f[0]),s.lineTo(i+m,h-d.width/2*f[1]),s.lineTo(i,h),s.strokeStyle=r[1],s.fillStyle=r[1],s.stroke(),s.fill()},(s,d)=>{s.translate(n.x,n.y);const m=4,f=[.7,.54],i=0,h=0;s.beginPath(),s.moveTo(i,h),s.lineTo(i-m,h-d.width/2*f[1]),s.lineTo(i,h-d.width/2*f[0]),s.lineTo(i+m,h-d.width/2*f[1]),s.lineTo(i,h),s.strokeStyle=r[1],s.fillStyle=r[1],s.stroke(),s.fill()},(s,d)=>{s.translate(n.x,n.y);const m=0,f=.74,i=0,h=0;s.beginPath(),s.moveTo(i,h),s.lineTo(i+m,h-d.width/2*f),s.lineTo(i,h),s.strokeStyle=r[2],s.stroke()},(s,d)=>{s.translate(n.x,n.y),E(s,l,a,r)},(s,d)=>{s.translate(n.x,n.y),X(s,l,r)}].map(s=>{const d=document.createElement("canvas");d.width=e,d.height=t;const m=d.getContext("2d");return m.imageSmoothingEnabled=!1,s(m,d),d})}const B={props:{...y},emits:[...k],setup(e,t){const a=_(e,t);return a.setContextMenu(T),a},data(){return{colors:["#888888","#000000","#FFAA55"],sprites:[],periodPM:!1,interval:null}},computed:{timeAmPm(){return this.periodPM?"PM":"AM"}},unmounted(){window.clearInterval(this.interval)},mounted(){const e=this.$refs.canvas;e.width=this.$el.offsetWidth,e.height=this.$el.offsetHeight,this.sprites=N(e.width,e.height,2,this.colors),this.render(e,e.getContext("2d"))},methods:{render(e,t){const r=e.width/2-5,o=g(()=>r+5),l=g(e.width,e.height);t.imageSmoothingEnabled=!1,t.setTransform(1,0,0,1,0,0),t.translate(o.x,o.y),t.scale(1,1.015),t.beginPath(),t.arc(0,0,r,0,2*Math.PI,!1),t.fillStyle=this.colors[1],t.fill(),t.scale(1,.985);const n=this.sprites,w=s=>{window.requestAnimationFrame(()=>{t.drawImage(n[3],-o.x,-o.y,l.x,l.y),t.drawImage(n[4],-o.x,-o.y,l.x,l.y),t.strokeStyle=this.colors[1],t.setTransform(1,0,0,1,0,0);const d=new Date;this.periodPM=d.getHours()>12,t.translate(o.x,o.y),Y(n,d,t,o,l);const m=t.getImageData(0,0,l.x,l.y),f=m.data;for(let i=0;i<f.length;i+=4){const h=f[Number(i)],u=f[i+1],c=f[i+2];if(!(h===255&&u===170&&c===85)){const C=.2126*h+.7152*u+.0722*c>=50?255:0;.2126*h+.7152*u+.0722*c>=50&&(f[Number(i)]=f[i+1]=f[i+2]=C)}}t.putImageData(m,0,0),s&&s()})};w(()=>{this.interval=window.setInterval(w,1e3)})}}},F={class:"wb-disks-workbench13-clock"},V={ref:"canvas"},j={class:"period"};function q(e,t,a,r,o,l){return P(),M("div",F,[p("canvas",V,null,512),p("span",j,S(l.timeAmPm),1)])}const J=I(B,[["render",q],["__scopeId","data-v-ae7801c5"]]);export{J as default};

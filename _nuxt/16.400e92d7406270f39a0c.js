(window.webpackJsonp=window.webpackJsonp||[]).push([[16,28,37],{255:function(t,e,n){"use strict";n.r(e);n(108);var r=n(237),h=n(238),c=n(244),o=n(245),d=n(269),l=Object(o.a)("red"),f=Object(o.a)("green"),v=Object(o.a)("blue"),_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Object(r.a)(this,t),Object.defineProperty(this,l,{writable:!0,value:0}),Object.defineProperty(this,f,{writable:!0,value:0}),Object.defineProperty(this,v,{writable:!0,value:0}),this.set(e,n,h,c)}return Object(h.a)(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Array.isArray(t)&&(r=t[3],n=t[2],e=t[1],t=t[0]),this.red=t,this.green=e,this.blue=n,this.alpha=void 0===r?255:r}},{key:"toRGB",value:function(){return"rgb(".concat(Object(c.a)(this,l)[l],",").concat(this._green,",").concat(this._blue,")")}},{key:"toRGBA",value:function(){return"rgba(".concat(Object(c.a)(this,l)[l],",").concat(this._green,",").concat(this._blue,",").concat(this._alpha/255,")")}},{key:"toJSON",value:function(){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}}},{key:"is",value:function(t){return this.red===t.red&&this.blue===t.blue&&this.green===t.green&&this.alpha===t.alpha}},{key:"invert",value:function(){return Object(c.a)(this,l)[l]=255-Object(c.a)(this,l)[l],this._green=255-this._green,this._blue=255-this._blue,this}},{key:"add",value:function(t){this.red=Object(d.b)(this.red+t.red,0,255),this.green=Object(d.b)(this.green+t.green,0,255),this.blue=Object(d.b)(this.blue+t.blue,0,255)}},{key:"subtract",value:function(t){this.red=Object(d.b)(this.red-t.red,0,255),this.green=Object(d.b)(this.green-t.green,0,255),this.blue=Object(d.b)(this.blue-t.blue,0,255)}},{key:"multiply",value:function(t){this.red=Object(d.b)(this.red*t.red,0,255),this.green=Object(d.b)(this.green*t.green,0,255),this.blue=Object(d.b)(this.blue*t.blue,0,255)}},{key:"divide",value:function(t){this.red=Object(d.b)(this.red/t.red,0,255),this.green=Object(d.b)(this.green/t.green,0,255),this.blue=Object(d.b)(this.blue/t.blue,0,255)}},{key:"r",get:function(){return Object(c.a)(this,l)[l]}},{key:"red",get:function(){return Object(c.a)(this,l)[l]},set:function(t){Object(c.a)(this,l)[l]=Object(d.b)(t,0,255)}},{key:"g",get:function(){return this._green}},{key:"green",get:function(){return this._green},set:function(t){this._green=Object(d.b)(t,0,255)}},{key:"blue",get:function(){return this._blue},set:function(t){this._blue=Object(d.b)(t,0,255)}},{key:"b",get:function(){return this._blue}},{key:"a",get:function(){return this._alpha}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=Object(d.b)(t,0,255)}},{key:"sum",get:function(){return Object(c.a)(this,l)[l]+this._blue+this._green+this._alpha}}]),t}();_.COLOR_BLACK=[0,0,0,255],_.COLOR_WHITE=[255,255,255,255],_.COLOR_TRANSPARENT=[0,0,0,0],e.default=_},269:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return d}));var r=n(243);function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function c(t){return Math.atan2(t.y,t.x)+Math.PI}function o(t){var e=window.getComputedStyle(t).transform,n=new DOMMatrix(e);return Math.atan2(n.b,n.a)}function d(t,e){var n=Math.cos(e)*t.x-Math.sin(e)*t.y,h=Math.sin(e)*t.x+Math.cos(e)*t.y;return new r.c(n,h)}},290:function(t,e,n){"use strict";n.r(e),function(t){n(31),n(40),n(246),n(11),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(32);var r=n(237),h=n(238),c=n(243),o=n(255),d=n(291),l=function(){function e(t){Object(r.a)(this,e),this._app=t;var n=t.options.size;this._bitmapData=new d.default(n.width,n.height),this._renderActions=[],this._passiveRenderActions=[],this.clearStack()}return Object(h.a)(e,[{key:"getActiveContext",value:function(){return this._app.display.context}},{key:"getDisplayContexts",value:function(){return this._app.displays.map((function(t){return t.context}))}}],[{key:"invertImageData",value:function(t){for(var i=0,e=0;e<t.width;e++)for(var n=0;n<t.height;n++)i=4*(e+n*t.width),t.data[Number(i)]=255-t.data[Number(i)],t.data[i+1]=255-t.data[i+1],t.data[i+2]=255-t.data[i+2]}},{key:"createImageData",value:function(e,n,data){return new t.ImageData(new t.Uint8ClampedArray(data||4*e*n),e,n)}},{key:"resizeImageData",value:function(t){for(var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,h=t.data,o=t.width,h1=t.height,d=o*r,h2=h1*r,l=Array(d*h2*4),v=Object(c.e)(parseInt((o<<16)/d)+1,parseInt((h1<<16)/h2)+1),i=0;i<h2;i++)for(var _=0;_<d;_++)n=_*v.x>>16,f(4*((i*v.y>>16)*o+n),h,4*(i*d+_),l);return e.createImageData(d,h2,l)}},{key:"cropImageData",value:function(t,n,r,h,c){for(var o=t.data,d=Array(h*c*4),i=0;i<h;i++)for(var l=0;l<c;l++){f(4*(r*t.width+n)+4*(l*t.width+i),o,4*(l*h+i),d)}return e.createImageData(h,c,d)}}]),Object(h.a)(e,[{key:"setSize",value:function(t,e){this._bitmapData=new d.default(t,e),this.clearStack(),this.render(),this._app.refresh()}},{key:"loadImage",value:function(image){var t=this.getImageDataFromImage(image);this._bitmapData=new d.default(t.width,t.height),this.clearStack(),this._stacks.push(t),this.render(),this._app.refresh()}},{key:"getImageDataFromImage",value:function(image){var canvas=document.createElement("canvas");canvas.width=image.width,canvas.height=image.height;var t=canvas.getContext("2d");t.drawImage(image,0,0);for(var n=e.createImageData(image.width,image.height),data=t.getImageData(0,0,canvas.width,canvas.height),i=0;i<data.length;i++)n.data[Number(i)]=data[Number(i)];return data}},{key:"getColorFromPixel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?this._renderImageData:this._stacks[this._stacks.length-1||0],data=r.data,h=e*(4*r.width)+4*t;return new o.default(data[Number(h)],data[h+1],data[h+2],data[h+3])}},{key:"getPixel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?this._renderImageData:this._stacks[this._stacks.length-1||0],data=r.data,h=e*(4*r.width)+4*t;return data[Number(h)]+data[h+1]+data[h+2]+data[h+3]}},{key:"setPixel",value:function(t,e,n){n=n||this._app.primaryColor;var i=4*(t+e*this._renderImageData.width);this._renderImageData.data[i+0]=n.red,this._renderImageData.data[i+1]=n.green,this._renderImageData.data[i+2]=n.blue,this._renderImageData.data[i+3]=n.alpha>=0?n.alpha:255}},{key:"putImageData",value:function(t,e,n){for(var r,h,c=0;c<t.width;c++)for(var o=0;o<t.height;o++)r=4*(o*t.width+c),h=4*((n+o)*this._renderImageData.width+(e+c)),f(r,t.data,h,this._renderImageData.data)}},{key:"fillPixels",value:function(t,e,n,r,h){for(var c=e;c<Math.min(e+r,this._renderImageData.width);c++)for(var o=n;o<Math.min(n+h,this._renderImageData.height);o++)this.setPixel(c,o,t)}},{key:"addRenderAction",value:function(t){this._renderActions.push(t)}},{key:"addPassiveRenderAction",value:function(t){this._passiveRenderActions.push(t)}},{key:"cleanPassiveRenderActions",value:function(){this._passiveRenderActions=[]}},{key:"getTmpStack",value:function(){return e.createImageData(this._stacks[this._stacks.length-1].width,this._stacks[this._stacks.length-1].height,this._stacks[this._stacks.length-1].data)}},{key:"render",value:function(){var e=this;this._renderImageData=this.getTmpStack(),m(this._renderActions),m(this._passiveRenderActions,!0),t.cancelAnimationFrame(this._renderWait),this._renderWait=t.setTimeout((function(){_.bind(e)(!0),e._renderWait=null}),1e3/30),t.clearTimeout(this._renderWaitDisplays),this._renderWaitDisplays=t.setTimeout((function(){_.bind(e)()}),300)}},{key:"clearStack",value:function(){this._renderImageData=e.createImageData(this._bitmapData.width,this._bitmapData.height),this._stacks=[this._renderImageData],this.render()}},{key:"saveStack",value:function(){this._renderImageData=this.getTmpStack(),m(this._renderActions,!0),this._stacks.push(this._renderImageData),this.render()}},{key:"revertStack",value:function(){this._stacks.length>1&&(this._renderImageData=this._stacks.pop(),this.render())}},{key:"toBlob",value:function(){var t=this;return new Promise((function(e){v(t._renderImageData).toBlob(e)}))}},{key:"toBase64",value:function(){var t=this;return new Promise((function(e){e(v(t._renderImageData).toDataURL())}))}},{key:"size",get:function(){return Object(c.e)(this._renderImageData.width,this._renderImageData.height)}},{key:"width",get:function(){return this._renderImageData.width}},{key:"height",get:function(){return this._renderImageData.height}},{key:"stacks",get:function(){return this._stacks}},{key:"renderImageData",get:function(){return this._renderImageData}}]),e}();function f(t,e,n,r){r[Number(n)]=e[Number(t)],r[n+1]=e[t+1],r[n+2]=e[t+2],r[n+3]=e[t+3]}function v(t){var canvas=document.createElement("canvas");return canvas.width=t.width,canvas.height=t.height,canvas.getContext("2d").putImageData(t,0,0),canvas}function _(t){var e=this;t?this._app.display&&(this._app.display.imageData=this._renderImageData):this._app.displays.forEach((function(t){t.imageData=e._renderImageData}))}function m(t,e){if(e)for(;t.length>0;)t.shift()();else t.forEach((function(t){t()}))}e.default=l}.call(this,n(33))},291:function(t,e,n){"use strict";n.r(e);var r=n(237),h=n(238),c=n(244),o=n(245),d=n(243),l=Object(o.a)("size"),f=function(){function t(e,n){Object(r.a)(this,t),Object.defineProperty(this,l,{writable:!0,value:Object(d.e)(0,0)}),Object(c.a)(this,l)[l]=Object(d.e)(e,n)}return Object(h.a)(t,[{key:"width",get:function(){return Object(c.a)(this,l)[l].x}},{key:"height",get:function(){return Object(c.a)(this,l)[l].y}},{key:"size",get:function(){return Object(c.a)(this,l)[l]}}]),t}();e.default=f}}]);
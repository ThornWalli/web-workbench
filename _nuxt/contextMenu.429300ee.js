import{al as I,_ as y,V as O,ad as T,e as o,ao as a,Q as _,ap as w,aq as C,X as p,am as D}from"./index.a8b6d80e.js";import{_ as S,f as k,k as g,l as x,q as F}from"./entry.33aedf95.js";const M={components:{AtomMarkdown:I},mixins:[y],props:{model:{type:Object,default(){return{value:O()}}}},data(){return{content:["# Document Editor",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}},computed:{contextMenu(){return new T(b,{core:this.core,model:this.model})}}},h={class:"wb-disks-workbench13-document-editor-info"};function N(e,n,u,m,c,d){const r=k("atom-markdown");return g(),x("div",h,[F(r,{content:c.content},null,8,["content"])])}const P=S(M,[["render",N],["__scopeId","data-v-4e6afa7f"]]),b=({model:e,core:n})=>{const{windows:u}=n.modules;return[{order:0,title:"Document Editor",items:[{title:"New",hotKey:"N",keyCode:78,action:d},{title:"Open…",hotKey:"O",keyCode:79,action:c},{title:"Save",hotKey:"S",keyCode:83,action:r},{title:"Save As…",action:v},{separator:!0},{hotKey:"I",keyCode:73,title:"Info",action:E},{title:"Close",action:m}]},{order:1,title:"Document Settings",items:[{title:"Open maximized",type:o.CHECKBOX,name:a.OPEN_MAXIMIZED,model:e.value},{title:"Output Format",items:[{title:"Markdown",type:o.RADIO,name:a.OUTPUT_TYPE,value:"markdown",model:e.value},{title:"HTML",type:o.RADIO,name:a.OUTPUT_TYPE,value:"html",model:e.value}]},{title:"Font Family",items:Object.keys(_).map(t=>{const i=_[String(t)];return{title:w[String(t)],items:Object.keys(i).map(s=>{const l=i[String(s)];return{title:s,type:o.RADIO,name:a.FONT_FAMILY,value:l,model:e.value}})}})},{title:"Font Size",items:C.map(t=>({title:`${t}px`,type:o.RADIO,name:a.FONT_SIZE,value:t,model:e.value}))}]},{order:2,title:"Preview",type:o.CHECKBOX,name:p.DOCUMENT_EDITOR_SHOW_PREVIEW,model:n.config.observable,action(t){return n.config.set(p.DOCUMENT_EDITOR_SHOW_PREVIEW,t)}}];function m(){return e.actions.close()}async function c(){const t=await n.executeCommand("openFileDialog");if(t)if("content"in t.value)e.fsItem=t.fsItem,e.value=Object.assign(e.value,O(),t.value);else throw new Error("Can't read file content")}function d(){e.actions.reset()}function r(){return f()}function v(){return f(!0)}async function f(t=!1){const i=await D(JSON.stringify(e.value));let s;if(!t&&e.fsItem)return s=await n.executeCommand(`editfile "${e.fsItem.getPath()}" --data="${i}"`),s?n.executeCommand('openDialog "File saved."'):n.executeCommand('openDialog "File could not be saved."');{const l={html:"html",markdown:"md"}[String(e.value[a.OUTPUT_TYPE])];return e.fsItem=await n.executeCommand(`saveFileDialog --data="${i}" --extension="${l}"`),e.fsItem}}function E(){u.addWindow({title:"Info",component:P,componentData:{model:e},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentEditor"})}};export{b as c};

(window.webpackJsonp=window.webpackJsonp||[]).push([[14,19,32,33,34,45,46],{117:function(r,t,e){"use strict";e.r(t),e.d(t,"default",(function(){return l}));var n=e(80),h=e(75),o=e(76),c=e(82);class l extends c.default{constructor(r){super(r),this.status=0,this.locked=!1}refreshHelperOffset(){this.primaryHelper&&(this.primaryHelperOffset=[this.primaryHelper.x-this.primaryAnchor.x,this.primaryHelper.y-this.primaryAnchor.y]),this.secondaryHelper&&(this.secondaryHelperOffset=[this.secondaryHelper.x-this.secondaryAnchor.x,this.secondaryHelper.y-this.secondaryAnchor.y])}onPointerDown(r){if(this.moved||this.reset(),!this.locked){this.locked=!0,1===this.anchors.length&&this.reset();var t=this.getAnchorByPosition(r.x,r.y);if(t&&this.selectedAnchor!==t)this.selectedAnchor=t;else{if(2===this.status&&!t)return y.bind(this)();1===this.status?d.bind(this)():this.selectedAnchor||(this.addAnchor(r.x,r.y),this.selectedAnchor=this.addAnchor(r.x,r.y))}return this._app.canvas.addPassiveRenderAction(()=>{this.render(!0),this.locked=!1}),{render:!0}}}get primaryAnchor(){return this.anchors[0]}get secondaryAnchor(){return this.anchors[1]}get primaryHelper(){return this.anchors[2]}get secondaryHelper(){return this.anchors[3]}onPointerUp(){if(this.status<3&&0===this.status)return this.selectedAnchor=null,this.status++,this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}}onPointerMove(r,t){if(t.pressed&&this.selectedAnchor)return this.moved=!0,this.selectedAnchor.x=r.x,this.selectedAnchor.y=r.y,this.selectedAnchor===this.primaryAnchor&&this.primaryHelper?(this.primaryHelper.x=this.selectedAnchor.x+this.primaryHelperOffset[0],this.primaryHelper.y=this.selectedAnchor.y+this.primaryHelperOffset[1]):this.selectedAnchor===this.secondaryAnchor&&this.secondaryHelper?(this.secondaryHelper.x=this.selectedAnchor.x+this.secondaryHelperOffset[0],this.secondaryHelper.y=this.selectedAnchor.y+this.secondaryHelperOffset[1]):this.selectedAnchor!==this.primaryHelper&&this.selectedAnchor!==this.secondaryHelper||this.refreshHelperOffset(),this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}}addPoints(r){r.forEach(r=>{this.points[Object(n.b)(r[0]-1,0,this._app.canvas.width-1)][Object(n.b)(r[1]-1,0,this._app.canvas.height-1)]=!0})}render(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.status>1?Object(h.curve)((r,t)=>{var data=[].concat(this._brush.data);o.default.drawBrush({color:this._brush.primaryColor,data:data,x:r,y:t,app:this._app})},this.primaryAnchor.x,this.primaryAnchor.y,this.primaryHelper.x,this.primaryHelper.y,this.secondaryHelper.x,this.secondaryHelper.y,this.secondaryAnchor.x,this.secondaryAnchor.y):Object(h.line)((r,t)=>{var data=[].concat(this._brush.data);c.default.drawBrush({color:this._brush.primaryColor,data:data,x:r,y:t,app:this._app})},this.primaryAnchor.x,this.primaryAnchor.y,this.secondaryAnchor.x,this.secondaryAnchor.y,{}),r&&(this.primaryHelper&&Object(h.line)((r,t)=>{var e=this._app.canvas.getColorFromPixel(r,t);0===e.alpha?e=this.anchorBrush.primaryColor:e.invert();var data=[].concat(this.anchorBrush.data);c.default.drawBrush({color:e,data:data,x:r,y:t,app:this._app})},this.primaryAnchor.x,this.primaryAnchor.y,this.primaryHelper.x,this.primaryHelper.y,{}),this.secondaryHelper&&Object(h.line)((r,t)=>{var e=this._app.canvas.getColorFromPixel(r,t);0===e.alpha?e=this.anchorBrush.primaryColor:e.invert();var data=[].concat(this.anchorBrush.data);c.default.drawBrush({color:e,data:data,x:r,y:t,app:this._app})},this.secondaryAnchor.x,this.secondaryAnchor.y,this.secondaryHelper.x,this.secondaryHelper.y,{}),this.drawAnchors())}reset(){c.default.prototype.reset.apply(this,arguments),this.status=0,this.locked=!1}intersect(r,t){for(var e=[[0,0],[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],i=0;i<e.length;i++)if(this.points[r+e[Number(i)][0]][t+e[Number(i)][1]])return!0;return!1}}function d(){var r=f(this.primaryAnchor,this.secondaryAnchor);this.addAnchor(r[0],r[1]),r=f(this.secondaryAnchor,this.primaryAnchor),this.addAnchor(r[0],r[1]),this.refreshHelperOffset(),this._app.canvas.addPassiveRenderAction(()=>{this.render(!0),this.locked=!1}),this.status++}function y(){return this._app.canvas.addRenderAction(()=>{this.render(!1),this.reset()}),{events:!1,save:!0,render:!0}}function f(r,t){var e=Object(h.getLinePoints)(r.x,r.y,t.x,t.y);return e[Math.floor(e.length/4)]}},75:function(r,t,e){"use strict";function n(r,t,e,n){for(var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=Math.abs(e-r),c=r<e?1:-1,l=Math.abs(n-t),d=t<n?1:-1,y=(o>l?o:-l)/2,f=[],i=0;0===h||i>=1?(f.push([r,t]),i=0):i+=1/h,r!==e||t!==n;){var v=y;v>-o&&(y-=l,r+=c),v<l&&(y+=o,t+=d)}return f}function line(r,t,e,h,o,c){var{density:l=0}=c;n(t,e,h,o,l).forEach(t=>{r(t[0],t[1])})}function h(r,t,e,n,h,o,c,l,d){var y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:.001,f=0,v=0,u=0;for(u=0;u<=1;u+=y)f=(1-u)**3*t+3*u*(1-u)**2*n+3*u**2*(1-u)*o+u**3*l,v=(1-u)**3*e+3*u*(1-u)**2*h+3*u**2*(1-u)*c+u**3*d,r(parseInt(f),parseInt(v))}function o(r,t,e,n,h,o){var{strokeSize:c=0,filled:l=!1,density:d}=o;if(l)for(var y=(t,e)=>r(t,e,!0),i=e;h<0?i>=e+h:i<=e+h;h<0?i--:i++)line(y,t,i,t+n,i,{density:d});if(c>0){c=Math.floor(c/2);var f=[t-(c=[n<0?-c:c,h<0?-c:c])[0],e-c[1]];[[t-c[0],e-c[1]],[t-c[0],e+h+c[1]],[t+n+c[0],e+h+c[1]],[t+n+c[0],e-c[1]],f].forEach(t=>{line(r,f[0],f[1],t[0],t[1],{density:d}),f=t})}}function ellipse(r,t,e,n,h,o){var{filled:c=!1,density:l=0}=o;n<0&&(n=Math.abs(n)),h<0&&(h=Math.abs(h));var d,y,f,v=n*n,m=h*h,_=4*v,A=4*m,i=0,x=(t,e)=>r(t,e,!0),O=[];for(d=0,y=h,f=2*m+v*(1-2*h);m*d<=v*y;d++)!l||i>=1?(O.push([t+d,e+y]),O.push([t-d,e-y]),O.push([t-d,e+y]),O.push([t+d,e-y]),i=0):i+=1/l,f>=0&&(f+=_*(1-y),y--),f+=m*(4*d+6);for(i=0,d=n,y=0,f=2*v+m*(1-2*n);v*y<=m*d;y++)!l||i>=1?(O.push([t+d,e+y]),O.push([t-d,e+y]),O.push([t+d,e-y]),O.push([t-d,e-y]),i=0):i+=1/l,f>=0&&(f+=A*(1-d),d--),f+=v*(4*y+6);if(c)for(var N=-h;N<=h;N++)for(var M=-n;M<=n;M++)M*M*h*h+N*N*n*n<=h*h*n*n&&x(t+M,e+N);O.forEach(t=>{r(t[0],t[1])})}function polygon(r,t,e,n){var h,{strokeSize:o=0,filled:l=!1,density:d=0}=n,y=Number.MAX_VALUE,f=Number.MAX_VALUE,v=Number.MIN_VALUE,m=Number.MIN_VALUE;if(t.forEach(t=>{h&&(t.x>v&&(v=t.x),t.y>m&&(m=t.y),t.x<y&&(y=t.x),t.y<f&&(f=t.y),line(r,h.x,h.y,t.x,t.y,{density:d})),h=t}),e){var _=t[0];h&&(_.x>v&&(v=_.x),_.y>m&&(m=_.y),_.x<y&&(y=_.x),_.y<f&&(f=_.y),line(r,h.x,h.y,_.x,_.y,{density:d}))}if(l){c((t,e)=>r(t,e,!0),t,{IMAGE_LEFT:y,IMAGE_TOP:f,IMAGE_RIGHT:v,IMAGE_BOTTOM:m})}}function c(r,t,e){var n,{IMAGE_LEFT:h=0,IMAGE_TOP:o=0,IMAGE_RIGHT:c,IMAGE_BOTTOM:l}=e,d=[],y=[];t.forEach(polygon=>{d.push(polygon.y),y.push(polygon.x)});var f,v,i,m,_,A=Array(t.length);for(v=o;v<l;v++){for(n=0,m=t.length-1,i=0;i<t.length;i++)(d[Number(i)]<v&&d[Number(m)]>=v||d[Number(m)]<v&&d[Number(i)]>=v)&&(A[n++]=Math.round(y[Number(i)]+(v-d[Number(i)])/(d[Number(m)]-d[Number(i)])*(y[Number(m)]-y[Number(i)]))),m=i;for(i=0;i<n-1;)A[Number(i)]>A[i+1]?(_=A[Number(i)],A[Number(i)]=A[i+1],A[i+1]=_,i&&i--):i++;for(i=0;i<n&&!(A[Number(i)]>=c);i+=2)if(A[i+1]>h)for(A[Number(i)]<h&&(A[Number(i)]=h),A[i+1]>c&&(A[i+1]=c),f=A[Number(i)];f<A[i+1];f++)r(f,v)}}e.r(t),e.d(t,"getLinePoints",(function(){return n})),e.d(t,"line",(function(){return line})),e.d(t,"curve",(function(){return h})),e.d(t,"rectangle",(function(){return o})),e.d(t,"ellipse",(function(){return ellipse})),e.d(t,"polygon",(function(){return polygon})),e.d(t,"fillPolygon",(function(){return c}))},76:function(r,t,e){"use strict";e.r(t),e.d(t,"default",(function(){return h}));var n=e(77);class h extends n.default{constructor(r){super(r),this._brush=r.brush}get brush(){return this._brush}set brush(r){this._brush=r}static drawBrush(r){var{x:t,y:e,data:data,app:n,color:h}=r;t=Math.floor(t-data[0].length/2+1),e=Math.floor(e-data.length/2);for(var o=[],i=0;i<data[0].length;i++)for(var c=0;c<data.length;c++)data[Number(c)][Number(i)]>0&&h.alpha?(n.canvas.setPixel(t+i,e+c,h),o.push([t+i,e+c])):data[Number(c)][Number(i)]<0&&n.canvas.setPixel(t+i,e+c);return o}}},77:function(r,t,e){"use strict";function n(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}e.r(t),e.d(t,"default",(function(){return c}));var h=0;var o="__private_"+h+++"_"+"pointerDownHold";class c{constructor(r){Object.defineProperty(this,o,{writable:!0,value:!1}),this._app=r.app,this.passive=r.passive||!1,n(this,o)[o]=r.pointerDownHold||!1}get pointerDownHold(){return n(this,o)[o]}deconstructor(){}onActive(){}onPointerDown(){}onPointerUp(){}onPointerMove(){}onContextMenu(){}get app(){return this._app}get setPixel(){return this._app.activeDisplay.setPixel}}},79:function(r,t,e){"use strict";e.r(t);var n=e(80);function h(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var o=0;function c(r){return"__private_"+o+++"_"+r}var l=c("red"),d=c("green"),y=c("blue");class f{constructor(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Object.defineProperty(this,l,{writable:!0,value:0}),Object.defineProperty(this,d,{writable:!0,value:0}),Object.defineProperty(this,y,{writable:!0,value:0}),this.set(r,t,e,n)}set(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Array.isArray(r)&&(n=r[3],e=r[2],t=r[1],r=r[0]),this.red=r,this.green=t,this.blue=e,this.alpha=void 0===n?255:n}get r(){return h(this,l)[l]}get red(){return h(this,l)[l]}set red(r){h(this,l)[l]=Object(n.b)(r,0,255)}get g(){return this._green}get green(){return this._green}set green(r){this._green=Object(n.b)(r,0,255)}get blue(){return this._blue}get b(){return this._blue}set blue(r){this._blue=Object(n.b)(r,0,255)}get a(){return this._alpha}get alpha(){return this._alpha}set alpha(r){this._alpha=Object(n.b)(r,0,255)}get sum(){return h(this,l)[l]+this._blue+this._green+this._alpha}toRGB(){return"rgb(".concat(h(this,l)[l],",").concat(this._green,",").concat(this._blue,")")}toRGBA(){return"rgba(".concat(h(this,l)[l],",").concat(this._green,",").concat(this._blue,",").concat(this._alpha/255,")")}toJSON(){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}}is(r){return this.red===r.red&&this.blue===r.blue&&this.green===r.green&&this.alpha===r.alpha}invert(){return h(this,l)[l]=255-h(this,l)[l],this._green=255-this._green,this._blue=255-this._blue,this}add(r){this.red=Object(n.b)(this.red+r.red,0,255),this.green=Object(n.b)(this.green+r.green,0,255),this.blue=Object(n.b)(this.blue+r.blue,0,255)}subtract(r){this.red=Object(n.b)(this.red-r.red,0,255),this.green=Object(n.b)(this.green-r.green,0,255),this.blue=Object(n.b)(this.blue-r.blue,0,255)}multiply(r){this.red=Object(n.b)(this.red*r.red,0,255),this.green=Object(n.b)(this.green*r.green,0,255),this.blue=Object(n.b)(this.blue*r.blue,0,255)}divide(r){this.red=Object(n.b)(this.red/r.red,0,255),this.green=Object(n.b)(this.green/r.green,0,255),this.blue=Object(n.b)(this.blue/r.blue,0,255)}}f.COLOR_BLACK=[0,0,0,255],f.COLOR_WHITE=[255,255,255,255],f.COLOR_TRANSPARENT=[0,0,0,0],t.default=f},80:function(r,t,e){"use strict";e.d(t,"b",(function(){return h})),e.d(t,"d",(function(){return o})),e.d(t,"c",(function(){return c})),e.d(t,"a",(function(){return l}));var n=e(74);function h(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(r,t),e)}function o(r){return Math.atan2(r.y,r.x)+Math.PI}function c(r){var t=window.getComputedStyle(r).transform,e=new DOMMatrix(t);return Math.atan2(e.b,e.a)}function l(r,t){var e=Math.cos(t)*r.x-Math.sin(t)*r.y,h=Math.sin(t)*r.x+Math.cos(t)*r.y;return new n.c(e,h)}},82:function(r,t,e){"use strict";e.r(t),e.d(t,"default",(function(){return l})),e.d(t,"Anchor",(function(){return d}));var n=e(75),h=e(79),o=e(84),c=e(76);class l extends c.default{constructor(r){super(r),this.COLOR_TRANSPARENT=new h.default(h.default.COLOR_TRANSPARENT),this.filled=!1,this.selectedAnchor=null,this.anchors=[],this.anchorBrush=new(Object(o.getBrushByIndex)(0))({app:this._app,size:1,primaryColor:new h.default(h.default.COLOR_BLACK),secondaryColor:new h.default(h.default.COLOR_WHITE)})}onPointerDown(r){this.startEvent=r}drawAnchors(){var data=[].concat(this.anchorBrush.data);this.anchors.forEach(r=>{this.drawAnchor(r,data)})}drawAnchor(r,data){r.intersectMap={},Object(n.rectangle)((t,e,n)=>{var h=this._app.canvas.getColorFromPixel(t,e);0===h.alpha?h=n?this.anchorBrush.secondaryColor:this.anchorBrush.primaryColor:h.invert(),r.intersectMap[Number(t)]=r.intersectMap[Number(t)]||{},r.intersectMap[Number(t)][Number(e)]=!0,c.default.drawBrush({color:h,data:data,x:t,y:e,app:this._app})},r.x-5,r.y-5,10,10,{strokeSize:1,filled:!0})}getAnchorByPosition(r,t){return this.anchors.find(e=>!!e.intersectAnchor(r,t)&&e)}addAnchor(r,t){var e=new d(r,t,this.anchorBrush);return this.anchors.push(e),e}reset(){this.anchors=[],this.selectedAnchor=null}}class d{constructor(r,t,e){this.x=r,this.y=t,this.brush=e}intersectAnchor(r,t){return this.intersectMap&&this.intersectMap[Number(r)]&&this.intersectMap[Number(r)][Number(t)]}}},84:function(r,t,e){"use strict";e.r(t),e.d(t,"getBrushByIndex",(function(){return y}));var n=e(75);class h{constructor(r){var{app:t,size:e=1,lowres:n=!0,primaryColor:h,secondaryColor:o}=r;this._app=t,this._size=e,this._lowres=n,this._data=this.getScaledData(this._size),this._primaryColor=h,this._secondaryColor=o}get lowres(){return this._lowres}get data(){return this._data}get size(){return this._size}set size(r){void 0===r&&(r=1),this._size=r,this._data=this.getScaledData(this._size)}get primaryColor(){return this._primaryColor||this._app.primaryColor}get secondaryColor(){return this._secondaryColor||this._app.secondaryColor}getData(r){return h.scale([],r)}getScaledData(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h.scale(this.getData(r),this._app.density)}static scale(data,r){for(var t=[],e=0;e<data.length*r;e++){t.push([]);for(var n=0;n<data[0].length*r;n++)t[Number(e)].push(data[Math.floor(e/r)][Math.floor(n/r)])}return t}static scaleAsCopy(data,r){for(var t=[],e=0;e<data.length*r;e++){t.push([]);for(var n=0;n<data[0].length*r;n++)t[Number(e)].push(data[e%data.length][n%data[0].length])}return t}}class o extends h{getData(r){return r>1?c(r):r?[[1]]:[]}}function c(r){r=2*(r-1);for(var data=Array(r+1),i=0;i<r+1;i++)data[Number(i)]=Array(r+1).fill(0);return n.ellipse((r,t)=>{data[Math.round(r)][Math.round(t)]=1},r/2,r/2,r/2,r/2,{filled:!0}),data}class l extends h{getData(r){return function(r){for(var data=Array(r+1),i=0;i<r+1;i++)data[Number(i)]=Array(r+1).fill(0);return n.rectangle((r,t)=>{data[Math.round(r)][Math.round(t)]=1},0,0,r,r,{filled:!0}),data}(r)}}class d extends h{getData(r){return function(r){for(var data=c(r+2),i=0;i<data.length;i++)for(var t=0;t<data[Number(i)].length;t++)data[Number(i)][Number(t)]>0&&Math.random()<.15/r?data[Number(i)][Number(t)]=1:data[Number(i)][Number(t)]=0;return data}(r)}get data(){return this._data=this.getScaledData(this._size),this._data}}function y(r){return[o,l,d][Number(r)]}t.default=h}}]);
import{s as b}from"./x_rD_Ya3.js";import{Z as k,j as I,k as y,u as C,q as v,s as O}from"./BUHgHOJF.js";import{t as a,v as d,x as r,_ as D,a5 as S,i as p,z as w,a6 as x,y as T,I as h,E as g,Z as z,C as H,D as F}from"./DX0JcNNQ.js";import{getDefaultDocumentModel as _,FONT_FAMILES as P,FONT_TYPES as E,PROPERTY as f,FONT_SIZES as N}from"./iR7RlvsB.js";import"./C5mdboMC.js";const R={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"14"},V=r("path",{fill:"#05a",d:"M0 0h12v14H0z"},null,-1),A=r("path",{fill:"#fff",d:"M0 2v2h1v2h2v2h1v2h2v2h1v2h3V2z"},null,-1),U=[V,A];function j(n,e){return a(),d("svg",R,[...U])}const Y={render:j},$={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"18"},W=r("path",{d:"M6 2h1v2H6zM7 4h1v2H7zM5 0h1v2H5zM4 2h1v2H4zM7 16H4v-4H3v6h5v-6H7zM8 6h1v2H8zM10 10V8H9v2H8v2h3v-2zM2 10V8H1v2H0v2h3v-2zM3 4h1v2H3zM2 6h1v2H2z"},null,-1),B=[W];function Z(n,e){return a(),d("svg",$,[...B])}const L={render:Z},q={components:{AtomMarkdown:k},props:{...I,model:{type:Object,default(){return{value:_()}}}},emits:[...y],setup(n,e){const i=S(n,"model"),l=C(n,e);return l.setContextMenu(M,{model:i.value}),l},data(){return{content:["# Document Reader",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},K={class:"wb-disks-workbench13-document-reader-info"};function X(n,e,i,l,s,t){const c=p("atom-markdown");return a(),d("div",K,[w(c,{content:s.content},null,8,["content"])])}const G=D(q,[["render",X],["__scopeId","data-v-e0b8441a"]]),M=({core:n,model:e})=>{const{windows:i}=n.modules;return[{title:"Document Reader",items:[{title:"Openâ€¦",hotKey:"O",keyCode:79,action:l},{type:v.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:s}]},{title:"Font Family",items:Object.keys(P).map(t=>{const c=P[String(t)];return{title:E[String(t)],items:Object.keys(c).map(u=>{const m=c[String(u)];return{title:u,type:v.RADIO,name:f.FONT_FAMILY,value:m,model:e.value}})}})},{title:"Font Size",items:N.map(t=>({title:`${t}px`,type:v.RADIO,name:f.FONT_SIZE,value:t,model:e.value}))}];async function l(){const t=await n.executeCommand("openFileDialog");if(t)if("content"in t.value)e.fsItem=t.fsItem,e.value=Object.assign(e.value,_(),t.value);else throw new Error("Can't read file content")}function s(){i.addWindow({title:"Info",component:G,componentData:{model:e},options:{scaleX:!1,scaleY:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentReader"})}},J={components:{SvgNoteCorner:Y,SvgScrollbarSmallArrow:L,WbMarkdown:k},props:{...I,windowOptions:{type:Object,default(){return{}}},model:{type:Object,default(){return{fsItem:null,value:_()}}}},emits:[...y],setup(n,e){const i=S(n,"model"),l=C(n,e);return l.setContextMenu(M,{model:i.value}),l},data(){return{content:[],currentPage:0,clickInterval:null,scrollValue:0}},computed:{style(){const n=this.model.value[f.FONT_FAMILY];return{"--scroll-bar-size":`${O.size}`,"--font-size-markdown":`${this.model.value[f.FONT_SIZE]}`,"--font-markdown-typo-headline-primary":n,"--font-markdown-typo-headline-secondary":n,"--font-markdown-typo-text":n,"--font-markdown-typo-code":n,"--font-markdown-typo-blockquote":n}},pageContent(){return this.content[this.currentPage]},fsItem(){return this.fsItem&&x(this.model.fsItem)}},watch:{currentPage(){this.$refs.scrollContainer.scrollTop=0},model:{deep:!0,handler(){this.refreshContent()}}},mounted(){this.refreshContent()},methods:{refreshContent(){this.fsItem&&(this.windowOptions.title=this.fsItem.name+" - Document Reader");const e=this.model.value.content.split(/\[PAGE\][\n]+/);this.currentPage=0,this.content=e},onPointerDownPrev(){this.currentPage=Math.max(this.currentPage-1,0)},onPointerDownNext(){this.currentPage=Math.min(this.currentPage+1,this.content.length-1)},onPointerDownScrollUp(){this.intervalClick(()=>{this.$refs.scrollContainer.scrollTop=Math.max(this.$refs.scrollContainer.scrollTop-20,0)})},onPointerDownScrollDown(){this.intervalClick(()=>{this.$refs.scrollContainer.scrollTop=Math.min(this.$refs.scrollContainer.scrollTop+20,this.$refs.scrollContainer.scrollHeight)})},onPointerUp(){window.clearInterval(this.clickInterval)},intervalClick(n){window.clearInterval(this.clickInterval),this.clickInterval=b(n,125)},onScroll(n){n.preventDefault(),this.scrollValue=this.$refs.scrollContainer.scrollTop/(this.$refs.scrollContainer.scrollHeight-this.$refs.scrollContainer.offsetHeight)}}},Q=n=>(H("data-v-3c37d13c"),n=n(),F(),n),ee={class:"content"},te={class:"pagination"},ne=Q(()=>r("div",{class:"pagination-spacer"},null,-1));function oe(n,e,i,l,s,t){const c=p("wb-markdown"),u=p("svg-scrollbar-small-arrow"),m=p("svg-note-corner");return a(),d("div",{class:"wb-disks-workbench13-document-reader",style:z(t.style)},[r("div",ee,[r("div",{ref:"scrollContainer",class:"content-scroll",onScroll:e[0]||(e[0]=(...o)=>t.onScroll&&t.onScroll(...o))},[w(c,{content:t.pageContent},null,8,["content"])],544)]),r("div",te,[r("div",{class:"pagination-frame pagination-current",onPointerdown:e[1]||(e[1]=(...o)=>t.onPointerDownPrev&&t.onPointerDownPrev(...o))},[r("span",null,T(s.currentPage+1),1)],32),s.scrollValue>0?(a(),d("div",{key:0,class:"pagination-frame pagination-scroll_up",onPointerdown:e[2]||(e[2]=(...o)=>t.onPointerDownScrollUp&&t.onPointerDownScrollUp(...o)),onPointerup:e[3]||(e[3]=(...o)=>t.onPointerUp&&t.onPointerUp(...o))},[r("i",null,[w(u)])],32)):h("",!0),ne,s.scrollValue<1?(a(),d("div",{key:1,class:"pagination-frame pagination-scroll-down",onPointerdown:e[4]||(e[4]=(...o)=>t.onPointerDownScrollDown&&t.onPointerDownScrollDown(...o)),onPointerup:e[5]||(e[5]=(...o)=>t.onPointerUp&&t.onPointerUp(...o))},[r("i",null,[w(u)])],32)):h("",!0)]),s.currentPage>0?(a(),g(m,{key:0,class:"corner corner_left",onPointerdown:t.onPointerDownPrev},null,8,["onPointerdown"])):h("",!0),s.currentPage<s.content.length-1?(a(),g(m,{key:1,class:"corner corner-right",onPointerdown:t.onPointerDownNext},null,8,["onPointerdown"])):h("",!0)],4)}const ce=D(J,[["render",oe],["__scopeId","data-v-3c37d13c"]]);export{ce as default};

function it(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Ut(t,e){let{x:r,y:n,z:o}=e,{x:i,y:s,z:c,w:l}=t,u=l*r+s*o-c*n,h=l*n+c*r-i*o,y=l*o+i*n-s*r,m=-i*r-s*n-c*o,f=u*l+m*-i+h*-c-y*-s,w=h*l+m*-s+y*-i-u*-c,a=y*l+m*-c+u*-s-h*-i;return new e.constructor(f,w,a)}var pt=Math.PI,ct=Math.PI*2;function B(t){let e=t%ct;return e<-pt?e+=ct:e>pt&&(e-=ct),e}function ce(t){return t>-1?t<1?Math.acos(t):0:pt}function le(t,[e,r,n]){let[o,i,s]=t;return new t.constructor(new o.constructor(o.x*e.x+i.x*e.y+s.x*e.z,o.y*e.x+i.y*e.y+s.y*e.z,o.z*e.x+i.z*e.y+s.z*e.z),new o.constructor(o.x*r.x+i.x*r.y+s.x*r.z,o.y*r.x+i.y*r.y+s.y*r.z,o.z*r.x+i.z*r.y+s.z*r.z),new o.constructor(o.x*n.x+i.x*n.y+s.x*n.z,o.y*n.x+i.y*n.y+s.y*n.z,o.z*n.x+i.z*n.y+s.z*n.z))}function ae(t,{x:e,y:r,z:n}){let[o,i,s]=t;return new o.constructor(o.x*e+i.x*r+s.x*n,o.y*e+i.y*r+s.y*n,o.z*e+i.z*r+s.z*n)}function he(t,[e,r,n]){return new t.constructor(t.dot(e),t.dot(r),t.dot(n))}function T(t){return typeof t=="number"||(t==null?void 0:t.constructor)===Number}var fe=t=>{try{C(t),L(t,4)}catch(e){console.error("error while hijackDOMPoint"),console.error(e)}},Q=0,Et=1,Ot=2,Pt=3,Z=9999999999999,tt=void 0,Yt=Symbol("vector length"),ot=Symbol("get source"),Tt=Symbol("checked"),x=tt,j,R,ye=[0,1,2,6,24,120,720,5760,51840,518400,5702400,68428800,889574400,12454041600,186810624e3],mt=[],Y=-1,lt=!1,Vt=[];function at(t,e,r){x=t,Y=-1,R=1;let n=e(r);if(!T(n))throw new Error(`
      your assigned progress did not not return a primitive!
      calc() does not support logical operators (|| && ==) directly

      instead of calc(() => v1 || v2);
      use        calc(() => +v1 || +v2);

      instead of calc(() => v1);
      use        calc(v1);
      `);return n}function et(t){let e=t[ot];return e?e(t).length:t[Yt]||3}function pe(t,e){return et(t)>et(e)?t:e}function me(t,e){if(R+=1,e===Z)return R;if(e>=et(t))return 0;let r=t[ot];if(r)return 1*r(t)[e];if(e===Q)return 1*t.x;if(e===Et)return 1*t.y;if(e===Ot)return 1*t.z;if(e===Pt)return 1*t.w}function Jt(t,e,r){let n=t[ot];if(n){n(t)[e]=r;return}if(e===Q){t.x=r;return}if(e===Et){t.y=r;return}e===Ot&&(t.z=r),e===Pt&&(t.w=r)}function G(t,e){if(typeof t!="function")throw new Error("no function assigned");if(x!==tt)throw new Error("something wrong, do you use calc() inside calc?");try{let r=typeof e>"u",n=typeof e=="function",o=!n&&!r?e:void 0,i=at(Q,t,o);if(r&&typeof j>"u")return i;let s=j?et(j):0;if(s===Z){if(!t[Tt]){let h=at(Z,t),y=ye[R];if(Math.abs(h-y)>Number.EPSILON)throw new Error(`
            algebraic multiplication works only in calls with *

            calc(() => v * m);
            calc(() => m * v);
            calc(() => m * m);
            calc(() => m * m * v);

            `);t[Tt]=!0}let u=mt[0];for(let h=1;h<R-1;h+=1){let y=mt[h];if(!u.multiply)throw new Error(`cannot find method multiply() on ${u}`);u=u.multiply(y)}return u}let c=n?e.length:s;if(c||(c=s),c<s)throw new Error("Your assigned result Vector cant use higher space Operands than it has");let l=new Array(c);l[0]=i,o&&Jt(o,x,l[0]);for(let u=1;u<c;u+=1){let h=at(u,t,o);l[u]=h,o&&Jt(o,x,h)}return r?new j.constructor(...l):n?e(...l):o}finally{x=tt,j=void 0}}function C(t,e){let r=t.prototype;r[ot]=e;let n=r[Symbol.toPrimitive]||function(o){return o==="string"?this.toString():this.valueOf()};r[Symbol.toPrimitive]=function(o){return x===Q&&(j=j?pe(j,this):this,mt[R-1]=this),x===tt?n.call(this,o):me(this,x)}}function Mt(t){return function(...e){if(x===Q){if(lt)return t.apply(this,e);try{lt=!0,Y+=1;let r=t.apply(this,e);return Vt[Y]=r,r}finally{lt=!1}}return x===Et||x===Ot||x===Pt?(Y+=1,Vt[Y]):t.apply(this,e)}}function v(t,e){let r=t.prototype,n=r[e];r[e]=Mt(n)}function st(t,e){let r=t.prototype,n=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(r,e,{get:Mt(function(){return n.get.call(this)})})}function L(t,e){let r=t.prototype;Object.defineProperty(r,Yt,{value:e})}function $t(t){L(t,Z)}function ut(t){return Mt(t)}typeof DOMPoint<"u"&&fe(DOMPoint);function de(t){let e="";return t&&(e=`${t}-`),e}function H(t,e,r={}){let n=de(t);return Object.entries(e).forEach(([o,i])=>{r[`--${n}${o}`]=i}),r}var dt=0,wt=1,S=Symbol("axes");function we(t,e,r,n){let o=Math.atan2(t,e),i=Math.atan2(r,n);return B(o-i)}function It(t){return t*t}var z=class{constructor(t,e){typeof t=="function"?G(t,(r,n)=>{this[S]=[r,n]}):it(t)?this[S]=[...t]:t&&T(t.x)?this[S]=[t.x||0,t.y||0]:this[S]=[t||0,e||0]}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}normalize(){let{length:t}=this;return new this.constructor(this.x/t,this.y/t)}norm(){return this.normalize()}dot(t){return this.x*t.x+this.y*t.y}getRad(){return B(Math.atan2(this.y,this.x))}angleTo(t){return we(this.y,this.x,t.y,t.x)}rotate(t){let e=Math.sin(t),r=Math.cos(t),n=this.x*r-this.y*e,o=this.x*e+this.y*r;return new this.constructor(n,o)}distance(t){return Math.sqrt(It(this.x-t.x)+It(this.y-t.y))}dist(t){return this.distance(t)}toArray(){return[this.x,this.y]}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y}toJSON(){return{x:this.x,y:this.y}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,e){return H(t,this.toJSON(),e)}get lengthSq(){return this.dot(this)}get length(){return Math.sqrt(this.lengthSq)}get lensq(){return this.lengthSq}get len(){return this.length}get x(){return this[S][dt]}set x(t){throw new Error("set x() not implemented")}get y(){return this[S][wt]}set y(t){throw new Error("set y() not implemented")}get z(){throw new Error("get z() not implemented")}set z(t){throw new Error("set z() not implemented")}[Symbol.iterator](){return this[S].values()}};C(z);L(z,2);v(z,"dot");v(z,"angleTo");v(z,"distance");v(z,"toArray");v(z,"getRad");st(z,"length");st(z,"lengthSq");var Ft=class Bt extends z{set x(e){this[S][dt]=e}set y(e){this[S][wt]=e}get x(){return this[S][dt]}get y(){return this[S][wt]}calc(e){return G(e,this)}clone(){return new Bt(this.x,this.y)}},$=class extends z{toPoint(){return new Ft(this.x,this.y)}},ve=ut((t,e)=>new Ft(t,e)),Xe=(t,e)=>ve(t,e),ge=ut((t,e)=>new $(t,e)),_t=(t,e)=>ge(t,e);_t(0,0);_t(0,-1);_t(-1,0);var I=0,N=1,k=2,p=Symbol("axes");function ht(t){return t*t}var g=class{constructor(t,e,r){typeof t=="function"?G(t,(n,o,i)=>{this[p]=[n,o,i]}):it(t)?this[p]=[...t]:t&&T(t.x)?this[p]=[t.x||0,t.y||0,t.z||0]:this[p]=[t||0,e||0,r||0]}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}normalize(){let{length:t}=this;return new this.constructor(this.x/t,this.y/t,this.z/t)}norm(){return this.normalize()}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new this.constructor(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}crossNormalize(t){let e=this.cross(t),{length:r}=e;return e[p][I]/=r,e[p][N]/=r,e[p][k]/=r,e}cn(t){return this.crossNormalize(t)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length)}}angleTo(t){return B(ce(this.dot(t)/(this.length*t.length)))}multiply(t){return t.x===void 0?this.multiplyMat3(t):t.w===void 0?this.multiplyVec3(t):Ut(t,this)}multiplyMat3(t){return he(this,t)}multiplyVec3({x:t,y:e,z:r}){return new this.constructor(this.x*t,this.y*e,this.z*r)}distance(t){return Math.sqrt(ht(this.x-t.x)+ht(this.y-t.y)+ht(this.z-t.z))}dist(t){return this.distance(t)}toArray(){return[this.x,this.y,this.z]}swizzle(t){let e=t.split("").map(r=>this[r]);return e.length===2?new $(e[0],e[1]):new this.constructor(e[0],e[1],e[2])}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}toJSON(){return{x:this.x,y:this.y,z:this.z}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,e){return H(t,this.toJSON(),e)}get lengthSq(){return this.dot(this)}set lengthSq(t){throw new Error("set lengthSq() not implemented")}get length(){return Math.sqrt(this.lengthSq)}set length(t){throw new Error("set length() not implemented")}get lensq(){return this.lengthSq}set lensq(t){throw new Error("set lensq() not implemented")}get len(){return this.length}set len(t){throw new Error("set len() not implemented")}get x(){return this[p][I]}set x(t){throw new Error("set x() not implemented")}get y(){return this[p][N]}set y(t){throw new Error("set y() not implemented")}get z(){return this[p][k]}set z(t){throw new Error("set z() not implemented")}get xy(){return new $(this[p][I],this[p][N])}set xy(t){throw new Error("set xz() not implemented")}get xz(){return new $(this[p][I],this[p][k])}set xz(t){throw new Error("set xz() not implemented")}get yz(){return new $(this[p][N],this[p][k])}set yz(t){throw new Error("set yz() not implemented")}[Symbol.iterator](){return this[p].values()}};C(g);L(g,3);v(g,"dot");v(g,"cross");v(g,"crossNormalize");v(g,"toAngles");v(g,"angleTo");v(g,"rotate");v(g,"distance");v(g,"toArray");st(g,"length");st(g,"lengthSq");var be=class Qt extends g{set x(e){this[p][I]=e}set y(e){this[p][N]=e}set z(e){this[p][k]=e}get x(){return this[p][I]}get y(){return this[p][N]}get z(){return this[p][k]}calc(e){return G(e,this)}clone(){return new Qt(this.x,this.y,this.z)}},xe=class extends g{toVector(){return new be(this.x,this.y,this.z)}clone(){return this}},Se=ut((t,e,r)=>new xe(t,e,r)),V=(t,e,r)=>Se(t,e,r);V(0,0,0);var Gt=V(0,0,-1);V(0,0,1);var qt=V(-1,0,0);V(1,0,0);var Lt=V(0,1,0);V(0,-1,0);V(1,1,1);var O=Symbol("angle rad"),Ht=Math.PI/180,rt=class Kt{constructor(e){e instanceof Kt?this[O]=e[O]:this[O]=B(e*Ht)}valueOf(){return this[O]}toJSON(){return{angle:this[O]}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(e,r){return H(e,this.toJSON(),r)}},Wt=class extends rt{set(t){t instanceof rt?this[O]=t[O]:this[O]=B((t||0)*Ht)}},ze=class extends rt{toDegree(){return new Wt(this[O])}};new ze(0);function Ee(t){return new Wt(t)}function Oe(t){return T(t)||t instanceof rt}var P=0,M=1,_=2,q=3,d=Symbol("axes"),Pe=Symbol("forward cache"),Me=Symbol("left cache"),_e=Symbol("up cache"),qe=Symbol("inverse cache");function Ae([t,e,r,n]){return Math.sqrt(t*t+e*e+r*r+n*n)}function Xt(t){let e=Ae(t);t[P]/=e,t[M]/=e,t[_]/=e,t[q]/=e}function je(t,e){let r=t.normalize(),n=e.crossNormalize(r),o=r.crossNormalize(n),i=n.x,s=n.y,c=n.z,l=o.x,u=o.y,h=o.z,y=r.x,m=r.y,f=r.z,w=i+u+f,a=new Array(4);if(w>0){let b=Math.sqrt(w+1);return a[q]=b*.5,b=.5/b,a[P]=(h-m)*b,a[M]=(y-c)*b,a[_]=(s-l)*b,a}if(i>=u&&i>=f){let b=Math.sqrt(1+i-u-f),J=.5/b;return a[P]=.5*b,a[M]=(s+l)*J,a[_]=(c+y)*J,a[q]=(h-m)*J,a}if(u>f){let b=Math.sqrt(1+u-i-f),J=.5/b;return a[P]=(l+s)*J,a[M]=.5*b,a[_]=(m+h)*J,a[q]=(y-c)*J,a}let K=Math.sqrt(1+f-i-u),D=.5/K;return a[P]=(y+c)*D,a[M]=(m+h)*D,a[_]=.5*K,a[q]=(s-l)*D,a}function Te(t,e){let r=new Array(4),n=e*.5,o=Math.sin(n),i=Math.cos(n);return r[P]=o*t.x,r[M]=o*t.y,r[_]=o*t.z,r[q]=i,r}function vt(t,e,r,n){if(T(t))return[t,e,r,n];if(it(t))return[...t];if(Oe(e))return Te(t,e);if(t&&e)return je(t,e)}function Zt(t,e,r,n){return t&&T(t.w)?vt(t.x,t.y,t.z,t.w):vt(t,e,r,n)||[0,0,0,1]}var F=class{constructor(t,e,r,n){this[d]=Zt(t,e,r,n),Xt(this[d])}set(t,e,r,n){throw new Error("set x() not implemented")}multiply(t,e,r,n){if(T(t.w))return this.multiplyQuaternion(t);let o=vt(t,e,r,n);return o?this.multiplyQuaternion(new this.constructor(o)):this.multiplyVector(t)}multiplyVector(t){return Ut(this,t)}multiplyQuaternion(t){let e=this.x,r=this.y,n=this.z,o=this.w,i=t.x,s=t.y,c=t.z,l=t.w,u=o*i+e*l+r*c-n*s,h=o*s+r*l+n*i-e*c,y=o*c+n*l+e*s-r*i,m=o*l-e*i-r*s-n*c;return new this.constructor(u,h,y,m)}mul(t,e,r,n){return this.multiply(t,e,r,n)}get inverse(){let{x:t,y:e,z:r,w:n}=this;return this.constructor(t*-1,e*-1,r*-1,n)}get inv(){return this.inverse}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}get left(){return this.multiplyVector(qt)}get dir(){return this.multiplyVector(Gt)}get up(){return this.multiplyVector(Lt)}get 0(){return this.left}get 1(){return this.dir}get 2(){return this.up}get x(){return this[d][P]}set x(t){throw new Error("set x() not implemented")}get y(){return this[d][M]}set y(t){throw new Error("set y() not implemented")}get z(){return this[d][_]}set z(t){throw new Error("set z() not implemented")}get w(){return this[d][q]}set w(t){throw new Error("set w() not implemented")}toJSON(){let{x:t,y:e,z:r,w:n}=this;return{x:t,y:e,z:r,w:n,a1:1-e*e*2-r*r*2,a2:t*e*2-r*n*2,a3:t*r*2+e*n*2,b1:t*e*2+r*n*2,b2:1-t*t*2-r*r*2,b3:e*r*2-t*n*2,c1:t*r*2-e*n*2,c2:e*r*2+t*n*2,c3:1-t*t*2-e*e*2}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,e){return H(t,this.toJSON(),e)}};C(F);$t(F);var Ve=class extends F{set(t,e,r,n){t instanceof F?this[d]=[...t[d]]:(this[d]=Zt(t,e,r,n),Xt(this[d]))}set x(t){this[d][P]=t}set y(t){this[d][M]=t}set z(t){this[d][_]=t}set w(t){this[d][q]=t}get x(){return this[d][P]}get y(){return this[d][M]}get z(){return this[d][_]}get w(){return this[d][q]}};function W(t,e,r){let n=t[e];return n||(n=r(),t[e]=n),n}var te=class extends F{get left(){return W(this,Me,()=>this.multiplyVector(qt))}get dir(){return W(this,Pe,()=>this.multiplyVector(Gt))}get up(){return W(this,_e,()=>this.multiplyVector(Lt))}get inverse(){return W(this,qe,()=>{let{x:t,y:e,z:r,w:n}=this;return this.constructor(t*-1,e*-1,r*-1,n)})}};new Ve;var Je=ut((t,e,r,n)=>new te(t,e,r,n)),Ie=(t,e,r,n)=>Je(t,e,r,n);new te(qt,Ee(90));Ie(0,0,0,1);var Ne=0,ke=1,Re=2,Ce=3,E=Symbol("axes"),At=class{constructor(t,e,r,n){typeof t=="function"?G(t,(o,i,s,c)=>{this[E]=[o,i,s,c]}):it(t)?this[E]=[...t]:t&&T(t.x)?this[E]=[t.x||0,t.y||0,t.z||0,t.w||0]:this[E]=[t||0,e||0,r||0,n||0]}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}toArray(){return[this.x,this.y,this.z,this.w]}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}toJSON(){return{x:this.x,y:this.y,z:this.z,w:this.w}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,e){return H(t,this.toJSON(),e)}get x(){return this[E][Ne]}set x(t){throw new Error("set x() not implemented")}get y(){return this[E][ke]}set y(t){throw new Error("set y() not implemented")}get z(){return this[E][Re]}set z(t){throw new Error("set z() not implemented")}get w(){return this[E][Ce]}set w(t){throw new Error("set w() not implemented")}[Symbol.iterator](){return this[E].values()}};C(At);L(At,4);v(At,"toArray");var U=Symbol("data"),ee=class re{constructor(...e){this[U]=e}get 0(){return this[U][0]}set 0(e){throw new Error("set [0] not implemented")}get 1(){return this[U][1]}set 1(e){throw new Error("set [1] not implemented")}get 2(){return this[U][2]}set 2(e){throw new Error("set [2] not implemented")}multiplyMat(e){return le(this,e)}multiplyVec(e){return ae(this,e)}multiply(e){if(e instanceof re)return this.multiplyMat(e);let{x:r,y:n,z:o}=e;if(r===void 0||n===void 0||o===void 0)throw new Error(`multiply only works with mat3 and vec3, not supported ${e}`);return this.multiplyVec(e)}[Symbol.iterator](){return this[U].values()}};C(ee);$t(ee);var gt=function(t,e){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},gt(t,e)};function ne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Nt=function(){return Nt=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Nt.apply(this,arguments)};function Ze(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function tr(t,e,r,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(i=(o<3?s(i):o>3?s(e,r,i):s(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function er(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function c(h){try{u(n.next(h))}catch(y){s(y)}}function l(h){try{u(n.throw(h))}catch(y){s(y)}}function u(h){h.done?i(h.value):o(h.value).then(c,l)}u((n=n.apply(t,e||[])).next())})}function rr(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(u){return function(h){return l([u,h])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function nt(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bt(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function xt(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function St(t){return this instanceof St?(this.v=t,this):new St(t)}function nr(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(f){return function(w){return Promise.resolve(w).then(f,y)}}function c(f,w){n[f]&&(o[f]=function(a){return new Promise(function(K,D){i.push([f,a,K,D])>1||l(f,a)})},w&&(o[f]=w(o[f])))}function l(f,w){try{u(n[f](w))}catch(a){m(i[0][3],a)}}function u(f){f.value instanceof St?Promise.resolve(f.value.v).then(h,y):m(i[0][2],f)}function h(f){l("next",f)}function y(f){l("throw",f)}function m(f,w){f(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function ir(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof nt=="function"?nt(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(s){return new Promise(function(c,l){s=t[i](s),o(c,l,s.done,s.value)})}}function o(i,s,c,l){Promise.resolve(l).then(function(u){i({value:u,done:c})},s)}}function A(t){return typeof t=="function"}function De(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var ft=De(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function kt(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var jt=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var c=nt(s),l=c.next();!l.done;l=c.next()){var u=l.value;u.remove(this)}}catch(a){e={error:a}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}else s.remove(this);var h=this.initialTeardown;if(A(h))try{h()}catch(a){i=a instanceof ft?a.errors:[a]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var m=nt(y),f=m.next();!f.done;f=m.next()){var w=f.value;try{Rt(w)}catch(a){i=i??[],a instanceof ft?i=xt(xt([],bt(i)),bt(a.errors)):i.push(a)}}}catch(a){n={error:a}}finally{try{f&&!f.done&&(o=m.return)&&o.call(m)}finally{if(n)throw n.error}}}if(i)throw new ft(i)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Rt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&kt(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&kt(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),or=jt.EMPTY;function ie(t){return t instanceof jt||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function Rt(t){A(t)?t():t.unsubscribe()}var oe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},se={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,xt([t,e],bt(r)))},clearTimeout:function(t){var e=se.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Ue(t){se.setTimeout(function(){throw t})}function Ct(){}function Ye(t){t()}var ue=function(t){ne(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,ie(r)&&r.add(n)):n.destination=Qe,n}return e.create=function(r,n,o){return new zt(r,n,o)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(jt),$e=Function.prototype.bind;function yt(t,e){return $e.call(t,e)}var Fe=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){X(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){X(n)}else X(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){X(r)}},t}(),zt=function(t){ne(e,t);function e(r,n,o){var i=t.call(this)||this,s;if(A(r)||!r)s={next:r??void 0,error:n??void 0,complete:o??void 0};else{var c;i&&oe.useDeprecatedNextContext?(c=Object.create(r),c.unsubscribe=function(){return i.unsubscribe()},s={next:r.next&&yt(r.next,c),error:r.error&&yt(r.error,c),complete:r.complete&&yt(r.complete,c)}):s=r}return i.destination=new Fe(s),i}return e}(ue);function X(t){Ue(t)}function Be(t){throw t}var Qe={closed:!0,next:Ct,error:Be,complete:Ct},Ge=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Le(t){return t}function He(t){return t.length===0?Le:t.length===1?t[0]:function(r){return t.reduce(function(n,o){return o(n)},r)}}var sr=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var o=this,i=We(e)?e:new zt(e,r,n);return Ye(function(){var s=o,c=s.operator,l=s.source;i.add(c?c.call(i,l):l?o._subscribe(i):o._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Dt(r),new r(function(o,i){var s=new zt({next:function(c){try{e(c)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});n.subscribe(s)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Ge]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return He(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Dt(e),new e(function(n,o){var i;r.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},t.create=function(e){return new t(e)},t}();function Dt(t){var e;return(e=t??oe.Promise)!==null&&e!==void 0?e:Promise}function Ke(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}function We(t){return t&&t instanceof ue||Ke(t)&&ie(t)}export{or as E,G as N,sr as O,jt as S,$ as _,ne as a,kt as b,De as c,nt as d,Ye as e,Ze as f,_t as g,Xe as h,Le as i,A as j,Nt as k,xt as l,bt as m,nr as n,Ge as o,rr as p,St as q,xe as r,Ue as s,Ft as t,er as u,ir as v,ue as w,zt as x,tr as y,Ct as z};

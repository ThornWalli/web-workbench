var p=Object.defineProperty;var f=(c,e,t)=>e in c?p(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var i=(c,e,t)=>f(c,typeof e!="symbol"?e+"":e,t);import{n as a}from"./DYHHCWM9.js";import{b as o,f as n}from"./DN3eHOnZ.js";import{s as h}from"./djI3_XgP.js";class v{constructor(){i(this,"observers",new Map);i(this,"capsLockActive",!1);i(this,"shiftLeftActive",!1);i(this,"shiftRightActive",!1);i(this,"cmdLeftActive",!1);i(this,"cmdRightActive",!1);i(this,"altLeftActive",!1);i(this,"altRightActive",!1);i(this,"pointerDown");i(this,"pointerUp");i(this,"pointerMove");i(this,"keyDown");i(this,"keyUp");i(this,"keyPress");i(this,"resize");var e,t;this.resize=this.get("resize",window).pipe(h()),this.pointerDown=this.getPointerDown(),this.pointerUp=this.getPointerUp(),this.pointerMove=this.getPointerMove(),this.keyPress=this.get("kexypress").pipe(h()),this.keyDown=this.get("keydown").pipe(h()),this.keyUp=this.get("keyup").pipe(h()),(e=this.keyDown)==null||e.subscribe(({code:s,location:r})=>{switch(Number(s)){case 91:this.cmdLeftActive=!0;break;case 93:this.cmdRightActive=!0;break;case 16:r===2?this.shiftRightActive=!0:this.shiftLeftActive=!0;break;case 18:r===2?this.altRightActive=!0:this.altLeftActive=!0;break;case 20:this.capsLockActive=!this.capsLockActive;break}}),(t=this.keyUp)==null||t.subscribe(({code:s,location:r})=>{switch(Number(s)){case 91:this.cmdLeftActive=!1;break;case 93:this.cmdRightActive=!1;break;case 16:r===2?this.shiftRightActive=!1:this.shiftLeftActive=!1;break;case 18:r===2?this.altRightActive=!1:this.altLeftActive=!1;break}})}getPointerDown(e){return this.get("pointerdown",e).pipe(o(t=>a(t))).pipe(h())}getPointerUp(e){return this.get("pointerup",e).pipe(o(t=>a(t))).pipe(h())}getPointerMove(e){return this.get("pointermove",e).pipe(o(t=>a(t))).pipe(h())}get(e,t){t=t||document,this.observers.has(t)||this.observers.set(t,new Map);const s=this.observers.get(t);if(s&&!s.has(e)){const r={passive:!0,capture:!1};s.set(e,n(t,e,r))}return s.get(e)}reset(){this.observers.clear()}get cmdActive(){return this.cmdLeftActive||this.cmdRightActive}get altActive(){return this.altLeftActive||this.altRightActive}get shiftActive(){return this.shiftLeftActive||this.shiftRightActive}}const u=new v;export{u as d};

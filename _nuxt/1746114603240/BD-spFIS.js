import{W as d}from"./DK5mOmiz.js";import{W as M}from"./LDaXBbxb.js";import{W as A}from"./B4g_dQXt.js";import{d as v,g as N}from"./DchX226r.js";import{d as z,j as n,r as p,K as i,a0 as E,o as U,a1 as D,t as R,v as g,x as _,z as c,O as $,aa as j,A as K,C as O,F as T,_ as q}from"./BRP7lMhW.js";const G={class:"wb-module-files-atoms-file-select"},H=z({__name:"FileSelect",props:{modelValue:{},fileSystem:{},fsItem:{},backLabel:{},upLabel:{},downLabel:{},maxVisibleItems:{}},emits:["update:model-value","select","refresh"],setup(I,{emit:x}){const r=x,l=I,V=n(()=>l.backLabel||"../"),C=n(()=>l.upLabel||"Up"),b=n(()=>l.downLabel||"Down"),u=n(()=>l.maxVisibleItems||5),L=n(()=>({title:"",items:B.value,modelValue:l.modelValue,"onUpdate:model-value":e=>{r("update:model-value",e)}})),a=p(l.fsItem||i(l.fileSystem.root)),o=p([]),t=p(0),m=n(()=>({back:!a.value.parent,up:t.value-1<0,down:t.value+1>o.value.length-u.value})),W=n(()=>l.modelValue),B=n(()=>{const e=o.value.slice(t.value,t.value+u.value).map(s=>({label:s.id,value:s.getPath()})).concat(Array(Math.max(u.value-o.value.length,0)).fill({label:"&nbsp;",disabled:!0}));return o.value.length<1&&(e[Math.floor(e.length/2)]={label:"Empty",disabled:!0}),e});E(()=>W.value,async()=>{typeof l.modelValue=="string"&&(a.value=i(await l.fileSystem.get(l.modelValue)),a.value instanceof v&&(o.value=Array.from((await a.value.getItems()).values()).map(i),t.value=0),(a.value instanceof N||a.value instanceof v)&&r("select",a.value))}),U(async()=>{var e;o.value=Array.from((await((e=a.value)==null?void 0:e.getItems())||[]).values()).map(s=>i(s)),D(()=>{r("refresh",{reset:!0,resize:!1,scroll:!1})})});const S=()=>{var s,f,h,y,k,w;let e;if(!(a.value instanceof v)&&((f=(s=a.value)==null?void 0:s.parent)!=null&&f.parent)?e=(k=(y=(h=a.value)==null?void 0:h.parent)==null?void 0:y.parent)==null?void 0:k.getPath():a.value.parent&&(e=(w=a.value.parent)==null?void 0:w.getPath()),e)r("update:model-value",e);else throw new Error("No parent found")},F=()=>{t.value=Math.max(t.value-1,0)},P=()=>{t.value=Math.min(t.value+1,o.value.length-u.value)};return(e,s)=>(g(),R("div",G,[_("div",null,[c(A,$(j(L.value)),null,16)]),_("div",null,[c(M,{align:"outer",full:"",direction:"vertical"},{default:K(()=>[c(d,{"style-type":"secondary",label:V.value,disabled:m.value.back,onClick:S},null,8,["label","disabled"]),c(d,{"style-type":"secondary",label:C.value,disabled:m.value.up,onClick:F},null,8,["label","disabled"]),b.value?(g(),O(d,{key:0,"style-type":"secondary",label:b.value,disabled:m.value.down,onClick:P},null,8,["label","disabled"])):T("",!0)]),_:1})])]))}}),ee=q(H,[["__scopeId","data-v-d510f941"]]);export{ee as W};

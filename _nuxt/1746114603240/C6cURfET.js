const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CTeNWjGs.js","./BGIFtisS.js","./DYHHCWM9.js","./wjpmATP-.js","./BXvnyj-V.js","./C5mdboMC.js","./BRP7lMhW.js","./BL9b5cpI.js","./L24w7Tb1.js","./DMqoVgoU.js","./CXbNF4JJ.css","./BV7m95iv.js","./C3zvzGZe.css","./YY0LfIuj.js","./DN3eHOnZ.js","./D4lI5vpz.js","./Ce6njBYG.js","./6C4StZv5.js","./DdQrQ7-5.js","./CSlkdJUE.js","./djI3_XgP.js","./RAasLaaH.js","./YcwuoW3W.js","./CnnF2WpI.js","./DxlUA0M_.css","./DPfhA-qo.js","./xeZm7TXO.js","./DIR0ob6O.js","./c7yvS0cq.js","./BWR5uye1.js","./CV0dHcg-.js","./C6BPC0dl.css","./CDSNOiTq.js","./DHk24l9J.js","./BOXo5Fuj.css","./ey0azPGz.js","./DchX226r.js","./BRvRi0Mv.js","./BH9FFkim.js","./CVMiNqhH.js","./WZmY4AAg.js","./CJLX7oOC.js","./BdxTbgrk.js","./BY0KaPQX.js","./Cq5IZgAT.css","./C4ABaeJQ.js","./D5w567BS.css","./DxA0974d.js","./BDAkpjrJ.js","./pCkh-wP3.css","./DK5mOmiz.js","./iKMg5t-_.css","./C0ysoPKq.css"])))=>i.map(i=>d[i]);
var ut=Object.defineProperty;var dt=(n,t,e)=>t in n?ut(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var h=(n,t,e)=>dt(n,typeof t!="symbol"?t+"":t,e);import{i as m,o as X,p as pt}from"./BGIFtisS.js";import{a as V,I as g,S as v,c as mt}from"./BL9b5cpI.js";import{I as K,K as z,H as Y}from"./BRP7lMhW.js";import{E as W,b as q}from"./DchX226r.js";import{v as ft}from"./BRvRi0Mv.js";import{c as E}from"./CVMiNqhH.js";import{d as x}from"./YY0LfIuj.js";import{K as B}from"./DYHHCWM9.js";import{o as bt,S as st}from"./6C4StZv5.js";import{a as gt}from"./BWR5uye1.js";import{c as J,f as vt}from"./CSlkdJUE.js";import{i as Tt}from"./Ce6njBYG.js";import{t as yt}from"./WZmY4AAg.js";import{v as Et}from"./L24w7Tb1.js";import{S as rt}from"./RAasLaaH.js";import{t as At}from"./BdxTbgrk.js";import{C as I}from"./ey0azPGz.js";function It(n,t){return bt(function(e,s){var r=t??{},i=r.leading,a=i===void 0?!0:i,c=r.trailing,o=c===void 0?!1:c,l=!1,d=null,p=null,u=!1,f=function(){p==null||p.unsubscribe(),p=null,o&&(D(),u&&s.complete())},A=function(){p=null,u&&s.complete()},w=function(T){return p=Tt(n(T)).subscribe(J(s,f,A))},D=function(){if(l){l=!1;var T=d;d=null,s.next(T),!u&&w(T)}};e.subscribe(J(s,function(T){l=!0,d=T,!(p&&!p.closed)&&(a?D():w(T))},function(){u=!0,!(o&&l&&p&&!p.closed)&&s.complete()}))})}function wt(n,t,e){t===void 0&&(t=gt);var s=yt(n,t);return It(function(){return s},e)}class y{constructor(t=0,e=0,s=0,r=255){h(this,"_red",0);h(this,"_green",0);h(this,"_blue",0);h(this,"_alpha",255);this.set(t,e,s,r)}set(t=0,e=0,s=0,r=255){Array.isArray(t)&&(r=t[3],s=t[2],e=t[1],t=t[0]),this.red=Number(t),this.green=e,this.blue=s,this.alpha=r===void 0?255:r}get r(){return this._red}get red(){return this._red}set red(t){this._red=E(t,0,255)}get g(){return this._green}get green(){return this._green}set green(t){this._green=E(t,0,255)}get blue(){return this._blue}get b(){return this._blue}set blue(t){this._blue=E(t,0,255)}get a(){return this._alpha}get alpha(){return this._alpha}set alpha(t){this._alpha=E(t,0,255)}get sum(){return this._red+this._blue+this._green+this._alpha}toRGB(){return`rgb(${this._red},${this._green},${this._blue})`}toRGBA(){return`rgba(${this._red},${this._green},${this._blue},${this._alpha/255})`}toJSON(){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}}is(t){return this.red===t.red&&this.blue===t.blue&&this.green===t.green&&this.alpha===t.alpha}invert(){return this._red=255-this._red,this._green=255-this._green,this._blue=255-this._blue,this}add(t){this.red=E(this.red+t.red,0,255),this.green=E(this.green+t.green,0,255),this.blue=E(this.blue+t.blue,0,255)}subtract(t){this.red=E(this.red-t.red,0,255),this.green=E(this.green-t.green,0,255),this.blue=E(this.blue-t.blue,0,255)}multiply(t){this.red=E(this.red*t.red,0,255),this.green=E(this.green*t.green,0,255),this.blue=E(this.blue*t.blue,0,255)}divide(t){this.red=E(this.red/t.red,0,255),this.green=E(this.green/t.green,0,255),this.blue=E(this.blue/t.blue,0,255)}}class ${constructor(t,e){h(this,"dimension",m(0,0));this.dimension=m(t,e)}get width(){return this.dimension.x}get height(){return this.dimension.y}get size(){return this.dimension}toPoint(){return this.dimension}}class C{constructor(t){h(this,"app");h(this,"bitmapData");h(this,"renderActions");h(this,"passiveRenderActions");h(this,"stacks",[]);h(this,"renderImageData");h(this,"renderWaitDisplays");h(this,"renderWait");h(this,"animationFrame",-1);this.app=t;const e=t.options.size;this.bitmapData=new $(e.width,e.height),this.renderActions=[],this.passiveRenderActions=[],this.clearStack()}static invertImageData(t){let e=0;for(let s=0;s<t.width;s++)for(let r=0;r<t.height;r++)e=(s+r*t.width)*4,t.data[Number(e)]=255-t.data[Number(e)],t.data[e+1]=255-t.data[e+1],t.data[e+2]=255-t.data[e+2]}static createImageData(t,e,s){let r;return s?r=new window.Uint8ClampedArray(s):r=new window.Uint8ClampedArray(4*t*e),new window.ImageData(r,t,e)}static resizeImageData(t,e=1){const s=t.data,r=t.width,i=t.height,a=r*e,c=i*e,o=Array(a*c*4),l=m(Number((r<<16)/a)+1,Number((i<<16)/c)+1);let d,p;for(let u=0;u<c;u++)for(let f=0;f<a;f++)d=f*l.x>>16,p=u*l.y>>16,Z((p*r+d)*4,s,(u*a+f)*4,o);return C.createImageData(a,c,o)}static cropImageData(t,e,s,r,i){const a=t.data,c=Array(r*i*4);for(let o=0;o<r;o++)for(let l=0;l<i;l++){const d=(s*t.width+e)*4+(l*t.width+o)*4;Z(d,a,(l*r+o)*4,c)}return C.createImageData(r,i,c)}getActiveContext(){var t;return(t=this.app.display)==null?void 0:t.context}getDisplayContexts(){return this.app.displays.map(t=>t.context)}setSize(t,e){this.bitmapData=new $(t,e),this.clearStack(),this.render(),this.app.refresh()}loadImage(t){const e=this.getImageDataFromImage(t);this.bitmapData=new $(e.width,e.height),this.clearStack(),this.stacks.push(e),this.render(),this.app.refresh()}getImageDataFromImage(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const s=e.getContext("2d");if(!s)throw new Error("Failed to get canvas context");s.drawImage(t,0,0);const r=C.createImageData(t.width,t.height),{data:i}=s.getImageData(0,0,e.width,e.height);for(let a=0;a<r.data.length;a++)r.data[Number(a)]=i[a];return r}getColorFromPixel(t,e,s=!1){const r=s?this.renderImageData:this.stacks[this.stacks.length-1||0];if(!r)throw new Error("ImageData not found");const i=r.data,a=e*(r.width*4)+t*4;return new y(i[Number(a)],i[a+1],i[a+2],i[a+3])}getPixel(t,e,s=!1){const r=s?this.renderImageData:this.stacks[this.stacks.length-1||0];if(!r)throw new Error("ImageData not found");const i=r.data,a=e*(r.width*4)+t*4;return i[Number(a)]+i[a+1]+i[a+2]+i[a+3]}setPixel(t,e,s){if(!this.renderImageData)throw new Error("RenderImageData not found");s=s||this.app.colorSelect.primaryColor;const r=(t+e*this.renderImageData.width)*4;this.renderImageData.data[r+0]=s.red,this.renderImageData.data[r+1]=s.green,this.renderImageData.data[r+2]=s.blue,this.renderImageData.data[r+3]=s.alpha>=0?s.alpha:255}putImageData(t,e,s){if(!this.renderImageData)throw new Error("RenderImageData not found");let r,i;for(let a=0;a<t.width;a++)for(let c=0;c<t.height;c++)r=(c*t.width+a)*4,i=((s+c)*this.renderImageData.width+(e+a))*4,Z(r,t.data,i,this.renderImageData.data)}fillPixels(t,e,s,r,i){if(!this.renderImageData)throw new Error("RenderImageData not found");for(let a=e;a<Math.min(e+r,this.renderImageData.width);a++)for(let c=s;c<Math.min(s+i,this.renderImageData.height);c++)this.setPixel(a,c,t)}addRenderAction(t){this.renderActions.push(t)}addPassiveRenderAction(t){this.passiveRenderActions.push(t)}cleanPassiveRenderActions(){this.passiveRenderActions=[]}getTmpStack(){return C.createImageData(this.stacks[this.stacks.length-1].width,this.stacks[this.stacks.length-1].height,this.stacks[this.stacks.length-1].data)}render(){window.clearTimeout(this.renderWait),this.renderWait=window.setTimeout(()=>{this.renderImageData=this.getTmpStack(),j(this.renderActions),j(this.passiveRenderActions,!0),window.cancelAnimationFrame(this.animationFrame),this.animationFrame=window.requestAnimationFrame(()=>{this.renderDisplays(!0)})},1e3/60/2),window.clearTimeout(this.renderWaitDisplays),this.renderWaitDisplays=window.setTimeout(()=>{this.renderDisplays()},300)}get size(){var t,e;return m(((t=this.renderImageData)==null?void 0:t.width)||0,((e=this.renderImageData)==null?void 0:e.height)||0)}get width(){var t;return((t=this.renderImageData)==null?void 0:t.width)||0}get height(){var t;return((t=this.renderImageData)==null?void 0:t.height)||0}clearStack(){var t,e;this.renderImageData=C.createImageData((t=this.bitmapData)==null?void 0:t.width,(e=this.bitmapData)==null?void 0:e.height),this.stacks=[this.renderImageData],this.render()}saveStack(){if(!this.renderActions)throw new Error("RenderActions not found");this.renderImageData=this.getTmpStack(),j(this.renderActions,!0),this.stacks.push(this.renderImageData),this.render()}revertStack(){this.stacks.length>1&&(this.renderImageData=this.stacks.pop(),this.render())}toBlob(){return new Promise(t=>{if(!this.renderImageData)throw new Error("RenderImageData not found");Q(this.renderImageData).toBlob(t)})}toBase64(){return new Promise(t=>{if(!this.renderImageData)throw new Error("RenderImageData not found");t(Q(this.renderImageData).toDataURL())})}renderDisplays(t=!1){if(!this.renderImageData)throw new Error("RenderImageData not found");const e=this.renderImageData;t?this.app.display&&e&&this.app.display.setImageData(e):this.app.displays.forEach(s=>{s.setImageData(e)})}}function Z(n,t,e,s){s[Number(e)]=t[Number(n)],s[e+1]=t[n+1],s[e+2]=t[n+2],s[e+3]=t[n+3]}function Q(n){var e;const t=document.createElement("canvas");return t.width=n.width,t.height=n.height,(e=t.getContext("2d"))==null||e.putImageData(n,0,0),t}function j(n,t=!1){if(t){let e;for(;n.length>0;)e=n.shift(),e&&e()}else n.forEach(e=>{e()})}class Dt{constructor(t){h(this,"app");h(this,"subscription",new st);h(this,"holdCrtl",!1);h(this,"holdAlt",!1);this.app=t}register(){this.subscription.add(x.keyDown.pipe(wt(200)).subscribe(this.onKeyDown)),this.subscription.add(this.subscription.add(x.keyUp.subscribe(this.onKeyUp)))}unregister(){this.subscription.unsubscribe()}registerDisplay(t){console.warn("registerDisplay not implemented",t)}unregisterDisplay(t){console.warn("unregisterDisplay not implemented",t)}onKeyUp(t){switch(t.key){case B.CONTROL:t.preventDefault(),this.holdCrtl=!1;break;case B.ALT:t.preventDefault(),this.holdAlt=!1;break}}onKeyDown(t){if(this.app.display){let e=1;switch(this.holdAlt&&(e*=10),t.key){case B.CONTROL:t.preventDefault(),this.holdCrtl=!0;break;case B.ALT:t.preventDefault(),this.holdAlt=!0;break;case B.ARROW_LEFT:t.preventDefault(),this.app.display.offset.x-=e;break;case B.ARROW_UP:t.preventDefault(),this.app.display.offset.y-=e;break;case B.ARROW_RIGHT:t.preventDefault(),this.app.display.offset.x+=e;break;case B.ARROW_DOWN:t.preventDefault(),this.app.display.offset.y+=e;break}const s=this.app.display;this.app.display.offset=m(()=>E(s.offset,-s.zoomBounds.min,s.canvasLayout.naturalSize-s.zoomBounds.max)),this.app.display.renderImageData()}}}class Nt{constructor({position:t,origin:e,app:s,x:r,y:i,originX:a,originY:c,leftClick:o,rightClick:l,holdAlt:d,holdCtrl:p}){h(this,"position");h(this,"origin");h(this,"app");h(this,"x");h(this,"y");h(this,"originX");h(this,"originY");h(this,"leftClick");h(this,"rightClick");h(this,"holdAlt");h(this,"holdCtrl");this.position=t,this.origin=e,this.app=s,this.x=r,this.y=i,this.originX=a,this.originY=c,this.leftClick=o,this.rightClick=l,this.holdAlt=d,this.holdCtrl=p}}const Pt=20;class St{constructor(t){h(this,"app");h(this,"pressed");h(this,"pointerEvent");h(this,"subscriptions",[]);h(this,"displaySubscriptions",new Map);h(this,"runSubscriptions",[]);this.app=t,this.pressed=!1}registerDisplay(t){this.displaySubscriptions.set(t,[x.get("pointerdown",t.canvas).subscribe(this.onPointerDown(t)),x.get("pointerup",t.canvas).subscribe(this.onPointerEnter(t))])}unregisterDisplay(t){var e;this.displaySubscriptions.has(t)&&((e=this.displaySubscriptions.get(t))==null||e.forEach(s=>s==null?void 0:s.unsubscribe()),this.displaySubscriptions.delete(t))}register(){}unregister(){}onContextMenu(t){return e=>{this.runActionResult(this.contextMenu(e,t),e,t)}}onPointerEnter(t){return e=>{if(e.target instanceof HTMLElement){this.app.setDisplay(t);const s=x.get("pointerleave",e.target).subscribe(r=>{s.unsubscribe(),this.onPointerLeave(t)(r)})}}}onPointerLeave(t){return e=>{}}onPointerDown(t){return e=>{var s;this.app.setDisplay(t),this.pointerEvent=this.getPointerEvent(e,t),this.pressed=!0,this.runActionResult(this.pointerDown(e,t),e,t),(s=this.app.display)==null||s.renderCanvas()}}onPointerLeaveAndUp(t){return e=>{at(),this.runActionResult(this.pointerLeaveAndUp(e,t),e,t)}}onPointerMove(t){return e=>{this.runActionResult(this.pointerMove(e,t),e,t)}}runActionResult(t,e,s){var r,i,a;t&&(t.events&&e.target instanceof HTMLElement&&(this.runSubscriptions=[x.get("contextmenu",e.target).subscribe(this.onContextMenu(s)),x.get("pointerleave",e.target).subscribe(this.onPointerLeaveAndUp(s)),x.get("pointermove",e.target).subscribe(this.onPointerMove(s)),x.get("pointerup",e.target).subscribe(this.onPointerLeaveAndUp(s))]),t.save&&((r=this.app.canvas)==null||r.saveStack()),t.revert&&((i=this.app.canvas)==null||i.revertStack()),t.render&&((a=this.app.canvas)==null||a.render()))}unsubscribeRun(){this.runSubscriptions.forEach(t=>t.unsubscribe()),this.runSubscriptions=[]}getPointerEvent(t,e){const s=e.canvasLayout;let r=m(t.clientX-e.bounds.min.x,t.clientY-e.bounds.min.y),i=m(()=>r-s.position);this.app.globalBounds&&(r=m(()=>r-this.app.globalBounds.min),i=m(()=>i-this.app.globalBounds.min));const a=m(()=>Math.round(i)),c=m(()=>Math.round(i/e.zoomFactor+e.zoomBounds.min));return new Nt({position:c,origin:a,app:this.app,x:c.x,y:c.y,originX:a.x,originY:a.y,leftClick:t.button!==2,rightClick:t.button===2,holdAlt:x.altActive,holdCtrl:x.cmdActive})}pointerDown(t,e){const s={events:!0};if(!this.app.tool||!this.app.canvas)throw new Error("Tool or Canvas not found");const r=this.app.tool,i=this.app.canvas;if(r.pointerDownHold)xt(()=>{this.runActionResult(r.onPointerDown(this.pointerEvent,{mouse:this}),t,e),i.render()});else return Object.assign(s,r.onPointerDown(this.pointerEvent,{mouse:this}));return s}pointerLeaveAndUp(t,e){if(!this.app.tool)throw new Error("Tool not found");return this.pressed=!1,this.pointerEvent=void 0,this.unsubscribeRun(),this.app.tool.onPointerUp(this.getPointerEvent(t,e),{mouse:this})}pointerMove(t,e){if(!this.app.tool)throw new Error("Tool not found");return this.pointerEvent=this.getPointerEvent(t,e),this.app.tool.onPointerMove(this.pointerEvent,{mouse:this})}contextMenu(t,e){var s;if(t.preventDefault(),t.stopPropagation(),!this.app.tool)throw new Error("Tool not found");return(s=this.app.tool)==null?void 0:s.onContextMenu(t,{mouse:this,display:e})}}let it;function at(){window.clearInterval(it)}function xt(n){at(),it=window.setInterval(n,Pt)}class U{constructor({app:t,passive:e,pointerDownHold:s}){h(this,"app");h(this,"passive");h(this,"pointerDownHold",!1);this.app=t,this.passive=e||!1,this.pointerDownHold=s||!1}onPointerDown(t,e){throw new Error('Method "onPointerDown" not implemented.')}onPointerUp(t,e){throw new Error('Method "onPointerUp" not implemented.')}onPointerMove(t,e){throw new Error('Method "onPointerMove" not implemented.')}onContextMenu(t,e){throw new Error('Method "onContextMenu" not implemented.')}deconstructor(){}onActive(){}setPixel(t,e,s){var r;return(r=this.app.canvas)==null?void 0:r.setPixel(t,e,s)}}class N extends U{constructor({brush:e,...s}){super(s);h(this,"brush");this.brush=e}static drawBrush({x:e,y:s,data:r,app:i,color:a}){var o,l;e=Math.floor(e-r[0].length/2+1),s=Math.floor(s-r.length/2);const c=[];for(let d=0;d<r[0].length;d++)for(let p=0;p<r.length;p++)r[Number(p)][Number(d)]>0&&a.alpha?((o=i.canvas)==null||o.setPixel(e+d,s+p,a),c.push([e+d,s+p])):r[Number(p)][Number(d)]<0&&((l=i.canvas)==null||l.setPixel(e+d,s+p,a));return c}}class nt extends N{onPointerDown(t){var i;const e=t.x,s=t.y,r=[...this.brush.data];return(i=this.app.canvas)==null||i.addRenderAction(()=>{N.drawBrush({color:this.brush.primaryColor,x:e,y:s,data:r,app:this.app})}),{save:!0,render:!0}}}function ot(n,t,e,s,r=0){const i=Math.abs(e-n),a=n<e?1:-1,c=Math.abs(s-t),o=t<s?1:-1;let l=(i>c?i:-c)/2;const d=[];let p=0;for(;r===0||p>=1?(d.push([n,t]),p=0):p+=1/r,!(n===e&&t===s);){const u=l;u>-i&&(l-=c,n+=a),u<c&&(l+=i,t+=o)}return d}function R(n,t,e,s,r,{density:i=0}){ot(t,e,s,r,i).forEach(a=>{n(a[0],a[1])})}function Ct(n,t,e,s,r,i,a,c,o,l=.001){let d=0,p=0,u=0;for(u=0;u<=1;u+=l)d=(1-u)**3*t+3*u*(1-u)**2*s+3*u**2*(1-u)*i+u**3*c,p=(1-u)**3*e+3*u*(1-u)**2*r+3*u**2*(1-u)*a+u**3*o,n(d,p)}function M(n,t,e,s,r,{strokeSize:i=0,filled:a=!1,density:c}){if(a){const o=(l,d)=>n(l,d,!0);for(let l=(r<0,e);r<0?l>=e+r:l<=e+r;r<0?l--:l++)R(o,(s<0,t),l,t+s,l,{density:c})}if(i>0){i=Math.floor(i/2);const o=[s<0?-i:i,r<0?-i:i];let l=[t-o[0],e-o[1]];[[t-o[0],e-o[1]],[t-o[0],e+r+o[1]],[t+s+o[0],e+r+o[1]],[t+s+o[0],e-o[1]],l].forEach(d=>{R(n,l[0],l[1],d[0],d[1],{density:c}),l=d})}}function k(n,t,e,s,r,{filled:i=!1,density:a=0}){s<0&&(s=Math.abs(s)),r<0&&(r=Math.abs(r));const c=s*s,o=r*r,l=4*c,d=4*o;let p,u,f,A=0;const w=(T,O)=>n(T,O,!0),D=[];for(p=0,u=r,f=2*o+c*(1-2*r);o*p<=c*u;p++)!a||A>=1?(D.push([t+p,e+u]),D.push([t-p,e-u]),D.push([t-p,e+u]),D.push([t+p,e-u]),A=0):A+=1/a,f>=0&&(f+=l*(1-u),u--),f+=o*(4*p+6);for(A=0,p=s,u=0,f=2*c+o*(1-2*s);c*u<=o*p;u++)!a||A>=1?(D.push([t+p,e+u]),D.push([t-p,e+u]),D.push([t+p,e-u]),D.push([t-p,e-u]),A=0):A+=1/a,f>=0&&(f+=d*(1-p),p--),f+=c*(4*u+6);if(i)for(let T=-r;T<=r;T++)for(let O=-s;O<=s;O++)O*O*r*r+T*T*s*s<=r*r*s*s&&w(t+O,e+T);D.forEach(T=>{n(T[0],T[1],!1)})}function _t(n,t,e,{filled:s=!1,density:r=0}){let i,a=Number.MAX_VALUE,c=Number.MAX_VALUE,o=Number.MIN_VALUE,l=Number.MIN_VALUE;if(t.forEach(d=>{i&&(d.x>o&&(o=d.x),d.y>l&&(l=d.y),d.x<a&&(a=d.x),d.y<c&&(c=d.y),R(n,i.x,i.y,d.x,d.y,{density:r})),i=d}),e){const d=t[0];i&&(d.x>o&&(o=d.x),d.y>l&&(l=d.y),d.x<a&&(a=d.x),d.y<c&&(c=d.y),R(n,i.x,i.y,d.x,d.y,{density:r}))}s&&Ot((p,u)=>n(p,u,!0),t,{IMAGE_LEFT:a,IMAGE_TOP:c,IMAGE_RIGHT:o,IMAGE_BOTTOM:l})}function Ot(n,t,{IMAGE_LEFT:e=0,IMAGE_TOP:s=0,IMAGE_RIGHT:r,IMAGE_BOTTOM:i}){const a=[],c=[];t.forEach(w=>{a.push(w.y),c.push(w.x)});let o;const l=Array(t.length);let d,p,u,f,A;for(p=s;p<i;p++){for(o=0,f=t.length-1,u=0;u<t.length;u++)(a[Number(u)]<p&&a[Number(f)]>=p||a[Number(f)]<p&&a[Number(u)]>=p)&&(l[o++]=Math.round(c[Number(u)]+(p-a[Number(u)])/(a[Number(f)]-a[Number(u)])*(c[Number(f)]-c[Number(u)]))),f=u;for(u=0;u<o-1;)l[Number(u)]>l[u+1]?(A=l[Number(u)],l[Number(u)]=l[u+1],l[u+1]=A,u&&u--):u++;for(u=0;u<o&&!(l[Number(u)]>=r);u+=2)if(l[u+1]>e)for(l[Number(u)]<e&&(l[Number(u)]=e),l[u+1]>r&&(l[u+1]=r),d=l[Number(u)];d<l[u+1];d++)n(d,p)}}class Rt extends N{constructor(){super(...arguments);h(this,"last")}onPointerDown(e){return this.draw(e)}onPointerMove(e){return this.draw(e)}onPointerUp(){return this.last=void 0,{save:!0}}draw(e){const s=(this.last||e).x,r=(this.last||e).y;return R((i,a)=>{var o;const c=[...this.brush.data];(o=this.app.canvas)==null||o.addRenderAction(()=>{N.drawBrush({color:this.brush.primaryColor,data:c,x:i,y:a,app:this.app})})},s,r,e.x,e.y,{}),this.last=e,{render:!0}}}var P=(n=>(n.BLACK="BLACK",n.WHITE="WHITE",n.TRANSPARENT="TRANSPARENT",n))(P||{});const S={BLACK:[0,0,0,255],WHITE:[255,255,255,255],TRANSPARENT:[0,0,0,0]};class F{constructor({app:t,size:e,lowres:s,primaryColor:r,secondaryColor:i}){h(this,"app");h(this,"_size");h(this,"lowres");h(this,"_primaryColor");h(this,"_secondaryColor");h(this,"_data");this.app=t,this._size=e!==void 0?e:1,this.lowres=s!==void 0?s:!0,this._data=this.getScaledData(this._size),this._primaryColor=r||new y(S[P.BLACK]),this._secondaryColor=i||new y(S[P.WHITE])}get size(){return this._size}set size(t){this._size=t,this._data=this.getScaledData(this._size)}get data(){return this._data}set data(t){this._data=t}get primaryColor(){return this._primaryColor||this.app.colorSelect.primaryColor}get secondaryColor(){return this._secondaryColor||this.app.colorSelect.secondaryColor}getData(t){return F.scale([],t)}getScaledData(t=1){return F.scale(this.getData(t),this.app.density)}static scale(t,e){const s=[];for(let r=0;r<t.length*e;r++){s.push([]);for(let i=0;i<t[0].length*e;i++)s[Number(r)].push(t[Math.floor(r/e)][Math.floor(i/e)])}return s}static scaleAsCopy(t,e){const s=[];for(let r=0;r<t.length*e;r++){s.push([]);for(let i=0;i<t[0].length*e;i++)s[Number(r)].push(t[r%t.length][i%t[0].length])}return s}}class Bt extends F{getData(t){return t>1?ht(t):t?[[1]]:[]}}function ht(n){n=(n-1)*2;const t=Array(n+1);for(let e=0;e<n+1;e++)t[Number(e)]=Array(n+1).fill(0);return k((e,s)=>{t[Math.round(e)][Math.round(s)]=1},n/2,n/2,n/2,n/2,{filled:!0}),t}function Lt(n){const t=ht(n+2);for(let e=0;e<t.length;e++)for(let s=0;s<t[Number(e)].length;s++)t[Number(e)][Number(s)]>0&&Math.random()<.15/n?t[Number(e)][Number(s)]=1:t[Number(e)][Number(s)]=0;return t}function Ut(n){const t=Array(n+1);for(let e=0;e<n+1;e++)t[Number(e)]=Array(n+1).fill(0);return M((e,s)=>{t[Math.round(e)][Math.round(s)]=1},0,0,n,n,{filled:!0}),t}class Wt extends F{getData(t){return Ut(t)}}class Mt extends F{getData(t){return Lt(t)}get data(){return this._data=this.getScaledData(this._size),this._data}}function G(n){return[Bt,Wt,Mt][Number(n)]}class _ extends N{constructor(e){super(e);h(this,"COLOR_TRANSPARENT");h(this,"filled");h(this,"selectedAnchor");h(this,"anchors");h(this,"anchorBrush");h(this,"startEvent");this.COLOR_TRANSPARENT=new y(S[P.TRANSPARENT]),this.filled=!1,this.selectedAnchor=void 0,this.anchors=[];const s=G(0);this.anchorBrush=new s({app:this.app,lowres:!0,size:1,primaryColor:new y(S[P.BLACK]),secondaryColor:new y(S[P.WHITE])})}onPointerDown(e){return this.startEvent=e,{}}drawAnchors(){const e=[...this.anchorBrush.data];this.anchors.forEach(s=>{this.drawAnchor(s,e)})}drawAnchor(e,s){e.intersectMap=[],M((r,i,a)=>{var l;let c=((l=this.app.canvas)==null?void 0:l.getColorFromPixel(r,i))||new y;c.alpha===0?c=a?this.anchorBrush.secondaryColor:this.anchorBrush.primaryColor:c.invert();const o=e.intersectMap;o&&(o[Number(r)]=o[Number(r)]||[],o[Number(r)][Number(i)]=!0,N.drawBrush({color:c,data:s,x:r,y:i,app:this.app}))},e.x-5,e.y-5,10,10,{strokeSize:1,filled:!0})}getAnchorByPosition(e,s){return this.anchors.find(r=>r.intersectAnchor(e,s)?r:!1)}addAnchor(e,s){const r=new Ft(e,s,this.anchorBrush);return this.anchors.push(r),r}reset(){this.anchors=[],this.selectedAnchor=void 0}}class Ft{constructor(t,e,s){h(this,"x");h(this,"y");h(this,"brush");h(this,"intersectMap");this.x=t,this.y=e,this.brush=s}intersectAnchor(t,e){return this.intersectMap&&this.intersectMap[Number(t)]&&this.intersectMap[Number(t)][Number(e)]}}class Ht extends _{onPointerDown(t){var e,s;if(this.selectedAnchor){const r=this.getAnchorByPosition(t.x,t.y);if(r)this.selectedAnchor=r;else return(e=this.app.canvas)==null||e.addRenderAction(()=>{this.render(!1),this.reset()}),{save:!0,render:!0};(s=this.app.canvas)==null||s.addPassiveRenderAction(()=>{this.render(!0)})}return{render:!0}}onPointerMove(t,{mouse:e}){var s;return e!=null&&e.pressed&&(this.anchors.length<1&&(this.addAnchor(t.x,t.y),this.selectedAnchor=this.addAnchor(t.x,t.y)),this.selectedAnchor&&(this.selectedAnchor.x=t.x,this.selectedAnchor.y=t.y),(s=this.app.canvas)==null||s.addPassiveRenderAction(()=>{this.render(!0)})),{render:!0}}render(t=!1){this.anchors.length&&(R((e,s)=>{const r=[...this.brush.data];_.drawBrush({color:this.brush.primaryColor,data:r,x:e,y:s,app:this.app})},this.anchors[0].x,this.anchors[0].y,this.anchors[1].x,this.anchors[1].y,{}),t&&this.drawAnchors())}}class zt extends _{constructor(e){super(e);h(this,"status");h(this,"locked");h(this,"moved");h(this,"points");h(this,"primaryHelperOffset");h(this,"secondaryHelperOffset");this.status=0,this.locked=!1}refreshHelperOffset(){this.primaryHelper&&(this.primaryHelperOffset=[this.primaryHelper.x-this.primaryAnchor.x,this.primaryHelper.y-this.primaryAnchor.y]),this.secondaryHelper&&(this.secondaryHelperOffset=[this.secondaryHelper.x-this.secondaryAnchor.x,this.secondaryHelper.y-this.secondaryAnchor.y])}onPointerDown(e){var r;if(this.moved||this.reset(),this.locked)return{};this.locked=!0,this.anchors.length===1&&this.reset();const s=this.getAnchorByPosition(e.x,e.y);if(s&&this.selectedAnchor!==s)this.selectedAnchor=s;else{if(this.status===2&&!s)return this.onPointerDownSave();this.status===1?this.onPointerDownCreateHelpers():this.selectedAnchor||(this.addAnchor(e.x,e.y),this.selectedAnchor=this.addAnchor(e.x,e.y))}return(r=this.app.canvas)==null||r.addPassiveRenderAction(()=>{this.render(!0),this.locked=!1}),{render:!0}}get primaryAnchor(){return this.anchors[0]}get secondaryAnchor(){return this.anchors[1]}get primaryHelper(){return this.anchors[2]}get secondaryHelper(){return this.anchors[3]}onPointerUp(){var e;return this.status<3&&this.status===0?(this.selectedAnchor=void 0,this.status++,(e=this.app.canvas)==null||e.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}):{}}onPointerMove(e,{mouse:s}){var r;return s!=null&&s.pressed&&this.selectedAnchor&&this.primaryHelperOffset&&this.secondaryHelperOffset?(this.moved=!0,this.selectedAnchor.x=e.x,this.selectedAnchor.y=e.y,this.selectedAnchor===this.primaryAnchor&&this.primaryHelper?(this.primaryHelper.x=this.selectedAnchor.x+this.primaryHelperOffset[0],this.primaryHelper.y=this.selectedAnchor.y+this.primaryHelperOffset[1]):this.selectedAnchor===this.secondaryAnchor&&this.secondaryHelper?(this.secondaryHelper.x=this.selectedAnchor.x+this.secondaryHelperOffset[0],this.secondaryHelper.y=this.selectedAnchor.y+this.secondaryHelperOffset[1]):(this.selectedAnchor===this.primaryHelper||this.selectedAnchor===this.secondaryHelper)&&this.refreshHelperOffset(),(r=this.app.canvas)==null||r.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}):{}}addPoints(e){if(!this.app.canvas)throw new Error("Canvas not defined");const s=this.app.canvas;if(Array.isArray(this.points)){const r=this.points;e.forEach(i=>{r[E(i[0]-1,0,s.width-1)][E(i[1]-1,0,s.height-1)]=!0})}else throw new Error("Points not defined")}render(e=!1){this.status>1?Ct((s,r)=>{const i=[...this.brush.data];N.drawBrush({color:this.brush.primaryColor,data:i,x:s,y:r,app:this.app})},this.primaryAnchor.x,this.primaryAnchor.y,this.primaryHelper.x,this.primaryHelper.y,this.secondaryHelper.x,this.secondaryHelper.y,this.secondaryAnchor.x,this.secondaryAnchor.y):R((s,r)=>{const i=[...this.brush.data];_.drawBrush({color:this.brush.primaryColor,data:i,x:s,y:r,app:this.app})},this.primaryAnchor.x,this.primaryAnchor.y,this.secondaryAnchor.x,this.secondaryAnchor.y,{}),e&&(this.primaryHelper&&R((s,r)=>{var c;let i=((c=this.app.canvas)==null?void 0:c.getColorFromPixel(s,r))||new y;i.alpha===0?i=this.anchorBrush.primaryColor:i.invert();const a=[...this.anchorBrush.data];_.drawBrush({color:i,data:a,x:s,y:r,app:this.app})},this.primaryAnchor.x,this.primaryAnchor.y,this.primaryHelper.x,this.primaryHelper.y,{}),this.secondaryHelper&&R((s,r)=>{var c;let i=((c=this.app.canvas)==null?void 0:c.getColorFromPixel(s,r))||new y;i.alpha===0?i=this.anchorBrush.primaryColor:i.invert();const a=[...this.anchorBrush.data];_.drawBrush({color:i,data:a,x:s,y:r,app:this.app})},this.secondaryAnchor.x,this.secondaryAnchor.y,this.secondaryHelper.x,this.secondaryHelper.y,{}),this.drawAnchors())}reset(){super.reset(),this.status=0,this.locked=!1}intersect(e,s){const r=[[0,0],[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];if(this.points){const i=this.points;for(let a=0;a<r.length;a++)if(i[e+r[Number(a)][0]][s+r[Number(a)][1]])return!0}return!1}onPointerDownCreateHelpers(){var s;let e=tt(this.primaryAnchor,this.secondaryAnchor);this.addAnchor(e[0],e[1]),e=tt(this.secondaryAnchor,this.primaryAnchor),this.addAnchor(e[0],e[1]),this.refreshHelperOffset(),(s=this.app.canvas)==null||s.addPassiveRenderAction(()=>{this.render(!0),this.locked=!1}),this.status++}onPointerDownSave(){var e;return(e=this.app.canvas)==null||e.addRenderAction(()=>{this.render(!1),this.reset()}),{events:!1,save:!0,render:!0}}}function tt(n,t){const e=ot(n.x,n.y,t.x,t.y);return e[Math.floor(e.length/4)]}class Yt extends U{constructor(){super(...arguments);h(this,"filling",!1)}fill(e,s,r){var A,w,D,T,O;if(!this.app.canvas)throw new Error("Canvas not found");const i=[[e,s]];let a=0,c,o,l,d,p;const u=(A=this.app.canvas)==null?void 0:A.getColorFromPixel(e,s,!0),f=[[-1,0],[1,0],[0,-1],[0,1]];for(;i.length;){if(a>2e6)throw new Error("FILL OVERFLOW");if(c=i.pop(),!c)throw new Error("FILL OVERFLOW");for(e=c[0],s=c[1],(w=this.app.canvas)==null||w.setPixel(e,s,r),o=0;o<f.length;o++)l=e+f[Number(o)][0],d=s+f[Number(o)][1],l>=0&&l<((D=this.app.canvas)==null?void 0:D.width)&&d>=0&&d<((T=this.app.canvas)==null?void 0:T.height)&&(p=(O=this.app.canvas)==null?void 0:O.getColorFromPixel(l,d,!0),p.is(u)&&!r.is(p)&&i.push([l,d]));a++}}onPointerDown(e){var s;if(!this.filling){this.filling=!0;const r=e.x,i=e.y,a=this.app.colorSelect.primaryColor;return(s=this.app.canvas)==null||s.addRenderAction(()=>{this.fill(r,i,a),this.filling=!1}),{save:!0,render:!0}}return{events:!1}}}class kt extends nt{constructor(t){super({pointerDownHold:!0,...t})}}class Gt extends _{onPointerMove(t){var i;const e=this.startEvent||m(0,0),s=t.x-e.x,r=t.y-e.y;return(i=this.app.canvas)==null||i.addPassiveRenderAction(()=>{M((a,c,o)=>{const l=[...this.brush.data];N.drawBrush({color:o?this.brush.secondaryColor:this.brush.primaryColor,data:l,x:a,y:c,app:this.app})},e.x,e.y,s,r,{strokeSize:this.filled?0:this.brush.data.length,filled:this.filled})}),{render:!0}}onPointerUp(t){var i;const e=this.startEvent||m(0,0),s=t.x-e.x,r=t.y-e.y;return(i=this.app.canvas)==null||i.addRenderAction(()=>{M((a,c,o)=>{const l=[...this.brush.data];N.drawBrush({color:o?this.brush.secondaryColor:this.brush.primaryColor,data:l,x:a,y:c,app:this.app})},e.x,e.y,s,r,{strokeSize:this.filled?0:this.brush.data.length,filled:this.filled})}),{save:!0,render:!0}}}class lt extends _{constructor({proportinalScale:e,...s}){super(s);h(this,"proportinalScale",!1);this.proportinalScale=e||!1}onPointerMove(e){var a;const s=this.startEvent||m(0,0),r=(e.x-s.x)/2;let i=(e.y-s.y)/2;return this.proportinalScale&&(r<0&&i>0||r>0&&i<0?i=r*-1:i=r),r!==0&&i!==0?((a=this.app.canvas)==null||a.addPassiveRenderAction(()=>{k((c,o,l)=>{const d=[...this.brush.data];N.drawBrush({color:l?this.brush.secondaryColor:this.brush.primaryColor,data:d,x:c,y:o,app:this.app})},Math.floor(s.x+r),Math.floor(s.y+i),r,i,{filled:this.filled})}),{render:!0}):{}}onPointerUp(e){var a;const s=this.startEvent||m(0,0),r=(e.x-s.x)/2;let i=(e.y-s.y)/2;return this.proportinalScale&&(r<0&&i>0||r>0&&i<0?i=r*-1:i=r),r!==0&&i!==0?((a=this.app.canvas)==null||a.addRenderAction(()=>{k((c,o,l)=>{const d=[...this.brush.data];N.drawBrush({color:l?this.brush.secondaryColor:this.brush.primaryColor,data:d,x:c,y:o,app:this.app})},Math.floor(s.x+r),Math.floor(s.y+i),r,i,{filled:this.filled})}),{save:!0,render:!0}):{}}}class Xt extends lt{constructor(e){super({...e,proportinalScale:!0});h(this,"func");this.func=k}}class $t extends _{constructor(e){super(e);h(this,"status");this.status=0}onPointerMove(e,{mouse:s}){var r;return s!=null&&s.pressed&&this.selectedAnchor?(this.selectedAnchor.x=e.x,this.selectedAnchor.y=e.y,(r=this.app.canvas)==null||r.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}):{}}onPointerDown(e){var r,i;const s=this.getAnchorByPosition(e.x,e.y);switch(this.status){case 1:if(s)this.selectedAnchor=s;else return this.status=2,(r=this.app.canvas)==null||r.addRenderAction(()=>{this.render(!1),this.reset()}),{save:!0,render:!0};break;default:s&&this.anchors[0]===s?(this.status=1,this.selectedAnchor=s):this.selectedAnchor=s||this.addAnchor(e.x,e.y)}return(i=this.app.canvas)==null||i.addPassiveRenderAction(()=>{this.render(this.status<2)}),{render:!0}}isClosed(){return this.status>0}render(e=!1){_t((r,i)=>{const a=[...this.brush.data];N.drawBrush({color:this.brush.primaryColor,data:a,x:r,y:i,app:this.app})},this.anchors,this.status>0,{filled:this.filled}),e&&this.drawAnchors()}reset(){super.reset(),this.status=0}}class L{constructor(t,e){h(this,"min",m(0,0));h(this,"max",m(0,0));this.min=t||this.min,this.max=e||this.max}}class Zt extends _{constructor(e){super(e);h(this,"brushPrimaryColor");h(this,"brushSecondaryColor");h(this,"bounds");h(this,"status");h(this,"croppedImageData");h(this,"intersectedStartEvent");this.brushPrimaryColor=new y(S[P.BLACK]),this.brushSecondaryColor=new y(S[P.WHITE]),this.brush=new(G(0))({app:this.app,size:1,lowres:!0,primaryColor:this.brushPrimaryColor,secondaryColor:this.brushSecondaryColor}),this.reset()}intersect(e){return this.bounds?e.x>this.bounds.min.x&&e.x<this.bounds.max.x&&e.y>this.bounds.min.y&&e.y<this.bounds.max.y:!1}reset(){this.status=0,this.bounds=void 0,this.intersectedStartEvent=void 0,this.croppedImageData=void 0,this.startEvent=void 0}onPointerDown(e){var r,i;let s;switch(this.status){case 3:break;case 2:if(this.croppedImageData&&(this.intersectedStartEvent||this.intersect(e)))if(this.intersectedStartEvent=e,e.rightClick)this.status++;else return{events:!0,render:!1};break;case 1:if(!this.bounds)throw new Error("Bounds not defined");if(s=m(this.bounds.max-this.bounds.min),this.status++,e.rightClick){const a=this.bounds.min.x,c=this.bounds.min.y;(r=this.app.canvas)==null||r.addRenderAction(()=>{var o;(o=this.app.canvas)==null||o.fillPixels(this.brush.secondaryColor,a,c,s.x,s.y)})}return(i=this.app.canvas)==null||i.addPassiveRenderAction(()=>{this.startEvent&&this.render(this.startEvent.x,this.startEvent.y,!0)}),{events:!0,render:!0};default:return super.onPointerDown(e)}return{}}onPointerMove(e,{mouse:s}){var r,i;if(this.intersectedStartEvent&&(s!=null&&s.pressed)){const a=this.getRectInfo(e);return(r=this.app.canvas)==null||r.addPassiveRenderAction(()=>{this.render(a.x,a.y,!0)}),{render:!0}}else if(this.status===0)return(i=this.app.canvas)==null||i.addPassiveRenderAction(()=>{this.render(e.x,e.y,!0)}),{render:!0};return{}}getRectInfo(e){if(!this.bounds||!this.startEvent||!this.intersectedStartEvent)throw new Error("Bounds, startEvent or intersectedStartEvent not defined");return{width:this.bounds.max.x-this.bounds.min.x,height:this.bounds.max.y-this.bounds.min.y,x:this.startEvent.x+e.x-this.intersectedStartEvent.x,y:this.startEvent.y+e.y-this.intersectedStartEvent.y}}onPointerUp(e){var s,r,i;if(this.status===3)return(s=this.app.canvas)==null||s.addRenderAction(()=>{const a=this.getRectInfo(e);if(!this.croppedImageData)throw new Error("Cropped image data not defined");C.invertImageData(this.croppedImageData),this.render(a.x,a.y,!1),this.reset()}),{save:!0,render:!0};if(this.intersectedStartEvent&&this.status===2){const a=this.getRectInfo(e);if(this.startEvent)this.startEvent.x=a.x,this.startEvent.y=a.y;else throw new Error("Start event not defined");return this.bounds=new L(m(a.x,a.y),m(a.x+a.width,a.y+a.height)),(r=this.app.canvas)==null||r.addPassiveRenderAction(()=>{this.render(a.x,a.y,!0)}),{render:!0}}else if(this.startEvent&&this.status===0){const a=e.x-this.startEvent.x,c=e.y-this.startEvent.y;return a>0&&c>0&&(this.bounds=new L(m(this.startEvent.x,this.startEvent.y),m(e.x,e.y)),this.status++,(i=this.app.canvas)==null||i.addPassiveRenderAction(()=>{var o,l;this.bounds&&this.startEvent&&((o=this.app.canvas)!=null&&o.renderImageData)&&(this.croppedImageData=C.cropImageData((l=this.app.canvas)==null?void 0:l.renderImageData,this.bounds.min.x,this.bounds.min.y,a,c),C.invertImageData(this.croppedImageData),this.render(this.startEvent.x,this.startEvent.y,!0))})),{render:!0}}return{}}render(e,s,r){var c;let i=m(0,0),a=m(e,s);if(this.bounds){const o=this.bounds;i=m(()=>o.max-o.min)}else this.startEvent&&(a=this.startEvent.position,i=m(()=>a-a));this.croppedImageData&&((c=this.app.canvas)==null||c.putImageData(this.croppedImageData,a.x,a.y)),r&&M((o,l)=>{var u;const d=[...this.brush.data];let p=((u=this.app.canvas)==null?void 0:u.getColorFromPixel(o,l))||new y;p.alpha===0?p=this.brushPrimaryColor:p.invert(),N.drawBrush({color:p,data:d,x:o,y:l,app:this.app})},a.x,a.y,i.x,i.y,{strokeSize:this.brush.data.length,filled:this.filled,density:3})}}class jt extends _{constructor(e){super(e);h(this,"brushPrimaryColor");h(this,"brushSecondaryColor");h(this,"moving");this.brushPrimaryColor=new y(S[P.BLACK]),this.brushSecondaryColor=new y(S[P.WHITE]),this.brush=new(G(0))({app:this.app,size:1,lowres:!0,primaryColor:this.brushPrimaryColor,secondaryColor:this.brushSecondaryColor}),this.moving=!1}onPointerMove(e){var s;if(this.startEvent){const r=this.startEvent.x,i=this.startEvent.y,a=e.x-r,c=e.y-i;this.moving||(this.moving=!0,(s=this.app.canvas)==null||s.addPassiveRenderAction(()=>{M((o,l)=>{var u;const d=[...this.brush.data];let p=((u=this.app.canvas)==null?void 0:u.getColorFromPixel(o,l))||new y;p.alpha===0?p=this.brushPrimaryColor:p.invert(),N.drawBrush({color:p,data:d,x:o,y:l,app:this.app})},r,i,a,c,{strokeSize:this.brush.data.length,filled:!1}),this.moving=!1}))}return{render:!0}}onPointerUp(e){var s;if(this.startEvent){(s=this.app.canvas)==null||s.cleanPassiveRenderActions();const r=m(e.x,e.y),i=m(this.startEvent.x,this.startEvent.y),a=X(()=>Math.floor(r-i));if(a.x>0&&a.y>0){const c=new L(i,r),o=this.app.display;if(o){const l=X(()=>Math.floor(o.canvasLayout.naturalSize/a*o.zoomFactor)),d=X(()=>c.min+a/2);o.setZoom(l.x>l.y?l.x:l.y,d)}}}return{render:!0}}}class Vt extends U{onPointerDown(t){const e=this.app.display;if(!e)throw new Error("Display not found");let s=2;return e.maxZoomFactor-5<e.zoomFactor&&(s=1),s=x.altActive?-s:s,e.zoom(s,m(t.x,t.y)),{events:!1}}}class Kt extends U{constructor(t){super(t),this.passive=!0}onActive(){var t;(t=this.app.canvas)==null||t.revertStack()}}class qt extends U{constructor(t){super(t),this.passive=!0}onActive(){var t;(t=this.app.canvas)==null||t.clearStack()}}function Jt(n){return[nt,Rt,Ht,zt,Yt,kt,Gt,Xt,lt,$t,Zt,U,U,U,jt,Vt,Kt,qt][n]}class Qt{constructor(t){h(this,"app");h(this,"id",Et());h(this,"events",new rt);h(this,"bounds",new L);h(this,"size",m(0,0));h(this,"_cursorColor",new y(S[P.TRANSPARENT]));h(this,"_cursorColorRGBA","rgba(0, 0, 0, 0)");h(this,"canvasLayout",K({size:z(m(0,0)),naturalSize:z(m(0,0)),position:z(m(0,0))}));h(this,"imageData");h(this,"tmpImageData");h(this,"el");h(this,"canvas");h(this,"context",null);h(this,"zoomFactor",1);h(this,"maxZoomFactor",20);h(this,"zoomPosition",m(.5,.5));h(this,"zoomBounds",new L);h(this,"offset",m(0,0));h(this,"cursorVisible",!1);this.app=t,this.cursorColor=new y(S[P.BLACK]),this.resetZoom()}showCursor(){this.cursorVisible=!0}hideCursor(){this.cursorVisible=!1,this.renderImageData()}setElement(t){this.el=t}setCanvas(t){this.canvas=t,this.context=t.getContext("2d"),Object.values(this.app.inputs).forEach(e=>{e.registerDisplay(this)})}destroy(){this.events.next(new W({name:"destroy"})),Object.values(this.app.inputs).forEach(t=>{t.unregisterDisplay(this)})}setImageData(t){this.tmpImageData=this.imageData=t,this.maxZoomFactor=20,this.zoomBounds=this.calculateZoomBounds(this.zoomPosition,this.zoomFactor),this.renderImageData()}get canvasSize(){if(!this.canvas)throw new Error("Canvas not set");return m(this.canvas.width,this.canvas.height)}get naturalSize(){if(!this.canvas)throw new Error("Canvas not set");return m(this.canvas.width,this.canvas.height)}get naturalWidth(){if(!this.imageData)throw new Error("Image data not set");return this.imageData.width}get naturalHeight(){if(!this.imageData)throw new Error("Image data not set");return this.imageData.height}get width(){return this.zoomBounds.max.x-this.zoomBounds.min.x}get height(){return this.zoomBounds.max.y-this.zoomBounds.min.y}get zoomFactorWidth(){if(!this.canvas)throw new Error("Canvas not set");return this.canvas.width/this.zoomFactor}setSize(t,e){let s;typeof t=="object"&&"x"in t?s=t:s=m(t,e),this.size=s,this.events.next(new W({name:"change:size",value:s})),this.canvasAdjustment()}canvasAdjustment(){if(!this.app.canvas)throw new Error("Canvas not set");const t=this.app.canvas;this.canvasLayout.size=m(()=>Math.min(Math.max(t.size*this.zoomFactor,0),this.size)),this.canvasLayout.naturalSize=this.app.canvas.size,this.canvasLayout.position=m(0,0)}setZoom(t=1,e=m(0,0)){t=Math.min(t,this.maxZoomFactor),t>=0&&(this.zoomFactor=t,this.canvasAdjustment(),this.zoomPosition=m(()=>e/this.canvasLayout.naturalSize),this.zoomBounds=this.calculateZoomBounds(this.zoomPosition,this.zoomFactor),this.resetOffset(),window.requestAnimationFrame(()=>{this.renderImageData(),this.events.next(new W({name:"change:zoomFactor",value:{factor:t}}))}))}zoom(t=1,e=m(0,0)){this.zoomFactor+t>=0&&this.setZoom(this.zoomFactor+t,e)}renderImageData(){this.tmpImageData=this.imageData;const t=m(()=>this.zoomBounds.max-this.zoomBounds.min),e=m(()=>m(this.offset)+this.zoomBounds.min);if(!this.tmpImageData)throw new Error("Image data not set");this.tmpImageData=C.cropImageData(this.tmpImageData,e.x,e.y,t.x,t.y),this.tmpImageData=C.resizeImageData(this.tmpImageData,this.zoomFactor),this.renderCanvas()}get cursorColor(){return this._cursorColor}set cursorColor(t){this._cursorColorRGBA=t.toRGBA(),this._cursorColor=t}renderCanvas(){var t;this.tmpImageData&&((t=this.context)==null||t.putImageData(this.tmpImageData,-this.offset.x,-this.offset.y),this.renderRaster())}reset(){this.resetZoom(),this.resetOffset(),this.renderCanvas()}resetOffset(){this.offset=m(0,0)}resetZoom(){this.imageData&&this.setZoom(1)}renderRaster(){const t=[];this.zoomFactor>this.maxZoomFactor-3&&t.push({size:m(1,1),width:1,color:"#CCCCCC"});const e=this.canvas,s=this.context;if(!e||!s)throw new Error("Canvas or context not set");s.globalCompositeOperation="destination-over",t.forEach(r=>{const i=m(()=>this.canvasLayout.naturalSize/r.size);s.lineWidth=r.width,s.beginPath();for(let a=0;a<i.x+1;a++){const c=Math.floor(a*r.size.x*this.zoomFactor)+r.width/2;s.moveTo(c,0),s.lineTo(c,e.height);for(let o=0;o<i.y+1;o++){const l=Math.floor(o*r.size.y*this.zoomFactor)+r.width/2;s.moveTo(0,l),s.lineTo(e.width,l)}}s.strokeStyle=r.color,s.stroke()})}refresh(){if(this.el&&this.canvas){const t={left:this.canvas.offsetLeft+this.el.offsetLeft,top:this.canvas.offsetTop+this.el.offsetTop,width:this.canvas.offsetWidth,height:this.canvas.offsetHeight};this.bounds=new L(m(t.left,t.top),m(t.left+t.width,t.top+t.height)),this.imageData&&this.renderImageData()}}setOffset(t){this.offset=t}calculateZoomBounds(t,e){if(!this.app.canvas)throw new Error("Canvas not set");e=e||1;const s=this.app.canvas.size;t=m(()=>Math.floor(t*s));const r=m(()=>this.size/s),i=m(()=>Math.ceil(Math.min(r/e*s,s))),a=m(()=>Math.min(Math.max(t-Math.ceil(i/2),0),s-i)),c=m(()=>a+i);return new L(a,c)}}const te={FULL:0,HALF:1,THIRD:2,QUARTER:3};class ee{constructor(t){h(this,"subscription",new st);h(this,"events",new rt);h(this,"globalBounds");h(this,"fsItem");h(this,"options",{size:{width:300,height:200},display:{foreground:"#FFFFFF",background:"#000000"}});h(this,"density",1);h(this,"displaySplit",te.FULL);h(this,"displays",[]);h(this,"displaysEl");h(this,"displaysLayout",{size:m(0,0)});h(this,"display");h(this,"canvas");h(this,"inputs");h(this,"brush");h(this,"brushSelect",{size:1,index:0});h(this,"colorSelect",{primaryColor:new y(S[P.BLACK]),secondaryColor:new y(S[P.WHITE]),paletteSteps:new y(2,1,1)});h(this,"tool");h(this,"toolSelect",{value:"",index:1,filled:!1});h(this,"cursorCanvas",null);this.globalBounds=t,this.canvas=new C(this),this.setBrush(this.brushSelect),this.setTool(this.toolSelect),this.subscription.add(ft.resize.subscribe(this.onViewportRefresh.bind(this))),this.inputs={keyboard:new Dt(this),mouse:new St(this)},Object.values(this.inputs).forEach(e=>{e.register()})}setColorSelect(t){this.colorSelect={...this.colorSelect,...t}}setBrushSelect(t){this.brushSelect={...this.brushSelect,...t}}setToolSelect(t){this.toolSelect={...this.toolSelect,...t}}setDisplaysElement(t){this.displaysEl=t}refresh(){this.displaysEl&&(this.displaysLayout={size:m(this.displaysEl.offsetWidth,this.displaysEl.offsetHeight)},this.refreshDisplayPositions(),this.refreshDisplays())}setDisplay(t){this.display&&this.display.hideCursor(),this.display=t,this.display.showCursor()}updateGlobalBounds(t){this.globalBounds=t}reset(){var t;(t=this.canvas)==null||t.clearStack(),this.displays.forEach(e=>e.reset())}destroy(){this.subscription.unsubscribe()}refreshDisplays(){this.displays.forEach(t=>{t.refresh()})}onViewportRefresh(){this.refreshDisplays()}addDisplay(t){var e;return t=z(t||new Qt(this)),this.displays.push(t),t.app=this,this.events.next(new W({name:"addDisplay",value:t,scope:this})),(e=this.canvas)==null||e.render(),t}clearDisplays(){this.displays.forEach(t=>{t.destroy(),this.events.next(new W({name:"removeDisplay",value:t,scope:this}))}),this.displays=[]}getDisplay(t){return this.displays.find(e=>e.id===t?e:!1)}setBrush({index:t,size:e}){const s=G(t||0);this.brush=new s({app:this,size:e}),this.tool&&this.tool instanceof N&&(this.tool.brush=this.brush),this.events.next(new W({name:"change:brush",value:this.brush,scope:this}))}setBrushSize(t){this.brush&&(this.brush.size=t)}setTool({index:t}){if(!this.brush)throw new Error("Brush not found");const e=new(Jt(Number(t)))({app:this,brush:this.brush});this.tool=e,this.tool.onActive(),this.events.next(new W({name:"change:tool",value:this.tool,scope:this}))}get paletteSteps(){return this.colorSelect.paletteSteps}set paletteSteps(t){this.colorSelect.paletteSteps=t}refreshDisplayPositions(){const t=this.displaysLayout.size.x,e=this.displaysLayout.size.y,r=[[[1,1]],[[.5,1],[.5,1]],[[1,.5],[1,.5]],[[1,.5],[.5,.5],[.5,.5]],[[.5,.5],[.5,.5],[1,.5]],[[.5,.5],[.5,.5],[.5,.5],[.5,.5]]].filter(i=>i.length===this.displays.length?i:!1)[0];this.displays.forEach((i,a)=>{i.setSize(pt(Math.floor(t*r[Number(a)][0]),Math.floor(e*r[Number(a)][1]))),r[Number(a)][0]<1,r[Number(a)][1]<1})}}var se=(n=>(n.CONTENT="content",n.OUTPUT_TYPE="type",n))(se||{}),H=(n=>(n.WEB_PAINTING_DISPLAY_BACKGROUND="extras13_web_painting_display_background",n.WEB_PAINTING_DISPLAY_FOREGROUND="extras13_web_painting_display_foreground",n))(H||{});const re=V(({core:n})=>[{meta:[[g.SYMBOL,v.WEB_PAINTING]],id:"WebPainting.app",name:"WebPainting",createdDate:new Date(2017,7,5).getTime(),editedDate:new Date(2020,3,14).getTime(),async action(){var c,o;const t=n.addExecution(),e=await Y(()=>import("./CTeNWjGs.js").then(l=>l.W),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url).then(l=>l.default),s=(c=n.modules.screen)==null?void 0:c.contentLayout;if(!s)throw new Error("Content layout not found");const r=new ee(new L(s.position,m(()=>s.position+s.size)));r.options.display.background=n.config.get(H.WEB_PAINTING_DISPLAY_BACKGROUND),r.options.display.foreground=n.config.get(H.WEB_PAINTING_DISPLAY_FOREGROUND);const i=K({fsItem:void 0,app:r}),a=(o=n.modules.windows)==null?void 0:o.addWindow({component:e,componentData:{model:i,setApp:l=>{i.app=l}},options:{title:"WebPainting - Extras 1.3",scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1,embed:!0}},{group:"extras13WebPainting",full:!0});i.actions={close:()=>{a==null||a.close()},focus:()=>{a==null||a.focus()}},t()}}]);function ie(){return{[H.WEB_PAINTING_DISPLAY_BACKGROUND]:"#CCCCCC",[H.WEB_PAINTING_DISPLAY_FOREGROUND]:"#FFFFFF"}}var ct=(n=>(n.WEB_BASIC_SHOW_PREVIEW="extras13_web_basic_show_preview",n))(ct||{}),b=(n=>(n.CONTENT="content",n.OUTPUT_TYPE="type",n))(b||{});function ae(){return{[ct.WEB_BASIC_SHOW_PREVIEW]:"extras13_web_basic_show_preview"}}function et(){return{[I.HAS_WINDOW_OUTPUT]:!1,[b.CONTENT]:"",[b.OUTPUT_TYPE]:"basic"}}const ne=V(({core:n})=>[{meta:[[g.SYMBOL,v.WEB_BASIC],[g.WINDOW_SIZE,m(360,200)]],id:"WebBasic.app",name:"WebBasic",createdDate:new Date(2017,7,5).getTime(),editedDate:new Date(2020,3,14).getTime(),async action({modules:t},e){var d,p,u;const s=n.addExecution();let r;const i=K({value:et(),fsItem:void 0,output:[],openValue:void 0});if(e)if(r=await((d=t.files)==null?void 0:d.fs.get(e)),r&&b.CONTENT in r.data){const f={...r.data,[b.CONTENT]:[].concat(r.data[b.CONTENT]).join(`
`)};i.fsItem=r,i.value=f}else throw new Error("Can't read file content");const[a,c]=await Promise.all([Y(()=>import("./DPfhA-qo.js"),__vite__mapDeps([25,26,6,27,28,18,17,15,19,13,2,1,14,16,20,21,29,30,31,7,8,9,10,32,33,34,35,22,23,36,37,38,39,40,41,42,43,5,44]),import.meta.url).then(f=>f.default),Y(()=>import("./C4ABaeJQ.js"),__vite__mapDeps([45,6,46]),import.meta.url).then(f=>f.default)]),o=(p=n.modules.windows)==null?void 0:p.addWindow({component:a,componentData:{model:i,"onUpdate:value":f=>{i.value=f}},options:{title:"WebBasic - Extras 1.3",scaleX:!0,scaleY:!0,scrollX:!0,scrollY:!0,center:!1,embed:!1,borderless:!0},layout:{size:m(540,360)}},{group:"extras13WebBasic"});let l;i.actions={close:()=>{o==null||o.close()},focus:()=>{o==null||o.focus()},reset:()=>{i.value=et(),i.fsItem=void 0,i.output=[],i.openValue=void 0},togglePreview:(f=!0)=>{var A;f?(l=(A=n.modules.windows)==null?void 0:A.addWindow({component:c,componentData:{model:i},options:{title:"Preview - WebBasic - Extras 1.3",scaleX:!0,scaleY:!0,scrollX:!0,scrollY:!0,center:!1,close:!1,embed:!1,borderless:!0},layout:{size:m(540,360)}},{group:"extras13WebBasic",active:!1}),window.requestAnimationFrame(()=>{var w;(w=n.modules.windows)==null||w.contentWrapper.setWindowPositions(q.SPLIT_HORIZONTAL,[o,l],{embed:!0})})):l&&(o==null||o.unfocus(),l.close(),window.requestAnimationFrame(()=>{var w;(w=n.modules.windows)==null||w.contentWrapper.setWindowPositions(q.SPLIT_HORIZONTAL,[o],{embed:!0}),o==null||o.focus()}))}},(u=n.modules.screen)==null||u.setTheme(At),s(),o==null||o.events.pipe(vt(({name:f})=>f==="close")).subscribe(()=>{var f;l&&l.close(),(f=n.modules.screen)==null||f.setTheme(void 0)})}}]);function oe(n){return async({modules:t})=>{var r;const e=n.addExecution(),[s]=await Promise.all([Y(()=>import("./DxA0974d.js").then(i=>i.B),__vite__mapDeps([47,6,7,8,9,10,22,23,11,12,48,49,50,51,52]),import.meta.url).then(i=>i.default)]);(r=t.windows)==null||r.addWindow({component:s,componentData:{},options:{title:"Base64 Converter",scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"extras13Base64Converter"}),e()}}const he=V(()=>[{meta:[[g.SYMBOL,v.DIRECTORY],[g.WINDOW_SIZE,m(380,200)],[g.WINDOW_SYMBOL_REARRANGE,!0]],id:"BasicDemos",name:"Basic Demos",createdDate:new Date(2017,7,5).getTime(),editedDate:new Date(2020,3,14).getTime(),items:[{meta:[[g.SYMBOL,v.BASIC]],id:"TEST.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:['PRINT USING "# #"; 1,2']}},{meta:[[g.SYMBOL,v.BASIC]],id:"FunctionTest.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:['PRINT USING "LEN(\\"ABC\\") #"; LEN("ABC")','PRINT USING "ASC(\\"D\\") ##"; ASC("D")','PRINT USING "CHR$(68) ##"; CHR$(68)','PRINT USING "LEFT$(\\"XYZ\\", LEN(\\"XYZ\\")-1) #"; LEFT$("XYZ", LEN("XYZ")-1)','PRINT USING "RIGHT$(\\"XYZ\\", LEN(\\"XYZ\\")-1) #"; RIGHT$("XYZ", LEN("XYZ")-1)']}},{meta:[[g.SYMBOL,v.BASIC]],id:"Fibonacci.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["CLS","READ max","DIM fib%(max)","LET fib(1) = 1","LET fib(2) = 2","FOR i=3 TO max","LET fib(i) = fib(i - 2) + fib(i -1)","NEXT i","FOR i=1 TO max","PRINT fib(i)","NEXT i","DATA 10","END"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"Area.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["CLS","DIM w%,h%,a%","LET w%=12","LET h%=4","LET a%=w%*h%",'PRINT "With the width " + w%','PRINT " and the height " + h%','PRINT " you have the area " + a%']}},{meta:[[g.SYMBOL,v.BASIC]],id:"Circle.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["CLS","DIM r,a","LET r=5","READ pi","LET a=r*r*pi",'PRINT USING "With the radius ##.##"; r','PRINT USING "we have the area ##.##"; a',"DATA 3.14","END"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"Your_Name.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["CLS",'PRINT "What is your name?"',"INPUT n$",'PRINT "What is your shoe size?"',"INPUT size",'PRINT "Hello "; n$','PRINT USING "your shoe size is ##.##"; size',"END"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"GuessTheNumber.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["GuessTheNumber","CLS","READ max%","DIM number%, guess%, guesses%, message$",'LET message$ =  ""','PRINT "The number is between 1-1000."',"LET number% = INT(RND * max%) + 1","LET guess% = 1","LET guesses% = 0","WHILE guess%<>number%",'PRINT "Guess the number"',"PRINT message$","INPUT message$ guess%","IF (guess%<>number%) THEN","IF (guess%>number%) THEN",'LET message$ = "Your guess was too high"',"ELSE",'LET message$ =  "Your guess was too low"',"ENDIF","ENDIF","LET guesses% = guesses% + 1","WEND",'PRINT USING "You found the number in # tries"; guesses%',"DATA 1000","END"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"Factorial.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["DIM result, n",'PRINT "Calculate the factorial of"',"INPUT n","LET result = 1","FOR i = n TO 1 STEP -1","LET result = result * i","NEXT i",'PRINT USING "#! = #"; n, result',"END"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"Pyramid.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["CLS","DIM stars$",'PRINT "Enter the height of the pyramid"',"INPUT height",'LET stars$ = ""',"FOR i = 1 TO height",'LET stars$ = ""',"FOR j = 1 TO (i+i-1)",'LET stars$ = stars$ + "*"',"NEXT j","PRINT SPC(height - i) + stars","NEXT i","END"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"Bubble_Sort.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["CLS","READ max","DIM SHARED numbers(max)","SUB CreateList(max) STATIC","FOR i=1 TO max","LET numbers(i) = INT(RND * 100)","NEXT i","END SUB","SUB PrintList(max) STATIC","FOR i=1 TO max","PRINT numbers(i)","NEXT i","END SUB","SUB SwapValues(i%, j%) STATIC","LET numbers(i%) = numbers(i%) XOR numbers(j%)","LET numbers(j%) = numbers(i%) XOR numbers(j%)","LET numbers(i%) = numbers(i%) XOR numbers(j%)","END SUB","SUB Sort(max) STATIC","FOR i%=1 TO (max - 1)","FOR j%=i% TO max","IF numbers(i%)>numbers(j%) THEN","CALL SwapValues(i, j)","END IF","NEXT j%","NEXT i%","END SUB","CreateList(max)","Sort(max)","PrintList(max)","DATA 10","END"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"Goto.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:['PRINT "Step 1"','PRINT "Step 2"','PRINT "Step 3"',"GOTO ignore",'PRINT "Step 4"',"ignore:",'PRINT "Step 5"']}},{meta:[[g.SYMBOL,v.BASIC]],id:"Vars.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["DIM A, B","LET A = 2000",'LET B = "Hello World"','PRINT USING "A: #"; A','PRINT USING "B: #"; B']}},{meta:[[g.SYMBOL,v.BASIC]],id:"If.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["DIM A, B","LET A = 1","LET B = 2","IF A == B THEN",'PRINT "true"',"ELSE",'PRINT "false"',"END","IF (A < B) THEN",'PRINT "true"',"END"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"For.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["DIM i%","FOR i% = 1 TO 5",'PRINT USING "For Number #"; i%',"NEXT i%"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"For_Step.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["CLS","FOR i% = 0 TO 6 STEP 2",'PRINT "For Step Number #"; i%',"NEXT i%"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"While.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["DIM i%","LET i%=0","WHILE i% < 5",'PRINT USING "While Number #"; i%',"LET i% = i% + 1","WEND"]}},{meta:[[g.SYMBOL,v.BASIC]],id:"Pause.bas",data:{[I.HAS_WINDOW_OUTPUT]:!0,[b.OUTPUT_TYPE]:"basic",[b.CONTENT]:["DIM duration","LET duration = 2500",'PRINT USING "Start with Pause #ms"; duration',"PAUSE duration",'PRINT "End Pause"','PRINT USING "Start with Sleep #ms"; duration',"PAUSE duration",'PRINT "End Sleep"']}}]}]),le=mt(async({core:n})=>(n.config.setDefaults(ie()),n.config.setDefaults(ae()),{locked:!0,meta:[[g.SYMBOL,v.DISK_WORKBENCH13],[g.WINDOW_SIZE,m(320,220)],[g.WINDOW_POSITION,m(310,10)],[g.WINDOW_SYMBOL_REARRANGE,!0]],name:"Extras 1.3",items:[{id:"Tools",name:"Tools",meta:[[g.WINDOW_SIZE,m(160,120)],[g.WINDOW_SYMBOL_REARRANGE,!0]],createdDate:new Date(2024,8,9).getTime(),editedDate:new Date(2024,8,9).getTime(),items:[{meta:[[g.SYMBOL,v.DEFAULT]],id:"Base64Converter.app",name:"Base64Converter",createdDate:new Date(2023,8,4).getTime(),editedDate:new Date(2023,8,4).getTime(),action:oe(n)}]},...await re({core:n}),...await ne({core:n}),...await he({core:n})]})),Se=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{L as B,y as C,te as D,se as P,H as a,ct as b,b as c,Se as i};

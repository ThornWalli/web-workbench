var it=Object.defineProperty;var vt=(t,e,s)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Z=(t,e,s)=>vt(t,typeof e!="symbol"?e+"":e,s);import{i as a,I as tt,o as Fe}from"./BGIFtisS.js";import{M as ct,W as ut}from"./DCegKuwx.js";import{P as ht,D as pt,a as dt,T as ft}from"./BY0KaPQX.js";import{C as le,B as ue}from"./BJmh0rUk.js";import{d as mt,g as wt,M as Ge,s as De,n as Me,c as yt}from"./DYHHCWM9.js";import{d as gt,A as Ue}from"./C6HPuhbs.js";import{C as ve,a as zt,W as bt,P as Mt,b as ot}from"./BXvnyj-V.js";import{I as St,W as nt,a as Ct,H as Je,b as xt}from"./DchX226r.js";import{d as Y}from"./YY0LfIuj.js";import{B as qe}from"./CSceaZGY.js";import{t as g,v as h,V as We,x as n,d as ne,r as p,j as d,o as Ee,W as be,X as he,Y as pe,C as oe,N as Te,_ as se,K as ye,Z as st,$ as rt,y as je,z as N,D as x,a0 as ee,a1 as K,F as B,G as ge,a2 as Et,A as Ce,a3 as Vt,a4 as Ht,a5 as At,P as Oe,a6 as kt,L as xe,a7 as _t,E as Pt,a8 as Tt,a9 as Ot}from"./BRP7lMhW.js";import{g as Ke}from"./wjpmATP-.js";import{S as ze}from"./6C4StZv5.js";import{g as Wt,a as Lt,b as Rt,c as It}from"./CVMiNqhH.js";import{u as Le,C as Xe,N as Bt,W as Nt}from"./BL9b5cpI.js";import{W as Ft}from"./Cza0xQeI.js";import{C as Dt}from"./ey0azPGz.js";import{f as Se}from"./DIR0ob6O.js";import{f as Qe}from"./CSlkdJUE.js";import Ut from"./HY2XLPbL.js";import{u as $t}from"./YcwuoW3W.js";import{u as Yt}from"./C1d-wXne.js";import{u as jt}from"./DMqoVgoU.js";import"./CnnF2WpI.js";import"./L24w7Tb1.js";import"./C5mdboMC.js";import"./Cpj98o6Y.js";import"./RAasLaaH.js";import"./D4lI5vpz.js";import"./DdQrQ7-5.js";import"./CDSNOiTq.js";import"./DN3eHOnZ.js";import"./Ce6njBYG.js";import"./djI3_XgP.js";import"./c7yvS0cq.js";import"./xeZm7TXO.js";import"./BWR5uye1.js";import"./CV0dHcg-.js";function Gt(t){t=t||document.body,t.requestFullscreen()}function Jt(){document.exitFullscreen()}function qt(t,e=void 0){t=t||document.body,e||e===void 0&&!$e()?Gt(t):Jt()}function $e(){return!!document.fullscreenElement}const Kt=gt(({core:t})=>[{name:["fullscreen"],description:"Toggle Fullscreen",args:[new Ue({name:"set",description:"Set Fullscreen"}),new Ue({name:"toggle",description:"Toggle Fullscreen",flag:!0}),new Ue({name:"is",description:"check fullscreen",flag:!0})],async action({is:e,fullscreen:s,toggle:r}){if(e)return $e();if(s||r){let c="Enter Fullscreen?";$e()&&(c="Leave Fullscreen?"),await t.executeCommand(`openDialog "${c}" -confirm`)&&qt(document.body)}}}]);class at{constructor(){Z(this,"_wait");Z(this,"_tmp");Z(this,"_default");Z(this,"current");this._wait=this.getCursor(ve.WAIT),this.current=this._default=this.getCursor(ve.POINTER_1)}setWait(e){!this._tmp&&e?(this._tmp=this.current,this.current=this._wait):(this.current=this._tmp,this._tmp=void 0)}getCursor(e){return new{[ve.POINTER_1]:ot,[ve.POINTER_MOONCITY]:Mt,[ve.WAIT]:bt,[ve.CROSSHAIR]:zt}[e]}setCurrent(e){console.log("setCurrent",e),e?this.current=this.getCursor(e):this.current=this._default}}class lt extends ct{constructor(s){const{core:r,contentEl:c}={contentEl:void 0,...s};super({name:"Screen",commands:Kt,core:r});Z(this,"defaultTheme");Z(this,"currentTheme");Z(this,"cursor",new at);Z(this,"contentEl");Z(this,"sizes",{content:a(0,0)});Z(this,"positions",{content:a(0,0)});Z(this,"screenLayout",{size:a(0,0),position:a(0,0)});Z(this,"contentLayout",{size:a(0,0),position:a(0,0)});if(this.contentEl=c,this.defaultTheme=this.currentTheme=this.getDefaultTheme(),window===void 0)throw new Error("ScreenControl is only for Browser");mt.then(this.onReady.bind(this)).catch(o=>{throw o})}destroy(){window.removeEventListener("resize",this.onResize.bind(this),!1)}updateContentLayout(s){const{x:r,y:c,width:o,height:m}=s.getBoundingClientRect();this.contentLayout={size:a(o,m),position:a(r,c)}}updateScreenLayout(s){const{x:r,y:c,width:o,height:m}=s.getBoundingClientRect();this.screenLayout={size:a(o,m),position:a(r,c)}}getDefaultTheme(){const s=this.core.config.get(le.THEME)||ht[pt];return new dt("current",s)}setTheme(s){return this.currentTheme=s||this.getDefaultTheme()}onReady(){window.addEventListener("resize",this.onResize.bind(this),!1),this.onResize()}onResize(){if(this.contentEl){const{x:s,y:r,width:c,height:o}=this.contentEl.getBoundingClientRect();this.positions.content=a(s,r),this.sizes.content=a(c,o)}}}Z(lt,"NAME","Screen");window.oncontextmenu=t=>{t.preventDefault()};const Xt="data:image/svg+xml,%3csvg%20class='wb_cursor_pointer'%20xmlns='http://www.w3.org/2000/svg'%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%3e%3cpath%20d='M0%2012h2v2h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2h-2V0H0z'%20/%3e%3cpath%20fill='%23f00'%20d='M2%202v10h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z'%20/%3e%3cpath%20fill='%23fff'%20d='M2%202v2h8v2H8v2h2v2h2v2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z'%20/%3e%3c/svg%3e",Qt={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 900 815"};function Zt(t,e){return h(),g("svg",Qt,e[0]||(e[0]=[We('<path d="M887 5H13c-4.4 0-8 3.6-8 8v764c0 4.4 3.6 8 8 8h874c4.4 0 8-3.6 8-8V13c0-4.4-3.6-8-8-8m-97 633s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#aea59f;"></path><path d="M25 25v690h850V25zm765 613s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#928c7f;"></path><path d="M35 35v670h830V35zm755 603s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#837c72;"></path><path d="M813 72H87c-4.4 0-8 3.6-8 8v580c0 4.4 3.6 8 8 8h726c4.4 0 8-3.6 8-8V80c0-4.4-3.6-8-8-8m-23 566s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#615a52;"></path><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="opacity:.1;fill:#fff;"></path><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="opacity:.2;"></path><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="opacity:.1;"></path><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="opacity:.1;fill:#fff;"></path><linearGradient id="a" x1="670.572" x2="964.642" y1="283.613" y2="610.211" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="fill:url(#a);"></path><linearGradient id="b" x1="284.95" x2="615.999" y1="924.997" y2="557.329" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="fill:url(#b);"></path><linearGradient id="c" x1="-66.233" x2="229.922" y1="297.922" y2="594.078" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="fill:url(#c);"></path><linearGradient id="d" x1="265.69" x2="634.31" y1="334.62" y2="-34" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="fill:url(#d);"></path><linearGradient id="e" x1="284.95" x2="615.999" y1="924.997" y2="557.329" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="fill:url(#e);"></path><linearGradient id="f" x1="670.572" x2="964.642" y1="283.613" y2="610.211" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="fill:url(#f);"></path><linearGradient id="g" x1="265.69" x2="634.31" y1="334.62" y2="-34" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="fill:url(#g);"></path><linearGradient id="h" x1="-66.233" x2="229.922" y1="297.922" y2="594.078" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="fill:url(#h);"></path><path d="M70 785h760v25H70z" style="fill:#9d958a;"></path><path d="M887 5c4.4 0 8 3.6 8 8v764c0 4.4-3.6 8-8 8H13c-4.4 0-8-3.6-8-8V13c0-4.4 3.6-8 8-8zm0-5H13C5.8 0 0 5.8 0 13v764c0 7.2 5.8 13 13 13h874c7.2 0 13-5.8 13-13V13c0-7.2-5.8-13-13-13" style="fill:#7e776e;"></path><path d="M70 790h760v5H70z" style="opacity:.3;"></path><path d="M25 25h850v2H25zM33 33h834v2H33zM25 27h2v686h-2zM873 27h2v686h-2zM25 713h850v2H25zM33 705h834v2H33zM33 35h2v670h-2zM865 35h2v670h-2zM835 790h-5v20H70v-20H40v5h25v20h770v-20h25v-5zM343 715h2v70h-2z" style="opacity:.2;"></path><path d="M345 715h406v70H345zM753 715h66v70h-66z" style="opacity:.3;"></path><path d="M345 715v70h406v-70zm403 67H348v-64h400z" style="opacity:.1;"></path><path d="M343 713v74h410v-74zm408 72H345v-70h406z" style="fill:#757066;"></path><path d="M753 715v70h66v-70zm63 67h-60v-64h60z" style="opacity:.1;"></path><path d="M751 715h2v70h-2zM819 715h2v70h-2zM753 785h68v2h-68z" style="fill:#757066;"></path><path d="M751 713v74h70v-74zm68 72h-66v-70h66z" style="fill:#757066;"></path><path d="M25.3 738.9h133.6v31.2H25.3z" style="opacity:.2;fill:#fff;"></path><path d="M68.8 743.1c-.3.3-.6.6-.9.8h3.3l.2-.8zm15.7 0c-1.1 0-2.2.3-3.1.8h6.1c-.9-.5-1.9-.8-3-.8m17 0c-1.3 0-2.5.3-3.5.8h7.2c-1-.5-2.2-.8-3.7-.8m19.7.1-.6.7h4.2l.1-.7zM66.5 745c-.5.4-1 .8-1.5 1.1h5.8l.2-1.1zm13.3 0c-.1 0-.1.1 0 0-.4.4-.7.7-1 1.1h10.9c-.2-.4-.5-.7-.8-1l-.1-.1zm16.5 0c-.3.3-.7.7-.9 1.1h11.9c-.2-.4-.5-.8-.8-1.1zm23.4 0-1 1.1h5.6l.3-1.1zm-56.6 2.3c-.7.4-1.4.7-2.2 1.1h9.4l.2-1.1zm14.8 0c-.2.4-.4.7-.6 1.1h4.5c.1-.2.3-.5.4-.6.1-.2.3-.3.4-.5zm7.8 0q.15 0 0 0c.3.3.4.7.5 1.1h4.2c-.1-.4-.2-.8-.3-1.1zm9.2 0c-.1.4-.2.7-.3 1.1h4.1c.1-.4.3-.7.6-1l.1-.1zm8.3 0c.3.3.4.7.5 1.1h4.2c0-.4-.1-.8-.2-1.1zm14.6 0-1 1.1h7.1l.2-1.1zm-58 2.2-.3 1.1h5c.3-.2.7-.4 1-.6l-.1.6h4.4l.3-1.1zm17 0c-.2.3-.3.7-.4 1.1h4.5c.1-.4.3-.8.5-1.1zm9.6 0v.3c0 .2-.1.6-.1.8h4.4c0-.4 0-.8-.1-1.1zm8.2 0c0 .4.1.8.2 1.1h4c-.1-.3-.2-.7-.2-1.1zm9.2 0c-.1.4-.3.8-.6 1.1h4.2c.2-.4.3-.7.3-1.1zm12.1 0-.9 1.1h4.2l.2-.3-.1.3h4.1l.2-1.1zm-56.5 2.2-.2 1c.9-.2 1.9-.5 3-1zm5.8 0-.2 1.1h4.3l.3-1.1zm10.7 0c-.1.4-.2.7-.3 1.1h4.5c.1-.4.2-.8.3-1.1zm10.3 0c0 .4-.1.7-.2 1.1h4.5c0-.4.1-.7.1-1.1zm9.1 0c.3.4.6.8 1 1.1h9c.5-.3 1-.7 1.4-1.1h-5.1c-.3.1-.5.1-.8.1-.2 0-.4-.1-.6-.1zm18.7 0-1 1.1h4.2l1-1.1zm5.1 0-.3 1.1h4.1l.3-1.1zM64.7 754l-.2 1.1h4.4l.2-1.1zm10.7 0c-.1.4-.1.7-.2 1.1h4.5c.1-.4.1-.7.2-1.1zm10.5 0c-.1.4-.1.7-.2 1.1h4.5c.1-.4.2-.7.2-1.1zm9.6 0c-.5.3-1.1.7-1.5 1.1h11.7c-.3-.4-.7-.8-1.1-1.1zm16.6 0-1 1.1h4.2l1-1.1zm6.5 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.2 1.1h4.4l.2-1.1zm10.7 0c0 .4-.1.7-.1 1.1h4.4c0-.4.1-.7.1-1.1zm10.5 0c-.1.4-.2.8-.3 1.1h4.5c.1-.4.3-.7.3-1.1zm7.8 0c-.2.4-.4.7-.6 1.1h4.5c.1-.3.3-.6.5-.8l.3-.3zm8.9 0c.2.3.4.7.4 1.1h4.2c-.1-.4-.2-.8-.3-1.1zm8.1 0-.9 1.1h4.2l1-1.1zm8 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.3 1.1h4.4l.3-1.1zm11 0c0 .4 0 .8.1 1.1h4.2v-.3c0-.2.1-.5.1-.8zm10 0c-.1.4-.3.8-.4 1.1h4.5c.2-.4.3-.7.4-1.1zm7.6 0c-.1.4-.1.7-.1 1.1h4.3c0-.4.1-.8.1-1.1zm10.1 0c0 .4 0 .8-.1 1.1h4.3c.1-.4.1-.7.1-1.1zm6.5 0-.3 1.1h15.6l.3-1.1zm-45.7 2.2-.3 1.1h4.4l.3-1.1zm11.8 0c.1.4.2.8.3 1.1h4.4l-.1-.1c-.2-.3-.3-.6-.4-1zm8.7 0c-.1.2-.3.5-.4.6l-.5.5h4.8c.2-.3.4-.7.6-1.1zm8.5 0c0 .4.1.8.2 1.1h4.7c-.3-.3-.4-.7-.5-1.1zm9.6 0c-.1.1-.1.2-.2.3-.2.3-.3.6-.6.8h4.9c.2-.4.3-.7.4-1.1zm6.6 0-.1.3h8.8l-.1.8h4.1l.1-.8h2.7l.1-.3zm-45.7 2.3-.2 1.1H67l.2-1.1zm13.1 0c.2.4.5.8.8 1.1H86l.1-.1c.3-.3.6-.7.9-1zm17.1 0c.2.4.4.8.8 1.1h10.4c.4-.3.7-.7 1-1l.1-.1zm23.8 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.1.4h4.4l.1-.4zm15.6 0c.9.5 1.9.8 3.1.8 1.1 0 2.2-.3 3.1-.8zm17.3 0c1 .5 2.2.8 3.5.8 1.4 0 2.7-.3 3.8-.8zm21 0-.1.4h4.1l.1-.4z" style="fill:#2c5aa0;"></path><path d="M790 102S620 87 450 87s-340 15-340 15-10 134-10 268 10 268 10 268 170 15 340 15 340-15 340-15 10-134 10-268-10-268-10-268z" style="fill:none;stroke:#333;stroke-width:1.5px;stroke-miterlimit:10;"></path>',37)]))}const eo={render:Zt},to={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer"};function oo(t,e){return h(),g("svg",to,e[0]||(e[0]=[n("path",{d:"M0 12h2v2h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2h-2V0H0z"},null,-1),n("path",{fill:"red",d:"M2 2v10h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z"},null,-1),n("path",{fill:"#fff",d:"M2 2v2h8v2H8v2h2v2h2v2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z"},null,-1)]))}const no={render:oo},so={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"26",class:"wb_cursor_pointer_mooncity"};function ro(t,e){return h(),g("svg",so,e[0]||(e[0]=[n("path",{fill:"#0666cc",d:"M2 2h2v2H2zm2 2h2v2H4zm2 2h2v2H6zm2 2h2v2H8zm6 6v-2h-2v-2h-2v4h2zm-6 0h2v4H8zm2 4h2v4h-2zm0 6h2v2h-2zm2-2h2v2h-2z"},null,-1),n("path",{fill:"#0688cc",d:"M8 18h2v4H8zm2-4v-4H8V8H6V6H4V4H2v12h4v2h2v-4zm0 8h2v2h-2z"},null,-1),n("path",{fill:"#0accff",d:"M2 16V0H0v20h2v-2h4v-2zm4 2h2v4H6zm2 4h2v4H8z"},null,-1)]))}const ao={render:ro},lo={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"48",class:"wb_cursor_wait"};function io(t,e){return h(),g("svg",lo,e[0]||(e[0]=[n("path",{d:"M32 20v-4h-2v-4h-2v-2h-2V6h-2V4h-2V2h-2v2h-2V2h-2V0h-4v2h-2v2H6v2H4v2H2v6H0v2h2v4h2v2H2v2h2v2h2v2h2v2h4v2h-2v2H8v2h2v2h2v2h4v4h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-4h2v-2h-2v-2h4v-2h2v-2h2v-2h2v-4h2v-2z"},null,-1),n("path",{fill:"red",d:"M30 20v-4h-2v-4h-2v-2h-2V6h-2V4h-2v2h-2V4h-2V2h-4v2h-2v2H6v2H4v6H2v2h2v4h2v2H4v2h2v2h2v2h4v2h4v2h-4v2h-2v2h2v2h4v-2h2v2h2v-2h2v-2h-4v-2h4v-2h4v-2h2v-2h2v-4h2v-2zm-8 20h-4v4h2v2h2v-2h2v-2h-2z"},null,-1),n("path",{fill:"#fff",d:"M18 18v2h4v2h-2v2h-2v2h8v-2h-4v-2h2v-2h2v-2zM8 10v2h4v2h-2v2H8v2h8v-2h-4v-2h2v-2h2v-2z"},null,-1)]))}const vo={render:io},co={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer_crosshair"};function uo(t,e){return h(),g("svg",co,e[0]||(e[0]=[n("path",{d:"M10 0h2v8h-2zM10 14h2v8h-2zM0 10h8v2H0zM14 10h8v2h-8z"},null,-1),n("path",{d:"M10 10h1v1h-1z",class:"crosshair-center"},null,-1)]))}const ho={render:uo},po=ne({__name:"Cursor",props:{parentLayout:{type:Object,default(){return{position:a(5,5)}}},cursor:{type:Object,default(){return new ot}},offset:{type:tt,default(){return a(0,0)}}},setup(t){const e=t,s=p(a(0,0)),r=new ze;let c;const o=d(()=>({[ve.POINTER_1]:no,[ve.POINTER_MOONCITY]:ao,[ve.WAIT]:vo,[ve.CROSSHAIR]:ho})[e.cursor.name]),m=d(()=>Object.assign(e.cursor.toCSSVars(),{"--position-x":`${s.value.x}px`,"--position-y":`${s.value.y}px`})),S=d(()=>({[`cursor-${e.cursor.name}`]:e.cursor.name}));Ee(()=>{r.add(Y.pointerMove.subscribe(u))}),be(()=>{r.unsubscribe()});const u=w=>{window.cancelAnimationFrame(c),c=window.requestAnimationFrame(()=>{const y=e.offset;s.value=a(()=>Math.round(Math.min(Math.max(a(w.x,w.y)-e.parentLayout.position-y,0),e.parentLayout.size)))})};return(w,y)=>(h(),g("i",{class:pe(["wb-env-atom-cursor",S.value]),style:he(m.value)},[(h(),oe(Te(o.value)))],6))}}),fo=se(po,[["__scopeId","data-v-e1e450f3"]]);function Ye(t,e,s,r,c){if(t===0||t===1)return t;const o=(r-s)/2+s,m=e(o);return Math.abs(m-t)<c?o:m>t?Ye(t,e,s,o,c):Ye(t,e,o,r,c)}function mo(t,e){const s=new Array(e+1).fill(void 0);return r=>{const c=Math.round(r*e);let o=s[Number(c)];return o===void 0&&(o=t(c/e),s[Number(c)]=o),o}}function wo(t=yo,e=0,s=1,r=1e-5){return mo(o=>Ye(o,t,e,s,r),Math.round(1/r))}function yo(t){return t}const go={class:"handle-wrapper"},zo=ne({__name:"RadialSlider",props:{styleType:{type:String,default:null},name:{type:String,default:"value"},modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},easing:{type:Function,default(t){return t}},circumference:{type:Number,default(){return Math.PI*2}}},emits:["update:model-value"],setup(t,{emit:e}){const s=t,r=e,c=p(null),o=p(!1);let m=new ze;const S=p(wo(s.easing)),u=p(0),w=p(0),y=d(()=>({"transition-active":o.value,[`type-${s.styleType}`]:s.styleType})),l=d(()=>({"--rad":A.value*2*Math.PI*i.value})),i=d(()=>f.value/(Math.PI*2)),f=d(()=>s.circumference/2),A=d(()=>S.value(Math.max(s.modelValue,0)/s.max));be(()=>{F()});const F=()=>{m.unsubscribe(),m=new ze,o.value=!1},D=k=>{m.add(Y.pointerMove.subscribe(j.bind(this))),m.add(Y.pointerUp.subscribe(C.bind(this))),o.value=!0,u.value=te(k),w.value=s.modelValue/s.max},te=k=>{if(c.value){const H=Wt(c.value),U=wt(k,c.value.getBoundingClientRect()),R=Lt(U,-H-Math.PI-f.value),re=Rt(R)-Math.PI;return(It(re/f.value,-1,1)+1)/2}return 0},j=k=>{let H=te(k);const U=H-u.value;H=Math.min(Math.max(w.value+U,0),1);let R;Math.abs(A.value-H)<.5?R=s.easing(H)*s.max:R=Math.round(A.value)*s.max,r("update:model-value",R)},C=()=>{F()};return(k,H)=>(h(),g("div",{ref_key:"rootEl",ref:c,class:pe(["wb-atom-radial-slider",y.value]),"touch-action":"none",style:he(l.value)},[n("div",go,[n("div",{class:"handle",onPointerdown:D},null,32),H[0]||(H[0]=n("div",{class:"indicator"},null,-1))])],6))}}),bo=se(zo,[["__scopeId","data-v-65e55032"]]),Mo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 105 80"};function So(t,e){return h(),g("svg",Mo,e[0]||(e[0]=[n("path",{d:"M45 11c15.24 0 30.17.93 37.63 1.48C83.18 18.43 84 29.06 84 40c0 10.93-.82 21.56-1.37 27.52C75.16 68.07 60.24 69 45 69c-15.14 0-29.97-.92-37.48-1.47C6.96 59.88 6 45.75 6 40s.96-19.88 1.52-27.53C15.03 11.92 29.86 11 45 11m0-6C22.98 5 1.91 6.89 1.91 6.89S0 31.64 0 40s1.91 33.11 1.91 33.11S22.98 75 45 75s43.09-1.89 43.09-1.89S90 57.03 90 40 88.09 6.89 88.09 6.89 67.02 5 45 5"},null,-1),n("path",{d:"M70 22.9c11.11 0 22 .53 28.08.88.42 3.92.92 9.98.92 16.22 0 6.22-.51 12.29-.92 16.22-6.07.36-16.96.88-28.08.88-11.02 0-21.83-.52-27.94-.87C41.62 51.17 41 43.33 41 40s.62-11.17 1.06-16.23c6.1-.35 16.91-.87 27.94-.87m0-5.4c-17.13 0-33.51 1.22-33.51 1.22S35 34.63 35 40s1.49 21.28 1.49 21.28S52.87 62.5 70 62.5s33.51-1.22 33.51-1.22S105 50.94 105 40s-1.49-21.28-1.49-21.28S87.13 17.5 70 17.5"},null,-1)]))}const Co={render:So},xo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Eo(t,e){return h(),g("svg",xo,e[0]||(e[0]=[n("path",{d:"M50 31c10.48 0 19 8.52 19 19s-8.52 19-19 19-19-8.52-19-19 8.52-19 19-19m0-6c-13.81 0-25 11.19-25 25s11.19 25 25 25 25-11.19 25-25-11.19-25-25-25M50 100c-1.66 0-3-1.34-3-3V83c0-1.66 1.34-3 3-3s3 1.34 3 3v14c0 1.66-1.34 3-3 3M50 20c-1.66 0-3-1.34-3-3V3c0-1.66 1.34-3 3-3s3 1.34 3 3v14c0 1.66-1.34 3-3 3M85.36 85.36a3 3 0 0 1-4.24 0l-9.9-9.9a3 3 0 0 1 0-4.24 3 3 0 0 1 4.24 0l9.9 9.9c1.17 1.16 1.17 3.06 0 4.24M28.79 28.79a3 3 0 0 1-4.24 0l-9.9-9.9a3 3 0 0 1 0-4.24 3 3 0 0 1 4.24 0l9.9 9.9a3 3 0 0 1 0 4.24M14.64 85.36a3 3 0 0 1 0-4.24l9.9-9.9a3 3 0 0 1 4.24 0 3 3 0 0 1 0 4.24l-9.9 9.9c-1.16 1.17-3.06 1.17-4.24 0M71.21 28.79a3 3 0 0 1 0-4.24l9.9-9.9a3 3 0 0 1 4.24 0 3 3 0 0 1 0 4.24l-9.9 9.9a3 3 0 0 1-4.24 0M100 50c0 1.66-1.34 3-3 3H83c-1.66 0-3-1.34-3-3s1.34-3 3-3h14c1.66 0 3 1.34 3 3M20 50c0 1.66-1.34 3-3 3H3c-1.66 0-3-1.34-3-3s1.34-3 3-3h14c1.66 0 3 1.34 3 3"},null,-1)]))}const Vo={render:Eo},Ho={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Ao(t,e){return h(),g("svg",Ho,e[0]||(e[0]=[n("path",{d:"M50 6c24.26 0 44 19.74 44 44S74.26 94 50 94 6 74.26 6 50 25.74 6 50 6m0-6C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),n("path",{d:"M50 0v100c27.61 0 50-22.39 50-50S77.61 0 50 0"},null,-1)]))}const ko={render:Ao},_o={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Po(t,e){return h(),g("svg",_o,e[0]||(e[0]=[n("path",{fill:"none",d:"M62 54v20c5.52 0 10-4.48 10-10s-4.48-10-10-10"},null,-1),n("path",{d:"M50 6c24.26 0 44 19.74 44 44S74.26 94 50 94 6 74.26 6 50 25.74 6 50 6m0-6C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),n("circle",{cx:"30",cy:"64",r:"10"},null,-1),n("path",{d:"M43 24c0 4.48 2.94 8.27 7 9.54V14.46c-4.06 1.27-7 5.06-7 9.54M50 0v14.46c.95-.3 1.95-.46 3-.46 5.52 0 10 4.48 10 10s-4.48 10-10 10c-1.05 0-2.05-.16-3-.46V100c27.61 0 50-22.39 50-50S77.61 0 50 0m25 68c-5.52 0-10-4.48-10-10s4.48-10 10-10 10 4.48 10 10-4.48 10-10 10"},null,-1)]))}const To={render:Po},Oo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 80"};function Wo(t,e){return h(),g("svg",Oo,e[0]||(e[0]=[n("path",{d:"M50 11c15.24 0 30.17.93 37.63 1.48C88.18 18.43 89 29.06 89 40c0 10.93-.82 21.56-1.37 27.52C80.16 68.07 65.24 69 50 69c-15.14 0-29.97-.92-37.48-1.47C11.96 59.88 11 45.75 11 40s.96-19.88 1.52-27.53C20.03 11.92 34.86 11 50 11m0-6C27.98 5 6.91 6.89 6.91 6.89S5 31.64 5 40s1.91 33.11 1.91 33.11S27.98 75 50 75s43.09-1.89 43.09-1.89S95 57.03 95 40 93.09 6.89 93.09 6.89 72.02 5 50 5"},null,-1),n("path",{d:"M49 69V10h16L54 69z"},null,-1)]))}const Lo={render:Wo},Ro={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Io(t,e){return h(),g("svg",Ro,e[0]||(e[0]=[n("path",{d:"M94 34.71V69H25.42zm6-9.71L0 75h100z"},null,-1)]))}const Bo={render:Io},No={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"};function Fo(t,e){return h(),g("svg",No,e[0]||(e[0]=[n("path",{d:"M7.5 3.5v4",style:{stroke:"#000","stroke-linecap":"round","stroke-miterlimit":"10"}},null,-1),n("path",{d:"M7.5-.5v16M-.5 7.5h16M1.84 1.84l11.32 11.32M1.84 13.16 13.16 1.84",style:{fill:"none",stroke:"#faf100","stroke-miterlimit":"10"}},null,-1)]))}const Do={render:Fo},Uo={class:"wb-env-screen-panel"},$o=["disabled"],Yo={class:"label"},jo=["onPointerdown"],Go={class:"knob"},Jo=["onPointerdown"],qo=ne({__name:"Panel",props:{modelValue:{type:Object,default(){return{}}}},emits:["update:model-value"],setup(t,{emit:e}){const s=t,r=e,c=p(1),o=d(()=>[{name:"horizontalCentering",svg:ye(Co),label:"H. Centering",min:0,max:1,step:.01},{name:"brightness",svg:ye(Vo),label:"Brightness",min:0,max:1,step:.01},{name:"contrast",svg:ye(ko),label:"Contrast",min:0,max:1,step:.01},{name:"color",svg:ye(To),label:"Color",min:0,max:1,step:.01},{name:"sharpness",svg:ye(Lo),label:"Sharpness",min:0,max:1,step:.01},{name:"soundVolume",svg:ye(Bo),label:"Volume",min:0,max:1,step:.01}]);function m(y,l){r("update:model-value",{...s.modelValue,[y]:l})}let S;function u(y,l,i){y.preventDefault(),window.clearInterval(S),S=setInterval(()=>{const f=l.step*c.value;i?m(l.name,Math.min(Number(s.modelValue[l.name])+f,l.max)):m(l.name,Math.max(Number(s.modelValue[l.name])-f,l.min)),c.value=Math.min(c.value+1,10)},125)}function w(y){y.preventDefault(),window.clearInterval(S),c.value=1}return(y,l)=>(h(),g("div",Uo,[(h(!0),g(st,null,rt(o.value,(i,f)=>(h(),g("div",{key:f,class:"control",disabled:i.disabled},[(h(),oe(Te(i.svg))),n("span",Yo,je(i.label),1),n("div",null,[n("button",{onPointerdown:A=>u(A,i,!1),onPointerup:w},null,40,jo),n("div",Go,[n("i",{style:he({"--value":t.modelValue[i.name]})},[n("div",null,[N(x(Do)),l[0]||(l[0]=n("span",null,null,-1))])],4),N(bo,{"model-value":t.modelValue[i.name],"style-type":"screen-panel-control-knob",min:0,max:1,"onUpdate:modelValue":A=>m(i.name,A)},null,8,["model-value","onUpdate:modelValue"])]),n("button",{onPointerdown:A=>u(A,i,!0),onPointerup:w},null,40,Jo)])],8,$o))),128))]))}}),Ko=se(qo,[["__scopeId","data-v-352f5f91"]]),Xo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Qo(t,e){return h(),g("svg",Xo,e[0]||(e[0]=[n("path",{d:"M50 8c23.16 0 42 18.84 42 42S73.16 92 50 92 8 73.16 8 50 26.84 8 50 8m0-8C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),n("path",{d:"M50 77c-2.21 0-4-1.79-4-4V27c0-2.21 1.79-4 4-4s4 1.79 4 4v46c0 2.21-1.79 4-4 4"},null,-1)]))}const Zo={render:Qo},en=ne({__name:"PowerButton",props:{active:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,r=e,c=p(!1),o=p(0),m=d(()=>({active:s.active,broken:c.value}));be(()=>{window.clearTimeout(S)});let S;function u(l){c.value||(o.value>=10?c.value=!0:(y(l),o.value++),window.clearTimeout(S),S=window.setTimeout(()=>{o.value=0},500))}function w(l){y(l)}function y(l){r("click",l)}return(l,i)=>(h(),g("div",{class:pe(["wb-env-screen-power-button",m.value])},[n("div",{class:"background"},[i[0]||(i[0]=n("i",{class:"light"},null,-1)),n("button",{onClick:w})]),n("button",{class:"foreground",onClick:u},[i[1]||(i[1]=n("i",{class:"light"},null,-1)),i[2]||(i[2]=n("span",null,"POWER",-1)),N(x(Zo))])],2))}}),tn=se(en,[["__scopeId","data-v-bf5fd0ee"]]),on={class:"content"},nn={key:0,class:"scanlines"},sn={key:0,class:"frame"},rn={class:"panel"},an=ne({__name:"Screen",props:{core:{type:Object,default(){return null}},theme:{type:Object,default(){return null}},cursor:{type:[at,null],default:null},hasScanLines:{type:Boolean,default:!1},hasRealLook:{type:Boolean,default:!1},bootSequence:{type:[String,Number],default:ue.SEQUENCE_3},frameActive:{type:Boolean,default:!0},hasActiveAnimation:{type:Boolean,default:!0},modelValue:{type:Object,default(){return{contrast:0,brightness:0,color:0,sharpness:-1,horizontalCentering:0,soundVolume:1}}}},emits:["update:model-value","toggleScreenActive"],setup(t,{expose:e,emit:s}){const r=t,c=s,o=p(null),m=p(null),S=p(null),u=p(null),w=p(!1),y=p(!1),l=p({name:"",duration:0,resolve:null}),i=p(!1),f=p(),A=p(),F=d(()=>{var P;const _=((P=A.value)==null?void 0:P.size)||a(0,0);return a(()=>_*a(r.modelValue.horizontalCentering-.5,0))}),D=d(()=>r.cursor?r.cursor.current:null),te=d(()=>r.theme.colors.screen.background),j=d(()=>({animate:i.value,"active-animation":r.hasActiveAnimation,"frame-active":r.frameActive,"screen-active":y.value,"real-look":r.hasRealLook,"open-panel":w.value,["boot-sequence-"+r.bootSequence]:!0})),C=d(()=>({"--turn-duration":l.value.duration+"ms","--horizontal-centering":r.modelValue.horizontalCentering-.5})),k=d(()=>({"backdrop-filter":[`contrast(${r.modelValue.contrast*2*100}%)`,`brightness(${r.modelValue.brightness*2*100}%)`,`saturate(${r.modelValue.color*2*100}%)`,`blur(${r.modelValue.sharpness*20/(window.devicePixelRatio||1)}px)`].join(" ")})),H=d(()=>{if(f.value){const _=a(()=>Math.round(f.value||a(0,0)));return{"--wrapper-position-x":_.x+"px","--wrapper-position-y":_.y+"px"}}return{}});ee(()=>y.value,_=>{c("toggleScreenActive",_)}),ee(()=>r.frameActive,()=>{K(()=>{L()})}),ee(()=>te.value,_=>{var P;document.querySelector('[name="theme-color"]')&&((P=document.querySelector('[name="theme-color"]'))==null||P.setAttribute("content",_))}),ee(()=>r.bootSequence,_=>{var X;let P;typeof _=="number"&&_<4?P=getComputedStyle(document.documentElement).getPropertyValue("--color-boot-sequence-"+_):P=getComputedStyle(document.documentElement).getPropertyValue("--color-background"),document.querySelector('[name="theme-color"]')&&((X=document.querySelector('[name="theme-color"]'))==null||X.setAttribute("content",P))});const U=new ze;Ee(()=>{U.add(Y.resize.subscribe(L)),L()}),be(()=>{U.unsubscribe()});function R(){l.value.resolve&&l.value.resolve()}function re(){l.value.resolve&&l.value.resolve()}function L(){m.value&&S.value&&(f.value=a(()=>(a(window.innerWidth,window.innerHeight)-Ke(m.value).size)/2),K(()=>{A.value=Ke(S.value)}))}function $(_=4e3){return i.value?Promise.resolve(!1):(r.hasActiveAnimation||(_=0),l.value.duration=_,i.value=!0,new Promise(P=>{l.value.resolve=P,K(()=>y.value=!0)}).then(()=>(i.value=!1,!0)).catch(P=>{throw P}))}function W(_=550){return i.value?Promise.resolve(!1):(r.hasActiveAnimation||(_=0),l.value.duration=_,i.value=!0,new Promise(P=>{l.value.resolve=P,K(()=>y.value=!1)}).then(()=>(i.value=!1,!0)).catch(P=>{throw P}))}function de(_=!w.value){w.value=_}function E(){de()}function ce(){y.value?W():$()}return e({turnOn:$,turnOff:W,togglePanel:de}),(_,P)=>(h(),g("div",{ref_key:"rootEl",ref:o,class:pe(["wb-env-screen",j.value]),style:he(C.value)},[n("div",{ref_key:"wrapperEl",ref:m,class:"wrapper",style:he(H.value)},[n("div",{ref_key:"containerEl",ref:S,class:"container"},[N(Et,{name:"animation-turn",onAfterEnter:R,onAfterLeave:re},{default:Ce(()=>[Vt(n("div",{ref_key:"backgroundEl",ref:u,class:"background"},[n("div",on,[ge(_.$slots,"default",{},void 0,!0)]),t.hasScanLines&&y.value?(h(),g("div",nn,P[1]||(P[1]=[n("div",null,null,-1)]))):B("",!0),D.value&&A.value?(h(),oe(fo,{key:1,class:"cursor","parent-layout":A.value,offset:F.value,cursor:D.value},null,8,["parent-layout","offset","cursor"])):B("",!0),n("div",{class:"manipulation",style:he(k.value)},null,4)],512),[[Ht,y.value]])]),_:3}),ge(_.$slots,"container",{containerLayout:A.value},void 0,!0)],512),t.frameActive?(h(),g("div",sn,[N(x(eo)),N(tn,{active:y.value,class:"power-button",options:t.modelValue,onClick:ce},null,8,["active","options"]),n("div",rn,[N(Ko,{"model-value":t.modelValue,"onUpdate:modelValue":P[0]||(P[0]=X=>c("update:model-value",X))},null,8,["model-value"]),n("button",{class:"cover",onClick:E},P[2]||(P[2]=[n("span",null,"Push",-1)]))])])):B("",!0)],4)],6))}}),ln=se(an,[["__scopeId","data-v-7a51e888"]]),vn={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"260",height:"262"};function cn(t,e){return h(),g("svg",vn,e[0]||(e[0]=[We('<path d="M258 24v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h-2V4h-2V2h-2V0H48v88h-2v2h-4v2h-4v2h-4v2h-2v2h-2v4h-2v4h-2v4h-2v6h-2v4h-2v2h-2v2h-4v2h-2v2h-2v2H8v2H6v4H4v2H2v4H0v58h2v62h102v-22h2v-2h4v-2h4v-2h4v-2h2v-2h2v-4h2v-2h2v-4h2v-2h2v-4h2v-2h4v-2h2v-2h2v-2h2v-2h2v-4h2v-2h2v-4h2v-4h2v-4h2v-4h2v-10h104V24z"></path><path fill="#77c" d="M54 4v118h4v-2h2v-2h4v-2h2v-2h2v-2h4V92h14v-4h22v2h2v2h128v76h16V24h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h-2V4z"></path><g fill="#fff"><path d="M116 96v24h-2v2h-2v2h-2v2h-4v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-4v2h-2v2h-2v22h2v2h144V96zM80 100h2v-4h-4v6h2zM92 172h-2v6h4v-2h2v-2h-3zM116 186v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2H96v2h4v2h4v2h2v2h2v2h2v2h2v2zM138 174h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h4v-2h6v2h4v2h2v2h2v4h-2v4h4v-4h2v-2h2v-4h2v-4h2v-4h2v-4h2v-10h-14z"></path><path d="M134 196v-2h-4v-2h-6v2h-4v6h2v4h8v-2h4v-2h2v-4zM88 182h2v8h-2zM102 192h6v-4h2v-2h-2v-2h-2v-2h-2v-2h-8v2h-4v6h2v2h8zM90 190h4v2h-4zM94 192h8v2h-8zM130 204h4v2h-4zM130 208v4h2v-2h4v-2h2v-2h-4v2zM116 200h2v2h-2zM104 236h2v2h-2zM120 206v-2h-2v2h1z"></path><path d="M120 208h-2v-2h-2v-4h-2v-2h-2v-4H94v-2h-4v16h-2v2h-2v2h-2v2h-2v2h-2v2H66v38h34v-22h4v-2h6v-2h4v-2h4v-4h2v-2h2v-4h2v-2h2v-4h2v-4h-8z"></path><path d="M120 206h2v2h-2zM102 92h-8v-2h-6v4h-2v6h-2v4h2v2h2v2h2v2h14V94h-2zM38 134h2v2h-2z"></path><path d="M80 214h2v-2h2v-2h2v-40h-2v-4h-2v-22h2v-2h2v-2h2v-2h4v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2h2v-2h2V94h-4v-2h-4v2h2v2h2v16h-2v2H90v-2h-2v-2h-2v-2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-4v2h-4v2h-4v2h-4v2h-4v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v-4h2v-2h2v-2h4v-2h2v-2h2v-2h4v-2h2v-2h2v-2h2v-2h-6v-2h-2v-2h-2v-2h-2v-2h2v2h4v2h4v2h6v-2h4V92h-4v2h-2v2h-4v2h-4v4h-2v4h-2v4h-2v4h-2v6h-2v2h-2v2h-2v2h-4v2h-2v2h-2v2h-2v4H8v2H6v4H4v56h2v60h56v-42h18z"></path><path d="M30 140h2v2h-2zM22 146h2v2h-2zM54 124.12v1.85l4 .03v-1.88z"></path></g><path fill="#333" d="M144 8h24v30h-24z"></path><g fill="#77c"><path d="M130 118v-2h-4v-2h-4v2h2v2zM132 122h6v-2h-2v-6h2v-4h2v-2h-10v2h2v4h-2v2h2zM152 112h2v-2h4v-2h-14v2h4v2h-2v2h6z"></path><path d="M144 118h10v-2h2v-4h-2v2h-2v2h-6v-2h-4v2h2zM162 118h12v-10h-6v2h-2v2h4v4h-6v-4h-4v4h2zM178 116h2v2h10v-2h2v-4h-14zm4-2h6v2h-6zM210 120v-8h-2v-2h-2v-2h-12v2h-2v2h4v4h2v2h6v-2h-4v-4h6v2h-2v2h2v6h6v-2zM198 130h-2v2h-4v-2h-2v-2h-4v14h4v-8h2v2h4v-2h2v8h4v-14h-4zM180 128h-10v2h-2v6h2v2h10v-2h2v-6h-2zm-2 8h-6v-6h6zM156 130h2v4h-2v2h2v2h6v-2h-2v-6h2v-2h-8zM152 132h-4v4h2v2h6v-2h-4zM140 132h-4v-2h-2v-2h-4v2h2v2h2v2h-2v2h-2v2h4v-2h2v-2h4v8h6v-2h-2v-10h2v-2h-6z"></path></g><g fill="#bbb"><path d="M146 160v-2h2v-6h-2v-2h-4v-2h-24v2h2v2h-8v-2h2v-2h-12v2h4v14h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v4h-2v2h10v-2h-2v-4h2v2h2v2h2v4h-2v2h-2v2h-4v-2h-2v-2h-2v6h14v-2h2v-2zm-30-4h-2v2h-2v-4h4z"></path><path d="M210 148v2h2v2h-8v-2h2v-2h-20v2h4v2h-2v2h-2v2h-2v-8h-6v4h-2v2h-2v2h-2v-4h2v-2h2v-2h-28v2h4v6h-2v4h-4v2h-2v2h28v-2h2v-2h2v-2h2v6h10v-2h-2v-4h2v-2h2v-2h2v-2h4v-2h2v14h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2zm-44 8h-2v4h-2v2h-8v-2h2v-4h2v-4h2v-2h6zm42 0h-2v2h-2v-4h4z"></path></g><path d="M108 164h2v-2h2v-2h2v-2h-6zM140 160h-2v2h4v-2h2v-2h-4zM130 158h-2v6h10v-2h-8zM154 158h-4v4h-4v2h10v-2h-2zM170 160h-2v-2h-4v4h-2v2h8v-2h2v-2h2v-2h-4zM178 164h8v-2h-2v-2h2v-2h-8zM200 158v6h2v-2h2v-2h2v-2zM98 0v48h112V0zm106 44H104V4h100z"></path><path d="M198 8h-24v30h24zm-6 26h-12V12h12z"></path><path fill="#bbb" d="M104 4v40h100V4zm94 34h-24V8h24z"></path><path d="M188 182h4v2h-2v2h-2v2h-2v2h-2v2h-2v-10h2v-2h-10v2h2v18h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2h-14zM218 180h-6v2h-2v2h-2v2h4v10h-4v4h14v-4h-4zM226 196h4v4h-4zM252 188v-2h2v-2h-2v-2h-2v-2h-12v2h-2v2h-2v2h8v-2h4v4h-4v4h4v4h-4v-2h-8v2h2v2h2v2h12v-2h2v-2h2v-2h-2v-2h-2v-4z"></path>',10)]))}const un={render:cn},hn={class:"wb-env-no-disk"},pn=ne({__name:"NoDisk",setup(t){return(e,s)=>(h(),g("div",hn,[N(x(un))]))}}),dn=se(pn,[["__scopeId","data-v-8c8ee13c"]]),fn={key:0,ref:"menu",class:"menu"},mn={key:1,class:"cover"},wn=ne({__name:"Header",props:{parentLayout:{type:Object,default(){return{size:a(window.innerWidth,window.innerHeight)}}},title:{type:String,default:"Web-Workbench release. Version 1.3"},showCover:{type:Boolean,default:!1},items:{type:Array,default:[]}},emits:["inputContextMenu"],setup(t,{emit:e}){const{core:s}=Le(),r=t,c=e,o=p(!1),m=d(()=>{var l,i;return r.items||((i=(l=s.value)==null?void 0:l.modules.windows)==null?void 0:i.contextMenu.activeItems.items)});function S(...l){c("inputContextMenu",...l)}function u(){o.value=!1}function w(l){l.button===Ge.RIGHT&&(l.preventDefault(),o.value=!0)}function y(l){l.button===Ge.RIGHT&&(o.value=!1)}return(l,i)=>(h(),g("header",{class:"wb-env-molecule-header",onMouseout:u,onPointerdown:w,onPointerup:y},[t.showCover||o.value?B("",!0):(h(),g("nav",fn,[N(Ft,{items:m.value,"parent-layout":t.parentLayout,"onUpdate:modelValue":S},null,8,["items","parent-layout"])],512)),t.showCover||o.value?(h(),g("div",mn,[n("span",null,je(t.title),1)])):B("",!0)],32))}}),yn=se(wn,[["__scopeId","data-v-9e26e6f0"]]),gn={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"14"};function zn(t,e){return h(),g("svg",gn,e[0]||(e[0]=[n("path",{d:"M6 4V0H0v6h4v8h8V4zM4 4H2V2h2zm6 8H6V6h4z",class:"svg-primary"},null,-1)]))}const bn={render:zn},Mn={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12",viewBox:"4 4 14 12"};function Sn(t,e){return h(),g("svg",Mn,e[0]||(e[0]=[n("g",{class:"svg-primary"},[n("path",{d:"M4 8h2v2H4zM6 6h2v2H6zM14 6h2v2h-2zM16 8h2v2h-2zM8 4h6v2h-2v10h-2V6H8z"})],-1)]))}const Cn={render:Sn},xn={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12"};function En(t,e){return h(),g("svg",xn,e[0]||(e[0]=[n("g",{class:"svg-primary"},[n("path",{d:"M0 6h2v2H0zM6 0h2v10h2v2H4v-2h2zM2 8h2v2H2zM10 8h2v2h-2zM12 6h2v2h-2z"})],-1)]))}const Vn={render:En},Hn={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"14"};function An(t,e){return h(),g("svg",Hn,e[0]||(e[0]=[n("path",{d:"M1 2v2H0v6h1v2h2v2h3v-2H4v-2H2V8h9V6H2V4h2V2h2V0H3v2z",class:"svg-primary"},null,-1)]))}const kn={render:An},_n={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"14"};function Pn(t,e){return h(),g("svg",_n,e[0]||(e[0]=[n("path",{d:"M10 2v2h1v6h-1v2H8v2H5v-2h2v-2h2V8H0V6h9V4H7V2H5V0h3v2z",class:"svg-primary"},null,-1)]))}const Tn={render:Pn},On={class:"sidebar-left"},Wn={key:0,class:"scrollbar scrollbar-right"},Ln={class:"range"},Rn={key:1,class:"scrollbar-corner"},In={key:2,class:"scrollbar scrollbar-bottom"},Bn={class:"range"},Nn=ne({__name:"ScrollContent",props:{options:{type:Object,default(){return{scrollX:!0,scrollY:!0,clampLeft:!1,clampBottom:!1}}},setTriggerReset:{type:Boolean,default:!1},setTriggerRefresh:{type:Object,default(){return null}},embed:{type:Boolean,default:!1},rootLayout:{type:Object,default(){return{size:a(0,0)}}},parentLayout:{type:Object,default(){return{size:a(0,0)}}},setParentLayout:{type:Function,default(){return()=>{}}},parentLayoutSizeOffset:{type:tt,default(){return a(0,0)}}},emits:["click","refresh"],setup(t,{emit:e}){const s=t,r=p(s.parentLayout.size),c=e,o=p(null),m=p(null),S=p(null),u=p(null),w=p(null),y=p(!0),l=p({}),i=p({spacer:a(0,0),helper:a(0,0),content:a(0,0),wrapper:a(0,0),inner:a(0,0)}),f=p({startScroll:0,current:a(0,0),start:null,move:null}),A=At(),F=d(()=>s.options.scrollX||s.options.scrollY||!!A.corner),D=d(()=>({"--scroll-bar-size":`${Math.max(15-De.size,0)}`,...l.value})),te=d(()=>({active:y.value,"axis-x":s.options.scrollX,"axis-y":s.options.scrollY,embed:s.embed}));ee(()=>s.setTriggerReset,()=>{R()}),ee(()=>s.setTriggerRefresh,z=>{z&&z.reset?C():z&&z.scroll&&R()}),Ee(()=>{window.requestAnimationFrame(()=>{j()})});const j=()=>{const z=H(),T=a(s.options.scrollY?20:0,s.options.scrollX?20:0),G=s.parentLayout;if(G){const J=a(()=>T+s.parentLayoutSizeOffset);s.options.scrollX&&s.options.scrollY||s.setParentLayout({size:a(Math.min(z.x+J.x,s.rootLayout.size.x),Math.min(z.y+J.y,s.rootLayout.size.y))})}r.value=G.size},C=()=>{s.setParentLayout({size:a(0,0)}),K(()=>{j()})},k=()=>{var z,T;return a(((z=o.value)==null?void 0:z.offsetWidth)||0,((T=o.value)==null?void 0:T.offsetHeight)||0)},H=()=>{var z,T;return a(((z=m.value)==null?void 0:z.offsetWidth)||0,((T=m.value)==null?void 0:T.offsetHeight)||0)},U=()=>{window.requestAnimationFrame(()=>{$(),re()}),s.setParentLayout({scrollOffset:L()}),c("refresh",{scroll:!0})},R=()=>{var T,G,J,Q,ie;i.value.content=k(),i.value.wrapper=a(((T=S.value)==null?void 0:T.offsetWidth)||0,((G=S.value)==null?void 0:G.offsetHeight)||0),i.value.inner=H(),i.value.helper=a(u.value&&((J=u.value)==null?void 0:J.offsetWidth)||0,w.value&&((Q=w.value)==null?void 0:Q.offsetHeight)||0),i.value.spacer=a(()=>Math.min(i.value.wrapper/i.value.inner,1)*i.value.helper);const z=L();s.setParentLayout({scrollOffset:z}),$(),re(),c("refresh",{}),(ie=o.value)==null||ie.scrollTo(s.options.clampLeft?0:z.x,s.options.clampBottom?i.value.inner.y:z.y)},re=()=>{const z=a(()=>f.value.current*(1-i.value.spacer/i.value.helper)),T=a(()=>i.value.spacer/i.value.helper);l.value=Object.assign(z.toCSSVars("helper-position"),T.toCSSVars("helper-size"))},L=()=>{var z,T;return a(((z=o.value)==null?void 0:z.scrollLeft)||0,((T=o.value)==null?void 0:T.scrollTop)||0)},$=()=>{const z=a(s.options.scrollY?De.size:0,s.options.scrollX?De.size:0),T=L();f.value.current=Fe(()=>T/(i.value.inner-i.value.content+z))},W=z=>{var G;Me(z),z.preventDefault(),f.value.start=a(z.x,z.y),f.value.startScroll=((G=o.value)==null?void 0:G.scrollTop)||0;const T=Y.pointerMove.subscribe(J=>{var Q;f.value&&o.value&&(f.value.move=Fe(()=>a(J.x,J.y)-(f.value.start||0)),o.value.scrollTop=f.value.startScroll+i.value.inner.y*(((Q=f.value.move)==null?void 0:Q.y)||0)/i.value.helper.y)});Y.pointerUp.pipe(Se()).subscribe(()=>{T.unsubscribe()})},de=z=>{if(z.preventDefault(),o.value){f.value.start=a(z.x,z.y),f.value.startScroll=o.value.scrollLeft||0;const T=Y.pointerMove.subscribe(G=>{var J;f.value&&o.value&&(f.value.move=Fe(()=>a(G.x,G.y)-f.value.start),o.value.scrollLeft=f.value.startScroll+i.value.inner.x*(((J=f.value.move)==null?void 0:J.x)||0)/i.value.helper.x)});Y.pointerUp.pipe(Se()).subscribe(()=>{T.unsubscribe()})}},E=()=>{me(1)},ce=()=>{me(3)},_=()=>{me(0)},P=()=>{me(2)};let X;const fe=()=>{window.clearInterval(X)},me=z=>{window.clearInterval(X),X=setInterval(()=>{if(o.value)switch(z){case 0:o.value.scrollLeft-=16;break;case 1:o.value.scrollTop-=16;break;case 2:o.value.scrollLeft+=16;break;case 3:o.value.scrollTop+=16;break}},125)};return Oe("scrollContent",{refresh:R,setParentSize:j}),(z,T)=>(h(),g("div",{class:pe(["wb-env-scroll-content",te.value]),style:he(D.value)},[n("div",{ref_key:"scrollWrapperEl",ref:S,class:"wrapper"},[n("div",On,[ge(z.$slots,"sidebarLeft",{},void 0,!0)]),n("div",{ref_key:"scrollContentEl",ref:o,class:"content",onScroll:U},[n("div",{ref_key:"scrollInnerEl",ref:m,class:"inner"},[n("div",null,[ge(z.$slots,"default",{},()=>[T[0]||(T[0]=We('<div style="width:680px;height:100px;margin:20px;background:red;" data-v-9a2b62be></div><div style="width:250px;height:240px;margin:20px;background:red;" data-v-9a2b62be></div><div style="width:500px;height:240px;margin:20px;background:green;" data-v-9a2b62be></div><div style="width:800px;height:240px;margin:20px;background:yellow;" data-v-9a2b62be></div><div style="width:250px;height:240px;margin:20px;background:red;" data-v-9a2b62be></div><div style="width:500px;height:3000px;margin:20px;background:green;" data-v-9a2b62be></div><div style="width:800px;height:240px;margin:20px;background:yellow;" data-v-9a2b62be></div>',7))],!0)])],512)],544)],512),y.value&&s.options.scrollY?(h(),g("div",Wn,[n("span",{class:"helper-top","touch-action":"none",onPointerdown:E,onPointerup:fe},[N(x(Cn))],32),n("span",Ln,[n("span",{ref_key:"scrollRightHelperEl",ref:w,class:"helper"},[n("span",{class:"spacer","touch-action":"none",onPointerdown:W},null,32)],512)]),n("span",{class:"helper-bottom","touch-action":"none",onPointerdown:ce,onPointerup:fe},[N(x(Vn))],32)])):B("",!0),F.value?(h(),g("span",Rn,[ge(z.$slots,"corner",{},void 0,!0)])):B("",!0),y.value&&s.options.scrollX?(h(),g("div",In,[n("span",{class:"helper-left","touch-action":"none",onPointerdown:_,onPointerup:fe},[N(x(kn))],32),n("span",Bn,[n("span",{ref_key:"scrollBottomHelperEl",ref:u,class:"helper"},[n("span",{ref:"scrollBottomSpacerEl",class:"spacer","touch-action":"none",onPointerdown:de},null,544)],512)]),n("span",{class:"helper-right","touch-action":"none",onPointerdown:P,onPointerup:fe},[N(x(Tn))],32)])):B("",!0)],6))}}),Fn=se(Nn,[["__scopeId","data-v-9a2b62be"]]),Dn={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"};function Un(t,e){return h(),g("svg",Dn,e[0]||(e[0]=[n("g",{class:"svg-primary"},[n("path",{d:"M4 4h12v12H4z"}),n("path",{d:"M0 0v20h20V0zm18 18H2V2h16z"})],-1),n("path",{fill:"#FFF",d:"M8 8h4v4H8z",class:"svg-secondary"},null,-1)]))}const $n={render:Un},Yn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20"};function jn(t,e){return h(),g("svg",Yn,e[0]||(e[0]=[We('<g class="svg-primary"><path d="M0 0v20h22V0zm16 14H2V2h14z"></path><path d="M4 4h10v8H4z"></path></g><g fill="#FFF" class="svg-secondary"><path fill="#" d="M6 6h14v12H6z" class="svg-secondary"></path></g>',2)]))}const Gn={render:jn},Jn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20"};function qn(t,e){return h(),g("svg",Jn,e[0]||(e[0]=[n("g",{class:"svg-primary"},[n("path",{d:"M8 6h10v10H8z"}),n("path",{d:"M0 0v20h22V0zm20 18H6V4h14z"})],-1),n("path",{fill:"#A4A5A5",d:"M2 2h14v2H6v10H2z",class:"svg-secondary"},null,-1)]))}const Kn={render:qn},Xn={key:0,ref:"windowTitleWrapper",class:"title"},Qn={class:"handlers handlers-right"},Zn=ne({__name:"WindowHeader",props:{close:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},title:{type:String,default:"Window Header"},focused:{type:Boolean,default:!1}},emits:["close","click","up","down"],setup(t,{emit:e}){const s=t,r=e,c=d(()=>({focused:s.focused}));function o(w){w.preventDefault(),Me(w),r("close",w)}function m(w){w.preventDefault(),Me(w),r("click",w)}function S(w){w.preventDefault(),Me(w),r("up",w)}function u(w){w.preventDefault(),Me(w),r("down",w)}return(w,y)=>(h(),g("header",{class:pe(["wb-env-molecule-window-header",c.value])},[n("div",{class:pe(["handlers handlers-left",{"has-close":t.close}])},[t.close?(h(),g("span",{key:0,class:"control close","touch-action":"none",onPointerup:o},[N(x($n))],32)):B("",!0)],2),n("div",{class:"title-wrapper",onPointerdown:m},[y[0]||(y[0]=n("span",{class:"background"},[n("span",{class:"line"}),n("span",{class:"line"}),n("span",{class:"dots"})],-1)),t.title?(h(),g("span",Xn,[n("span",{ref:"windowTitle"},je(t.title),513)],512)):B("",!0)],32),n("div",Qn,[t.overlay?(h(),g("span",{key:0,class:"control overlay-top","touch-action":"none",onPointerup:S},[N(x(Gn))],32)):B("",!0),t.overlay?(h(),g("span",{key:1,class:"control overlay-bottom","touch-action":"none",onPointerup:u},[N(x(Kn))],32)):B("",!0)])],2))}}),es=se(Zn,[["__scopeId","data-v-dde89718"]]),ts=["data-id"],os=2,ns=ne({__name:"Window",props:{window:{type:Ct,default:null},id:{type:String,default(){return null}},wrapper:{type:nt,default(){return null}},sidebarComponent:{type:Object,default(){return null}},sidebarComponentData:{type:Object,default(){return null}},component:{type:Object,default(){return null}},componentData:{type:Object,default(){return null}},symbolWrapper:{type:St,default(){return null}}},emits:["focus","ready","up","down","close","refresh"],setup(t,{emit:e}){const{core:s}=Le(),r=p(null),c=p(null),o=t,m=e,S=p(o.window.options.hideRootHeader?0:Je),u=d(()=>a(4,S.value+os)),w=p(!0),y=p({start:void 0,move:void 0,offset:void 0}),l=p({start:void 0,move:void 0}),i=new ze,f=p(!1),A=p(!1),F=p(!1),D=p(),te=p(!0),j=p(0),C=d(()=>({size:a(()=>W.value.size-a(16,0)),position:W.value.position})),k=d(()=>{var V;return E.value.sidebar&&((V=s.value)==null?void 0:V.config.observable[Dt.SHOW_STORAGE_SPACE])||!1}),H=d(()=>o.wrapper?{...o.wrapper.layout,size:a(()=>o.wrapper.layout.size+(o.window.options.hideRootHeader?Je:0))}:{size:a(window.innerWidth,window.innerHeight)}),U=d(()=>({focused:E.value.focused})),R=d(()=>({close:E.value.close,overlay:E.value.overlay,title:E.value.title,focused:E.value.focused})),re=d(()=>Object.assign({"--header-height":j.value},W.value.size.toCSSVars("size"),W.value.position.toCSSVars("position"))),L=d(()=>({moving:f.value,scaling:A.value,scale:_.value,"scroll-x":E.value.scrollX,"scroll-y":E.value.scrollY,freeze:E.value.freeze,visible:w.value,embed:E.value.embed,focused:E.value.focused,borderless:E.value.borderless})),$=d(()=>H.value.size),W=d(()=>o.window.layout),de=d(()=>W.value.size),E=d(()=>o.window.options),ce=d(()=>E.value.focused||!1),_=d(()=>E.value.scaleX||E.value.scaleY);ee(()=>de.value,()=>{!A.value&&l.value&&(l.value.start=W.value.position,l.value.offset=0,Ve(W.value.position,z()))}),ee(()=>ce.value,V=>{K(()=>{m("focus",ae())}),V?i.add(Y.pointerDown.pipe(Qe(({target:v})=>v&&c.value?!yt(v,c.value):!1),Se()).subscribe(()=>{E.value.focused=!1})):i.unsubscribe()}),Ee(()=>{r.value&&(j.value=r.value.offsetHeight),o.wrapper&&te&&(te.value=!1,Q({scroll:!0}),E.value.center&&window.requestAnimationFrame(()=>{o.wrapper.centerWindow(o.id)})),ce.value&&window.setTimeout(()=>{i.add(Y.pointerDown.pipe(Qe(({target:V})=>V&&c.value?!!V.closest(`.wb-components-window[data-id="${o.id}"]`)&&!!V.closest(".wb-env-molecule-header"):!1),Se()).subscribe(()=>{E.value.focused=!1}))},300)}),be(()=>{i.unsubscribe()});function P(V){o.window.setLayout(V)}function X(){E.value.focused=!1,E.value.freeze=!0}function fe(){K(()=>{E.value.freeze=!1,E.value.focused=!0})}function me(){m("ready",ae())}function z(){return a(()=>$.value-W.value.size)}function T(V){D.value=V,K(()=>D.value=void 0)}function G(V=void 0){Ae(V)}function J(V){Q(V)}function Q(V){D.value=Object.assign({scroll:!0,resize:!0,reset:!1},V||{}),K(()=>D.value=void 0)}function ie(){E.value.freeze||o.wrapper.setActiveWindow(o.id)}function Re(V){if(!E.value.freeze){const v=a(V.x,V.y);l.value.start=v,l.value.offset=a(()=>v-W.value.position);const b=z();f.value=!0;const M=Y.pointerMove.subscribe(I=>Ve(a(I.x,I.y),b));Y.pointerUp.pipe(Se()).subscribe(()=>{M.unsubscribe(),f.value=!1,Q(),o.wrapper.savePosition(o.id,W.value.position)})}}function Ve(V,v){V=a(()=>Math.min(V,o.wrapper.layout.position+$.value));const b=l.value.start||a(0,0),M=l.value.move||a(0,0),I=l.value.offset||a(0,0);l.value.move=a(()=>V-b);const O=a(()=>Math.round(b+M-I)),q=a(Math.max(E.value.clampX?Math.min(O.x,v.x):O.x,0),Math.max(E.value.clampY?Math.min(O.y,v.y):Math.min(O.y,v.y+W.value.size.y-S.value),0));o.window.setLayout({position:q})}function ae(){return{id:o.id,scope:o.window,focused:ce.value,refresh:Q}}function He(){m("up",ae())}function Ie(){m("down",ae())}function Ae(V=void 0){K(()=>{m("close",{...ae(),componentData:V})})}function Be(){Ae()}function Ne(V){Me(V);const v=a(V.x,V.y);y.value.start=v,y.value.offset=a(()=>v-W.value.size);const b=$.value,M=Y.pointerMove.subscribe(I=>{const O=y.value.start||a(0,0),q=a(()=>a(I.x,I.y)-O),ke=y.value.offset||a(0,0);y.value.move=q;let we=a(()=>Math.round(O+q-ke));const{scaleX:_e,scaleY:Pe}=E.value;(!_e||_e&&we.x+W.value.position.x<=b.x)&&(!Pe||Pe&&we.y+W.value.position.y<=b.y)&&(!_e&&Pe?we=a(W.value.size.x,we.y):_e&&!Pe&&(we=a(we.x,W.value.size.y)),o.window.setLayout({size:we}))});A.value=!0,Y.pointerUp.pipe(Se()).subscribe(()=>{M.unsubscribe(),A.value=!1,Q(),o.wrapper.saveSize(o.id,W.value.size)})}return Oe("window",kt(o,"window")),Oe("window:refresh",Q),(V,v)=>(h(),g("aside",{ref_key:"rootEl",ref:c,"data-id":t.id,class:pe(["wb-components-window",L.value]),style:he(re.value),onPointerdown:ie},[n("div",null,[n("div",{ref_key:"headerEl",ref:r},[E.value.embed?B("",!0):(h(),oe(es,xe({key:0},R.value,{onClick:Re,onUp:He,onDown:Ie,onClose:Be}),null,16))],512),N(Fn,{options:E.value,class:"content",embed:"","set-parent-layout":P,"parent-layout":W.value,"parent-layout-size-offset":u.value,"root-layout":H.value,"set-trigger-refresh":D.value,"set-trigger-reset":F.value,onRefresh:T},_t({sidebarLeft:Ce(()=>[k.value?(h(),oe(Te(t.sidebarComponent),xe({key:0},t.sidebarComponentData,{class:"sidebar-left"}),null,16)):B("",!0)]),default:Ce(()=>[ge(V.$slots,"default",{},()=>[(h(),oe(Te(t.component),xe(t.componentData,{"root-element":V.$el,"parent-focused":E.value.focused,options:U.value,"parent-layout":C.value,"set-trigger-refresh":D.value,onRefresh:J,onClose:G,onFreeze:X,onUnfreeze:fe,onReady:me}),null,16,["root-element","parent-focused","options","parent-layout","set-trigger-refresh"]))],!0)]),_:2},[_.value?{name:"corner",fn:Ce(()=>[n("span",{class:"helper-scale","touch-action":"none",onPointerdown:Ne},[N(x(bn))],32)]),key:"0"}:void 0]),1032,["options","parent-layout","parent-layout-size-offset","root-layout","set-trigger-refresh","set-trigger-reset"])])],46,ts))}}),ss=se(ns,[["__scopeId","data-v-54344014"]]),rs=ne({__name:"WindowWrapper",props:{parentLayout:{type:Object,default(){return{size:a(window.innerWidth,window.innerHeight)}}},wrapper:{type:nt,default:null}},setup(t,{expose:e}){var j;const{core:s}=Le(),r=t,c=new ze,o=p(!1),m=(j=s.value)==null?void 0:j.modules.screen,S=d(()=>m==null?void 0:m.contentLayout.size),u=d(()=>Array.from(r.wrapper.models).sort((C,k)=>(C.layout.zIndex||0)-(k.layout.zIndex||0)));ee(()=>r.parentLayout,()=>{y()},{deep:!0}),ee(()=>S.value,C=>{C&&r.wrapper.setLayout({size:C})}),ee(()=>r.wrapper,()=>{y()}),Ee(async()=>{c.add(Y.resize.subscribe(i)),await y(!0),o.value=!0}),be(()=>{c.unsubscribe()});const w=C=>{const{id:k,layout:H,sidebarComponent:U,sidebarComponentData:R,component:re,componentData:L}=C;return{window:C,id:k,wrapper:r.wrapper,layout:H,sidebarComponent:U,sidebarComponentData:R,component:re,componentData:L}},y=(C=!1)=>C?(i(),Promise.resolve()):new Promise(k=>{K(()=>{window.setTimeout(()=>{i(),k(void 0)},500)})}),l=p(null),i=()=>{if(l.value){const{x:C,y:k,width:H,height:U}=l.value.getBoundingClientRect();r.wrapper.setLayout({position:a(C,k),size:a(H,U)})}},f=({id:C})=>{var k;r.wrapper.get(C)&&((k=r.wrapper.get(C))==null||k.ready())},A=({id:C,focused:k})=>{var H;r.wrapper.get(C)&&k&&((H=r.wrapper.get(C))==null||H.focus())},F=({id:C})=>{r.wrapper.setWindowUpDown(C,!1)},D=({id:C})=>{r.wrapper.setWindowUpDown(C,!0)},te=({id:C,componentData:k})=>{var H;r.wrapper.get(C)&&((H=r.wrapper.get(C))==null||H.close(k))};return e({refresh:y}),(C,k)=>(h(),g("div",{ref_key:"rootEl",ref:l,class:"wb-components-window-wrapper"},[ge(C.$slots,"default",{},void 0,!0),t.wrapper&&o.value?(h(!0),g(st,{key:0},rt(u.value,H=>(h(),oe(ss,xe({key:H.id,ref_for:!0},w(H),{onReady:f,onFocus:A,onClose:te,onUp:F,onDown:D}),null,16))),128)):B("",!0)],512))}}),as=se(rs,[["__scopeId","data-v-77ad74ff"]]),ls=ne({__name:"WebDos",props:{command:{type:String,default:null}},emits:["close"],setup(t,{emit:e}){var m;const{core:s}=Le(),r=e;$t();const c=p([`Make by Lammpee ${new Date().getFullYear()}`,`Release ${(m=s.value)==null?void 0:m.version}`]);function o(){window.setTimeout(()=>{r("close")},1e3*(2+Math.floor(Math.random()*3)))}return(S,u)=>(h(),oe(Ut,{"show-introduction":!1,"delimiter-prefix":"","start-commands":t.command,core:x(s),class:"wb-module-core-web-dos","pre-rows":c.value,onStartCommandsComplete:o},null,8,["start-commands","core","pre-rows"]))}}),is=se(ls,[["__scopeId","data-v-012d5740"]]),Ze=""+new URL("CBfz6dJl.woff2",import.meta.url).href,et=""+new URL("Ds3lXCLM.woff2",import.meta.url).href,vs="data:font/woff2;base64,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",cs=[{preload:!0,fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[Ze,"woff2"]},{preload:!0,fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[et,"woff2"]},{fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[Ze,"woff2"]},{fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[et,"woff2"]},{fontFamily:"BitFont",fontVariant:"normal",fontFeatureSettings:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[vs,"woff2"]}];function us(t=0){return"SLEEP "+Number(t)}async function hs(t,{disks:e,cloudStorages:s,withWebDos:r}){var y;const c=!r,o=l=>c?void 0:us(l),m=l=>l.length?[o(1e3),'Headline("Mount Disks")',o(1e3),...l.reduce((i,f)=>f.hidden?i.concat([`mountDisk "${f.name}"`]):i.concat([`mountDisk "${f.name}"`,o(1e3)]),[]),"rearrangeIcons -root"]:[];function S(l){const i=Object.values(Xe).filter(A=>l[A]);if(i.length>1)throw new Error("Multiple cloud storage types are not supported");const f=i[0];return{type:f,config:l[f]}}const u=l=>l.length<1?[]:[o(1e3),'Headline("Mount Cloud Storages")',o(1e3),...l.reduce((i,f)=>{const{type:A,config:F}=S(f);if(!F)throw new Error("Invalid storage configuration");switch(A){case Xe.FIREBASE:if(!F.apiKey||!F.url)throw new Error("Missing Firebase configuration");i.push(`cloudMountFirebase "${f.name}" --api-key="${F.apiKey}" --url="${F.url}"`);break;default:throw new Error(`Unsupported cloud storage type: ${A}`)}return i.push(o(1e3)),i},[])],w=["// Functions","SUB Separator(stars) STATIC",'PRINT STRING$(stars, "*")',"END SUB","SUB Headline(title$) STATIC",'LET title$ = "*** " + title + " ***"','PRINT ""',"Separator(LEN(title$))","PRINT title$","Separator(LEN(title$))",'PRINT ""',"END SUB","// Output"];w.push(...m(e)),w.push(...u(s)),w.push(o(1e3),'PRINT ""','PRINT "<strong>Waiting is user experience </strong>"'),await((y=t.modules.files)==null?void 0:y.fs.createTmpFile("BOOT.basic","BOOT.basic",{type:"basic",content:w.filter(l=>l!==void 0)}))}const ps=ne({__name:"Core",props:{config:{},core:{}},emits:["ready"],setup(t,{emit:e}){const s=p(null),r=p(null),c=p(null),o=p(null),m=p(null),S=t,u=p(ye(S.core)),w=e,{registerFont:y}=Yt();y(cs);const l=d(()=>{var v;return(v=u.value.modules.screen)!=null&&v.currentTheme?u.value.modules.screen.currentTheme:new ft}),i=d(()=>{var b;const v=(b=l.value)==null?void 0:b.toCSSVars();return v?`:root {
        ${Object.keys(v).map(M=>`${M}: ${v[String(M)]};`).join(`
`)}
      }`:null});jt(()=>({style:[i.value&&{key:"wb-core-vars",type:"text/css",innerHTML:i.value}].filter(Boolean)}));const f=Pt();Oe("core",u.value);const A=d(()=>"no-boot"in f.query),F=d(()=>"no-webdos"in f.query),D=p(S.config.noDisk===Bt.FORCE),te=d(()=>D.value||"no-disk"in f.query),j=d(()=>"no-cloud-storage"in f.query),C=new ze,k=p({position:a(0,0),size:a(0,0)}),H=p(!1),U=p(!1),R=p(!1),re=p([]),L=d(()=>u.value.config.observable),$=p(ue.SEQUENCE_1),W=d({get(){return u.value.config.observable[le.SCREEN_CONFIG]},set(v){u.value.config.observable[le.SCREEN_CONFIG]=v}}),de=d(()=>({"--default-cursor":`url(${Xt})`})),E=d(()=>$.value===ue.NO_DISK),ce=d(()=>W.value.horizontalCentering),_=d(()=>u.value.modules.windows?u.value.modules.windows.contentWrapper.isHeaderVsible():!0),P=d(()=>ae.value?ue.ERROR:$.value),X=d(()=>u.value.modules.screen?u.value.modules.screen.cursor:null),fe=d(()=>({frameActive:L.value[le.SCREEN_1084_FRAME],hasRealLook:L.value[le.SCREEN_REAL_LOOK],hasScanLines:L.value[le.SCREEN_SCAN_LINES],hasActiveAnimation:!A.value&&L.value[le.SCREEN_ACTIVE_ANIMATION]})),me=d(()=>L.value[le.SCREEN_1084_FRAME]),z=d(()=>({ready:R.value,waiting:T.value})),T=d(()=>u.value.executionCounter>0),G=d(()=>{var v;return(v=u.value.modules.windows)==null?void 0:v.contextMenu.activeItems.items});ee(()=>ce.value,()=>{ie()}),ee(()=>T.value,v=>{X.value&&Ot(X.value).setWait(v)}),ee(()=>me.value,()=>{K(()=>{ie(),K(()=>{var v,b,M;(b=(v=u.value.modules.symbols)==null?void 0:v.defaultWrapper)==null||b.rearrangeIcons({root:!0}),(M=u.value.modules.windows)==null||M.contentWrapper.setWindowPositions(xt.CENTER)})})}),Ee(async()=>{C.add(Y.resize.subscribe(ie)),r.value&&u.value.addModule(lt,{contentEl:r.value}),await u.value.setup({disks:S.config.disks,rootItems:S.config.rootItems}),ie(),C.add(u.value.errorObserver.subscribe(v=>{Ie(v)})),await Q(),await Re(),await Promise.all(S.config.startCommands.map(v=>u.value.executeCommand(v)))}),be(()=>{var v;re.value.forEach(b=>{var M;return(M=u.value.modules.files)==null?void 0:M.fs.removeFloppyDisk(b)}),(v=u.value.modules.windows)==null||v.clear(),C.unsubscribe()});function J(v){!R.value&&!v&&(D.value=!0),v&&K(()=>{ie()})}function Q(){var M,I;let v,b=!1;if(A.value||(L.value[le.BOOT_WITH_SEQUENCE]?v=new Promise(O=>window.setTimeout(async()=>{var q;await((q=c.value)==null?void 0:q.turnOn(1500)),O(!0)},1e3)):L.value[le.BOOT_WITH_WEBDOS]?v=(M=c.value)==null?void 0:M.turnOn(2e3):v=(I=c.value)==null?void 0:I.turnOn(0)),b=!!v,!b&&c.value&&(v=c.value.turnOn(2e3).then(()=>{var O;return(O=m.value)==null?void 0:O.refresh()}).catch(O=>{throw O})),v=v==null?void 0:v.then(()=>{var O;return(O=c.value)==null?void 0:O.togglePanel(!0)}),b)return v}function ie(){var v,b;if(s.value&&r.value&&o.value){const{left:M,top:I,width:O,height:q}=s.value.getBoundingClientRect();k.value={position:a(M,I),size:a(O,q)},r.value&&((v=u.value.modules.screen)==null||v.updateContentLayout(r.value),(b=u.value.modules.screen)==null||b.updateScreenLayout(o.value))}}async function Re(){const v=u.value.addExecution(),b=A.value?!1:L.value[le.BOOT_WITH_SEQUENCE]||!1;await Ae(b),te.value?$.value=ue.NO_DISK:($.value=ue.READY,ie(),H.value=!0,await new Promise(M=>{K(async()=>{var O,q;r.value&&o.value&&((O=u.value.modules.screen)==null||O.updateContentLayout(r.value),(q=u.value.modules.screen)==null||q.updateScreenLayout(o.value)),U.value=!0;const I=F.value?!1:L.value[le.BOOT_WITH_WEBDOS]||!1;await Be(I),R.value=!0,M(void 0)})}),v(),w("ready"))}function Ve(){ae.value=He.value.shift()}const ae=p(),He=p([]);function Ie(v,b=!0){console.warn(v);const M={input:"Press left mouse button or touch to continue.",message:v.message,stack:null,code:`#${Math.floor(Math.random()*99999999)}.${Math.floor(Math.random()*99999999)}`};b||(M.input=void 0),M.userInteraction=b,ae.value?He.value.push(M):ae.value=M}async function Ae(v){const b=[ue.SEQUENCE_1,ue.SEQUENCE_2,ue.SEQUENCE_3];if(v){let M=b.length;const I=async()=>{M--,$.value=b[b.length-Number(M)],M>0&&(await new Promise(O=>{window.setTimeout(O,qe)}),await I())};await new Promise(O=>window.setTimeout(O,qe/2)),await I()}else $.value=b[b.length-1]}async function Be(v){await void 0;const b=j.value?[]:S.config.cloudStorages;await hs(u.value,{withWebDos:v,disks:S.config.disks,cloudStorages:b});const M=['remove "TMP:BOOT.basic"'];return v?await Ne():M.unshift('basic "TMP:BOOT.basic"'),u.value.executeCommands(M)}function Ne(){var b,M;const v=(b=u.value.modules.windows)==null?void 0:b.addWindow({component:is,componentData:{core:u.value,command:'basic "TMP:BOOT.basic"'},options:{title:"WebDOS",scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!0,embed:!0}},{full:!0});if(v)return(M=v.wrapper)==null||M.centerWindow(v),v.focus(),v==null?void 0:v.awaitClose()}function V(){}return(v,b)=>(h(),g("div",{ref_key:"rootEl",ref:s,class:pe(["wb-env-core",x(z)]),style:he(x(de))},[N(ln,xe({ref_key:"screenEl",ref:c,modelValue:x(W),"onUpdate:modelValue":b[0]||(b[0]=M=>Tt(W)?W.value=M:null),"boot-sequence":x(P),theme:x(l),cursor:x(X)},x(fe),{onToggleScreenActive:J}),{default:Ce(()=>{var M,I;return[n("div",{ref_key:"innerEl",ref:o,class:"inner"},[x(H)&&x(_)?(h(),oe(yn,{key:0,"show-cover":!x(R),items:x(G),"parent-layout":(M=x(u).modules.windows)==null?void 0:M.contentWrapper.layout},null,8,["show-cover","items","parent-layout"])):B("",!0),n("div",{ref_key:"contentEl",ref:r,class:"content"},[x(H)?(h(),oe(as,{key:0,ref_key:"windowWrapperEl",ref:m,core:x(u),wrapper:(I=x(u).modules.windows)==null?void 0:I.contentWrapper,"clamp-y":!1,"parent-layout":x(k)},{default:Ce(()=>{var O,q,ke;return[x(U)&&((q=(O=x(u).modules.symbols)==null?void 0:O.defaultWrapper)!=null&&q.id)?(h(),oe(ut,{key:0,core:x(u),"wrapper-id":(ke=x(u).modules.symbols.defaultWrapper)==null?void 0:ke.id,"parent-scrollable":!1,class:"symbol-wrapper","clamp-symbols":!0,"show-storage-bar":!1,"parent-layout":x(k)},null,8,["core","wrapper-id","parent-layout"])):B("",!0)]}),_:1},8,["core","wrapper","parent-layout"])):B("",!0),x(E)?(h(),oe(dn,{key:1})):B("",!0),x(ae)?(h(),oe(Nt,xe({key:2},x(ae),{onClose:Ve}),null,16)):B("",!0)],512)],512)]}),_:1},16,["modelValue","boot-sequence","theme","cursor"])],6))}}),Zs=se(ps,[["__scopeId","data-v-1b15f8a7"]]);export{Zs as default};

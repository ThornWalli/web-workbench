import{W as D}from"./BV7m95iv.js";import{W as b}from"./DK5mOmiz.js";import{W as M}from"./LDaXBbxb.js";import{W as z}from"./BD-spFIS.js";import{W as h}from"./BDAkpjrJ.js";import{p as E}from"./CDSNOiTq.js";import{d as L}from"./DchX226r.js";import{u as N}from"./BL9b5cpI.js";import{d as R,r as _,K as i,j as o,o as T,t as U,v as $,B as j,z as a,y as A,A as y,L as W,D as J,O as K,aa as O,_ as q}from"./BRP7lMhW.js";import"./B4g_dQXt.js";import"./BGIFtisS.js";import"./RAasLaaH.js";import"./D4lI5vpz.js";import"./DdQrQ7-5.js";import"./6C4StZv5.js";import"./L24w7Tb1.js";import"./CSlkdJUE.js";import"./DMqoVgoU.js";const G={class:"wb-module-files-save"},H=R({__name:"Save",props:{fsItem:{},id:{},model:{}},emits:["close"],setup(F,{emit:S}){var f,d,p;const{core:s}=N();if(!((f=s.value)!=null&&f.modules.files))throw new Error("Files module not found");const t=F,u=S,l=_({path:"",filename:"",file:null,...t.model}),m=((d=s.value)==null?void 0:d.modules.files)&&i((p=s.value)==null?void 0:p.modules.files),c={cancel:"Cancel",save:"Save"},C=o(()=>({label:null,placeholder:"Path…",modelValue:l.value.path})),k=o(()=>({label:null,placeholder:"Filename…",modelValue:l.value.filename,"onUpdate:model-value":e=>{l.value.filename=e}})),x=o(()=>({name:"path",modelValue:l.value.path,"onUpdate:model-value":e=>{l.value.path=e},onSelect:B})),r=_(t.fsItem||i(m.fs.root)),P=o(()=>{var e,n,v;return t.fsItem?t.fsItem:(n=(e=s.value)==null?void 0:e.modules.files)!=null&&n.fs.root?(v=s.value)==null?void 0:v.modules.files.fs.root:null}),g=o(()=>r.value?r.value.locked:!1),w=o(()=>!l.value.filename),B=e=>{r.value=i(e),e instanceof L?l.value.path=e.getPath():e.name&&(l.value.filename=e.name)};T(()=>{t.id&&(l.value.filename=t.id)});const V=()=>{u("close")},I=()=>{const e=E(l.value.path,l.value.filename);u("close",e)};return(e,n)=>($(),U("div",G,[j(" ["+A(l.value)+"] ",1),a(D,{onSubmit:I},{default:y(()=>[a(h,W(C.value,{readonly:""}),null,16),a(z,W(x.value,{"file-system":J(m).fileSystem,"fs-item":P.value}),null,16,["file-system","fs-item"]),a(h,K(O(k.value)),null,16),a(M,{align:"outer",full:""},{default:y(()=>[a(b,{"style-type":"secondary",label:c.cancel,onClick:V},null,8,["label"]),a(b,{"style-type":"primary",label:c.save,type:"submit",disabled:g.value||w.value},null,8,["label","disabled"])]),_:1})]),_:1})]))}}),pe=q(H,[["__scopeId","data-v-0bccf0b2"]]);export{pe as default};

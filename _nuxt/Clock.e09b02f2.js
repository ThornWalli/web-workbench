import{al as b,_ as p,ad as y,g as _}from"./index.56b84025.js";import{_ as k,f as v,k as I,l as M,q as A,m as g,t as C}from"./entry.d9fe636d.js";const S={components:{AtomMarkdown:b},mixins:[p],data(){return{content:["# Clock",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}},computed:{contextMenu(){return new y(P,{core:this.core})}}},$={class:"wb-disks-workbench13-clock-info"};function W(e,t,l,o,a,i){const n=v("atom-markdown");return I(),M("div",$,[A(n,{content:a.content},null,8,["content"])])}const D=k(S,[["render",W],["__scopeId","data-v-003d5275"]]),P=({core:e})=>{const{windows:t}=e.modules;return[{title:"Clock",items:[{hotKey:"I",keyCode:73,title:"Info",action(){t.addWindow({title:"Info",component:D,componentData:{},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Clock"})}}]}]};const H={mixins:[p],data(){return{colors:["#888888","#000000","#FFAA55"],sprites:[],periodPM:!1,interval:null}},computed:{timeAmPm(){return this.periodPM?"PM":"AM"},contextMenu(){return new y(P,{core:this.core})}},unmounted(){window.clearInterval(this.interval)},mounted(){const e=this.$refs.canvas;e.width=this.$el.offsetWidth,e.height=this.$el.offsetHeight,this.sprites=Y(e.width,e.height,2,this.colors),this.render(e,e.getContext("2d"))},methods:{render(e,t){const o=e.width/2-5,a=_(()=>o+5),i=_(e.width,e.height);t.imageSmoothingEnabled=!1,t.setTransform(1,0,0,1,0,0),t.translate(a.x,a.y),t.scale(1,1.015),t.beginPath(),t.arc(0,0,o,0,2*Math.PI,!1),t.fillStyle=this.colors[1],t.fill(),t.scale(1,.985);const n=this.sprites,u=s=>{window.requestAnimationFrame(()=>{t.drawImage(n[3],-a.x,-a.y,i.x,i.y),t.drawImage(n[4],-a.x,-a.y,i.x,i.y),t.strokeStyle=this.colors[1],t.setTransform(1,0,0,1,0,0);const d=new Date;this.periodPM=d.getHours()>12,X(n,d,t,a,i);const m=t.getImageData(0,0,i.x,i.y),f=m.data;for(let r=0;r<f.length;r+=4){const h=f[Number(r)],c=f[r+1],w=f[r+2];if(!(h===255&&c===170&&w===85)){const T=.2126*h+.7152*c+.0722*w>=50?255:0;.2126*h+.7152*c+.0722*w>=50&&(f[Number(r)]=f[r+1]=f[r+2]=T)}}t.putImageData(m,0,0),s&&s()})};u(()=>{this.interval=window.setInterval(u,1e3)})}}};function E(e,t,l,o){e.beginPath(),e.arc(0,0,t-l,0,2*Math.PI,!1),e.fillStyle=o[0],e.fill()}function N(e,t,l){let o;for(o=0;o<60;o++){e.rotate(-Math.PI/2),e.beginPath();const a=0-t+12,i=6;e.moveTo(0,a),e.lineTo(0,a-i),e.rotate(Math.PI/3/5),e.lineWidth=2,e.strokeStyle=l[1],e.stroke()}for(e.rotate(-(Math.PI/3/5)*60),o=0;o<16;o++){e.rotate(-Math.PI/2),e.beginPath();const a=0-t+15,i=6,n=10;e.moveTo(0,a),e.lineTo(0+i/2,a-n/2),e.lineTo(0,a-n),e.lineTo(0-i/2,a-n/2),e.lineTo(0,a),e.rotate(Math.PI/3),e.fillStyle=l[1],e.fill()}e.rotate(-Math.PI/3*16)}function X(e,t,l,o,a){const i=t.getHours()*(Math.PI*2/12)+Math.PI*2/12*t.getMinutes()/60,n=t.getMinutes()*(Math.PI*2/60),u=t.getSeconds()*(Math.PI*2/60);l.translate(o.x,o.y),l.rotate(i),l.drawImage(e[0],-o.x,-o.y,a.x,a.y),l.rotate(-i),l.rotate(n),l.drawImage(e[1],-o.x,-o.y,a.x,a.y),l.rotate(-n),l.rotate(u),l.drawImage(e[2],-o.x,-o.y,a.x,a.y),l.rotate(-u)}function Y(e,t,l,o){const i=e/2-5,n=_(()=>i+5);return[(s,d)=>{s.translate(n.x,n.y);const m=3,f=[.5,.34],r=0,h=0;s.beginPath(),s.moveTo(r,h),s.lineTo(r-m,h-d.width/2*f[1]),s.lineTo(r,h-d.width/2*f[0]),s.lineTo(r+m,h-d.width/2*f[1]),s.lineTo(r,h),s.strokeStyle=o[1],s.fillStyle=o[1],s.stroke(),s.fill()},(s,d)=>{s.translate(n.x,n.y);const m=4,f=[.7,.54],r=0,h=0;s.beginPath(),s.moveTo(r,h),s.lineTo(r-m,h-d.width/2*f[1]),s.lineTo(r,h-d.width/2*f[0]),s.lineTo(r+m,h-d.width/2*f[1]),s.lineTo(r,h),s.strokeStyle=o[1],s.fillStyle=o[1],s.stroke(),s.fill()},(s,d)=>{s.translate(n.x,n.y);const m=0,f=.74,r=0,h=0;s.beginPath(),s.moveTo(r,h),s.lineTo(r+m,h-d.width/2*f),s.lineTo(r,h),s.strokeStyle=o[2],s.stroke()},(s,d)=>{s.translate(n.x,n.y),E(s,i,l,o)},(s,d)=>{s.translate(n.x,n.y),N(s,i,o)}].map(s=>{const d=document.createElement("canvas");d.width=e,d.height=t;const m=d.getContext("2d");return m.imageSmoothingEnabled=!1,s(m,d),d})}const B={class:"wb-disks-workbench13-clock"},F={ref:"canvas"},V={class:"clock__period"};function q(e,t,l,o,a,i){return I(),M("div",B,[g("canvas",F,null,512),g("span",V,C(i.timeAmPm),1)])}const G=k(H,[["render",q],["__scopeId","data-v-fb26bf9a"]]);export{G as default};

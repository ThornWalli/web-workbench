import{al as k,_ as y,V as v,ad as I,Q as w,ap as M,e as g,ao as h,aq as C,s as x}from"./index.dec177eb.js";import{_ as S,f as u,k as l,l as c,q as m,m as r,a3 as b,t as O,B as d,z as P,L as z,x as H,y as T}from"./entry.e71fbdd9.js";const F={components:{AtomMarkdown:k},mixins:[y],props:{model:{type:Object,default(){return{value:v()}}}},data(){return{content:["# Document Reader",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}},computed:{contextMenu(){return new I(D,{core:this.core,model:this.model})}}},N={class:"wb-disks-workbench13-document-reader-info"};function V(n,t,p,f,s,e){const a=u("atom-markdown");return l(),c("div",N,[m(a,{content:s.content},null,8,["content"])])}const E=S(F,[["render",V],["__scopeId","data-v-267ae537"]]),D=({core:n,model:t})=>{const{windows:p}=n.modules;return[{title:"Document Reader",items:[{title:"Openâ€¦",hotKey:"O",keyCode:79,action:f},{separator:!0},{hotKey:"I",keyCode:73,title:"Info",action:s}]},{title:"Font Family",items:Object.keys(w).map(e=>{const a=w[String(e)];return{title:M[String(e)],items:Object.keys(a).map(i=>{const _=a[String(i)];return{title:i,type:g.RADIO,name:h.FONT_FAMILY,value:_,model:t.value}})}})},{title:"Font Size",items:C.map(e=>({title:`${e}px`,type:g.RADIO,name:h.FONT_SIZE,value:e,model:t.value}))}];async function f(){const e=await n.executeCommand("openFileDialog");if(e)if("content"in e.value)t.fsItem=e.fsItem,t.value=Object.assign(t.value,v(),e.value);else throw new Error("Can't read file content")}function s(){p.addWindow({title:"Info",component:E,componentData:{model:t},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentReader"})}},R={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"14"},U=r("path",{fill:"#05a",d:"M0 0h12v14H0z"},null,-1),A=r("path",{fill:"#fff",d:"M0 2v2h1v2h2v2h1v2h2v2h1v2h3V2z"},null,-1),$=[U,A];function j(n,t){return l(),c("svg",R,$)}const B={render:j},Y={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"18"},W=r("path",{d:"M6 2h1v2H6zM7 4h1v2H7zM5 0h1v2H5zM4 2h1v2H4zM7 16H4v-4H3v6h5v-6H7zM8 6h1v2H8zM10 10V8H9v2H8v2h3v-2zM2 10V8H1v2H0v2h3v-2zM3 4h1v2H3zM2 6h1v2H2z"},null,-1),L=[W];function q(n,t){return l(),c("svg",Y,L)}const Z={render:q};const K={components:{SvgNoteCorner:B,SvgScrollbarSmallArrow:Z,WbMarkdown:k},mixins:[y],props:{windowOptions:{type:Object,default(){return{}}},model:{type:Object,default(){return{fsItem:null,value:v()}}}},data(){return{content:[],currentPage:0,clickInterval:null,scrollValue:0}},computed:{style(){const n=this.model.value[h.FONT_FAMILY];return{"--scroll-bar-size":`${x.size}`,"--font_size__markdown":`${this.model.value[h.FONT_SIZE]}`,"--font__markdown__typo__headlinePrimary":n,"--font__markdown__typo__headlineSecondary":n,"--font__markdown__typo__text":n,"--font__markdown__typo__code":n,"--font__markdown__typo__blockquote":n}},pageContent(){return this.content[this.currentPage]},contextMenu(){return new I(D,{core:this.core,model:this.model})},fsItem(){return this.fsItem&&b(this.model.fsItem)}},watch:{currentPage(){this.$refs.scrollContainer.scrollTop=0},model:{deep:!0,handler(){this.refreshContent()}}},mounted(){this.refreshContent()},methods:{refreshContent(){this.fsItem&&(this.windowOptions.title=this.fsItem.name+" - Document Reader");const t=this.model.value.content.split(/\[PAGE\][\n]+/);this.currentPage=0,this.content=t},onPointerDownPrev(){this.currentPage=Math.max(this.currentPage-1,0)},onPointerDownNext(){this.currentPage=Math.min(this.currentPage+1,this.content.length-1)},onPointerDownScrollUp(){this.intervalClick(()=>{this.$refs.scrollContainer.scrollTop=Math.max(this.$refs.scrollContainer.scrollTop-20,0)})},onPointerDownScrollDown(){this.intervalClick(()=>{this.$refs.scrollContainer.scrollTop=Math.min(this.$refs.scrollContainer.scrollTop+20,this.$refs.scrollContainer.scrollHeight)})},onPointerUp(){window.clearInterval(this.clickInterval)},intervalClick(n){window.clearInterval(this.clickInterval),this.clickInterval=setInterval(n,125)},onScroll(n){n.preventDefault(),this.scrollValue=this.$refs.scrollContainer.scrollTop/(this.$refs.scrollContainer.scrollHeight-this.$refs.scrollContainer.offsetHeight)}}},G=n=>(H("data-v-235e199f"),n=n(),T(),n),Q={class:"document-reader__content"},X={class:"document-reader__pagination"},J=G(()=>r("div",{class:"document-reader__pagination__spacer"},null,-1));function ee(n,t,p,f,s,e){const a=u("wb-markdown"),i=u("svg-scrollbar-small-arrow"),_=u("svg-note-corner");return l(),c("div",{class:"wb-disks-workbench13-document-reader",style:z(e.style)},[r("div",Q,[r("div",{ref:"scrollContainer",class:"document-reader__content__scroll",onScroll:t[0]||(t[0]=(...o)=>e.onScroll&&e.onScroll(...o))},[m(a,{content:e.pageContent},null,8,["content"])],544)]),r("div",X,[r("div",{class:"document-reader__pagination__frame document-reader__pagination__current",onPointerdown:t[1]||(t[1]=(...o)=>e.onPointerDownPrev&&e.onPointerDownPrev(...o))},[r("span",null,O(s.currentPage+1),1)],32),s.scrollValue>0?(l(),c("div",{key:0,class:"document-reader__pagination__frame document-reader__pagination__scroll_up",onPointerdown:t[2]||(t[2]=(...o)=>e.onPointerDownScrollUp&&e.onPointerDownScrollUp(...o)),onPointerup:t[3]||(t[3]=(...o)=>e.onPointerUp&&e.onPointerUp(...o))},[r("i",null,[m(i)])],32)):d("",!0),J,s.scrollValue<1?(l(),c("div",{key:1,class:"document-reader__pagination__frame document-reader__pagination__scroll_down",onPointerdown:t[4]||(t[4]=(...o)=>e.onPointerDownScrollDown&&e.onPointerDownScrollDown(...o)),onPointerup:t[5]||(t[5]=(...o)=>e.onPointerUp&&e.onPointerUp(...o))},[r("i",null,[m(i)])],32)):d("",!0)]),s.currentPage>0?(l(),P(_,{key:0,class:"document-reader__corner document-reader__corner_left",onPointerdown:e.onPointerDownPrev},null,8,["onPointerdown"])):d("",!0),s.currentPage<s.content.length-1?(l(),P(_,{key:1,class:"document-reader__corner document-reader__corner_right",onPointerdown:e.onPointerDownNext},null,8,["onPointerdown"])):d("",!0)],4)}const oe=S(K,[["render",ee],["__scopeId","data-v-235e199f"]]);export{oe as default};

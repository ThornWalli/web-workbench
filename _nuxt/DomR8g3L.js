const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DQoF4fSs.js","./BfpYGSxR.js","./BVLmgizW.js","./Cah-phv7.js","./C98WWl5r.js","./g1R7VqXM.js","./Dnkwg0NB.js","./CHLd88nu.css","./BWKGU6Bw.js","./DEAznjDA.css","./DcnHnZr4.js","./gFpO8BtF.css","./CP7cPb5u.js","./CuhyRvkQ.css","./Caob76XJ.js","./CiACgkXc.css","./CnxF4DWy.js","./Bn0T8SwD.css","./Dkhtr-D7.js","./D1WZfvAb.js","./jSR9Z_uS.js","./CXbNF4JJ.css","./D2G2gdJv.css","./DwiNeNSx.js","./QXLAWCbs.js","./DDPzVXKz.js","./BEk8nzL5.js","./4lgYwaTL.css","./ChU3mOMn.js","./BHmTNEz3.js","./DNMHntIy.css","./DZkluKzQ.css","./DSOqBbj_.js","./CCnhm4BD.js","./DaDAJXAw.css","./Ce5YywOu.js","./BPJTiICV.css","./BX3N_rxg.js","./eyMFa7z1.css","./_aqQKK70.js","./CxZzHJhT.js","./BIzvQSzn.css","./Bbhi1Q0P.js","./B2YYxTED.js","./CYV3YR6m.css","./B67YLBng.css"])))=>i.map(i=>d[i]);
var e,t,r,a,s,n,i,o,l,c,m,u,d,p,h,g,f,w,v,b,y,E,S,I,A,N,$=Object.defineProperty,__typeError=e=>{throw TypeError(e)},__publicField=(e,t,r)=>((e,t,r)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r),__accessCheck=(e,t,r)=>t.has(e)||__typeError("Cannot "+r),__privateGet=(e,t,r)=>(__accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),__privateAdd=(e,t,r)=>t.has(e)?__typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),__privateSet=(e,t,r,a)=>(__accessCheck(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),__privateWrapper=(e,t,r,a)=>({set _(a){__privateSet(e,t,a,r)},get _(){return __privateGet(e,t,a)}});import{c as T}from"./C98WWl5r.js";import{C as P,c as W,L as C}from"./BdLbwnUH.js";import{f as D}from"./CJbzZ8Mo.js";import{d as R,A as L,T as x,c as O,g as _,p as k}from"./CJFEEUyp.js";import{g as M,T as j,u as V,e as B,a as F,i as U,b as X,w as Y,p as G,c as H,I as z,R as K,f as Z,S as q,C as Q,F as J,d as ee,s as te,E as re}from"./BSzGBLGV.js";import{g as ae,a as se,M as ne,W as ie,S as oe}from"./CWPvID7d.js";import{L as le,K as ce,n as me,O as ue,y as de,z as pe,A as he,d as ge,k as fe,I as we,C as ve,G as be,Z as ye,_ as Ee,r as Se,D as Ie,F as Ae}from"./BfpYGSxR.js";import{C as Ne}from"./g1R7VqXM.js";import{I as $e,d as Te,a as Pe,b as We,g as Ce}from"./D1WZfvAb.js";import{S as De}from"./D3MPJlJW.js";import{R as Re}from"./D6fwdpc8.js";import{f as Le,a as xe,l as Oe,r as _e}from"./CxZzHJhT.js";import{o as ke,c as Me,a as je}from"./BENg2Ku2.js";import{i as Ve}from"./BHmTNEz3.js";import{r as Be,F as Fe,a as Ue,W as Xe,C as Ye,O as Ge,b as He,I as ze}from"./BlFo7Aw2.js";import{S as Ke}from"./BB6FUOrg.js";import{S as Ze}from"./Ca1_6l_s.js";import{C as qe}from"./Dkhtr-D7.js";import{c as Qe}from"./czE5BX5a.js";import{W as Je}from"./Caob76XJ.js";import{W as et}from"./CCnhm4BD.js";import{W as tt}from"./CnxF4DWy.js";import{a as rt}from"./GLWL0ZEA.js";import{O as at,i as st}from"./D7Us3e3D.js";import{f as nt}from"./Dw-z6kis.js";import{m as it,e as ot}from"./DL1FsYWj.js";import{p as lt,a as ct}from"./CcnVWkhV.js";import{c as mt}from"./tbUmQ5LT.js";import{K as ut}from"./Cy0zoxeo.js";import"./mZmTw9Uu.js";import"./CVVDEXDJ.js";import"./Cah-phv7.js";import"./DdO-3S9B.js";import"./B1k18Rg6.js";import"./CIasQYz1.js";import"./B-meQdOw.js";import"./Caivkp23.js";import"./CrNGlbV0.js";import"./N5kgPtk_.js";import"./B15fucc8.js";import"./CJYzpMQ6.js";import"./CB0fCJMd.js";import"./jSR9Z_uS.js";import"./CV0dHcg-.js";import"./D3xLGof4.js";import"./Dnkwg0NB.js";import"./BvY_9a4j.js";import"./CH0i9kLA.js";import"./BWKGU6Bw.js";import"./CY5IK1Gp.js";var dt=Array.isArray,pt=Object.getPrototypeOf,ht=Object.prototype,gt=Object.keys;function argsArgArrayOrObject(e){if(1===e.length){var t=e[0];if(dt(t))return{args:t,keys:null};if(function isPOJO(e){return e&&"object"==typeof e&&pt(e)===ht}(t)){var r=gt(t);return{args:r.map(function(e){return t[e]}),keys:r}}}return{args:e,keys:null}}function combineLatest(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=lt(e),a=ct(e),s=argsArgArrayOrObject(e),n=s.args,i=s.keys;if(0===n.length)return nt([],r);var o=new at(function combineLatestInit(e,t,r){void 0===r&&(r=st);return function(a){maybeSchedule(t,function(){for(var s=e.length,n=new Array(s),i=s,o=s,_loop_1=function(s){maybeSchedule(t,function(){var l=nt(e[s],t),c=!1;l.subscribe(mt(a,function(e){n[s]=e,c||(c=!0,o--),o||a.next(r(n.slice()))},function(){--i||a.complete()}))},a)},l=0;l<s;l++)_loop_1(l)},a)}}(n,r,i?function(e){return function createObject(e,t){return e.reduce(function(e,r,a){return e[r]=t[a],e},{})}(i,e)}:st));return a?o.pipe(it(a)):o}function maybeSchedule(e,t,r){e?ot(r,e,t):t()}class Config{constructor(e,t){__publicField(this,"entries",new Map(Object.entries(ae()))),__publicField(this,"observable",le(ae())),__publicField(this,"storage"),__publicField(this,"ready");const r=M(t||j.NONE);this.storage=new r({name:e}),this.ready=this.storage.load().then(e=>(this.entries=new Map([...this.entries,...e]),Object.assign(this.observable,Object.fromEntries(this.entries)),this)).catch(e=>{throw e})}setDefaults(e){return Promise.all(Object.keys(e).map(t=>{this.has(t)||this.set(t,e[String(t)])}))}get(e){return this.entries.get(e)}has(e){return this.entries.has(e)}set(e,t){return"string"==typeof e?(this.entries.set(e,t),this.observable[String(e)]=t):!e||"object"!=typeof e||e instanceof Map||Object.keys(e).forEach(r=>{t=e[r],this.entries.set(r,t),this.observable[r]=t}),this.storage.save(Array.from(this.entries))}}class WebWorkbench extends P{constructor(e){super(),__publicField(this,"core"),this.core=e}prompt(e){const t=["openDialog","--prompt"];return e&&t.push(`--message="${V(e)}"`),this.core.executeCommand(t.join(" "))}confirm(e){const t=["openDialog","--confirm"];return e&&t.push(`--message="${V(e)}"`),this.core.executeCommand(t.join(" "))}}class CommandTester{constructor(r){__privateAdd(this,e),__privateAdd(this,t,[]),__privateSet(this,e,r)}command(e,r){__privateGet(this,t).push({value:e,targetValue:r})}run(){return Promise.all(__privateGet(this,t).map(({value:t,targetValue:r})=>__privateGet(this,e).executeCommand(t).then(e=>{const a=e===r;return a||console.warn(`[ ${t} ]; ${e} === ${r}`),{value:t,targetValue:r,result:e,success:a}})))}async start(){const e=await this.run();return[[e.length,"Tests processed"],[e.filter(e=>e.success).length,"Tests success"],[e.filter(e=>!e.success).length,"Tests failed"]]}}e=new WeakMap,t=new WeakMap;const ft=R(({core:e})=>[{name:["execute"],description:"Execute file.",args:[new L({index:0,name:"path",description:"Path to the file"})],async action({path:t}){var r,a;let s=t;const n=new Map(e.config.get(Ne.FILE_EXTENSION_ASSIGNMENT));if(!s)throw B.get("bad_args");let i;if(n.has(F(s))?i=await(null==(r=e.modules.files)?void 0:r.fs.get(n.get(F(s)))):(i=await(null==(a=e.modules.files)?void 0:a.fs.get(s)),s=void 0),"function"==typeof(null==i?void 0:i.action))return i.action(e,s);if((null==i?void 0:i.data)&&"object"==typeof(null==i?void 0:i.data)&&"type"in i.data){const t=i.data,r=[`openPreview "${i.getPath()}"`];return t.openMaximized&&r.push("-maximized"),e.executeCommand(r.join(" "))}}},{name:["openColorSettings"],async action(){var t;const r=await ce(()=>import("./DQoF4fSs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url).then(e=>e.default);null==(t=e.modules.windows)||t.addWindow({component:r,componentData:{},options:{title:"Color Settings",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}})}},{name:["openSettings"],async action(){var t;const r=await ce(()=>import("./DwiNeNSx.js"),__vite__mapDeps([23,5,6,1,7,14,15,16,17,24,8,9,25,26,27,28,29,30,19,20,21,31]),import.meta.url).then(e=>e.default);null==(t=e.modules.windows)||t.addWindow({component:r,componentData:{},options:{title:"Settings",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1,filled:!0}})}},{name:["echo","print"],args:[new L({name:["newline","n"],flag:!0})],async action({newline:e},t){const valueParse=e=>V(e).replace(/\\"/g,'"').replace(/\\n/g,"\n");if(e)t.message(t.commandArgs.map(e=>valueParse(e)));else{let e=await t.core.executeCommand(t.commandValue);"object"==typeof e&&(e=JSON.stringify(e)),t.message(`${V(valueParse(e))}`)}}},{name:"commands",action(e,t){const r=new x({headerPadding:1});return r.addColumns([{value:"Command(s)",align:"left",maxWidth:20},{value:"Description/Arguments",align:"left",maxWidth:60}]),r.addRows(W.items.reduce((e,t)=>{const r=t.args||[],a=[];t.description&&(a.push(t.description),a.push("")),r.length&&(a.push("Arguments:"),a.push(""));const{flagNames:s,kwargNames:n}=r.reduce((e,t)=>{const r=t.name.join(", ");return t.flag?e.flagNames.push({name:`-${r}`,description:t.description}):e.kwargNames.push({name:`--${r}`,description:t.description}),e},{flagNames:[],kwargNames:[]}),i={paddingChr:"Â",showHeaders:!1,config:{name:{minWidth:15},description:{minWidth:10,maxWidth:30}}};return a.push(O(s,Object.assign({},i))),s.length>0&&n.length>0&&a.push(""),a.push(O(n,Object.assign({},i))),e.push([t.name.join(", "),a.join("\n")]),e},[])),t.message(["Commands:",r]),Promise.resolve()}},{name:["CLS","CLEAR"],async action(){e.consoleInterface.clear()}},{name:["prompt","input","PROMPT","INPUT"],args:[new L({index:0,name:"text",description:"Text from prompt."}),new L({index:1,name:"variable",description:"Variable"})],action:({text:t,variable:r,unresolved:a})=>(a.text&&!a.variable?(r=a.text,t=void 0):r=a.variable,e.consoleInterface.prompt(t).then(t=>{var a;return U(t)&&(t=Number(t)),r&&(null==(a=e.modules.parser)||a.memory.set(r,t)),t}))},{name:["confirm","CONFIRM"],args:[new L({index:0,name:"text",description:"Text from confirm."})],action:({text:t})=>e.consoleInterface.confirm(t)},{name:["selfCheck"],async action(t,r){const a=new x;a.addColumns([{value:"Count",align:"left",minWidth:8},{value:"Description",align:"left",minWidth:15}]),a.addRows(await function commandTests(e){const t=new CommandTester(e);return t.command('"foo" +"bar"','"foobar"'),t.command("(-3+-6)+1",-8),t.command("(-3-+6)+1",-8),t.command("(-3*-6)+1",19),t.command("(-3/-6)+1",1.5),t.command("(-3+6)+1",4),t.command("(-3-6)+1",-8),t.command("(-3*6) + 1",-17),t.command("(-3/6)+1",.5),t.command("INT(PI)",3),t.command("(POW(2,2)+1)",5),t.command('ASC("D")',68),t.command("CHR$(68)",'"D"'),t.command('LEN("ABC")',3),t.command('"a" + "b"','"ab"'),t.command("STRING$(3,0)",'"000"'),t.command("SQRT(2,2)",Math.sqrt(2)),t.command("128 >> (256 + 5)",4),t.command("-2+4+SQRT(2,2)",2+Math.sqrt(2)),t.command("-2- 2 * 2",-6),t.command("(1+1)",2),t.command("2*2",4),t.command("1+2+3+(POW(2,2)+1)+5*8-(50/2)",26),t.start()}(e)),r.message(['"Command Tests:"',a,'"For failures, look in the web console of the browser."'])}}]);const{version:wt}=me().public,vt=class _Core{constructor(){__publicField(this,"setupComplete",!1),__publicField(this,"events",ue(new De)),__publicField(this,"errorObserver",ue(new De)),__publicField(this,"ready",ue(new Re(0))),__publicField(this,"modules",{}),__publicField(this,"consoleInterface",new WebWorkbench(this)),__publicField(this,"logger",new C({core:this,debug:!1,consoleInterface:this.consoleInterface})),__publicField(this,"executionCounter",0),__publicField(this,"config",new Config(se,j.SESSION)),this.log(`${_Core.NAME}; ${_Core.VERSION}`)}get version(){return _Core.VERSION}addExecution(){return this.executionCounter++,()=>{this.executionCounter--}}async setup({firebase:e,symbols:t,disks:r}={}){var a,s;if(this.setupComplete)return console.warn("Setup is complete!"),this;this.setupComplete=!0,W.add(_(ft({core:this}))),await this.config.ready;const n=Object.values(this.modules);return await Promise.all(n.map(e=>Promise.resolve(null==e?void 0:e.beforeSetup()))),await Promise.all(n.map(e=>Promise.resolve(null==e?void 0:e.setup()))),r&&(null==(a=this.modules.files)||a.addDisks(r)),t&&(null==(s=this.modules.symbols)||s.addSymbols(t)),e&&await D.initApp(e),this.ready.next(this),this}destroy(){W.clear()}addModule(e,t){const r=new e({core:this,...t});this.modules[T(r.name)]=r}async removeModule(e){await e.destroy(),Reflect.deleteProperty(this.modules,e.name)}executeCommands(e){const t=e.shift();if(t)return this.executeCommand(t).then(()=>this.executeCommands(e))}async executeCommand(e,t){var r,a,s;"string"==typeof e&&(e=e.replace(/(.*[^\\])\n(\S*)/gm,"$1\\n$2"));const n=(null==t?void 0:t.show)||!1,i=[];(Array.isArray(null==t?void 0:t.message)||"string"==typeof(null==t?void 0:t.message))&&i.push(...i.concat(null==t?void 0:t.message));const o={commandBucket:W,core:this,logger:this.logger,show:n,...t,message:e=>{if(n){let t=e;"string"==typeof e&&(t=`"${e=e.replace(/\\n/g,"\n")}"`),i.push(...[].concat(t))}}};let l;try{if(e){const t=await(null==(r=this.modules.parser)?void 0:r.parseCommand(e));t?(null==(a=o.commandBucket)?void 0:a.has(t.command))?l=await executeCommandBucket(e,t,o.commandBucket,o):W.has(t.command)?l=await executeCommandBucket(e,t,W,o):(null==(s=this.modules.parser)?void 0:s.mathParser.validInput(e))?l=await this.modules.parser.mathParser.parse(e):/^\w+$/.test(e)&&console.warn(`can\\'t use variable or method "${e}"`):console.warn(`can\\'t parse command "${e}"`)}}catch(c){let e=c;Array.isArray(c)&&(e=new Error(c[c.length-1])),this.errorObserver.next(e)}return void 0!==l&&"undefined"!==l&&"string"==typeof l&&o.show&&i.length<1&&i.push(l),i.forEach(e=>{var t;return null==(t=o.logger)?void 0:t.add(e,{type:C.TYPE.OUTPUT})}),l}addRootItems(e){var t;const r=null==(t=this.modules.files)?void 0:t.fileSystem;return Promise.all(e.map(async({id:e,name:t,data:a,meta:s,items:n})=>{if(n&&n.length){const a=await(null==r?void 0:r.createRootDir(e,t,{meta:[[$e.WINDOW_SIDEBAR,!1],[$e.WINDOW_SCALE,!1],[$e.WINDOW_SCROLL_X,!1],[$e.WINDOW_SCROLL_Y,!1],[$e.POSITION,{x:80,y:320}],[$e.WINDOW_SIZE,{x:120,y:120}],[$e.IGNORE_SYMBOL_REARRANGE,!0]]}));return null==a||a.addItems(n),a}return null==r?void 0:r.createRootFile(e,t,a,{meta:s||[]})})).catch(e=>{throw new Error(e)})}log(e){this.logger.add(e,{namespace:"Core"})}};__publicField(vt,"VERSION",wt||"0.0.0"),__publicField(vt,"NAME","web-workbench");let bt=vt;async function executeCommandBucket(e,t,r,a){var s;const n=r.get(t.command);if(n){const r=a.show,i=k(n,t),o=await n.action(i,Object.assign({command:t.command,commandValue:t.commandValue,commandArgs:t.args},a));return r&&a.showCommand&&(null==(s=a.logger)||s.add("> "+e,{type:C.TYPE.OUTPUT})),o}}function isSeperator(e,t){return e.separator===t}const yt="[COMMAND_PARSER_NEW_LINE]";function parse(e,{separator:t,forceProgram:r,mergeArgs:a,mergeArgsBy:s}={}){var n,i;const o=function getDefaultConfig$1(e){return{rawCommand:"",mergeArgs:!1,mergeArgsBy:/^[+,]$/,hasProgram:!1,activeArgument:void 0,isLongArgument:!1,isKeyWordArgument:!1,isString:!1,stringTmpValue:void 0,additionSpecial:!1,specialChar:["+",";",","],isBufferWrite:!1,isBufferValue:!1,isBufferString:!1,rawBuffer:void 0,lastChar:void 0,isSeparating:!1,escaped:!1,currentTick:$t,isClamp:!1,...e,separator:e.separator||It}}({separator:t||It});e=e.replace("\\n",yt),e=`${String(e).trim()}${o.separator}`,o.rawCommand=e,o.mergeArgs=a||!1,o.mergeArgsBy=s||o.mergeArgsBy;const l=[];for(;o.rawCommand.length;){const e=o.rawCommand[0];o.rawCommand=o.rawCommand.slice(1);const t=o.rawCommand[0];if(isSeperator(o,t)){if(o.isSeparating&&isSeperator(o,e))o.isSeparating=!1;else if(!o.isBufferWrite&&isSeperator(o,e)){o.isSeparating=!0;continue}}else o.isSeparating=!1;if((isSeperator(o,e)&&!o.isClamp||o.rawCommand.length<1)&&(o.escaped||!o.isBufferValue||o.isBufferString||(o.isBufferWrite=!1),!o.isBufferWrite&&(o.isBufferValue&&applyRawValue(o),o.activeArgument)))applyArgument(o,l);else if(e===Nt&&o.activeArgument)o.isKeyWordArgument=!0;else if(!(e===At&&(/[ +a-zA-Z]/.test(t)||t===At)||o.activeArgument&&!o.isKeyWordArgument)||o.isBufferWrite||o.specialChar.includes(e))resolveChar(o,e);else{if(o.activeArgument){(null==(i=null==(n=o.activeArgument)?void 0:n.name)?void 0:i.length)||e!==At?o.activeArgument.name+=e:o.isLongArgument=!0;continue}o.activeArgument={name:St},o.isLongArgument&&(o.activeArgument.long=o.isLongArgument)}}return function extractResult(e,{forceProgram:t,mergeArgs:r,mergeArgsBy:a}={}){var s;const n=e[0],i=e[1];let o;i&&function isConcatChar(e){var t;return"+"===(null==(t=e.value)?void 0:t.raw)}(i)||!n||!function isProgramArgument(e){var t,r,a;return"any"===(null==(t=e.value)?void 0:t.type)&&!e.name&&(null==(r=e.value)?void 0:r.raw)&&/^[a-zA-Z]+$/.test(null==(a=e.value)?void 0:a.raw)||!1}(n)&&!t||(e=e.filter(e=>e!==n),o=null==(s=n.value)?void 0:s.raw);let l=e;r&&(l=function mergeArgsByValue(e,t=/^[+]$/){return e.reduce((e,r)=>{var a,s,n,i,o,l;const c=null==(s=null==(a=e[e.length-1])?void 0:a.value)?void 0:s.raw,m=c&&c[String(c).length-1];if("string"==typeof t&&(String(null==(n=r.value)?void 0:n.raw)===t||String(m)===t)||t instanceof RegExp&&(t.test(String(null==(i=r.value)?void 0:i.raw))||t.test(String(m)))){const t=e[e.length-1].value;t&&t.raw&&"string"==typeof t.value&&(t.raw+=null==(o=r.value)?void 0:o.raw,t.value+=(null==(l=r.value)?void 0:l.value)||"",t.type="any")}else e.push(r);return e},Array())}(e,a));const c=function getRawArgs(e,t){const r=[];e&&r.push(e);return r.push(...t.map(e=>{var t,r;if(e.plain)return(null==(t=e.value)?void 0:t.raw)||e.name||St;{const t=e.long?"--":"-",a=e.name||St,s=(null==(r=e.value)?void 0:r.raw)||St;return`${t}${a}${e.value?Nt:""}${s}`}})),r}(o,l);return{program:null==o?void 0:o.replace(yt,"\n"),args:l,rawArgs:c}}(l,{forceProgram:r,mergeArgs:a,mergeArgsBy:s})}const Et="\\",St="",It=" ",At="-",Nt="=",$t='"',Tt="'";function resolveChar(e,t){!function isEscapePrefixChar(e){return e===Et}(t)?(e.escaped||e.isBufferValue||isSeperator(e,t)?t!==e.currentTick||!e.isBufferString||e.escaped||e.isClamp||(e.isBufferWrite=!1):(e.isBufferWrite=!0,e.isBufferValue=!0,t!==Tt&&t!==$t||e.isClamp||(e.currentTick=t,e.isBufferString=!0),e.isBufferString=t===e.currentTick,e.rawBuffer=void 0,e.activeArgument=e.activeArgument||{value:void 0,plain:!0}),(t!==e.currentTick||e.isClamp||e.escaped&&t===e.currentTick)&&((!e.isBufferWrite&&e.isBufferString||e.isBufferWrite&&!e.isBufferString)&&!e.isClamp&&e.specialChar.includes(t)&&!e.additionSpecial?(e.rawCommand=" "+t+" "+e.rawCommand,e.additionSpecial=!0):(e.additionSpecial=!1,e.rawBuffer=(e.rawBuffer||"")+t)),e.escaped=!1):e.escaped=!0,e.isBufferWrite&&("("===t?e.isClamp=!0:")"===t&&(e.isClamp=!1)),e.lastChar=t}function applyArgument(e,t){e.activeArgument&&(e.isLongArgument&&(e.activeArgument.long=e.isLongArgument),function isEmptyArgument(e){var t,r,a;return e.plain&&!e.name&&"any"===(null==(t=e.value)?void 0:t.type)&&(void 0===(null==(r=e.value)?void 0:r.raw)||(null==(a=e.value)?void 0:a.raw)===St)}(e.activeArgument)||t.push(e.activeArgument)),e.activeArgument=void 0,e.isLongArgument=!1,e.isKeyWordArgument=!1}function applyRawValue(e){var t,r;const a=e.rawBuffer||St;if(e.isBufferString)e.activeArgument.value={type:"string",value:null==(t=e.rawBuffer)?void 0:t.replace(yt,"\n"),raw:`${e.currentTick}${(null==(r=e.rawBuffer)?void 0:r.replace(yt,"\n"))||""}${e.currentTick}`};else{let t="any",r=a;/^[+-]?\d+$/.test(a)?(t="integer",r=Math.round(Number(a))):/^[+-]?(?:\d+\.?\d*|\.\d+)$/.test(a)?(t="double",r=Number(a)):/^true|false$/.test(a)?(t="boolean",r="true"===a):/^[a-zA-Z$]+$/.test(a)?(t="any",r=String(a).replace(/ /g,St)):/^[\d+\-*./a-zA-Z$]+$/.test(a)&&(t="term",r=String(a).replace(/ /g,St)),e.activeArgument.value={type:t,value:r,raw:e.rawBuffer}}e.rawBuffer=void 0,e.isBufferValue=!1,e.isBufferString=!1}const Pt=class _CommandParser{async parse(e){const t=parse(e,{forceProgram:!0}),r=await this.getArguments(t);return{origin:e,unresolved:getUnresolved(t),args:r.args,kwargs:r.kwargs,command:t.program||"",commandValue:e}}getArguments(e){return{args:e.args.filter(e=>e.plain).map(e=>{if(e.value)return e.value.value}),kwargs:Object.fromEntries(e.args.filter(e=>!e.plain).map(e=>[T(e.name||""),void 0!==e.value?e.value.value:void 0]))}}static extractStrings(e){let t=!1,r=0;const a=[];let s=!1;for(let n=e.length-1;n>=0;n--){const i=e[Number(n)],o=e[n-1];s||'"'!==i||"\\"===o?(!t&&s||s)&&"'"===i&&"\\"!==o&&(t?(s=!1,t=!1,a.push(e.slice(n,r+1))):(s=!0,t=!0,r=n)):t?(t=!1,a.push(e.slice(n,r+1))):(s=!1,t=!0,r=n)}if(t)throw new Error("can't extract values; "+e);return{result:a.reduce((e,t,r)=>e.replace(t,_CommandParser.resolveKey(r)),e),values:a}}static extractValues(e,t=" "){let r=!1,a=0;const s=[];let n=!1;for(let i=e.length-1;i>=0;i--){const t=e[Number(i)],o=e[i-1];n||'"'!==t||"\\"===o?(!r&&n||n)&&"'"===t&&"\\"!==o&&(r?(n=!1,r=!1,s.push(e.slice(i,a+1))):(n=!0,r=!0,a=i)):r?(r=!1,s.push(e.slice(i,a+1))):(n=!1,r=!0,a=i)}if(r)throw new Error("can't extract values; "+e);s.forEach((t,r)=>{e=e.replace(t,_CommandParser.resolveKey(r))});return{params:e.split(t).filter(e=>e),values:s}}static resolveKey(e){return`$$$$$$${e}`}static resolveValues({params:e,values:t}){return e.map(e=>_CommandParser.resolveValue(e,t))}static valueUnresolved(e){return"string"==typeof e&&_CommandParser.REGEX_VALUE_RESOLVE.test(e)}static resolveValue(e,t){var r;let a=e;if(_CommandParser.valueUnresolved(e)){if(a=null==(r=String(e).match(/[$]{3}(\d+)/g))?void 0:r.reduce((e,r)=>e.replace(r,t[Number(r.replace(_CommandParser.REGEX_VALUE_RESOLVE,"$1"))]),String(e)),/[\w]+[$%]?[ ]*\(/.test(a||""))return a;if("string"==typeof a){if("undefined"===a)return;if(function isNumeric(e){return!isNaN(Number(e))}(a))return Number(a);if(!a.startsWith('"'))return a}}return a}};__publicField(Pt,"REGEX_VALUE_RESOLVE",/[$]{3}(\d+)/),__publicField(Pt,"REGEX_COMMAND_REPLACE",/^([a-zA-Z]+[a-zA-Z0-9_]+) (.*)$/),__publicField(Pt,"REGEX_PARAM_KWARG",/^[-]{0,2}([\\-\w]+)=(.*)$/),__publicField(Pt,"REGEX_PARAM_ARG",/^[-]{1,2}([\\-\w]+)$/);let Wt=Pt;function getUnresolved(e){return{args:e.args.filter(e=>e.plain).map(e=>{var t;return(null==(t=e.value)?void 0:t.raw)||""}),kwargs:Object.fromEntries(e.args.filter(e=>!e.plain).map(e=>{var t;return[T(e.name||""),(null==(t=e.value)?void 0:t.raw)||""]}))}}class Entry{constructor(e,t,a,s){__publicField(this,"name"),__privateAdd(this,r),__publicField(this,"global",!1),__publicField(this,"readonly",!1),this.name=e,__privateSet(this,r,t),this.global=a||this.global,this.readonly=s||this.readonly}get value(){return __privateGet(this,r)}set value(e){this.readonly||__privateSet(this,r,e)}}r=new WeakMap;class SubEntry extends Entry{constructor(e,t,r=!1){super(e,t,r,!0)}async execute(...e){if("function"==typeof this.value)return this.value(...e)}}class DimEntry extends Entry{}class Memory{constructor(){__privateAdd(this,a,new Map),__privateAdd(this,s,new Map),__privateAdd(this,n,[])}reset(){this.resetPrefixStack(),__privateGet(this,a).clear(),__privateGet(this,s).clear()}resetPrefixStack(){__privateSet(this,n,[])}get prefixStack(){return __privateGet(this,n)}get currentPrefixStack(){return __privateGet(this,n)[__privateGet(this,n).length-1]}has(e){var t;return e=(e=e.replace(/(.*[^ ])[ ]+$/,"$1")).replace(/[$%]$/,""),(!__privateGet(this,a).get(e)||__privateGet(this,a).get(e)&&!(null==(t=__privateGet(this,a).get(e))?void 0:t.global))&&(e=this.prepareName(e)),__privateGet(this,a).has(e)}add(e,t,r=!1,s=!1){e=e.replace(/(.*[^ ])[ ]+$/,"$1"),/\$$/.test(e)?void 0===t&&(t=""):/\\%$/.test(e)&&void 0===t&&(t=0),e=e.replace(/[$%]$/,""),e=this.prepareName(e),this.has(e)||__privateGet(this,a).set(e,new DimEntry(e,t,r,s))}get(e){var t;const r=e=e.replace(/(.*[^ ])[ ]+$/,"$1");e=e.replace(/[$%]$/,""),(!__privateGet(this,a).get(e)||__privateGet(this,a).get(e)&&!(null==(t=__privateGet(this,a).get(e))?void 0:t.global))&&(e=this.prepareName(e));const s=__privateGet(this,a).get(e);if(s){let e=s.value;return e&&"string"==typeof e&&(/\$$/.test(r)?e=String(e):/\\%$/.test(r)||/^\d+$/.test(e)?e=parseInt(e):/^[\d.]+$/.test(e)&&(e=parseFloat(e))),e}}set(e,t,r=!1,s=!1){if(e=e.replace(/(.*[^ ])[ ]+$/,"$1"),"string"==typeof t&&(/[$]$/.test(e)?t=void 0===t?"":String(t):/[%]$/.test(e)&&(t=void 0===t?0:parseInt(t))),e=e.replace(/[$%]$/,""),e=this.prepareName(e),this.has(e)){const r=__privateGet(this,a).get(e);r instanceof DimEntry&&r&&(r.value=t)}else this.add(e,t,r,s)}addSub(e,t){e=this.prepareName(e,!1),this.has(e)||__privateGet(this,s).set(e,new SubEntry(e,t))}async executeSub(e,t=[],r=!1){t=t||[],e=this.prepareName(e,!1),__privateGet(this,n).push({name:`${Math.round(1e4*Math.random())}`,global:r});const i=__privateGet(this,s).get(e);return null==i?void 0:i.execute(...t).then(e=>(__privateGet(this,a).forEach(e=>{RegExp(`[$]{3}${__privateGet(this,n)[__privateGet(this,n).length-1].name}$`).test(e.name)&&__privateGet(this,a).delete(e.name)}),__privateGet(this,n).pop(),e))}hasSub(e){return e=this.prepareName(e,!1),__privateGet(this,s).has(e)}prepareName(e,t=!0){return"string"==typeof e&&(e=e.replace(/ /g,"")),t&&__privateGet(this,n).length&&!/[$]{3}/.test(e)&&(e=`${e}$$$${__privateGet(this,n)[__privateGet(this,n).length-1].name}`),e}get dims(){return __privateGet(this,a)}get subs(){return __privateGet(this,s)}}a=new WeakMap,s=new WeakMap,n=new WeakMap;let Ct=(E=class{constructor(e,t,r,a,s,n){__publicField(this,"debug",!1),__privateAdd(this,i),__privateAdd(this,o),__privateAdd(this,l),__privateAdd(this,c),__privateAdd(this,m),__privateAdd(this,u,9999999999),__privateAdd(this,d,0),__privateAdd(this,p),__privateAdd(this,h,[]),__privateAdd(this,g,0),__privateAdd(this,f,[]),__privateAdd(this,w,-1),__privateAdd(this,v,[]),__privateAdd(this,b,[]),__privateAdd(this,y,-1),__privateSet(this,m,e),__privateSet(this,c,t||(()=>Promise.resolve(void 0))),__privateSet(this,l,r||new Memory),__privateSet(this,i,a),__privateSet(this,o,s),this.debug=void 0!==n?n:this.debug}get memory(){return __privateGet(this,l)}get lines(){return __privateGet(this,m)}parse(e){var t;const r=null==(t=(e=e||Array().concat(__privateGet(this,m))).shift())?void 0:t.trim();return new Promise(t=>{if(__privateGet(this,p)&&"END SUB"!==r)return r&&__privateGet(this,p).lines.push(r),void t(void 0);if(__privateGet(this,u)>0&&__privateGet(this,d)>__privateGet(this,u))throw new Error("BASIC INTERPRETER OVERFLOW");if(__privateWrapper(this,d)._++,__privateGet(this,y)>=0){const a=__privateGet(this,b)[__privateGet(this,y)];if(a){if(__privateGet(this,b).forEach(e=>{0===a.count&&e&&r&&0===e.count&&e.lines.push(r)}),r&&("WEND"===r||/NEXT /.test(r)))return a.condition().then(async t=>{if(a.tmpLines=a.tmpLines||e,t){const e=a.lines;return a.count++,a&&"function"==typeof a.step&&await a.step(),e.length>0?this.parse(Array().concat(e)):(__privateGet(this,b)[__privateGet(this,y)]=!1,__privateWrapper(this,y)._--,__privateGet(this,b).pop(),null)}return __privateGet(this,b)[__privateGet(this,y)]=!1,__privateWrapper(this,y)._--,__privateGet(this,b).pop(),null}).then(t);t(void 0)}else t(void 0)}else t(void 0)}).then(()=>(!__privateGet(this,p)&&__privateGet(this,w)>=-1&&(void 0!==__privateGet(this,v)[__privateGet(this,w)]&&void 0===__privateGet(this,f)[__privateGet(this,w)]&&__privateGet(this,f).push(!__privateGet(this,v)[__privateGet(this,w)]),"ELSE"===r&&__privateGet(this,g)<1&&(__privateGet(this,f)[__privateGet(this,w)]=!__privateGet(this,f)[__privateGet(this,w)])),__privateGet(this,f)[__privateGet(this,w)]?(r&&/^IF (\((.*)\)|(.*)) THEN$/.test(r)&&__privateWrapper(this,g)._++,null):this.parseLine(r,e))).then(()=>(__privateGet(this,w)>-1&&("ENDIF"===r||"END IF"===r)&&(__privateGet(this,g)<1?(__privateWrapper(this,w)._--,__privateGet(this,v).pop(),__privateGet(this,f).pop()):__privateWrapper(this,g)._--),e.length?this.parse(e):__privateGet(this,h)))}parseLine(e,t){return new Promise((r,a)=>{if(e=(e||"").replace(/^[ \t]+/g,""),/^ *[#/]+/.test(e))r(void 0);else{if(/^GOTO +([\w\d]+)$/.test(e)){const r=e.match(/^GOTO +([\w\d]+)$/)||[];this.commandGoto(t,r[1]),e=""}if(/^SUB (.*) STATIC$/.test(e)){const t=e.match(/^SUB (.*) STATIC$/)||[];return this.commandSubStatic(t[1]).then(r)}if("END SUB"===e)return this.commandEndSub().then(r);if(__privateGet(this,p))r(void 0);else{if(/^IF (\((.*)\)|(.*)) THEN$/.test(e)){const t=e.match(/^IF (\((.*)\)|(.*)) THEN$/)||[],a=t[3]||t[2];return this.commandIfThen(a).then(r)}if("ELSE"!==e&&"ENDIF"!==e&&"END IF"!==e){if(/^WHILE (.*)$/.test(e)){const t=e.match(/^WHILE (.*)$/)||[];return this.commandWhile(t[1]).then(r)}if("WEND"!==e){if(/^FOR (.*)$/.test(e)){const t=e.match(/^FOR (.*)$/)||[];return this.commandFor(t[1]).then(r)}if(e.startsWith("NEXT "))r(void 0);else if(/^([\w\d]+):$/.test(e))r(void 0);else{if(/^DIM( SHARED)? +(.*)$/.test(e)){const t=e.match(/^DIM( SHARED)? +(.*)$/)||[];return this.commandDimShared(t[2],!!t[1]).then(r)}if(/^LET +([\w,$%]+)(\((.*)\))? *= *(.*)$/.test(e)){const t=e.match(/^LET +([\w,$%]+)(\((.*)\))? *= *(.*)$/)||[];return this.commandLet(t[1],t[4],t[3]).then(()=>r(void 0))}if(/^READ +([\w, $%]+)$/.test(e)){const t=e.match(/^READ +([\w, $%]+)$/)||[];return this.commandRead(t[1]).then(r)}if(/^END[ ]*$/.test(e))return this.commandEnd().then(r);if(/^(PAUSE|SLEEP) +(.+)/.test(e)){const t=(e.match(/^(PAUSE|SLEEP) +(.+)/)||[])[2];return this.commandPause(t).then(r)}if(/^CALL *(.*)/.test(e)){const a=e.match(/^CALL *(.*)/)||[];return this.commandCall(a[1],t).then(r)}if(/^EXECUTE *(FILE|EVAL) *(.*)/.test(e)){const t=e.match(/^EXECUTE *(FILE|EVAL) *(.*)/)||[];return this.commandExecute(t[1],t[2]).then(r).catch(a)}if(/^PRINT +USING +.*$/.test(e)){const t=e.match(/^PRINT +USING +(.*)$/)||[];return this.commandPrintUsing(t[1]).then(r)}if(/^PRINT +(.*)$/.test(e)){const t=e.match(/^PRINT +(.*)$/)||[];return this.commandPrint(t[1]).then(r)}if(/^DATA +(.*)$/.test(e)){const t=e.match(/^DATA +(.*)$/)||[];return this.commandDataVar(t[1]).then(r)}__privateGet(this,c).call(this,e,{show:!0}).then(e=>{void 0!==e&&__privateGet(this,h).push(e)}).then(r).catch(a)}}else r(void 0)}else r(void 0)}}})}async setReadStack(e,t){let r=await this.parseValue(t,!0);return"string"==typeof r&&U(r)&&(r=parseFloat(r)),__privateGet(this,l).set(e,r,!0)}async addDataStack(e){let t=await this.parseValue(e,!0);return"string"==typeof t&&U(t)&&(t=parseFloat(t)),__privateGet(this,i).push(t)}async setStack({name:e,value:t,index:r,global:a}){let s=await this.parseValue(t,!0);if("string"==typeof s&&U(s)&&(s=parseFloat(s)),void 0!==r){r=Number(await this.parseValue(r,!0));const t=__privateGet(this,l).get(e);if("object"==typeof t)return t[r-1]=s,s;throw new Error(`Index ${r} out of range`)}return __privateGet(this,l).set(e,s,a)}async setGotoMarkStack(e,t){__privateGet(this,o).set(e,await this.parseValue(t,!0))}async parseValue(e,t=!0,r=!1){if(void 0===e)return e;if(Array.isArray(e))return e;if("boolean"==typeof e)return e;if("number"==typeof e)return Number(e);if("string"==typeof e){if(/^ *(true|false|TRUE|FALSE) *$/.test(e))return"true"===e.toLowerCase();if(/^[\d]+$/.test(e.trim())||/^ *([\\-]?[\d.]+(e[-+]?\d+)?) *$/.test(e.trim()))return parseFloat(e);if(/^ *@"((.|\n)*)" *$/.test(e.trim()))return e.replace(/^ *@"((.|\n)*)" *$/,'"$1"');if(/^"((\\"|[^"])+)"$/.test(e.trim()))return e.trim().replace(/^"((\\"|[^"])+)"$/,'"$1"');if(/^[^"]?(.+)[^"]? *$/.test(e.replace(/ /g,""))){if(e=e.replace(/^ */g,""),__privateGet(this,l).has(e.replace(/ /g,"")))return e=e.replace(/ /g,""),this.parseValue(__privateGet(this,l).get(e),!0);if(r)throw new Error(`Value processing continues: ${e.slice(0,20)}…'`);return __privateGet(this,c).call(this,e,{message:t?void 0:e})}}}async executeCondition(e,t,r){const a=await this.parseValue(e,!0),s=await this.parseValue(r,!0);return/^[=]?==$/.test(t)?a===s:"<>"===t?a!==s:/^([<>][=]|[<>])?$/.test(t)?function compareCondition(e,t,r){e=String(e),r=String(r);switch((t.match(/^([<>][=]|[<>])$/)||[])[1]){case"<":return parseFloat(e)<parseFloat(r);case">":return parseFloat(e)>parseFloat(r);case"<=":return parseFloat(e)<=parseFloat(r);case">=":return parseFloat(e)>=parseFloat(r);default:return null}}(a,t,s):!!/^!=[=]?$/.test(t)&&a!==s}commandIfThen(e){const t=e.match(/([^<>]*) *(<>|<=|>=|<|>|[=!]{2,3}) *([^<>].*)/);return t?this.executeCondition(t[1],t[2],t[3]).then(e=>(__privateGet(this,v).push(e),__privateWrapper(this,w)._++,e)):this.parseValue(e[1],!0).then(e=>{let t=e;return e instanceof DimEntry&&(t=e.value),__privateGet(this,v).push(!!t),__privateWrapper(this,w)._++,t})}commandWhile(e){const t=e.match(/([^<>]*) *(<>|<=|>=|<|>|[=!]{2,3}) *([^<>].*)/);return t?this.executeCondition(t[1],t[2],t[3]).then(e=>{if(e)return __privateGet(this,b).push({count:0,lines:[],condition:()=>this.executeCondition(t[1],t[2],t[3])}),__privateWrapper(this,y)._++,e}):Promise.resolve(void 0)}async commandFor(e){const t=e.match(/(.*) *= *(.*) +TO +(.*) +STEP[ ](.*)/)||e.match(/(.*) *= *(.*) +TO +(.*)/);if(t){const e=await this.parseValue(t[2],!0),r=await this.parseValue(t[3],!0);__privateGet(this,l).set(t[1],e),__privateWrapper(this,y)._++;const step=async(e=!0)=>{let r=1;return t[4]&&(r=await this.parseValue(t[4],!0)),e&&__privateGet(this,l).set(t[1],Number(__privateGet(this,l).get(t[1]))+r),r};return __privateGet(this,b).push({step:step,count:0,lines:[],condition:async()=>{const e=await step(!1);return 0!==e&&this.executeCondition(`(${t[1]}  )`,e<0?">":"<",String(r))}})}}commandSubStatic(e){const t=e.match(/^([\w,$%]+)(\((.*)\))?$/)||[],r=t[1],a=Wt.resolveValues(Wt.extractValues(t[3]||"",","));return __privateSet(this,p,{name:r,lines:[],args:a}),Promise.resolve(void 0)}commandEndSub(){if(!__privateGet(this,p))throw new Error("has no active SUB");{const e=__privateGet(this,p).lines,t=__privateGet(this,p).args;__privateGet(this,l).addSub(__privateGet(this,p).name,async(...r)=>{(await Promise.all(t.map((e,t)=>this.parseValue(r[Number(t)]).then(t=>({arg:e,value:t}))))).forEach(({arg:e,value:t})=>{e&&__privateGet(this,l).add(String(e),t)}),await this.parse(Array().concat(e))}),__privateSet(this,p,void 0)}return Promise.resolve(void 0)}commandGoto(e,t){return e.splice(0,e.length),this.parse(__privateGet(this,m).slice(__privateGet(this,m).indexOf(`${t}:`),__privateGet(this,m).length))}commandDimShared(e,t){return Wt.resolveValues(Wt.extractValues(e,",")).reduce((e,r)=>{const a=String(r||"").match(/^([\w, $%]+)?(\((.*)\))?$/)||[];return __privateGet(this,l).has(a[1])||(a[3]&&(e=e.then(()=>this.parseValue(a[3],!0))),e=e.then(e=>(this.setStack({name:a[1],value:e?Array(e):void 0,global:t}),e))),e},Promise.resolve(void 0))}commandLet(e,t,r){if(__privateGet(this,l).has(e))return this.setStack({name:e,value:t,index:r});throw new Error(`Variable ${e} not defined`)}async commandPrintUsing(e){const t=parse(e,{mergeArgs:!0,mergeArgsBy:/^[+,]$/}).rawArgs,r=parse(t[2],{mergeArgs:!0}).rawArgs.filter(e=>","!==e).map(e=>this.parseValue(e)),a=await Promise.all(r);let s=V(t[0]);for(;s.includes("#");){const e=a.shift(),t=s.match(/(#+\.#+)|(#+)/);if(t&&/(#+\.#+)/.test(t[0])){const[r,a]=t[0].split("."),[n,i]=String(e).split("."),o=Le(String(n||"").slice(0,r.length),r.length,!0," ")+"."+Le(String(i||"").slice(0,a.length),a.length,!1,"0");s=s.replace(/(#+\.#+)/,V(String(o)))}else s=s.replace(/(#+|#+\.#+)/,V(String(e)))}return __privateGet(this,c).call(this,null,{message:`"${V(s)}"`})}commandDataVar(e){if(0===__privateGet(this,i).length)return Promise.all(e.split(",").map(e=>this.addDataStack(e)));throw new Error("DATA has already been declared")}async commandPrint(e){if(/^((".*"|[^"]*);([^;]*))$/.test(e)){const t=e.match(/(.*);(.*)$/)||[],r=await this.parseValue(t[1],!0),{rawArgs:a}=parse(String(t[2]),{mergeArgs:!0});let s=await Promise.all(a.map(e=>this.parseValue(e,!0)));s=s.map(e=>V(e));const n=s.map(e=>`${V(r)}${e}`).join(" ");return __privateGet(this,c).call(this,null,{message:X(n)||U(n)?n:`"${n}"`})}{let t=await this.parseValue(e);const{rawArgs:r}=parse(String(t),{mergeArgs:!0});let a=await Promise.all(r.map(e=>this.parseValue(e,!0)));return a=a.map(e=>V(e)),t=a.length>1?a.join(""):a[0],__privateGet(this,c).call(this,null,{message:X(t)||U(t)?t:`"${t}"`})}}commandEnd(){return Promise.resolve(void 0)}async commandPause(e){const t=Number(await this.parseValue(e));return new Promise(e=>window.setTimeout(()=>{e(void 0)},t))}commandRead(e){const t=e.split(",");return Promise.all(t.map(e=>{const t=__privateGet(this,i).shift();return this.setReadStack(e,t),Promise.resolve(void 0)}))}commandCall(e,t){const r=(e.match(/([^(]+)\(.*\)/)||[])[1];if(__privateGet(this,l).hasSub(r))return this.parseLine(e,t);throw new Error(`SUB ${r} NOT FOUND`)}async commandExecute(e,t){if(!__privateGet(this,c))throw new Error("No callback available for readfile");let r;switch(e){case"FILE":if(r=await __privateGet(this,c).call(this,`readfile ${t}`,{show:!1}),r&&"object"==typeof r&&"content"in r)return __privateGet(this,c).call(this,r.content,{show:!0});throw new Error("File Content is empty");case"EVAL":return this.parseValue(t,!1)}}},i=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,m=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,g=new WeakMap,f=new WeakMap,w=new WeakMap,v=new WeakMap,b=new WeakMap,y=new WeakMap,E);class BasicInterpreter{constructor(e,t){__privateAdd(this,S),__privateAdd(this,I),__privateAdd(this,A,new Map),__privateAdd(this,N,[]),__privateSet(this,I,t),__privateSet(this,S,e)}get callback(){return __privateGet(this,I)}get memory(){return __privateGet(this,S)}async parse(e,t,r){if(0===e.length)return;e.length>1&&await this.readData(e);const a=[];return new Ct(e,async(e,s)=>{s={...s,...r};const n=await(t||__privateGet(this,I)||(()=>{}))(e,s);return s.show&&void 0!==n&&a.push(n),n},__privateGet(this,S),__privateGet(this,N),__privateGet(this,A)).parse().then(()=>a)}readData(e){const t=e.find(e=>/^[ ]*DATA[ +]/.test(e));if(t){const r=e.splice(e.indexOf(t),1);return this.parse(r)}return Promise.resolve(void 0)}}function invalidArgs(...e){if(e.includes(void 0))throw new Error("invalid arguments")}S=new WeakMap,I=new WeakMap,A=new WeakMap,N=new WeakMap;const Dt={};try{Dt.brackets=/([^\w$%]?)\(([^\\(\\)]+)\)/,Dt.brackets_start=/^\((.*)\)$/,Dt.multiply=new RegExp("[^\\d$\\-\\w]?(?<a>([+-]?[\\w.]+e\\+\\d+)|([+-]?[\\w$%.]+)|(^[+-]?[\\w$%.]+)|([\\w$%.]+)|([$]{3}\\d+))[ ]*(?<operator>[\\^*%\\/]|MOD|XOR|AND|OR|<<|>>|>>>)[ ]*(?<b>([-]?[\\w.]+e\\+\\d+)|([-]?[\\w$%.]+)|(^[+-]?[\\w$%.]+)|([\\w$%.]+)|([$]{3}\\d+))"),Dt.add_subtract=/([+-]?[\w.]+e\+\d+|[+-]?[\w$%.]+|[$]{3}\d+)[ ]*([+-])[ ]*([+-]?[\w.]+e\+\d+|[+-]?[\w$%.]+|[$]{3}\d+)/,Dt.function=/([\w]+[a-zA-Z0-9_.]+[$%]?)[ ]*\(([^\\(\\)]*)\)/,Dt.function_start=/^([\w]+[a-zA-Z0-9_.]+[$%]?)[ ]*\(([^\\(\\)]*)\)/,Dt.variable=/^([\w]+[a-zA-Z0-9_.]?[$%]?)/,Dt.number=/^([+-]?[\d.]+e\+\d+|[+-]?[\d.])+($|$)/}catch(er){console.error(er)}class MathParser{constructor(e,t){__publicField(this,"debug",!1),__publicField(this,"memory"),this.memory=this.createMemory(e),this.debug=void 0!==t?t:this.debug}createMemory(e){const t=e||new Memory;return t.addSub("RND",()=>Promise.resolve(Math.random())),t.addSub("PI",()=>Promise.resolve(Math.PI)),t.addSub("POW",(e,t)=>{if(invalidArgs(e,t),"string"==typeof e)throw new Error("Parameter is not a number");if("string"==typeof t)throw new Error("Parameter is not B number");return Promise.resolve(e**(t||2))}),t.addSub("SQRT",e=>{if(invalidArgs(e),"string"==typeof e)throw new Error("Parameter is not a number");return Promise.resolve(Math.sqrt(e))}),t.addSub("INT",async e=>(invalidArgs(e),await parseInt(V(String(e))))),t.addSub("SPC",e=>{if(invalidArgs(e),"string"==typeof e)throw new Error("Parameter is not a number");return Promise.resolve(`"${xe(e," ")}"`)}),t.addSub("LEN",e=>(invalidArgs(e),Promise.resolve(V(String(e)).length))),t.addSub("ASC",e=>(invalidArgs(e),Promise.resolve(String(V(e)).charCodeAt(0)))),t.addSub("CHR$",e=>{if(invalidArgs(e),"string"==typeof e)throw new Error("Parameter is not a number");return Promise.resolve(Y(String.fromCharCode(e)))}),t.addSub("LEFT$",(e,t)=>{if(invalidArgs(e,t),"string"==typeof t)throw new Error("Parameter is not B number");return Promise.resolve(`"${Oe(V(e),t)}"`)}),t.addSub("RIGHT$",(e,t)=>{if(invalidArgs(e,t),"string"==typeof t)throw new Error("Parameter is not B number");return Promise.resolve(Y(_e(String(V(e)),t)))}),t.addSub("STRING$",(e,t)=>{if(invalidArgs(e,t),"string"==typeof e)throw new Error("Parameter is not a number");return Promise.resolve(Y(xe(e,String(V(t)))))}),t.addSub("TIME%",()=>Promise.resolve(Date.now())),t.addSub("HEX_ENC$",e=>(invalidArgs(e),Promise.resolve(Y(Number(V(e)).toString(16))))),t.addSub("HEX_DEC$",e=>(invalidArgs(e),e=parseInt(String(V(e)),16),Promise.resolve(e))),t}async parse(e){const t=new Parsing(this),r=await t.parse(e);return this.debug&&console.debug("Result:",typeof r,r),r}validInput(e){return e&&/[/*\-+^()]?/.test(e)}}class Parsing{constructor(e,{debug:t}={}){__publicField(this,"debug",!1),__publicField(this,"parser"),__publicField(this,"parsedValues",[]),__publicField(this,"timeout",0),this.parser=e,this.debug=void 0!==t?t:this.debug}async parse(e){if(this.debug&&console.debug("PARSE ".padEnd(20,"-")),this.timeout>5e3)throw new Error(`Can't parse ${e}`);this.timeout++;const{result:t,values:r}=Wt.extractStrings(String(e));let a=parse(t).rawArgs;this.parsedValues=this.parsedValues.concat(r),a=a.map(e=>/^MOD|XOR|AND|OR$/.test(e)?` ${e} `:e);let s=a.join("");U(s)?s=Number(s):X(s)&&(s=Boolean(s));const n=s,i=await this.action(s);if(this.debug&&console.debug("action:",typeof i,i),void 0!==i){let e;return"string"!=typeof i||i===n||/^".*"$/.test(String(i))?(e=await this.resolveValue(i),this.debug&&console.debug("$v:",typeof e,e),e):(e=await this.parse(i),this.debug&&console.debug("parse:",typeof e,e),e)}}async action(e){var t,r,a,s,n,i;if("string"==typeof e){if(null==(t=Dt.brackets_start)?void 0:t.test(e)){const t=e.match(Dt.brackets_start);if(!t)throw new Error("Invalid expression");{const[r,a]=t;e=e.replace(r,a)}}if(null==(r=Dt.function)?void 0:r.test(e)){const t=e.match(Dt.function);if(t){const[r,s,n,i]=t,o=s||i;let l=parse(n||"",{separator:","}).rawArgs;const c=n.includes(",")&&l.join("")!==n;c&&(l=n.split(","));let m=await Promise.all(l.map(e=>this.parse(e)));if(m=c?m:[await this.parse(m.join(""))],this.parser.memory.has(o))return e.replace(r,null==(a=this.parser.memory.get(o))?void 0:a[Number(m[0])-1]);if(this.parser.memory.hasSub(o))return e.replace(r,this.cacheValue(await this.parser.memory.executeSub(o,m)))}}if(null==(s=Dt.brackets)?void 0:s.test(e)){const t=e.match(Dt.brackets);if(t){const[r,a,s]=t;return e.replace(r,a+await this.parse(s))}throw new Error("Invalid expression")}if(null==(n=Dt.multiply)?void 0:n.test(e))return this.operation(e,Dt.multiply);if(null==(i=Dt.add_subtract)?void 0:i.test(e))return this.operation(e,Dt.add_subtract)}return this.resolveValue(e)}async operation(e,t){const r=e.match(t);if(r){let t,a,s;const n=r[0];"groups"in r&&r.groups?(t=r.groups.a,a=r.groups.b,s=r.groups.operator):(t=r[1],s=r[2],a=r[3]);let i=e,o=await this.parse(t);U(o)||(o=V(o));let l=await this.parse(a);switch(U(l)||(l=V(l)),this.debug&&console.debug({valueA:o,valueB:l}),s){case"+":i=o+l;break;case"-":i=o-l;break;case"*":i=o*l;break;case"/":i=o/l;break;case">":i=o>l;break;case"<":i=o<l;break;case"^":case"XOR":i=o^l;break;case"%":case"MOD":i=o%l;break;case"AND":i=o&l;break;case"OR":i=o|l;break;case"<<":i=o<<l;break;case">>":i=o>>l;break;case">>>":i=o>>>l}return U(i)||(i=`"${i}"`),e.replace(n,n.replace(RegExp(`[${t}]{${String(t).length}}[ ]*[${s}]{${String(s).length}}[ ]*[${a}]{${String(a).length}}`),"")+this.cacheValue(i))}throw new Error("Invalid expression")}async resolveValue(e){var t,r,a;if("function"!=typeof e&&Wt.valueUnresolved(e)){return Wt.resolveValue(e,this.parsedValues)}if("string"==typeof e)if(e=e.replace(/^[ ]*([^ ].*[^ ])[ ]*$/,"$1"),null==(t=Dt.number)?void 0:t.test(e)){if(U(e))return Number(e)}else{if(null==(r=Dt.function_start)?void 0:r.test(String(e))){const t=e.match(Dt.function_start);if(t){const[,e,r]=t;if(this.parser.memory.hasSub(e))return this.parser.memory.executeSub(e,Wt.resolveValues(Wt.extractValues(r,",")));throw new Error(`can't find sub "${e}" in memory`)}throw new Error("Invalid expression")}if(null==(a=Dt.variable)?void 0:a.test(String(e))){const t=e.replace(Dt.variable,"$1");if(this.parser.memory.hasSub(t))return this.parser.memory.executeSub(t);if(this.parser.memory.has(t))return this.parser.memory.get(t)}}return e}cacheValue(e){return this.parsedValues.push(e),Wt.resolveKey(this.parsedValues.length-1)}}const Rt={Fibonacci:["CLS","READ max","DIM fib%(max)","LET fib(1) = 1","LET fib(2) = 2","FOR i=3 TO max","LET fib(i) = fib(i - 2) + fib(i -1)","NEXT i","FOR i=1 TO max","PRINT fib(i)","NEXT i","DATA 10","END"],Area:["CLS","DIM w%,h%,a%","LET w%=12","LET h%=4","LET a%=w%*h%",'PRINT "With the width " + w%','PRINT " and the height " + h%','PRINT " you have the area " + a%'],Circle:["CLS","DIM r,a","LET r=5","READ pi","LET a=r*r*pi",'PRINT USING "With the radius ##.##"; r','PRINT USING "we have the area ##.##"; a',"DATA 3.14","END"],"Your Name":["CLS",'PRINT "What is your name?"',"INPUT n$",'PRINT "What is your shoe size?"',"INPUT size",'PRINT "Hello "; n$','PRINT USING "your shoe size is ##.##"; size',"END"],GuessTheNumber:["GuessTheNumber","CLS","READ max%","DIM number%, guess%, guesses%",'PRINT "The number is between 1-1000."',"LET number% = INT(RND * max%) + 1","LET guess% = 1","LET guesses% = 0","WHILE guess%<>number%",'PRINT "Guess the number"',"INPUT guess%","IF (guess%<>number%) THEN","IF (guess%>number%) THEN",'PRINT "Your guess was too high"',"ELSE",'PRINT "Your guess was too low"',"ENDIF","ENDIF","LET guesses% = guesses% + 1","WEND",'PRINT USING "You found the number in # tries"; guesses%',"DATA 1000","END"],Factorial:["DIM result",'PRINT "Calculate the factorial of"',"INPUT n","LET result = 1","FOR i = n TO 1 STEP -1","LET result = result * i","NEXT i",'PRINT USING "#! = #"; n, result',"END"],Pyramid:["CLS","DIM stars$",'PRINT "Enter the height of the pyramid"',"INPUT height",'LET stars$ = ""',"FOR i = 1 TO height",'LET stars$ = ""',"FOR j = 1 TO (i+i-1)",'LET stars$ = stars$ + "*"',"NEXT j","PRINT SPC(height - i) + stars","NEXT i","END"],"Bubble Sort":["CLS","READ max","DIM SHARED numbers(max)","SUB CreateList(max) STATIC","FOR i=1 TO max","LET numbers(i) = INT(RND * 100)","NEXT i","END SUB","SUB PrintList(max) STATIC","FOR i=1 TO max","PRINT numbers(i)","NEXT i","END SUB","SUB SwapValues(i%, j%) STATIC","LET numbers(i%) = numbers(i%) XOR numbers(j%)","LET numbers(j%) = numbers(i%) XOR numbers(j%)","LET numbers(i%) = numbers(i%) XOR numbers(j%)","END SUB","SUB Sort(max) STATIC","FOR i%=1 TO (max - 1)","FOR j%=i% TO max","IF numbers(i%)>numbers(j%) THEN","CALL SwapValues(i%, j%)","END IF","NEXT j%","NEXT i%","END SUB","CreateList(max)","Sort(max)","PrintList(max)","DATA 10","END"],Goto:['PRINT "Step 1"','PRINT "Step 2"','PRINT "Step 3"',"GOTO ignore",'PRINT "Step 4"',"ignore:",'PRINT "Step 5"'],Vars:["DIM A, B","LET A = 2000",'LET B = "Hello World"','PRINT USING "A: #"; A','PRINT USING "B: #"; B'],If:["DIM A, B","LET A = 1","LET B = 2","IF A == B THEN",'PRINT "true"',"ELSE",'PRINT "false"',"END","IF (A < B) THEN",'PRINT "true"',"END"],For:["DIM i%","FOR i% = 1 TO 5",'PRINT USING "For Number #"; i%',"NEXT i%"],"For Step":["CLS","FOR i% = 0 TO 6 STEP 2",'PRINT "For Step Number #"; i%',"NEXT i%"],While:["DIM i%","LET i%=0","WHILE i% < 5",'PRINT USING "While Number #"; i%',"LET i% = i% + 1","WEND"],Pause:["DIM duration","LET duration = 2500",'PRINT USING "Start with Pause #ms"; duration',"PAUSE duration",'PRINT "End Pause"','PRINT USING "Start with Sleep #ms"; duration',"PAUSE duration",'PRINT "End Sleep"']},Lt=R(({module:e,core:t})=>[{name:["basic"],args:[new L({index:0,name:"path",description:"Path to basic script"})],async action({path:r},a){var s;if(!r)throw B.get("bad_args");const n=await(null==(s=t.modules.files)?void 0:s.fileSystem.get(r));if("object"!=typeof(null==n?void 0:n.data))throw new Error(`Can't read file ${r}`);{const t=n.data;if("basic"===t.type&&Array.isArray(t.content))return e.parseBasic(t.content,void 0,{logger:a.logger})}}},{name:["basicExamples"],args:[new L({index:0,name:"name",description:"Name from example"})],action:({name:t})=>e.parseBasic(Rt[String(t)])}]);class Parser extends ne{constructor({core:e}){super({name:"Parser",commands:e=>[...Lt(e)],core:e}),__publicField(this,"basicInterpreter"),__publicField(this,"memory",ue(new Memory)),__publicField(this,"mathParser",ue(new MathParser(this.memory))),__publicField(this,"commandParser",ue(new Wt)),this.basicInterpreter=ue(new BasicInterpreter(this.memory,e.executeCommand.bind(e)))}parse(e,t,r){return this.basicInterpreter.parse(e,t,r)}parseBasic(e,t,r={}){let a=e;return Array.isArray(e)||(a=e.split("\n")),this.basicInterpreter.parse(a,t,r)}async parseCommand(e){return this.commandParser.parse(e)}parseMath(e){return this.mathParser.parse(e)}isMathValue(e){return this.mathParser.validInput(e)}}const xt=Te(({core:e})=>{const t=e.modules.symbols,r=e.modules.windows,a=le({open:{disabled:!1},edit:{disabled:!1},duplicate:{disabled:!1},container:{disabled:!1},emptyTrashcan:{disabled:!1},discard:{disabled:!1},info:{disabled:!1},itemLink:{disabled:!1},itemLinkNew:{disabled:!1},itemLinkEdit:{disabled:!1},webLink:{disabled:!1},webLinkNew:{disabled:!1},webLinkEdit:{disabled:!1}});function setMenuItems(){const e=t.getSelectedItems()||[],r=t.getPrimaryWrapper();a.info.disabled=e.length<1,a.open.disabled=e.length<1,a.edit.disabled=e.length<1||!!e.find(e=>(null==e?void 0:e.locked)||e instanceof H),a.duplicate.disabled=e.length<1||!!e.find(({fsItem:e})=>(null==e?void 0:e.locked)||e instanceof H||e instanceof z),a.container.disabled=!a.open.disabled||!(r instanceof Fe&&r.fsItem&&(r.fsItem instanceof K||!r.fsItem.locked))||!r,a.itemLinkEdit.disabled=e.length<1||!!e.find(e=>{var t;return!(null==(t=null==e?void 0:e.fsItem)?void 0:t.meta.get($e.REFERENCE))}),a.itemLinkNew.disabled=a.container.disabled,a.itemLink.disabled=a.itemLinkNew.disabled&&a.itemLinkEdit.disabled,a.webLinkEdit.disabled=e.length<1||!!e.find(e=>{var t;return!(null==(t=null==e?void 0:e.fsItem)?void 0:t.meta.get($e.WEB_URL))}),a.webLinkNew.disabled=a.container.disabled,a.webLink.disabled=a.webLinkNew.disabled&&a.webLinkEdit.disabled,a.emptyTrashcan.disabled=e.length<1||!!e.find(e=>!((null==e?void 0:e.fsItem)instanceof H)),a.discard.disabled=e.length<1||!!e.find(({fsItem:e})=>(null==e?void 0:e.locked)||e instanceof H||e instanceof z)}return t.events.subscribe(()=>setMenuItems()),setMenuItems(),[new Pe({order:1,title:"File",items:[new Pe({title:"Open",options:a.open,action:function openAction(){(t.getSelectedItems()||[]).filter(e=>e.fsItem).forEach(t=>{if(t.command){const r={showCommand:!1,show:!0},a=Be(t.command);if(!a)throw new Error(`No command found for item ${t.id}`);return e.executeCommand(a,r)}})}}),new Pe({title:"Edit",options:a.edit,action:async function editAction(){return ke(e)}}),new Ke,new Pe({title:"Link",options:a.itemLink,items:[new Pe({title:"New",options:a.itemLinkNew,action:async function itemLinkNewAction(){const t=await ce(()=>import("./DSOqBbj_.js"),__vite__mapDeps([32,6,1,7,14,15,16,17,33,8,9,34,35,12,13,4,18,19,20,21,36]),import.meta.url).then(e=>e.default);return r.addWindow({component:t,componentData:{model:{actions:{save:saveItemLink,selectItem:()=>e.executeCommand(`openFileDialog --type=${Ze.BOTH}`)},name:null,url:null,symbol:"default"}},options:{title:"Make Link",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}}).awaitClose()}}),new Pe({title:"Edit",options:a.itemLinkEdit,action:async function itemLinkEditAction(){const a=t.getSelectedItems();await Promise.all(a.filter(e=>e.fsItem).map(async t=>{const a=t.fsItem;if(!a)throw new Error(`Item has no fsItem. ${t.id}`);{const t=await ce(()=>import("./DSOqBbj_.js"),__vite__mapDeps([32,6,1,7,14,15,16,17,33,8,9,34,35,12,13,4,18,19,20,21,36]),import.meta.url).then(e=>e.default);r.addWindow({component:t,componentData:{fsItem:ue(a),model:{actions:{save:saveItemLink,selectItem:()=>e.executeCommand(`openFileDialog --type=${Ze.BOTH}`)},name:a.name,path:a.meta.get($e.REFERENCE),symbol:a.meta.get($e.SYMBOL)}},options:{title:"Edit Link",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}})}}))}})]}),new Pe({title:"Web Link",options:a.webLink,items:[new Pe({title:"New",options:a.webLinkNew,action:async function webLinkNewAction(){const e=await ce(()=>import("./BX3N_rxg.js"),__vite__mapDeps([37,6,1,7,14,15,16,17,33,8,9,34,35,12,13,4,18,19,20,21,38]),import.meta.url).then(e=>e.default);return r.addWindow({component:e,componentData:{model:{actions:{save:saveWebLink},name:null,url:null,symbol:"default"}},options:{title:"Make Web Link",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}}).awaitClose()}}),new Pe({title:"Edit",options:a.webLinkEdit,action:async function webLinkEditAction(){const e=t.getSelectedItems();await Promise.all(e.filter(e=>e.fsItem).map(async e=>{const t=e.fsItem;if(!t)throw new Error(`Item has no fsItem. ${e.id}`);{const e=await ce(()=>import("./BX3N_rxg.js"),__vite__mapDeps([37,6,1,7,14,15,16,17,33,8,9,34,35,12,13,4,18,19,20,21,38]),import.meta.url).then(e=>e.default);r.addWindow({component:e,componentData:{fsItem:ue(t),model:{actions:{save:saveWebLink},name:t.name,url:t.meta.get($e.WEB_URL),symbol:t.meta.get($e.SYMBOL)}},options:{title:"Edit Web Link",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}})}}))}})]}),new Ke,new Pe({title:"Duplicate",options:a.duplicate,action(){const r=t.getSelectedItems()||[];return Promise.all(r.filter(e=>e.fsItem).map(async({fsItem:t})=>{const r=await(null==t?void 0:t.getPath());return e.executeCommand(`copy "${r}" "${r}" -ignore`)}))}}),new Pe({title:"Make Dir",options:a.container,async action(){var r;const a=null==(r=t.getPrimaryWrapper())?void 0:r.fsItem;if(a){const t=G(await a.getPath(),"Directory");return console.log(`makedir "${t}" -ignore`),e.executeCommand(`makedir "${t}" -ignore`)}throw new Error("No item found")}}),new Ke,new Pe({title:"Discard",options:a.discard,action(){const r=t.getSelectedItems()||[];return Promise.all(r.filter(e=>e.fsItem).map(async({fsItem:t})=>{const r=await(null==t?void 0:t.getPath());return e.executeCommand(`remove "${r}" -r`)}))}}),new Pe({title:"Empty Trashcan",options:a.emptyTrashcan,action(){const r=t.getSelectedItems()||[];return Promise.all(r.filter(e=>e.fsItem).map(async({fsItem:t})=>{const r=await(null==t?void 0:t.getItems())||[];return Promise.all(Array.from(r.values()).map(async t=>{const r=await t.getPath();return e.executeCommand(`remove "${r}" -r -ignore`)}))}))}}),new Ke,new Pe({title:"Info",options:a.info,async action(){const e=t.getSelectedItems()||[];await Promise.all(e.filter(e=>e.fsItem).map(async e=>{if(!e.fsItem)throw new Error(`Item has no fsItem. ${e.id}`);{const t=await ce(()=>import("./_aqQKK70.js"),__vite__mapDeps([39,40,18,19,1,20,21,41]),import.meta.url).then(e=>e.default);r.addWindow({component:t,componentData:{fsItem:ue(e.fsItem)},layout:{size:Ve(460,280)},options:{title:`Info File ${e.fsItem.name}`,scaleX:!0,scaleY:!0,prompt:!1,scrollX:!0,scrollY:!0}})}}))}})]})];async function saveItemLink({name:t,path:r,symbol:a},s){if(s||(s=await e.executeCommand(`saveFileDialog --id="${Z(t)}"`)),s){const n=e.addExecution();try{const n=s.getPath();await e.executeCommand(`rename "${n}" "${t}" -n`),await e.executeCommand(`editfilemeta "${n}" "${$e.REFERENCE}" "${r}"`),await e.executeCommand(`editfilemeta "${n}" "${$e.SYMBOL}" "${a}"`)}catch(er){throw n(),er}return n(),!0}return!1}async function saveWebLink({name:t,url:r,symbol:a},s){if(s||(s=await e.executeCommand(`saveFileDialog --id="${Z(t)}"`)),s){const n=e.addExecution();try{const n=s.getPath();await e.executeCommand(`rename "${n}" "${t}" -n`),await e.executeCommand(`editfilemeta "${n}" "${$e.WEB_URL}" "${r}"`),await e.executeCommand(`editfilemeta "${n}" "${$e.SYMBOL}" "${a}"`)}catch(er){throw n(),er}return n(),!0}return!1}}),Ot=new Map;class FirebaseWrapper extends q{constructor(){super(...arguments),__publicField(this,"modules"),__publicField(this,"services"),__publicField(this,"app")}get name(){var e;return null==(e=this.app)?void 0:e.name}async connect(e,{apiKey:t,url:r}){if(this.modules=await D.get(),this.app)Ot.has(e)&&(this.app=Ot.get(e));else{const a=this.modules.app.initializeApp({apiKey:t,databaseURL:r},e);Ot.set(a.name,a),this.app=a}return this.app}async disconnect(){var e;if(!this.app)throw B.get("FirebaseWrapper_noApp");checkConnection(this),await this.logout(),await(null==(e=this.modules)?void 0:e.app.deleteApp(this.app)),this.app=void 0}get locked(){return!!this.app&&!this.isLogged()}get currentUser(){var e;if(null==(e=this.modules)?void 0:e.auth){const{getAuth:e}=this.modules.auth;return e(this.app).currentUser}}isLogged(){return!!this.app&&!!this.currentUser}login(e,t){var r;if(null==(r=this.modules)?void 0:r.auth){const{getAuth:r,signInWithEmailAndPassword:a}=this.modules.auth,s=r(this.app);return checkConnection(this),a(s,e,t)}}logout(){var e;if(this.app&&(null==(e=this.modules)?void 0:e.auth)){const{getAuth:e,signOut:t}=this.modules.auth;return t(e(this.app))}throw B.get("FirebaseWrapper_notConnected")}remove(e){var t;if(checkConnection(this),null==(t=this.modules)?void 0:t.database){const{remove:t,ref:r,getDatabase:a}=this.modules.database;return t(r(a(this.app),e))}}get(e){var t;if(checkConnection(this),null==(t=this.modules)?void 0:t.database){const{ref:t,onValue:r,getDatabase:a}=this.modules.database,s=t(a(this.app),e);let n;return new Promise(e=>{n=r(s,t=>e(t.val()))}).then(e=>(n&&n(),e))}}async set(e,t){var r;if(checkConnection(this),null==(r=this.modules)?void 0:r.database){const{ref:r,set:a,getDatabase:s}=this.modules.database,n=r(s(this.app),e);return await a(n,t),t}}}function checkConnection(e){if(!e.app)throw B.get("FirebaseWrapper_notConnected")}B.add([["FirebaseWrapper_notConnected",["Not connected","Not connected"]],["FirebaseWrapper_noApp",["No app available","No app available"]],["FirebaseWrapper_hasApp",["App already available",'App "%1" already available']]]);class FirebaseStorage extends Q{constructor(e){super({...e,storage:new FirebaseWrapper})}async mount(e){if(e.onDisconnect=()=>{this.unmount()},this.storage)return await this.storage.connect(e.id,{apiKey:e.apiKey,url:e.url}),this;throw new Error("no storage")}async unmount(){if(this.storage)return await this.storage.disconnect(),this;throw new Error("no storage")}async load(){if(this.storage){let e=await this.storage.get(this.name);return e||(e={},this.storage.locked||await this.storage.set(this.name,e)),this.data=e,e}throw new Error("no storage")}async save(e){if(this.storage)return e=cleanObject(e),this.data=e||this.data,await this.storage.set(this.name,e),this.data;throw new Error("no storage")}get locked(){var e;return(null==(e=this.storage)?void 0:e.locked)||!1}}function cleanObject(e){return Object.fromEntries(Object.entries(e).filter(([,e])=>e||"number"==typeof e||"boolean"==typeof e).map(([e,t])=>(t&&"object"==typeof t&&(t=cleanObject(t)),[e,t])))}const _t=new Map,kt=R(({module:e,core:t})=>{const{fileSystem:r}=e;return[{name:"cloudList",args:[new L({name:"json",flag:!0,description:"Get JSON Export"})],action({json:e},t){const r=Array.from(_t.values());if(e)return Promise.resolve(r);{const e=new x;return e.addColumns([{value:"Storage (Id)",align:"left",minWidth:15},{value:"Name",align:"left",minWidth:15},{value:"Logged In",align:"center",minWidth:9}]),e.addRows(r.reduce((e,t)=>(e.push([t.id,t.name,t.storage.storage.isLogged()?"yes":"no"]),e),[])),t.message([e]),Promise.resolve()}}},{name:"cloudMountFirebase",args:[new L({index:0,name:"id",flag:!0,description:"Id from Storage."}),new L({index:1,name:"apiKey",description:"Firebase Api-Key."}),new L({index:2,name:"url",description:"Firebase Database-Url."})],async action({id:e,apiKey:a,url:s},n){if(!a||!s)throw B.get("bad_args");const i=t.addExecution(),o=await r.connect(FirebaseStorage,{id:e,apiKey:a,url:s});return _t.set(o.id,o),n.message(`Mount <strong>${o.name}</strong> <strong>(${o.id})</strong> successful!`),i(),o}},{name:"cloudUnmount",args:[new L({index:0,name:"id",flag:!0,description:"Id from Storage."})],async action({id:e},a){if(!e)throw B.get("bad_args");const s=t.addExecution();try{const t=_t.get(e);await r.disconnect(t),_t.delete(t.id),a.message(`Unmount "${t.name}" successful!`),s()}catch(er){throw s(),er}}},{name:"cloudAuth",args:[new L({name:"login",flag:!0,description:"Storage Login"}),new L({name:"logout",flag:!0,description:"Logout from Storage."}),new L({name:"email",description:"Email for Login."}),new L({name:"password",description:"Password for Login."}),new L({name:"storage",description:"Specifies which drive is logged on."})],async action({email:e,password:r,storage:a,login:s,logout:n},i){const o=a;if(!o)throw B.get("bad_args");const l=t.addExecution(),c=_t.get(o);let m;if(!c)throw new Error(`${o} is not mounted.`);try{if(s){if(!e||!r)throw B.get("bad_args");m=await c.storage.storage.login(e,r),i.message(`Login with ${c.id} (${c.id}) successful!`)}else n&&(m=await c.storage.storage.logout(),i.message(`Logout from ${c.id} (${c.id}) successful!`))}catch(er){if(l(),er instanceof Error&&"code"in er){switch(er.code){case"auth/user-not-found":case"auth/wrong-password":return er}throw er}}return l(),m}}]}),Mt=ue(new J("web_workbench_FS"));class Files extends ne{constructor({core:e}){super({name:"Files",commands:({module:e,core:t})=>[...Me({module:e,core:t}),...je({module:e}),...kt({module:e,core:t})],contextMenu:xt,core:e}),__publicField(this,"fileSystem",Mt),__publicField(this,"fs",Mt),__publicField(this,"disks",{})}addDisks(e){[...e].sort((e,t)=>e.order>t.order?1:e.order<t.order?-1:0).forEach(e=>{this.disks[e.name]=e})}}__publicField(Files,"NAME","Files");class ContextMenu{constructor(e){__publicField(this,"defaultItems",new qe),__publicField(this,"activeItems"),__publicField(this,"core"),this.core=e,this.activeItems=this.defaultItems}addDefaultItems(e){this.defaultItems.add(e)}getActiveItems(){return this.activeItems}setActiveItems(e){return this.activeItems=e||this.defaultItems}}const jt=Te(({core:e})=>{const{windows:t}=e.modules;return[new Pe({order:0,title:"Web-Workbench",items:[new Pe({title:"Settings",action:()=>e.executeCommand("openSettings")}),new Ke,new Pe({hotKey:{alt:!0,code:"KeyI",title:"I"},title:"Info",async action(){const e=await ce(()=>import("./Bbhi1Q0P.js"),__vite__mapDeps([42,43,19,1,20,21,44,18,45]),import.meta.url).then(e=>e.default);null==t||t.addWindow({component:e,componentData:{},options:{title:"Info",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}})}}),new Ke,new Pe({title:"Imprint",action:()=>e.executeCommand('execute "Imprint.md"')}),new Pe({title:"Disclaimer",action:()=>e.executeCommand('execute "Disclaimer.md"')})]})]}),Vt={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10",viewBox:"0.5 50.5 6 10"};const Bt={render:function render$1(e,t){return pe(),de("svg",Vt,t[0]||(t[0]=[he("path",{fill:"#020203",d:"M.5 50.5h6v2h-4v2h2v2h-2v4h-2z"},null,-1)]))}},Ft={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"};const Ut={render:function render(e,t){return pe(),de("svg",Ft,t[0]||(t[0]=[he("path",{d:"M0 10h6V8H2V6h2V4H2V2h4V0H0z"},null,-1)]))}},Xt={class:"icon full"},Yt={class:"icon empty"},Gt=Ee(ge({__name:"StorageBar",props:{visible:{type:Boolean,default:!0},value:{type:Number,default:.8}},setup(e){const t=e,r=fe(()=>({"--bar-height":Math.min(t.value,1)}));return(t,a)=>e.visible?(pe(),de("div",{key:0,class:"wb-env-element-storage-bar",style:ye(r.value)},[he("div",null,[he("div",Xt,[ve(be(Bt))]),a[0]||(a[0]=he("span",{class:"size"},[he("span",{class:"helper"})],-1)),he("div",Yt,[ve(be(Ut))])])],4)):we("",!0)}}),[["__scopeId","data-v-963a1798"]]),Ht={class:"wb-env-fragment-dialog-content"},zt=["innerHTML"],Kt={key:1,class:"input"},Zt=Ee(ge({__name:"DialogContent",props:{message:{type:String,default:()=>"Dialog Message"},confirm:{type:Boolean,default:!1},prompt:{type:Boolean,default:!1},promptType:{type:String,default:"text"},promptStep:{type:Number,default:void 0},promptValue:{type:String,default:""},password:{type:Boolean,default:!1},apply:{type:Function,default:()=>null},abort:{type:Function,default:()=>null},applyLabel:{type:String,default:()=>"Continue"},abortLabel:{type:String,default:()=>"Cancel"},yesLabel:{type:String,default:()=>"Yes"},noLabel:{type:String,default:()=>"No"}},emits:["apply","abort"],setup(e,{emit:t}){const r=e,a=t,s=Se(r.promptValue),n=fe(()=>r.password?"password":r.promptType),i=fe(()=>r.message.replace(/\\n|\n/g,"<br>")),onClickApply=()=>{const e=s.value||!0;"function"==typeof r.apply?r.apply(e):a("apply",e)},onClickAbort=()=>{"function"==typeof r.abort?r.abort():a("abort")};return(t,r)=>(pe(),de("div",Ht,[he("div",null,[e.message?(pe(),de("p",{key:0,innerHTML:i.value},null,8,zt)):we("",!0),e.prompt?(pe(),de("div",Kt,[ve(et,{ref:"dialogInput",modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=e=>s.value=e),step:e.promptStep,type:n.value,label:null},null,8,["modelValue","step","type"])])):we("",!0),ve(tt,{align:e.abortLabel?"outer":"center",class:"buttons"},{default:Ie(()=>[e.applyLabel||e.confirm&&e.yesLabel?(pe(),Ae(Je,{key:0,"style-type":"dialog",label:e.confirm?e.yesLabel:e.applyLabel,onClick:onClickApply},null,8,["label"])):we("",!0),e.abortLabel||e.confirm&&e.noLabel?(pe(),Ae(Je,{key:1,"style-type":"dialog",label:e.confirm?e.noLabel:e.abortLabel,onClick:onClickAbort},null,8,["label"])):we("",!0)]),_:1},8,["align"])])]))}}),[["__scopeId","data-v-0fa943a5"]]),qt=R(({module:e,core:t})=>{var r;const a=null==(r=t.modules.files)?void 0:r.fs,s=t.modules.symbols,n=t.modules.windows;return[{name:["openDirectory","openDir"],description:"Opens the specified directory.",args:[new L({index:0,name:"path",description:"Path to the directory."}),new L({name:"sortSymbols",description:"Sort Symbols",flag:!0}),new L({name:"windowSize",description:"Window Size"}),new L({name:"windowPosition",description:"Window Position"}),new L({name:"windowScale",description:"Window Scale"}),new L({name:"windowScrollX",description:"Window Scroll-X"}),new L({name:"windowScrollY",description:"Window Scroll-Y"}),new L({name:"windowSidebar",description:"Window Sidebar"}),new L({name:"windowFullSize",description:"Window Full-Size"})],async action(e){const{path:t,sortSymbols:r,windowSize:i,windowPosition:o,windowScale:l,windowScrollX:c,windowScrollY:m,windowSidebar:u,windowFullSize:d}=e;if(!t)throw B.get("bad_args");const p=await(null==a?void 0:a.get(t));if(!p)throw B.get("FileSystemItem_itemNotFound",t);if(!(p instanceof ee))throw B.get("FileSystemItem_itemNotContainer",t);const h=await(null==s?void 0:s.addFileSystemWrapper(p)),g=null==s?void 0:s.getWrapper(String(h)),f=le({value:p.size/p.maxSize}),getPointFromString=e=>{const[t,r]=e.split(",");return Ve(Number(t),Number(r))},w=null==n?void 0:n.addWindow({layout:{size:getPointFromString(i||"400,200"),position:getPointFromString(o||"0,0")},sidebarComponent:Gt,sidebarComponentData:f,component:ie,componentData:{wrapperId:h,parentScrollable:c||m},options:{title:p.name,sidebar:void 0===u||u,scale:void 0===l||l,scrollX:void 0===c||c,scrollY:void 0===m||m,center:!o}},{active:!0,full:d}),refreshStorageValue=()=>{f.value=p.size/p.maxSize},v=[null==g?void 0:g.events.subscribe(refreshStorageValue)];return new Promise(e=>{null==w||w.events.subscribe(({name:t})=>{"ready"===t&&r?window.requestAnimationFrame(()=>{null==g||g.rearrangeIcons()}):"close"===t?(v.forEach(e=>null==e?void 0:e.unsubscribe()),h&&(null==s||s.removeWrapper(h)),e(!0)):refreshStorageValue()})})}},{name:["openDialog"],description:"Open a Dialog.",args:[new L({index:0,name:["message"],description:"Message from Dialog."}),new L({index:1,name:["title"],description:"Title from Dialog."}),new L({name:["apply"],description:"Title from apply button."}),new L({name:["abort"],description:"Title from abort button."}),new L({name:["confirm"],flag:!0,description:"Defines the confirm dialog"}),new L({name:["prompt"],flag:!0,description:"Defines the prompt dialog"}),new L({name:["promptType"],description:"Type from prompt dialog (e.g. text, number, email). (Default: text)"}),new L({name:["promptStep"],description:"Step from prompt dialog (e.g. 1, 0.1, 0.01). (Default: 1)"}),new L({name:["promptValue"],description:"Default value from prompt dialog."}),new L({name:["secret"],flag:!1,description:"Input is illegible."})],action:t=>{const{title:r,message:a=null,apply:s=null,abort:n=null,confirm:i=!1,prompt:o=!1,promptType:l="text",promptStep:c,promptValue:m=null,secret:u=!1}=t;let d;const abortCb=()=>{d(!1)},p=e.addWindow(new Ue({component:Zt,componentData:{title:r,message:a,secret:u,confirm:i,prompt:o,promptType:l,promptStep:Number(c),promptValue:m,applyLabel:s||"Continue",abortLabel:n,apply:e=>{d(e)},abort:abortCb},options:{scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1,close:!1}}));return p.awaitClose().then(()=>abortCb()),new Promise(e=>{d=e}).then(e=>(p.close(),e))}}]});class Windows extends ne{constructor(e){super({config:rt,commands:qt,...e,name:"Windows"}),__publicField(this,"wrappers",ue(new Map)),__publicField(this,"contentWrapper"),__publicField(this,"globalWrapper"),__publicField(this,"contextMenu"),this.contextMenu=le(new ContextMenu(this.core));const t=this.getWrapper(this.addWrapper(new Xe(this.core)));if(!t)throw new Error("Content wrapper not found");this.contentWrapper=t;const r=this.getWrapper(this.addWrapper(new Xe(this.core)));if(!r)throw new Error("Global wrapper not found");this.globalWrapper=r,combineLatest({contentWrapper:this.contentWrapper.events,globalWrapper:this.globalWrapper.events}).subscribe(e=>{console.log("event",e)})}addWindow(e,t){let r;return r=e instanceof Ue?e:new Ue(e),r=(t={global:!1,...t}).global?this.globalWrapper.add(r,t):this.contentWrapper.add(r,t),r.focus(),r}getWrapper(e){return this.wrappers.get(e)}getFocusedWrapper(){return Array.from(this.wrappers.values()).map(({models:e})=>e).flat().find(e=>e.options.focused)}addWrapper(e){return this.wrappers.set(e.id,le(e)),e.id}removeWrapper(e){"string"!=typeof e&&(e=e.id),this.wrappers.delete(e)}isContextMenu(e){return e.id===this.getActiveContextMenu().id}setup(){this.contextMenu.addDefaultItems(new qe(jt,{core:this.core})),this.contextMenu.addDefaultItems(new qe(Qe,{core:this.core}))}clear(){this.contentWrapper.clear(),this.globalWrapper.clear()}getActiveContextMenu(){return this.contextMenu.getActiveItems()}setActiveContextMenu(e){return this.contextMenu.setActiveItems(e)}}const Qt=Te(({module:e,core:t})=>[new Pe({order:30,title:"Symbol",items:[new Pe({type:We.CHECKBOX,title:"Show Invisible Symbols",model:t.config.observable,name:Ye.SHOW_INVISIBLE_SYMBOLS,action:({value:e})=>t.config.set(Ye.SHOW_INVISIBLE_SYMBOLS,e)}),new Pe({title:"Rearrange Symbols",hotKey:{alt:!0,code:ut.KEY_R,title:"R"},action(){const t=e.getDefaultWrapper(),r=e.getPrimaryWrapper();if(r instanceof Fe&&(null==r?void 0:r.id)!==(null==t?void 0:t.id)){if(null==r||r.rearrangeIcons(),null==r?void 0:r.fsItem)return te(null==r?void 0:r.fsItem);throw new Error("No fsItem found")}if(t instanceof Fe){if(null==t||t.rearrangeIcons({root:!0}),null==t?void 0:t.fsItem)return te(null==t?void 0:t.fsItem);throw new Error("No fsItem found")}}}),new Pe({title:"Order Type",items:[new Pe({model:t.config.observable,type:We.RADIO,name:Ye.ORDER_TYPE,value:Ge.NAME,title:"Name",action:()=>t.config.set(Ye.ORDER_TYPE,Ge.NAME)}),new Pe({model:t.config.observable,type:We.RADIO,name:Ye.ORDER_TYPE,value:Ge.TYPE,title:"Type",action:()=>t.config.set(Ye.ORDER_TYPE,Ge.TYPE)}),new Pe({model:t.config.observable,type:We.RADIO,name:Ye.ORDER_TYPE,value:Ge.CREATED_DATE,title:"Created Date",action:()=>t.config.set(Ye.ORDER_TYPE,Ge.CREATED_DATE)}),new Pe({model:t.config.observable,type:We.RADIO,name:Ye.ORDER_TYPE,value:Ge.EDITED_DATE,title:"Edited Date",action:()=>t.config.set(Ye.ORDER_TYPE,Ge.EDITED_DATE)})]}),new Pe({title:"Order Direction",items:[new Pe({model:t.config.observable,type:We.RADIO,name:Ye.ORDER_DIRECTION,value:He.ASCENDING,title:"Ascending",action:()=>t.config.set(Ye.ORDER_DIRECTION,He.ASCENDING)}),new Pe({model:t.config.observable,type:We.RADIO,name:Ye.ORDER_DIRECTION,value:He.DESCENDING,title:"Descending",action:()=>t.config.set(Ye.ORDER_DIRECTION,He.DESCENDING)})]})]})]),commands=({module:e})=>[{name:["rearrangeIcons"],description:"Rearrange Icons",args:[new L({name:"id",description:"Wraper id"}),new L({name:"root",description:"Use root wrapper",flag:!0}),new L({name:"force",description:"Force rearrangement",flag:!0})],async action({id:t,root:r,force:a}){const s=e.getDefaultWrapper(),n=e.getPrimaryWrapper();if(await new Promise(e=>window.requestAnimationFrame(e)),r){if(s.fsItem)return null==s||s.rearrangeIcons({root:!0,force:a}),te(s.fsItem);throw new Error("No fsItem found")}{let r=n;if(t&&(r=e.get(t),r instanceof Fe&&r.fsItem))return r.rearrangeIcons({force:a}),te(r.fsItem)}}}];class SymbolEvent extends re{}class Symbols extends ne{constructor(e){const{core:t}=Object.assign({core:null},e);super({name:"Symbols",config:{[Ye.SHOW_INVISIBLE_SYMBOLS]:!1,[Ye.ORDER_TYPE]:Ge.NAME,[Ye.ORDER_DIRECTION]:He.ASCENDING},commands:commands,contextMenu:Qt,core:t}),__publicField(this,"events",ue(new De)),__publicField(this,"symbols",ue(new Map)),__publicField(this,"wrappers",ue(new Map)),__publicField(this,"wrappersObservable",{}),__publicField(this,"hasSelectedItems",!1),__publicField(this,"_activeWrapper"),__publicField(this,"_defaultWrapper"),__publicField(this,"activeWrapper"),__publicField(this,"defaultWrapper"),__publicField(this,"primaryWrapper"),__publicField(this,"secondaryWrapper")}addWrapper(e){return e=ue(e),this.wrappers.set(e.id,e),this.wrappersObservable[e.id]=e,e.events.subscribe(this.onEventWrapper.bind(this)),e.id}onEventWrapper({name:e,value:t}){var r;!(null==t?void 0:t.wrapper)||"selectItem"!==e&&"unselectItem"!==e||(this.hasSelectedItems=(null==(r=null==t?void 0:t.wrapper.selectedItems.value)?void 0:r.length)>0,this.events.next(new SymbolEvent({name:"hasSelectedItems",value:this.hasSelectedItems})))}getWrapper(e){return"string"!=typeof e&&(e=e.id),this.wrappers.get(e)}removeWrapper(e){"string"!=typeof e&&(e=e.id),this.wrappers.delete(e),Reflect.deleteProperty(this.wrappersObservable,e)}getActiveWrapper(e=!1){var t,r,a;const s=null==(t=this.core.modules.windows)?void 0:t.contentWrapper.getActiveWindow();return s&&(null==(r=s.componentData)?void 0:r.symbolWrapper)?null==(a=s.componentData)?void 0:a.symbolWrapper:e?null:this.activeWrapper}getSelectedItems(){return Array.from(this.wrappers.values()).reduce((e,t)=>(t.selectedItems.value.forEach(r=>{const a=t.get(r);a&&e.push(a)}),e),[])}clearSelectedItems(){return Array.from(this.wrappers.values()).forEach(e=>{e.clearSelectedItems()})}async addFileSystemWrapper(e,t=!1){const r=new Fe(this.core,void 0,t);return await r.setup(e),this.addWrapper(r)}async setup(){var e;const t=null==(e=this.core.modules.files)?void 0:e.fs.root;t&&(this.addSymbols(await Ce()),this.setDefaultWrapper(await this.addFileSystemWrapper(t,!0)))}get(e){return this.wrappers.get(e)}setDefaultWrapper(e){this._defaultWrapper=e;const t=this.wrappers.get(e);t&&(this.primaryWrapper=t,this.secondaryWrapper=t,this.activeWrapper=t,this.defaultWrapper=t)}getDefaultWrapper(){return this.defaultWrapper}getPrimaryWrapper(){return this.primaryWrapper||this.defaultWrapper}getSecondaryWrapper(){return this.secondaryWrapper||this.defaultWrapper}setPrimaryWrapper(e){if(e){let t;t=e instanceof ze?e.id:e,this.primaryWrapper=this.wrappers.get(t)}else this.primaryWrapper=void 0;this.events.next(new re({name:"setPrimaryWrapper",value:this.getPrimaryWrapper()}))}setSecondaryWrapper(e){if(e){let t;t=e instanceof ze?e.id:e,this.secondaryWrapper=this.wrappers.get(t)}else this.primaryWrapper=void 0;this.events.next(new re({name:"setSecondaryWrapper",value:this.secondaryWrapper}))}setActiveWrapper(e){let t;t=e instanceof ze?e.id:e;let r=this.wrappers.get(this._activeWrapper||"");return t!==this._activeWrapper&&(this._activeWrapper=t,this.activeWrapper=this.wrappers.get(this._activeWrapper),r=this.activeWrapper||this.wrappers.get(this._defaultWrapper||""),this.events.next(new re({name:"setActiveWrapper",value:r}))),r}addSymbol(e){this.symbols.set(e.key,e)}addSymbols(e){e.forEach(e=>{this.addSymbol(e)})}removeSymbol(e){this.symbols.delete(e)}}__publicField(Symbols,"NAME","Symbols");const Jt=function getCore(){const e=new bt;return e.addModule(Parser),e.addModule(Files),e.addModule(Windows),e.addModule(oe),e.addModule(Symbols),e}();export{Jt as default};

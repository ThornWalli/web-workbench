import{u as T,M as o}from"./CwTyMeF_.js";import{c as y}from"./7vWQM-aF.js";import{A as C}from"./DG3wQKIc.js";import{getDefaultDocumentModel as I,PROPERTY as a,FONT_SIZES as D,CONFIG_NAMES as p,FONT_FAMILES as O,FONT_TYPES as w}from"./CE5TSDuP.js";import{_ as S,r as F,t as g,v as k,z as M,D as N,I as P}from"./CSrBrIb-.js";const h={class:"wb-disks-workbench13-document-editor-info"},x={__name:"Info",props:{model:{type:Object,default(){return{fsItem:null,value:I()}}}},setup(t){const n=t,{setContextMenu:r}=T();r(b,{model:n.model});const c=F(["# Document Editor",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`));return(u,m)=>(k(),g("div",h,[M(N(C),{content:c.value},null,8,["content"])]))}},A=S(x,[["__scopeId","data-v-5f175ccc"]]),b=({model:t,core:n})=>{const{windows:r}=n.modules;return[{order:0,title:"Document Editor",items:[{title:"New",hotKey:"N",keyCode:78,action:m},{title:"Open…",hotKey:"O",keyCode:79,action:u},{title:"Save",hotKey:"S",keyCode:83,action:E},{title:"Save As…",action:_},{type:o.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:v},{title:"Close",action:c}]},{order:1,title:"Document Settings",items:[{title:"Open maximized",type:o.CHECKBOX,name:a.OPEN_MAXIMIZED,model:t.value},{title:"Output Format",items:[{title:"Markdown",type:o.RADIO,name:a.OUTPUT_TYPE,value:"markdown",model:t.value},{title:"HTML",type:o.RADIO,name:a.OUTPUT_TYPE,value:"html",model:t.value}]},{title:"Font Family",items:Object.keys(O).map(e=>{const i=O[String(e)];return{title:w[String(e)],items:Object.keys(i).map(s=>{const l=i[String(s)];return{title:s,type:o.RADIO,name:a.FONT_FAMILY,value:l,model:t.value}})}})},{title:"Font Size",items:D.map(e=>({title:`${e}px`,type:o.RADIO,name:a.FONT_SIZE,value:e,model:t.value}))}]},{order:2,title:"Preview",type:o.CHECKBOX,name:p.DOCUMENT_EDITOR_SHOW_PREVIEW,model:n.config.observable,action(e){return n.config.set(p.DOCUMENT_EDITOR_SHOW_PREVIEW,e)}}];function c(){return t.actions.close()}async function u(){const e=await n.executeCommand("openFileDialog");if(e)if("content"in e.value)t.fsItem=e.fsItem,t.value=Object.assign(t.value,I(),e.value);else throw new Error("Can't read file content")}function m(){t.actions.reset()}function E(){return f()}function _(){return f(!0)}async function f(e=!1){const i=await y(JSON.stringify(t.value));let s;if(!e&&t.fsItem)return s=await n.executeCommand(`editfile "${t.fsItem.getPath()}" --data="${i}"`),s?n.executeCommand('openDialog "File saved."'):n.executeCommand('openDialog "File could not be saved."');{const l={html:"html",markdown:"md"}[String(t.value[a.OUTPUT_TYPE])],d=await n.executeCommand(`saveFileDialog --data="${i}" --extension="${l}"`);return d?(t.fsItem=P(d),t.fsItem):null}}function v(){r.addWindow({title:"Info",component:A,componentData:{model:t},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentEditor"})}};export{b as c};

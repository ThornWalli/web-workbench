import{i as f,S as U,o as X}from"./2o4skMhU.js";import{M as y,g as q}from"./CwTyMeF_.js";import{v as F}from"./CVUivzOC.js";import{d as V}from"./CI-V28mB.js";import{S as J,W as Y}from"./Z5oCkG7_.js";import{S as G}from"./BUQWKlAd.js";import{t as m,v as a,x as N,d as Q,r as c,j as s,o as Z,a0 as A,V as ee,C as b,A as D,F as u,L as T,J as te,z as C,D as h,y as B,B as oe,X as ne,_ as ie}from"./CSrBrIb-.js";import{A as ae}from"./7vWQM-aF.js";import"./C6aID195.js";import"./DzFcxpbm.js";import"./CV0dHcg-.js";import"./C59C2sh_.js";import"./1qXVShGN.js";import"./CNtMeql4.js";import"./DNGU8wv-.js";import"./V6wQfr-d.js";import"./CCkQXBCT.js";const se={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"};function ce(o,v){return a(),m("svg",se,v[0]||(v[0]=[N("path",{d:"M0 0h2v2h2v2h2v2H4v2H2v2H0z",class:"svg-primary"},null,-1)]))}const re={render:ce},le=["type","name","value","checked"],ue={key:1,class:"checkbox"},me={class:"title"},ve={key:2,class:"hotkey"},de={key:3,class:"indicator-context"},pe=Q({__name:"Item",props:{item:{type:Object,required:!0},parentLayout:{type:Object,default(){return{size:F.screenSize}}},tag:{type:String,default:"div"},direction:{type:String,default:"bottom",validator:o=>["top","bottom"].includes(o)}},emits:["click","update:model-value"],setup(o,{emit:v}){const e=o,x=v,I=c(),O=c(),g=c(),k=c(!1),d=c(!1),r=c(f(2,3)),w=new U,z=s(()=>e.item.type===y.RADIO?"radio":"checkbox"),l=s(()=>[y.CHECKBOX,y.RADIO].includes(e.item.type)),M=s(()=>e.item.type===y.RADIO),P=s(()=>l.value?"label":e.item.url?"a":"button"),R=s(()=>{const t={class:"inner",is:void 0};return l.value?t.is="label":e.item.url&&(t.is="a",t.href=e.item.url),t}),H=s(()=>({"force-visible":k.value,"context-ready":d.value,"context-halign-left":r.value.x===0,"context-halign-right":r.value.x===2,"context-valign-top":r.value.y===1,"context-valign-bottom":r.value.y===3,disabled:K.value.disabled})),K=s(()=>e.item.options);Z(()=>{A(()=>{e.item.hotKey&&w.add(V.keyDown.subscribe(t=>{V.cmdActive&&e.item.hotKey.charCodeAt(0)===t.keyCode&&_()}))})}),ee(()=>{w.unsubscribe()});function L(t,n){x("update:model-value",t,n)}function _(){e.item.action?e.item.action():I.value.click()}function $(t){let n;const i=t.target;M.value?n=i==null?void 0:i.value:n=i==null?void 0:i.checked,ae(n)?e.item.setValue(Number(n)):e.item.setValue(n),x("update:model-value",e.item.name,n),typeof e.item.action=="function"&&Promise.resolve(e.item.action(n)).catch(p=>{throw p})}function j(t){t.stopPropagation(),!l.value&&typeof e.item.action=="function"?Promise.resolve(e.item.action()).catch(n=>{throw n}):x("click",t)}function W(){d.value||(k.value=!0),E()}function E(){d.value||(d.value=!0,A(()=>{window.setTimeout(()=>{if(g.value){const t=g.value.$el.getBoundingClientRect(),{size:n,position:i}=e.parentLayout,p=X(()=>f(t.left,t.top)-(i.x>0?i:0)+f(t.width,t.height)),S=e.direction==="bottom";r.value=f(n.x<p.x?0:2,n.y-2<=p.y?S?1:3:S?3:1)}k.value=!1},0)}))}return(t,n)=>(a(),b(T(o.tag),{class:ne(["wb-env-atom-context-menu-item",H.value]),onMouseover:E,onTouchstart:W,onClick:j},{default:D(()=>[(a(),b(T(P.value),te({ref_key:"clickEl",ref:I},R.value),{default:D(()=>[l.value?(a(),m("input",{key:0,ref_key:"inputEl",ref:O,type:z.value,name:o.item.name,value:o.item.value,checked:M.value?o.item.getValue()===o.item.value:o.item.getValue(),onInput:$},null,40,le)):u("",!0),l.value?(a(),m("span",ue,[C(h(G))])):u("",!0),N("span",me,B(o.item.title),1),o.item.hotKey?(a(),m("span",ve,[C(h(J)),oe(" "+B(o.item.hotKey),1)])):u("",!0),o.item.items.length>0?(a(),m("span",de,[C(h(re))])):u("",!0)]),_:1},16)),o.item.items.length>0?(a(),b(Y,{key:0,ref_key:"contextMenuEl",ref:g,items:h(q)(o.item.items),"parent-layout":o.parentLayout,onInput:L},null,8,["items","parent-layout"])):u("",!0)]),_:1},40,["class"]))}}),Be=ie(pe,[["__scopeId","data-v-03e0d596"]]);export{Be as default};

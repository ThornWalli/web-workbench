import{j as k,k as O,f as a,O as F}from"./2o4skMhU.js";import{i as p,a as T}from"./1qXVShGN.js";import{o as M}from"./CNtMeql4.js";import{c as h}from"./DNGU8wv-.js";function P(n,e,i,r,t){r===void 0&&(r=0),t===void 0&&(t=!1);var f=e.schedule(function(){i(),t?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(f),!t)return f}function w(n,e){return M(function(i,r){var t=0;i.subscribe(h(r,function(f){r.next(n.call(e,f,t++))}))})}var _=Array.isArray;function g(n,e){return _(e)?n.apply(void 0,k([],O(e))):n(e)}function j(n){return w(function(e){return g(n,e)})}function q(n,e,i,r,t,f,v,d){var o=[],u=0,s=0,y=!1,E=function(){y&&!o.length&&!u&&e.complete()},I=function(c){return u<r?x(c):o.push(c)},x=function(c){u++;var L=!1;p(i(c,s++)).subscribe(h(e,function(m){e.next(m)},function(){L=!0},void 0,function(){if(L)try{u--;for(var m=function(){var l=o.shift();v||x(l)};o.length&&u<r;)m();E()}catch(l){e.error(l)}}))};return n.subscribe(h(e,I,function(){y=!0,E()})),function(){}}function C(n,e,i){return i===void 0&&(i=1/0),a(e)?C(function(r,t){return w(function(f,v){return e(r,f,t,v)})(p(n(r,t)))},i):(typeof e=="number"&&(i=e),M(function(r,t){return q(r,t,n,i)}))}var z=["addListener","removeListener"],B=["addEventListener","removeEventListener"],H=["on","off"];function b(n,e,i,r){if(a(i)&&(r=i,i=void 0),r)return b(n,e,i).pipe(j(r));var t=O(R(n)?B.map(function(d){return function(o){return n[d](e,o,i)}}):J(n)?z.map(A(n,e)):Q(n)?H.map(A(n,e)):[],2),f=t[0],v=t[1];if(!f&&T(n))return C(function(d){return b(d,e,i)})(p(n));if(!f)throw new TypeError("Invalid event target");return new F(function(d){var o=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return d.next(1<u.length?u:u[0])};return f(o),function(){return v(o)}})}function A(n,e){return function(i){return function(r){return n[i](e,r)}}}function J(n){return a(n.addListener)&&a(n.removeListener)}function Q(n){return a(n.on)&&a(n.off)}function R(n){return a(n.addEventListener)&&a(n.removeEventListener)}export{w as a,j as b,P as e,b as f,C as m};

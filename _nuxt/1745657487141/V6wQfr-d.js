import{v as _,j as w,k as E}from"./2o4skMhU.js";import{i as g}from"./1qXVShGN.js";import{a as y}from"./7vWQM-aF.js";import{o as A}from"./CNtMeql4.js";function q(e){e===void 0&&(e={});var t=e.connector,i=t===void 0?function(){return new y}:t,r=e.resetOnError,s=r===void 0?!0:r,C=e.resetOnComplete,x=C===void 0?!0:C,O=e.resetOnRefCountZero,R=O===void 0?!0:O;return function(S){var o,n,u,c=0,f=!1,v=!1,d=function(){n==null||n.unsubscribe(),n=void 0},m=function(){d(),o=u=void 0,f=v=!1},j=function(){var a=o;m(),a==null||a.unsubscribe()};return A(function(a,h){c++,!v&&!f&&d();var b=u=u??i();h.add(function(){c--,c===0&&!v&&!f&&(n=p(j,R))}),b.subscribe(h),!o&&c>0&&(o=new _({next:function(l){return b.next(l)},error:function(l){v=!0,d(),n=p(m,s,l),b.error(l)},complete:function(){f=!0,d(),n=p(m,x),b.complete()}}),g(a).subscribe(o))})(S)}}function p(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var s=new _({next:function(){s.unsubscribe(),e()}});return g(t.apply(void 0,w([],E(i)))).subscribe(s)}}export{q as s};

import{b as y,W as M,c as k,d as V,a as W}from"./DEPJRTr-.js";import{q as I,i as x}from"./DAex50_G.js";import{u as w,M as S,C as v}from"./5zUvS-w_.js";import{_ as h,g as r,t as g,v as C,z as s,a6 as L,A as b,L as p}from"./DAPGH_AF.js";import"./DL1tliUH.js";import"./BxO05Tpb.js";import"./DwAjpAW9.js";import"./C5mdboMC.js";import"./PIkGlXJS.js";const D={components:{AtomMarkdown:I},setup(){const o=w();return o.setContextMenu(_),o},data(){return{content:["# Cloud",`Connect to a Firebase storage.  
`,`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},A={class:"wb-disks-workbench13-cloud-info"};function K(o,e,l,a,t,n){const i=r("atom-markdown");return g(),C("div",A,[s(i,{content:t.content},null,8,["content"])])}const E=h(D,[["render",K],["__scopeId","data-v-e7ccc3c8"]]),U={components:{WbForm:y,WbButton:M,WbButtonWrapper:x,WbFormFieldTextbox:k},props:{model:{type:Object,default(){return{id:null,apiKey:null,url:null}}}},emits:["close"],setup(o){const e=L(o,"model"),l=w();return l.setContextMenu(_,{model:e.value}),l},data(){return{currentModel:{...this.model},cancelLabel:"Cancel",applyLabel:"Connect",fields:{id:{label:"ID",placeholder:"ID…"},apiKey:{label:"Api Key",placeholder:"Api Key…"},url:{label:"Url",placeholder:"https://…"}}}},computed:{disabledConnect(){return!this.currentModel.id||!this.currentModel.apiKey||!this.currentModel.url}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledConnect||this.$emit("close",this.currentModel)}}},P={class:"wb-module-files-cloud-connect"};function Y(o,e,l,a,t,n){const i=r("wb-form-field-textbox"),d=r("wb-button"),c=r("wb-button-wrapper"),u=r("wb-form");return g(),C("div",P,[s(u,{onSubmit:n.onSubmit},{default:b(()=>[s(i,p(t.fields.id,{modelValue:t.currentModel.id,"onUpdate:modelValue":e[0]||(e[0]=m=>t.currentModel.id=m)}),null,16,["modelValue"]),s(i,p(t.fields.apiKey,{modelValue:t.currentModel.apiKey,"onUpdate:modelValue":e[1]||(e[1]=m=>t.currentModel.apiKey=m)}),null,16,["modelValue"]),s(i,p(t.fields.url,{modelValue:t.currentModel.url,"onUpdate:modelValue":e[2]||(e[2]=m=>t.currentModel.url=m)}),null,16,["modelValue"]),s(c,{align:"outer",full:""},{default:b(()=>[s(d,{"style-type":"primary",label:t.applyLabel,type:"submit",disabled:n.disabledConnect},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const F=h(U,[["render",Y],["__scopeId","data-v-7fca9b81"]]),X={components:{WbForm:y,WbButton:M,WbButtonWrapper:x,WbFormFieldTextbox:k,WbFormFieldDropdown:V},props:{model:{type:Object,default(){return{email:null,password:null,storage:null}}},items:{type:Array,default(){return[]}}},emits:["close"],setup(o){const e=L(o,"model"),l=w();return l.setContextMenu(_,{model:e.value}),l},data(){return{currentModel:{...this.model},applyLabel:"Login",fields:{email:{type:"email",label:"Email",placeholder:"Email…"},password:{type:"password",label:"Password",placeholder:"Password…"},storage:{label:"Storage"}}}},computed:{parsedItems(){return[{title:"Select Storage",value:null},...this.items.map(o=>({title:o.name,value:o.id}))]},disabledSubmit(){return!this.currentModel.email||!this.currentModel.password||!this.currentModel.storage}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledSubmit||this.$emit("close",this.currentModel)}}},O={class:"wb-module-files-cloud-connect"};function T(o,e,l,a,t,n){const i=r("wb-form-field-dropdown"),d=r("wb-form-field-textbox"),c=r("wb-button"),u=r("wb-button-wrapper"),m=r("wb-form");return g(),C("div",O,[s(m,{onSubmit:n.onSubmit},{default:b(()=>[s(i,p(t.fields.storage,{modelValue:t.currentModel.storage,"onUpdate:modelValue":e[0]||(e[0]=f=>t.currentModel.storage=f),options:n.parsedItems}),null,16,["modelValue","options"]),s(d,p(t.fields.email,{modelValue:t.currentModel.email,"onUpdate:modelValue":e[1]||(e[1]=f=>t.currentModel.email=f)}),null,16,["modelValue"]),s(d,p(t.fields.password,{modelValue:t.currentModel.password,"onUpdate:modelValue":e[2]||(e[2]=f=>t.currentModel.password=f)}),null,16,["modelValue"]),s(u,{align:"outer",full:""},{default:b(()=>[s(c,{"style-type":"primary",label:t.applyLabel,type:"submit",disabled:n.disabledSubmit},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const j=h(X,[["render",T],["__scopeId","data-v-cd455ae0"]]),_=({core:o,model:e})=>[{title:"Cloud",items:[{title:"Connect with…",action:R(o,e)},{title:"Login with…",action:N(o,e)},{type:S.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:B(o)}]}];function B(o){return()=>{o.modules.windows.addWindow({title:"Info",component:E,componentData:{},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"})}}function N(o,e){return()=>{const l=o.modules.windows.addWindow({title:"Login with",component:j,componentData:{items:e.items},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(a=>{l.events.subscribe(async({name:t,value:n})=>{if(t==="close"){if(n){const{email:i,password:d,storage:c}=n;try{await e.actions.login(i,d,c)}catch(u){debugger;alert(u)}}a()}})})}}function R(o,e){return()=>{const l=o.modules.windows.addWindow({title:"Connect with",component:F,componentData:{model:{id:null,apiKey:null,url:null}},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(a=>{l.events.subscribe(async({name:t,value:n})=>{if(t==="close"){if(n){const{id:i,url:d,apiKey:c}=n;await e.actions.connect(i,c,d)}a()}})})}}const G={components:{WbForm:y,WbButton:M,WbButtonWrapper:x,WbItemSelect:W},props:{model:{type:Object,default(){return{id:null,items:[]}}}},setup(o){const e=L(o,"model"),l=w();return l.setContextMenu(_,{model:e.value}),l},data(){return{disconnectLabel:"Disconnect",loginLabel:"Login",logoutLabel:"Logout",fields:{itemSelect:{title:"Mounted Storages:",name:"id"}}}},computed:{parsedItems(){const o=this.model.items;return o.map(e=>{const l=e.isLogged();return{label:`${e.name} ${l?"LOGGED IN":""}`,value:e.id,isLogged:l,id:e.id}}).concat(Array(Math.max(3-o.length,0)).fill({label:null,disabled:!0}))},contextMenu(){return new v(_,{core:this.core,model:this.model})},disabledDisconnect(){return!this.model.id||this.model.items.length<1},disabledLogout(){return!this.parsedItems.find(o=>o.id===this.model.id&&o.isLogged)||this.model.items.length<1}},methods:{onClickDisconnect(){this.model.actions.disconnect(this.model.id)},onClickLogout(){this.model.actions.logout(this.model.id)}}},q={class:"wb-disks-workbench13-cloud-connect"};function z(o,e,l,a,t,n){const i=r("wb-item-select"),d=r("wb-button"),c=r("wb-button-wrapper"),u=r("wb-form");return g(),C("div",q,[s(u,null,{default:b(()=>[s(i,p(t.fields.itemSelect,{items:n.parsedItems,model:l.model}),null,16,["items","model"]),s(c,{align:"outer",full:""},{default:b(()=>[s(d,{"style-type":"secondary",label:t.disconnectLabel,disabled:n.disabledDisconnect,onClick:n.onClickDisconnect},null,8,["label","disabled","onClick"]),s(d,{"style-type":"secondary",label:t.logoutLabel,disabled:n.disabledLogout,onClick:n.onClickLogout},null,8,["label","disabled","onClick"])]),_:1})]),_:1})])}const ne=h(G,[["render",z],["__scopeId","data-v-a9134743"]]);export{ne as default};

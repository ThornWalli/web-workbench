var D=Object.defineProperty;var W=(n,e,t)=>e in n?D(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var h=(n,e,t)=>W(n,typeof e!="symbol"?e+"":e,t);import{v as R}from"./Ch9TGLTe.js";import{r as w,ae as M,i as u,Q as A,o as b,a5 as y,X as U,D as E}from"./DhVLdAEy.js";const T={DEFAULT:0,SEPARATOR:1,SPACER:2,TEXT:3,CHECKBOX:4,RADIO:5,UPLOAD:6};class O{constructor({type:e=T.DEFAULT,model:t,options:a,action:f,command:c,url:m,order:i=-1,title:o=null,text:p=null,items:l=[],name:d=null,value:r=null,hotKey:v,keyCode:x,onInit:s}){h(this,"options",{disabled:!1,checked:!1});this.id=R(),this.type=e,this.model=t,this.options=Object.assign(a||{},this.options,Object.assign({},a)),e===T.RADIO&&(this.options.checked=this.options.checked=this.options.checked?r:!1),this.action=f,this.command=c,this.url=m,this.name=d,this.value=r,this.order=i,this.title=o,this.text=p,this.items=g(l),this.hotKey=v,this.keyCode=x,s&&s(this)}}function g(n){return n.map(e=>e instanceof O?e:new O(e))}class C{constructor(e,t){h(this,"id",R());h(this,"items",[]);e&&(this.items=g(e(t)))}add(e){e instanceof C&&this.items.push(...e.items)}}function I(){const n=w(!1),e=M("core"),t=M("window"),a=M("window:refresh"),f=u(()=>t.value.id),c=u(()=>t.value.options.focused),m=u(()=>t.value.parentWindow),i=w(),o=w(),p=u(()=>t.value.options.embedded),l=w(!1),d=(s=!0)=>{l.value=s},r=(s,k={})=>{o.value=new C(s,{core:e.value,mainWindow:E(t),parentWindow:E(m),preserveContextMenu:d,...k})},v=s=>{o.value&&(s?i.value=e.value.modules.windows.setActiveContextMenu(o.value):!l.value&&e.value.modules.windows.getActiveContextMenu()===i.value&&!p.value&&e.value.modules.windows.setActiveContextMenu(null))};return A(c,s=>v(s)),A(o,s=>{i.value=e.value.modules.windows.setActiveContextMenu(s)}),b(()=>{y(()=>{n.value=!0,v(!0)})}),U(()=>{o.value&&e.value.modules.windows.isContextMenu(i.value)&&e.value.modules.windows.setActiveContextMenu(null)}),{isReady:u(()=>n.value),id:f,parentFocused:c,core:e,window:t,setContextMenu:r,preserveContextMenu:d,contextMenu:o,currentContextMenu:i,refresh:a}}export{C,T as M,g,I as u};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DUcHG7yx.js","./BHmTNEz3.js","./D6fwdpc8.js","./B-meQdOw.js","./D3MPJlJW.js","./D7Us3e3D.js","./CrNGlbV0.js","./CV0dHcg-.js","./DdO-3S9B.js","./B1k18Rg6.js","./Cy0zoxeo.js","./CIasQYz1.js","./Caivkp23.js","./DL1FsYWj.js","./tbUmQ5LT.js","./DDPzVXKz.js","./BfpYGSxR.js","./BSzGBLGV.js","./D1WZfvAb.js","./jSR9Z_uS.js","./CXbNF4JJ.css","./BB6FUOrg.js","./v8FPNFzi.js","./D3xLGof4.js","./BfgCdWpr.js","./BFivl9yj.css"])))=>i.map(i=>d[i]);
import{d as e,y as t,z as n,A as a,I as s,B as o,_ as r,r as l,a7 as v,k as i,o as c,a1 as h,W as u,F as m,G as d,V as p,$ as V,X as f,Y as w,R as g,Q as x,K as y}from"./BfpYGSxR.js";import{i as z}from"./BHmTNEz3.js";import{d as _}from"./DdO-3S9B.js";import{i as M}from"./B1k18Rg6.js";import{S as H}from"./CrNGlbV0.js";import{S as b,T as I}from"./v8FPNFzi.js";import{U as k}from"./BfgCdWpr.js";import{S as j}from"./BB6FUOrg.js";const C={class:"wb-env-element-context-menu-text"},T={class:"inner"},$={key:0,class:"title"},E=r(e({__name:"Text",props:{item:{}},setup:e=>(e,r)=>{var l;return n(),t("li",C,[a("div",T,[(null==(l=e.item)?void 0:l.text)?(n(),t("span",$,o(e.item.text),1)):s("",!0)])])}}),[["__scopeId","data-v-62bea091"]]),F={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};const K={render:function render$4(e,s){return n(),t("svg",F,s[0]||(s[0]=[a("path",{"fill-rule":"evenodd",d:"M2 0h18v2h2v12h-2v2H2v-2H0V2h2zm7 9H5V8h1V7h1V6h1V5h1V4h1V3h2v1h1v1h1v1h1v1h1v1h1v1h-4v3H9z",class:"svg-primary","clip-rule":"evenodd"},null,-1)]))}},A={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};const O={render:function render$3(e,s){return n(),t("svg",A,s[0]||(s[0]=[a("path",{d:"M20 2h2v12h-2v2H2v-2H0V2h2V0h18zM4 6v6h2v-2h2v2h2V6H8v2H6V6zm7-2v8h3v-2h-1V4zm3 0v2h1v6h2V6h1V4zM6 4v2h2V4z",class:"svg-primary"},null,-1)]))}},U={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};const L={render:function render$2(e,s){return n(),t("svg",U,s[0]||(s[0]=[a("path",{d:"M20 2h2v12h-2v2H2v-2H0V2h2V0h18zM2 4v8h4v-2H4V6h2V4zm5 0v2h1v6h2V6h1V4zm5 0v8h2v-2h1V8h-1V6h1v2h1V4zm3 6v2h1v-2zm2-6v8h3v-2h-1V4z",class:"svg-primary"},null,-1)]))}},P={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};const S={render:function render$1(e,s){return n(),t("svg",P,s[0]||(s[0]=[a("g",{class:"svg-primary"},[a("path",{d:"M12 7v2h-2V7z"}),a("path",{"fill-rule":"evenodd",d:"M20 2h2v12h-2v2H2v-2H0V2h2V0h18zM6 13v1h3v-1zm7 0v1h3v-1zm-8-3v3h1v-3zm4-7v3H6v1h3v2H6v1h3v3h1v-3h2v3h1v-3h3V9h-3V7h3V6h-3V3h-1v3h-2V3zm7 7v3h1v-3zM5 3v3h1V3zm11 0v3h1V3zM6 2v1h3V2zm7 0v1h3V2z","clip-rule":"evenodd"})],-1)]))}},D={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"};const W={render:function render(e,s){return n(),t("svg",D,s[0]||(s[0]=[a("path",{d:"M20 2h2v12h-2v2H2v-2H0V2h2V0h18zm-9 8v2h8v-2zM9 8v2h2V8zM7 6v2h2V6zM3 4v2h4V4zm8 0v2h8V4z",class:"svg-primary"},null,-1)]))}},B={class:"wb-env-element-context-menu-upload"},G={class:"inner"},R={key:0,class:"title"},q={key:1,class:"hotkey"},Q=["accept"],X=r(e({__name:"Upload",props:{core:{},item:{}},emits:["files","update:model-value"],setup(e,{expose:r,emit:p}){const V=l(M()),f=l(),w=v("closeContextMenu",()=>{});r({closeContextMenu:w});const g=e,x=i(()=>g.item.hotKey),y=i(()=>Array.isArray(g.item.accept)?g.item.accept.join(","):g.item.accept||"application/json"),z=p,b=new H;c(()=>{h(()=>{g.item.hotKey&&g.item.action&&b.add(_.keyDown.subscribe(e=>{var t;g.item.hotKey&&_.resolveHotKey(g.item.hotKey,e)&&(null==(t=f.value)||t.click())}))})}),u(()=>{b.unsubscribe()});const onChange=async e=>{var t;if(e.target instanceof HTMLInputElement){const a=Array.from((e instanceof InputEvent?e.dataTransfer:e.target).files||[]);if(e.target.value="","function"==typeof g.item.action)try{await g.item.action({files:a,closeContextMenu:w})}catch(n){console.error(n),null==(t=g.core)||t.errorObserver.next(n)}else z("files",a),z("update:model-value",a)}};return(e,r)=>(n(),t("li",B,[a("div",G,[e.item.title?(n(),t("span",R,o(e.item.title),1)):s("",!0),x.value?(n(),t("span",q,[x.value.shift?(n(),m(d(K),{key:0})):s("",!0),!V.value&&x.value.alt?(n(),m(d(W),{key:1})):x.value.alt?(n(),m(d(O),{key:2})):s("",!0),V.value&&(x.value.ctrl||x.value.cmd)?(n(),m(d(S),{key:3})):x.value.ctrl||x.value.cmd?(n(),m(d(L),{key:4})):s("",!0),a("span",null,o(x.value.title),1)])):s("",!0),a("input",{ref_key:"inputEl",ref:f,accept:y.value,type:"file",onChange:onChange},null,40,Q)])]))}}),[["__scopeId","data-v-fe64cb25"]]),Y={class:"wb-env-element-context-menu-separator"};const J=r({},[["render",function _sfc_render$1(e,s){return n(),t("li",Y,s[0]||(s[0]=[a("span",null,null,-1)]))}],["__scopeId","data-v-745ab079"]]),N={class:"wb-env-element-context-menu-spacer"};const Z=r({},[["render",function _sfc_render(e,a){return n(),t("li",N)}],["__scopeId","data-v-920e8b47"]]),ee=["data-index"];var te=(e=>(e.TOP="top",e.BOTTOM="bottom",e))(te||{});const ne=r(e({__name:"ContextMenu",props:{core:{},direction:{},parentLayout:{},items:{}},emits:["update:model-value"],setup(e,{expose:a,emit:s}){const o=l(),r=l(!1),c=l(v("contextMenuIndex",{index:0}));p("contextMenuIndex",{index:c.value.index++});const h=i(()=>M.value>0||r.value);p("hasFocusedItems",h);const u=l(!1),_=v("closeContextMenu",()=>{});p("closeContextMenu",()=>{console.log("Context menu close"),r.value=!1,u.value=!0,_(),window.setTimeout(()=>{u.value=!1},500)});const M=l(0);p("addItemFocus",()=>{M.value++}),p("removeItemFocus",()=>{M.value--}),a({$el:o,hasFocusedItem:h});const H=x(()=>y(()=>import("./DUcHG7yx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url)),C={size:z(window.innerWidth,window.innerHeight)},T=e,$=s,F=i(()=>(T.items||[]).sort((e,t)=>(e.order||0)-(t.order||0)));function onUpdateModelValueItem(...e){$("update:model-value",...e)}return(e,a)=>(n(),t("ul",{ref_key:"rootEl",ref:o,class:V(["wb-element-context-menu",{"ignore-hover":u.value,[`direction-${e.direction}`]:e.direction}]),"data-index":c.value.index,onPointerover:a[0]||(a[0]=e=>r.value=!0),onPointerout:a[1]||(a[1]=e=>{M.value=0,r.value=!1})},[(n(!0),t(f,null,w(F.value,t=>(n(),m(g(function getComponent(e){return e instanceof b?Z:e instanceof j?J:e instanceof I?E:e instanceof k?X:H}(t)),{key:t.id,core:T.core,tag:"li",item:t,direction:e.direction||d("bottom"),"parent-layout":e.parentLayout||C,"onUpdate:modelValue":onUpdateModelValueItem},null,8,["core","item","direction","parent-layout"]))),128))],42,ee))}}),[["__scopeId","data-v-266cab1f"]]);export{te as D,K as S,ne as W,W as a,O as b,S as c,L as d};

import{V as I,u as _,a9 as g,aa as C,an as y,ac as k,ab as S,o as W,a7 as v,ao as M}from"./V27eN1aZ.js";import{_ as f,g as i,t as w,v as h,z as s,a7 as x,A as b,O as u}from"./Das9PJ41.js";import"./C5mdboMC.js";const D={components:{AtomMarkdown:I},setup(){const e=_();return e.setContextMenu(p),e},data(){return{content:["# Cloud",`Connect to a Firebase storage.  
`,`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},A={class:"wb-disks-workbench13-cloud-info"};function K(e,t,o,r,n,l){const d=i("atom-markdown");return w(),h("div",A,[s(d,{content:n.content},null,8,["content"])])}const E=f(D,[["render",K],["__scopeId","data-v-ab7a4f89"]]),P={components:{WbForm:g,WbButton:C,WbButtonWrapper:y,WbFormFieldTextbox:k},props:{model:{type:Object,default(){return{id:null,apiKey:null,url:null}}}},emits:["close"],setup(e){const t=x(e,"model"),o=_();return o.setContextMenu(p,{model:t.value}),o},data(){return{cancelLabel:"Cancel",applyLabel:"Connect",fields:{id:{label:"ID",name:"id",placeholder:"ID…"},apiKey:{label:"Api Key",name:"apiKey",placeholder:"Api Key…"},url:{label:"Url",name:"url",placeholder:"https://…"}}}},computed:{disabledConnect(){return!this.model.id||!this.model.apiKey||!this.model.url}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledConnect||this.$emit("close",this.model)}}},Y={class:"wb-module-files-cloud-connect"};function F(e,t,o,r,n,l){const d=i("wb-form-field-textbox"),a=i("wb-button"),c=i("wb-button-wrapper"),m=i("wb-form");return w(),h("div",Y,[s(m,{onSubmit:l.onSubmit},{default:b(()=>[s(d,u(n.fields.id,{model:o.model}),null,16,["model"]),s(d,u(n.fields.apiKey,{model:o.model}),null,16,["model"]),s(d,u(n.fields.url,{model:o.model}),null,16,["model"]),s(c,{align:"outer",full:""},{default:b(()=>[s(a,{"style-type":"primary",label:n.applyLabel,type:"submit",disabled:l.disabledConnect},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const X=f(P,[["render",F],["__scopeId","data-v-fa61d543"]]),O={components:{WbForm:g,WbButton:C,WbButtonWrapper:y,WbFormFieldTextbox:k,WbFormFieldDropdown:S},props:{items:{type:Array,default(){return[]}}},emits:["close"],setup(e){const t=x(e,"model"),o=_();return o.setContextMenu(p,{model:t.value}),o},data(){return{model:{email:null,password:null,storage:null},applyLabel:"Login",fields:{email:{type:"email",label:"Email",name:"email",placeholder:"Email…"},password:{type:"password",label:"Password",name:"password",placeholder:"Password…"},storage:{label:"Storage",name:"storage"}}}},computed:{parsedItems(){return[{title:"Select Storage",value:null},...this.items.map(e=>({title:e.name,value:e.id}))]},disabledSubmit(){return!this.model.email||!this.model.password||!this.model.storage}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledSubmit||this.$emit("close",this.model)}}},T={class:"wb-module-files-cloud-connect"};function B(e,t,o,r,n,l){const d=i("wb-form-field-dropdown"),a=i("wb-form-field-textbox"),c=i("wb-button"),m=i("wb-button-wrapper"),L=i("wb-form");return w(),h("div",T,[s(L,{onSubmit:l.onSubmit},{default:b(()=>[s(d,u(n.fields.storage,{model:n.model,options:l.parsedItems}),null,16,["model","options"]),s(a,u(n.fields.email,{model:n.model}),null,16,["model"]),s(a,u(n.fields.password,{model:n.model}),null,16,["model"]),s(m,{align:"outer",full:""},{default:b(()=>[s(c,{"style-type":"primary",label:n.applyLabel,type:"submit",disabled:l.disabledSubmit},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const j=f(O,[["render",B],["__scopeId","data-v-aa2c9c0f"]]),p=({core:e,model:t})=>[{title:"Cloud",items:[{title:"Connect with…",action:V(e,t)},{title:"Login with…",action:R(e,t)},{type:W.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:N(e)}]}];function N(e){return()=>{e.modules.windows.addWindow({title:"Info",component:E,componentData:{},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"})}}function R(e,t){return()=>{const o=e.modules.windows.addWindow({title:"Login with",component:j,componentData:{items:t.items},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(r=>{o.events.subscribe(async({name:n,value:l})=>{if(n==="close"){if(l){const{email:d,password:a,storage:c}=l;try{await t.actions.login(d,a,c)}catch(m){debugger;alert(m)}}r()}})})}}function V(e,t){return()=>{const o=e.modules.windows.addWindow({title:"Connect with",component:X,componentData:{model:{id:null,apiKey:null,url:null}},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(r=>{o.events.subscribe(async({name:n,value:l})=>{if(n==="close"){if(l){const{id:d,url:a,apiKey:c}=l;await t.actions.connect(d,c,a)}r()}})})}}const G={components:{WbForm:g,WbButton:C,WbButtonWrapper:y,WbItemSelect:v},props:{model:{type:Object,default(){return{id:null,items:[]}}}},setup(e){const t=x(e,"model"),o=_();return o.setContextMenu(p,{model:t.value}),o},data(){return{disconnectLabel:"Disconnect",loginLabel:"Login",logoutLabel:"Logout",fields:{itemSelect:{title:"Mounted Storages:",name:"id"}}}},computed:{parsedItems(){const e=this.model.items;return e.map(t=>{const o=t.isLogged();return{label:`${t.name} ${o?"LOGGED IN":""}`,value:t.id,isLogged:o,id:t.id}}).concat(Array(Math.max(3-e.length,0)).fill({label:null,disabled:!0}))},contextMenu(){return new M(p,{core:this.core,model:this.model})},disabledDisconnect(){return!this.model.id||this.model.items.length<1},disabledLogout(){return!this.parsedItems.find(e=>e.id===this.model.id&&e.isLogged)||this.model.items.length<1}},methods:{onClickDisconnect(){this.model.actions.disconnect(this.model.id)},onClickLogout(){this.model.actions.logout(this.model.id)}}},U={class:"wb-disks-workbench13-cloud-connect"};function $(e,t,o,r,n,l){const d=i("wb-item-select"),a=i("wb-button"),c=i("wb-button-wrapper"),m=i("wb-form");return w(),h("div",U,[s(m,null,{default:b(()=>[s(d,u(n.fields.itemSelect,{items:l.parsedItems,model:o.model}),null,16,["items","model"]),s(c,{align:"outer",full:""},{default:b(()=>[s(a,{"style-type":"secondary",label:n.disconnectLabel,disabled:l.disabledDisconnect,onClick:l.onClickDisconnect},null,8,["label","disabled","onClick"]),s(a,{"style-type":"secondary",label:n.logoutLabel,disabled:l.disabledLogout,onClick:l.onClickLogout},null,8,["label","disabled","onClick"])]),_:1})]),_:1})])}const J=f(G,[["render",$],["__scopeId","data-v-82d18b15"]]);export{J as default};

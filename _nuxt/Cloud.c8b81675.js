import{al as v,_ as b,ad as p,ag as y,ah as C,an as x,aj as k,ai as I,ae as S}from"./index.f331e757.js";import{_ as f,f as i,k as w,l as h,q as n,s as _,H as u}from"./entry.8cd6c9a7.js";const W={components:{AtomMarkdown:v},mixins:[b],data(){return{content:["# Cloud",`Connect to a Firebase storage.  
`,`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}},computed:{contextMenu(){return new p(g,{core:this.core})}}},D={class:"wb-disks-workbench13-cloud-info"};function K(e,l,s,r,o,t){const d=i("atom-markdown");return w(),h("div",D,[n(d,{content:o.content},null,8,["content"])])}const M=f(W,[["render",K],["__scopeId","data-v-132bb3af"]]);const A={components:{WbForm:y,WbButton:C,WbButtonWrapper:x,WbFormFieldTextbox:k},mixins:[b],props:{model:{type:Object,default(){return{id:null,apiKey:null,url:null}}}},emits:["close"],data(){return{cancelLabel:"Cancel",applyLabel:"Connect",fields:{id:{label:"ID",name:"id",placeholder:"ID…"},apiKey:{label:"Api Key",name:"apiKey",placeholder:"Api Key…"},url:{label:"Url",name:"url",placeholder:"https://…"}}}},computed:{contextMenu(){return new p(g,{core:this.core,model:this.model})},disabledConnect(){return!this.model.id||!this.model.apiKey||!this.model.url}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledConnect||this.$emit("close",this.model)}}},F={class:"wb-module-files-cloud-connect"};function P(e,l,s,r,o,t){const d=i("wb-form-field-textbox"),c=i("wb-button"),a=i("wb-button-wrapper"),m=i("wb-form");return w(),h("div",F,[n(m,{onSubmit:t.onSubmit},{default:_(()=>[n(d,u(o.fields.id,{model:s.model}),null,16,["model"]),n(d,u(o.fields.apiKey,{model:s.model}),null,16,["model"]),n(d,u(o.fields.url,{model:s.model}),null,16,["model"]),n(a,{align:"outer",full:""},{default:_(()=>[n(c,{"style-type":"primary",label:o.applyLabel,type:"submit",disabled:t.disabledConnect},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const j=f(A,[["render",P],["__scopeId","data-v-6f4e4d45"]]);const B={components:{WbForm:y,WbButton:C,WbButtonWrapper:x,WbFormFieldTextbox:k,WbFormFieldDropdown:I},mixins:[b],props:{items:{type:Array,default(){return[]}}},emits:["close"],data(){return{model:{email:null,password:null,storage:null},applyLabel:"Login",fields:{email:{type:"email",label:"Email",name:"email",placeholder:"Email…"},password:{type:"password",label:"Password",name:"password",placeholder:"Password…"},storage:{label:"Storage",name:"storage"}}}},computed:{contextMenu(){return new p(g,{core:this.core,model:this.model})},parsedItems(){return[{title:"Select Storage",value:null},...this.items.map(e=>({title:e.name,value:e.id}))]},disabledSubmit(){return!this.model.email||!this.model.password||!this.model.storage}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledSubmit||this.$emit("close",this.model)}}},E={class:"wb-module-files-cloud-connect"};function O(e,l,s,r,o,t){const d=i("wb-form-field-dropdown"),c=i("wb-form-field-textbox"),a=i("wb-button"),m=i("wb-button-wrapper"),L=i("wb-form");return w(),h("div",E,[n(L,{onSubmit:t.onSubmit},{default:_(()=>[n(d,u(o.fields.storage,{model:o.model,options:t.parsedItems}),null,16,["model","options"]),n(c,u(o.fields.email,{model:o.model}),null,16,["model"]),n(c,u(o.fields.password,{model:o.model}),null,16,["model"]),n(m,{align:"outer",full:""},{default:_(()=>[n(a,{"style-type":"primary",label:o.applyLabel,type:"submit",disabled:t.disabledSubmit},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const X=f(B,[["render",O],["__scopeId","data-v-c3e5e678"]]),g=({core:e,model:l})=>[{title:"Cloud",items:[{title:"Connect with…",action:G(e,l)},{title:"Login with…",action:$(e,l)},{separator:!0},{hotKey:"I",keyCode:73,title:"Info",action:Y(e)}]}];function Y(e){return()=>{e.modules.windows.addWindow({title:"Info",component:M,componentData:{},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"})}}function $(e,l){return()=>{const s=e.modules.windows.addWindow({title:"Login with",component:X,componentData:{items:l.items},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(r=>{s.events.subscribe(async({name:o,value:t})=>{if(o==="close"){if(t){const{email:d,password:c,storage:a}=t;try{await l.actions.login(d,c,a)}catch(m){debugger;alert(m)}}r()}})})}}function G(e,l){return()=>{const s=e.modules.windows.addWindow({title:"Connect with",component:j,componentData:{model:{id:null,apiKey:null,url:null}},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(r=>{s.events.subscribe(async({name:o,value:t})=>{if(o==="close"){if(t){const{id:d,url:c,apiKey:a}=t;await l.actions.connect(d,a,c)}r()}})})}}const N={components:{WbForm:y,WbButton:C,WbButtonWrapper:x,WbItemSelect:S},mixins:[b],props:{model:{type:Object,default(){return{id:null,items:[]}}}},data(){return{disconnectLabel:"Disconnect",loginLabel:"Login",logoutLabel:"Logout",fields:{itemSelect:{title:"Mounted Storages:",name:"id"}}}},computed:{parsedItems(){const e=this.model.items;return e.map(l=>{const s=l.isLogged();return{label:`${l.name} ${s?"LOGGED IN":""}`,value:l.id,isLogged:s,id:l.id}}).concat(Array(Math.max(3-e.length,0)).fill({label:null,disabled:!0}))},contextMenu(){return new p(g,{core:this.core,model:this.model})},disabledDisconnect(){return!this.model.id||this.model.items.length<1},disabledLogout(){return!this.parsedItems.find(e=>e.id===this.model.id&&e.isLogged)||this.model.items.length<1}},methods:{onClickDisconnect(){this.model.actions.disconnect(this.model.id)},onClickLogout(){this.model.actions.logout(this.model.id)}}},T={class:"wb-disks-workbench13-cloud-connect"};function V(e,l,s,r,o,t){const d=i("wb-item-select"),c=i("wb-button"),a=i("wb-button-wrapper"),m=i("wb-form");return w(),h("div",T,[n(m,null,{default:_(()=>[n(d,u(o.fields.itemSelect,{items:t.parsedItems,model:s.model}),null,16,["items","model"]),n(a,{align:"outer",full:""},{default:_(()=>[n(c,{"style-type":"secondary",label:o.disconnectLabel,disabled:t.disabledDisconnect,onClick:t.onClickDisconnect},null,8,["label","disabled","onClick"]),n(c,{"style-type":"secondary",label:o.logoutLabel,disabled:t.disabledLogout,onClick:t.onClickLogout},null,8,["label","disabled","onClick"])]),_:1})]),_:1})])}const U=f(N,[["render",V],["__scopeId","data-v-2f889dc2"]]);export{U as default};

import{W as R}from"./BUE24yXb.js";import{W}from"./E3_DWDMo.js";import{W as $}from"./W7H9nAKY.js";import{W as z}from"./DZ3G1ikB.js";import{W as G}from"./B1jPSlgX.js";import{u as H}from"./BII7ONQG.js";import{u as M}from"./DOMGF9Hs.js";import{k as F}from"./D-Cgqglr.js";import{d as U,r as k,k as n,y as j,z as C,C as r,D as I,F as q,I as A,P as _,G as S,O as J}from"./CotJlvW-.js";const K={class:"wb-module-files-open"};var L=(t=>(t.FILE="file",t.FOLDER="folder",t.BOTH="both",t))(L||{});const oe=U({__name:"Open",props:{type:{},fsItem:{},model:{}},emits:["close"],setup(t,{emit:w}){var p,d,v,b;const{core:o}=M();if(!((p=o.value)!=null&&p.modules.files))throw new Error("Files module not found");H();const B="file",l=t,m=w,s=k({...l.model,path:((d=l.model)==null?void 0:d.path)||l.fsItem.getPath()}),i={cancel:"Cancel",open:"Open"},O=n(()=>({label:null,placeholder:"Pathâ€¦",modelValue:s.value.path})),g=n(()=>({name:"path",modelValue:s.value.path,"onUpdate:model-value":e=>{s.value.path=e},onSelect:V})),c=k(l.fsItem||((b=(v=o.value)==null?void 0:v.modules.files)==null?void 0:b.fs.root)),f=n(()=>c.value instanceof F),x=n(()=>{const e=l.type||B;return e==="both"||!f.value&&["file"].includes(e)||f.value&&["folder"].includes(e)}),P=n(()=>{var e,u,a;return l.fsItem?l.fsItem:(u=(e=o.value)==null?void 0:e.modules.files)!=null&&u.fs.root?(a=o.value)==null?void 0:a.modules.files.fs.root:null}),V=e=>{c.value=J(e),e instanceof F&&(s.value.path=e.getPath())},D=()=>{m("close")},N=()=>{m("close",s.value.path)};return(e,u)=>(C(),j("div",K,[r(R,{onSubmit:N},{default:I(()=>{var a,h,y;return[r(G,_(O.value,{readonly:""}),null,16),(h=(a=S(o))==null?void 0:a.modules.files)!=null&&h.fileSystem?(C(),q(z,_({key:0},g.value,{"file-system":(y=S(o))==null?void 0:y.modules.files.fileSystem,"fs-item":P.value}),null,16,["file-system","fs-item"])):A("",!0),r($,{align:"outer",full:""},{default:I(()=>[r(W,{"style-type":"secondary",label:i.cancel,onClick:D},null,8,["label"]),r(W,{"style-type":"primary",label:i.open,type:"submit",disabled:!x.value},null,8,["label","disabled"])]),_:1})]}),_:1})]))}});export{L as S,oe as _};

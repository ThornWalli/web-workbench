var ie=Object.defineProperty;var ae=(t,e,n)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var h=(t,e,n)=>ae(t,typeof e!="symbol"?e+"":e,n);import{C as H}from"./BJmh0rUk.js";import{u as le,p as ce,a as k,b as T,m as u}from"./DOMGF9Hs.js";import{d as Z}from"./On0xenC3.js";import{i as $}from"./CpIyErmU.js";import{D as ue,W as me}from"./DQ8WbIb3.js";import{O as V,d as se,k as S,y as p,z as f,A as b,C as w,G as de,_ as Y,r as D,o as he,X as U,Y as F,Z as q,$ as x,I as R,B as z,g as M,P as L,E as W,S as j,ac as G,D as pe,af as X,a0 as fe,L as K}from"./CotJlvW-.js";import{u as ye}from"./BII7ONQG.js";import{a as ke,M as be}from"./MNqvtCPu.js";import ve from"./Bfcs4GJR.js";import{N as ge,u as Ce}from"./CRwCAZ5R.js";import{V as Ne,a as we,n as _e,h as Te,N as re}from"./fGiKISgP.js";import{T as Se,r as Re,c as B}from"./BgCju0y8.js";import{g as Ee,c as Ae,I as Ie}from"./Bx1YEHQ7.js";import{g as Me,c as Pe}from"./U943cWOm.js";import{D as Oe}from"./Cc_Og2B_.js";import{T as xe}from"./CY3JQROt.js";import{T as J}from"./CZ5jXLoK.js";import{S as P}from"./CQXTE7NH.js";import{o as De,n as qe,S as Q}from"./6C4StZv5.js";import{f as O}from"./DNvW6rqi.js";import{c as ee}from"./6jpuwjT2.js";import{i as Le}from"./Ce6njBYG.js";import{t as te}from"./WZmY4AAg.js";import"./DKrsSnpo.js";import"./CZZPvNTk.js";import"./B2exwp0w.js";import"./djI3_XgP.js";import"./D4lI5vpz.js";import"./RAasLaaH.js";import"./DdQrQ7-5.js";import"./BE-N3i2n.js";import"./Bnsp_u8C.js";import"./BH9FFkim.js";import"./CV0dHcg-.js";import"./CaAbksje.js";import"./9V19AFUE.js";import"./DhuF9au6.js";import"./CxKYomUj.js";import"./D-Cgqglr.js";import"./D9awfk1U.js";import"./CNkvSXuu.js";import"./B0Lefq6F.js";import"./BWR5uye1.js";import"./CJLX7oOC.js";function oe(t){return De(function(e,n){var o=!1,r=null,s=null,c=function(){if(s==null||s.unsubscribe(),s=null,o){o=!1;var i=r;r=null,n.next(i)}};e.subscribe(ee(n,function(i){s==null||s.unsubscribe(),o=!0,r=i,s=ee(n,c,qe),Le(t(i)).subscribe(s)},function(){c(),n.complete()},void 0,function(){r=s=null}))})}class Ke{constructor(e,n){h(this,"track");h(this,"playing",!1);h(this,"currentSequence");h(this,"autoplay");h(this,"instrument");h(this,"instruments",[]);h(this,"sequenceNoteIndex",{});h(this,"instrumentIndex",-1);const{autoplay:o}=n||{};if(!(e instanceof Se))throw new Error("TrackPlayer requires a Track");this.track=e,this.autoplay=o!==void 0?o:!0}createInstrument(){var e;(e=this.instrument)==null||e.dispose(),this.instrument=ne(this.track.type)}refresh(){const e=this.track.notes;return this.createSequence(e,()=>{console.log("complete"),this.clearSequence(),this.playing=!1}),e}play(){if(!this.track.type)throw new Error("TrackPlayer requires an instrument");if(this.refresh(),!this.currentSequence)throw new Error("TrackPlayer requires a sequence");return this.autoplay&&(this.currentSequence.start(0),this.playing=!0),this.currentSequence}pause(){this.instruments.forEach(e=>e.context.transport.pause()),this.playing=!1}stop(){this.clearSequence(),this.playing=!1}restart(){this.stop(),this.play()}reset(){this.clearSequence(),this.stop(),this.track.notes=[]}destroy(){var e;(e=this.instrument)==null||e.dispose(),this.instruments.forEach(n=>n.dispose()),this.clearSequence()}triggerAttack(e){this.instrumentIndex++,this.getInstrument().triggerAttack(e)}triggerRelease(){this.getInstrument().triggerRelease(),this.instrumentIndex--}triggerAttackRelease(e){this.instrumentIndex++,console.log("triggerAttackRelease",this.instrumentIndex,e.getName(),e.getTime(),e.delay,(e.delay+e.toSeconds())*1e3),window.setTimeout(()=>{console.log("fertig"),this.instrumentIndex--},(e.delay+e.toSeconds())*1e3);const n=e.getName(),o=e.getTime();if(!n)throw new Error("Note name is required");if(!o)throw new Error("Note time is required");this.getInstrument().triggerAttackRelease(n,o,e.delay)}getInstrument(){return this.instrumentIndex>this.instruments.length-1&&this.instruments.push(ne(this.track.type)),this.instruments[this.instrumentIndex]}createSequence(e,n){if(!this.currentSequence)this.currentSequence=V(new Be(e,(o,r,s,c)=>{console.log(o),this.triggerAttackRelease(o),this.sequenceNoteIndex={...this.sequenceNoteIndex,[Number(r)]:c[s].index},s===c.length-1&&Reflect.deleteProperty(this.sequenceNoteIndex,r)},n!==void 0?n:void 0));else throw new Error("TrackPlayer already has a sequence")}clearSequence(){var e;(e=this.currentSequence)==null||e.dispose(),this.currentSequence=void 0}}class Be{constructor(e,n,o){h(this,"startTime",0);h(this,"sequenceMap",new Map);h(this,"onTick");h(this,"onComplete");h(this,"notes");this.onTick=n,this.onComplete=o,this.notes=e}async start(e=0){var s;const n=we;n.stop(),n.seconds=0,n.start(),this.startTime=_e();const o=this.sequenceMap,r=Promise.all(Object.entries($e(this.notes)).map(([,c])=>{const i=c.map((l,d)=>{const _=`${d}_${l.getTime()}`,{notes:v,part:E,complete:A}=o.get(_)||(()=>{const N=[];let a=0;const g=new Oe,m=new Te((...y)=>{this.onTick(new re({delay:y[0],note:y[1],time:l.getTime()}),d,a,N),a++,a>m.length-1&&g.resolve()},[]);return{notes:N,part:m,complete:g.promise}})();return o.set(_,{notes:v,part:E,complete:A}),E.add(l.delay,l.getName()),v.push(l),{notes:v,part:E,complete:A}});return Promise.all(i.map(({complete:l})=>l))}));return Array.from(o.values()).forEach(({part:c})=>{c.start(e)}),await r,(s=this.onComplete)==null||s.call(this),r}pause(){Array.from(this.sequenceMap.values()).forEach(({part:e})=>{e.pause()})}cancel(){Array.from(this.sequenceMap.values()).forEach(({part:e})=>{e.cancel()})}stop(){Array.from(this.sequenceMap.values()).forEach(({part:e})=>{e.stop()})}dispose(){Array.from(this.sequenceMap.values()).forEach(({part:e})=>{e.dispose()})}}function ne(t){const e=Me(t),n=new Ne(-100).toDestination(),o=new e().connect(n).toDestination();return V(o)}function $e(t){return t.reduce((e,n)=>(e[n.delay]=e[n.delay]||[],e[n.delay].push(n),e),{})}const Ve={class:"wb-env-fragment-footer"},Ye={ref:"menu",class:"menu"},He=se({__name:"Footer",props:{parentLayout:{},title:{},items:{}},emits:["inputContextMenu"],setup(t,{emit:e}){const{core:n}=le(),o={size:$(window.innerWidth,window.innerHeight)},r=t,s=e,c=S(()=>{var l,d;return r.items||((d=(l=n.value)==null?void 0:l.modules.windows)==null?void 0:d.contextMenu.activeItems.items)});function i(...l){s("inputContextMenu",...l)}return(l,d)=>(f(),p("footer",Ve,[b("nav",Ye,[w(me,{direction:de(ue).TOP,items:c.value,"parent-layout":l.parentLayout||o,"onUpdate:modelValue":i},null,8,["direction","items","parent-layout"])],512)]))}}),Ze=Y(He,[["__scopeId","data-v-bc782050"]]),Ue=["disabled"],Fe={class:"keys white"},ze=["onMouseout","onPointerdown","onPointerup"],We={key:0},je={key:0},Ge={class:"keys black"},Xe=["onMouseout","onPointerdown","onPointerup"],Je={key:0},Qe={key:0},et=9,tt=se({__name:"Keyboard",props:{disabled:{type:Boolean,default:!1},selectedNotes:{type:Array,default:null},size:{type:String,validator:t=>["small","medium","large"].includes(t),default:"large"},showNoteLabels:{type:Boolean,default:!1},startOctave:{type:Number,default:4},octaveCount:{type:Number,default:6}},emits:["down","up"],setup(t,{emit:e}){const n=D(),o=t,r=e,s=D([]),c=D($(0,0)),i=S(()=>Array.from(new Set(o.selectedNotes.map(a=>Re(a.getName()||"")).flat()))),l=S(()=>({small:96,medium:96*1.5,large:96*2})[o.size]),d=S(()=>{const a=[],g=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"];for(let m=0;m<o.octaveCount;m++)a.push(...g.map(y=>{const C=`${y}${o.startOctave+m}`;return{note:C,black:E(C)}}));return o.startOctave+o.octaveCount<=et&&a.push({note:g[0]+(o.startOctave+o.octaveCount),black:!1}),a}),_=S(()=>({disabled:o.disabled})),v=S(()=>({...c.value.toCSSVars("dimension"),"--height":l.value,"--keys":d.value.filter(({black:a})=>!a).length,"--white-keys":d.value.filter(({black:a})=>!a).length,"--black-keys":d.value.filter(({black:a})=>a).length}));he(()=>{var a;c.value=$(((a=n.value)==null?void 0:a.offsetWidth)||0,0)});function E(a){return/^[a-z]#\d+/.test(a)}function A(a){o.disabled||(s.value.push(a),r("down",a))}function N(a){!o.disabled&&s.value.includes(a)&&(r("up",a),s.value=s.value.filter(g=>g!==a))}return(a,g)=>(f(),p("div",{ref_key:"rootEl",ref:n,style:q(v.value),class:x([_.value,"wb-disks-synthesizer-keyboard"]),disabled:t.disabled},[b("div",null,[b("div",Fe,[(f(!0),p(U,null,F(d.value,({note:m,black:y},C)=>(f(),p("div",{key:C,class:x(["key",{black:y,white:!y,selected:i.value.includes(m.toLowerCase())}]),style:q({"--index":C}),onMouseout:I=>N(m),onPointerdown:I=>A(m),onPointerup:I=>N(m)},[y?R("",!0):(f(),p("span",We,[t.showNoteLabels?(f(),p("i",je,z(m),1)):R("",!0)]))],46,ze))),128))]),b("div",Ge,[(f(!0),p(U,null,F(d.value,({note:m,black:y},C)=>(f(),p("div",{key:C,class:x(["key",{black:y,white:!y,selected:i.value.includes(m.toLowerCase())}]),style:q({"--index":C}),onMouseout:I=>N(m),onPointerdown:I=>A(m),onPointerup:I=>N(m)},[y?(f(),p("span",Je,[t.showNoteLabels?(f(),p("i",Qe,z(m),1)):R("",!0)])):R("",!0)],46,Xe))),128))])])],14,Ue))}}),ot=Y(tt,[["__scopeId","data-v-5b9ecf1b"]]),nt={components:{TimelineCanvas:xe,Navigation:ge,Metronom:ke,Keyboard:ot,WbEnvFragmentFooter:Ze},props:{model:{type:Object,default:Ae()},trackModel:{type:Object,default:Ee()},toneDestination:{type:Object,default:null}},emits:["refresh"],async setup(t){const e=X(t,"model"),n=X(t,"trackModel"),o=ye();fe(e,()=>{o.setContextMenu(Pe,{model:e.value,trackModel:n.value,preserveContextMenu:o.preserveContextMenu})},{immediate:!0,deep:!0});const r=K(n.value[u.SYNTHESIZER_TRACK]);console.log("track",r);const s=K(new be(r)),c=K(new Ke(r));console.log("trackPlayer",c);const i=await Ce(),l=new ve;await l.start();const d=l.hasInputs;return{...o,...i,metronom:s,track:r,trackPlayer:c,midiController:l,hasMidi:d}},data(){return{windowsModule:V(this.core.modules.windows),duration:0,subscriptions:new Q,midiControllerListener:null,openNotes:new Map,footerModel:{}}},computed:{styleClasses(){return{[`keyboard-align-${this.trackModel[u.SYNTHESIZER_TRACK_KEYBOARD_ALIGN]}`]:!0}},showKeyboard(){return this.trackModel[u.SYNTHESIZER_TRACK_SHOW_KEYBOARD]},inputNote(){return this.trackModel[u.SYNTHESIZER_TRACK_INPUT_NOTE]},bpm(){return Number(this.model[u.SYNTHESIZER_BPM])},trackPlayerIndex(){return Object.values(this.trackPlayer.sequenceNoteIndex).flat()},selectedNotes(){return this.track.notes.filter(t=>Object.values(this.trackPlayer.sequenceNoteIndex).flat().includes(t.index))},timelineCanvasData(){return{track:this.track,duration:this.metronom.getDuration()}},keybordData(){return{size:this.trackModel[u.SYNTHESIZER_TRACK_KEYBOARD_SIZE],showNoteLabels:this.trackModel[u.SYNTHESIZER_TRACK_SHOW_NOTE_LABELS],startOctave:this.trackModel[u.SYNTHESIZER_TRACK_START_OCTAVE],octaveCount:this.trackModel[u.SYNTHESIZER_TRACK_OCTAVE_COUNT],selectedNotes:this.selectedNotes}},metronomNavigation(){return{modelValue:this.metronom,"onUpdate:model-value":({name:t,value:e})=>{debugger;this.metronom[String(t)]=e},items:[[{icon:"skipPrev",label:"Prev Beat",hideLabel:!0,disabled:this.metronom.value===0,action:()=>{this.metronom.reset()}},{icon:"doublePrev",label:"Prev Beat",hideLabel:!0,disabled:Math.floor(this.metronom.currentBeat/2)===0,action:()=>{this.metronom.prevBeat()}},{icon:"prev",label:"Prev",hideLabel:!0,disabled:this.metronom.value===0,action:()=>{this.metronom.prev()}},{icon:"reset",iconAlign:"right",label:"Next",disabled:this.metronom.value/2-Math.floor(this.metronom.currentBeat)===0,hideLabel:!0,action:()=>{this.metronom.setBeat(this.metronom.currentBeat)}},{icon:"next",iconAlign:"right",label:"Next",hideLabel:!0,action:()=>{this.metronom.next()}},{icon:"doubleNext",label:"Next Beat",hideLabel:!0,action:()=>{this.metronom.nextBeat()}},{spacer:!0},{text:`Duration: ${this.metronom.value.toFixed(2)}`},{text:`Beat: ${this.metronom.currentBeat}-${this.metronom.currentBeat+this.metronom.beatCount}`}],[...B().map(([t])=>({label:`1/${t.replace(/(\d+)[nm]/,"$1")} n`,name:"time",value:t})),{spacer:!0}]]}},navigation(){return{model:this.trackModel,items:[[{text:"Input:"},{label:"Note",value:"note",name:u.SYNTHESIZER_TRACK_INPUT},{label:"Pause",value:"pause",name:u.SYNTHESIZER_TRACK_INPUT,disabled:!0},{spacer:!0},{label:"Remove Note",action:()=>{this.track.removeNote(this.track.selectedIndex)}},{label:"Clean Range",action:()=>{this.track.removeNotesByDurationRange(this.metronom.getDuration(),this.metronom.timeDuration)}},{label:"Clean Beat",action:()=>{this.track.removeNotesFromBeat(this.track.getBeatIndex())}},{label:"Reset",action:()=>{this.reset()}}],[{text:"Note:&nbsp;"},{label:"Auto",value:"",name:u.SYNTHESIZER_TRACK_INPUT_NOTE},...B().map(([t])=>({label:`1/${t.replace(/(\d+)[nm]/,"$1")} n`,name:u.SYNTHESIZER_TRACK_INPUT_NOTE,value:t})),{spacer:!0},this.trackPlayer.playing?{selected:!0,label:"Pause",icon:"pause",disabled:!this.trackPlayer.currentSequence||!this.trackPlayer.playing,onClick:()=>this.onClickPlause()}:{label:"Play",icon:"play",disabled:this.trackPlayer.playing||this.track.notes.length===0,onClick:()=>this.onClickPlay()},{label:"Stop",icon:"stop",disabled:!this.trackPlayer.currentSequence,onClick:()=>this.onClickStop()},{label:"Restart",disabled:this.track.selectedIndex>-1,onClick:()=>this.onClickRestart()}]]}},footerData(){const t=this.track,e=this.trackModel,n=t.getDuration().toFixed(2);return{items:ce([new k({options:{disabled:!this.hasMidi},title:`MIDI (${this.midiController.input?this.midiController.input.name:"OFF"})`,action:async()=>{this.midiControllerListener||await this.registerMidiListener()},items:this.midiController.ready&&this.midiControllerListener?[new k({title:"Inputs",items:this.midiController.inputs.map((o,r)=>({title:o.name,model:this.midiController,name:"activeInput",type:T.RADIO,value:o.id,action:async()=>{await this.registerMidiListener(this.midiController.listen(r))}}))}),new k({title:"Input Channel",items:Array(16).fill(null).map((o,r)=>({title:String(r+1),value:r+1,type:T.RADIO,model:this.midiController,name:"inputChannel",action:async()=>{await this.registerMidiListener(this.midiController.listen(this.midiController.input))}}))}),new k({title:"Outputs",items:this.midiController.outputs.map(o=>({title:o.name,model:this.midiController,name:"activeOutput",type:T.RADIO,value:o.id,action(){}}))}),new P,new k({title:"Disconnect",action:()=>{var o;(o=this.midiControllerListener)==null||o.unsubscribe(),this.midiControllerListener=null,this.midiController.unlisten()}})]:[]}),new P,new k({title:`Instr.: ${this.track.type}`,items:Object.values(Ie).map(o=>new k({type:T.RADIO,title:o,model:t,name:"type",value:o}))}),new P,new k({title:`Octave: ${e[u.SYNTHESIZER_TRACK_START_OCTAVE]}-${e[u.SYNTHESIZER_TRACK_START_OCTAVE]+e[u.SYNTHESIZER_TRACK_OCTAVE_COUNT]-1}`,items:[new k({title:"Start Octave",items:Array(9).fill({}).map((o,r)=>new k({type:T.RADIO,title:String(r+1),model:e,name:u.SYNTHESIZER_TRACK_START_OCTAVE,value:r+1,action(s){s=Number(s),s+e[u.SYNTHESIZER_TRACK_OCTAVE_COUNT]>9&&(e[u.SYNTHESIZER_TRACK_OCTAVE_COUNT]=10-s)}}))}),new k({title:"Octave Count",items:Array(10-e[u.SYNTHESIZER_TRACK_START_OCTAVE]).fill({}).map((o,r)=>new k({type:T.RADIO,title:String(r+1),model:e,name:u.SYNTHESIZER_TRACK_OCTAVE_COUNT,value:r+1}))})]}),new P,new J({text:`BPM: ${this.bpm}`}),new J({text:`Dur.: ${n}`})])}}},watch:{"track.beatCount"(t){this.metronom.beatCount=t}},mounted(){console.log("TRACK",this.track),this.subscriptions.add(Z.keyDown.pipe(oe(()=>te(100)),O(t=>t.key==="Enter")).subscribe(()=>{this.onClickActivateMidi()})),this.subscriptions.add(Z.keyDown.pipe(oe(()=>te(100))).subscribe(t=>{switch(t.code){case"ArrowLeft":this.metronom.prev();break;case"ArrowRight":this.metronom.next();break;case"ArrowUp":this.metronom.prevBeat();break;case"ArrowDown":this.metronom.nextBeat();break;default:if(/Digit(\d+)/.test(t.code)){const e=t.code.replace(/Digit(\d+)/,"$1"),n=B()[e-1];n&&(this.metronom.time=n[0])}break}console.log(t)})),this.$nextTick(()=>{this.$emit("refresh")})},unmounted(){this.subscriptions.unsubscribe(),this.midiController.destroy()},methods:{async registerMidiListener(t){var e;try{await this.midiController.start();const n=this.midiController.listen(t>-1&&this.midiController.inputs[t]||this.midiController.inputs[0]);(e=this.midiControllerListener)==null||e.unsubscribe(),this.midiControllerListener=new Q,this.midiControllerListener.add(n.pipe(O(({type:o})=>o==="noteOn")).subscribe(this.onNoteOn.bind(this)),n.pipe(O(({type:o})=>o==="noteOff")).subscribe(this.onNoteOff.bind(this)),n.pipe(O(({type:o})=>o==="volume")).subscribe(({value:o})=>{console.log("Volume: ",o),this.core.config.set(H.SCREEN_CONFIG,{...this.core.config.get(H.SCREEN_CONFIG),soundVolume:o})}))}catch(n){console.warn(n)}},async setup(){this.tone.ready||(await this.tone.start(),this.trackPlayer.createInstrument())},onReady({render:t}){this._render=t},onRender(t,{position:e,dimension:n}){if(this.inputNote==="auto"){const o=Array.from(this.openNotes.values());for(let r=0;r<o.length;r++){const s=o[Number(r)],i=(this.metronom.now()-s)/1e3/(this.metronom.speed*2)*n.x/this.track.beatCount;t.fillRect(e.x,e.y,i,n.y)}}},async onNoteOn({value:t}){await this.setup();const e=t.identifier;console.log("value.identifier",e,this.metronom.getDuration()),this.startNote(e),this.trackPlayer.triggerAttack(e)},async onNoteOff({value:t}){this.endNote(t.identifier),await this.tone.ready,this.trackPlayer.triggerRelease()},startNote(t){this.animationLoop||(this.animationLoop=st(()=>{this._render&&this._render()})),this.openNotes.set(t,this.metronom.now())},endNote(t){var c;const e=[1,2,4,8,16,32].map(i=>[`${i}n`,`${i}t`,`${i}n.`]).flat().map(i=>[i,new(this.tone.getTone()).Time(i).toSeconds()]).sort((i,l)=>l[1]-i[1]),n=Math.max((this.metronom.now()-this.openNotes.get(t))/1e3,e[e.length-1][1]);this.openNotes.delete(t);const{Time:o}=this.tone.getTone();let r;this.inputNote?r=new o(this.inputNote):r=new o(e.map(([,i])=>i).find(i=>{const l=i*.2;return i-l<=n&&n<=i+l}));const s=this.metronom.getDuration();console.log({delay:s,name:t,time:r.toNotation()}),this.track.addNote(new re({delay:s,name:t,time:r.toNotation()})),this.openNotes.size<1&&((c=this.animationLoop)==null||c.stop(),this.animationLoop=null)},async onClickNote({note:t,selected:e}){await this.setup(),e&&t.getName()&&this.trackPlayer.triggerAttackRelease(t)},async onClickPlay(){await this.setup(),this.trackPlayer.play()},onClickPlause(){this.trackPlayer.pause()},onClickStop(){this.trackPlayer.stop()},onClickRestart(){this.trackPlayer.restart()},async onDownKeyboard(t){await this.setup(),this.startNote(t),this.trackPlayer.triggerAttack(t)},async onUpKeyboard(t){await this.tone.awaitReady,this.endNote(t),this.trackPlayer.triggerRelease()},reset(){this.track.reset()},onClickActivateMidi(){this.registerMidiListener()}}};function st(t){let e=0,n=0,o=!1;const r=s=>{const c=s-e;e=s,n+=c,t(s,n),o||requestAnimationFrame(r)};return requestAnimationFrame(r),{stop:()=>o=!0}}const rt={key:0,class:"keyboard"},it={class:"sheet"},at={class:"panel"};function lt(t,e,n,o,r,s){const c=M("keyboard"),i=M("navigation"),l=M("timeline-canvas"),d=M("metronom"),_=M("wb-env-fragment-footer");return f(),p("div",{class:x(["wb-disks-extras13-synthesizer-track",s.styleClasses])},[b("div",null,[b("div",null,[s.showKeyboard?(f(),p("div",rt,[w(c,L({disabled:o.trackPlayer.playing},s.keybordData,{onDown:s.onDownKeyboard,onUp:s.onUpKeyboard}),null,16,["disabled","onDown","onUp"]),o.hasMidi&&!r.midiControllerListener?(f(),p("div",{key:0,class:"midi-message",onClick:e[0]||(e[0]=(...v)=>s.onClickActivateMidi&&s.onClickActivateMidi(...v))},e[2]||(e[2]=[b("div",null,[b("div",null,[b("span",null,[W("Click here, or press "),b("strong",null,"Enter"),W(" to activate the Midi Keyboard!")])])],-1)]))):R("",!0)])):R("",!0)]),w(i,j(G(s.navigation)),null,16),b("div",it,[w(d,{model:o.metronom,onRender:s.onRender,onReady:s.onReady,onValue:e[1]||(e[1]=v=>o.track.setCurrentDuration(v))},{background:pe(({onRefresh:v})=>[w(l,L(s.timelineCanvasData,{clickable:"",onRefresh:v,"onNote:click":s.onClickNote}),null,16,["onRefresh","onNote:click"])]),_:1},8,["model","onRender","onReady"])]),b("div",at,[w(i,j(G(s.metronomNavigation)),null,16)])]),w(_,L(s.footerData,{"parent-layout":r.windowsModule.contentWrapper.layout}),null,16,["parent-layout"])],2)}const eo=Y(nt,[["render",lt],["__scopeId","data-v-4cbfd4ff"]]);export{eo as default};

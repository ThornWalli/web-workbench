var ht=Object.defineProperty;var Ie=t=>{throw TypeError(t)};var ct=(t,e,n)=>e in t?ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R=(t,e,n)=>ct(t,typeof e!="symbol"?e+"":e,n),Fe=(t,e,n)=>e.has(t)||Ie("Cannot "+n);var j=(t,e,n)=>(Fe(t,e,"read from private field"),n?n.call(t):e.get(t)),le=(t,e,n)=>e.has(t)?Ie("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),J=(t,e,n,i)=>(Fe(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);import{g as l,_ as ut,S as ae,h as vt,N as V,f as Ne}from"./BxO05Tpb.js";import{A as Re,M as dt,a as pt,d as C,t as G,s as Ve,c as Ue,b as qe,W as mt}from"./D3VVtp-3.js";import{P as ft,D as wt,a as yt,T as gt}from"./BhIZyK9R.js";import{C as T,B as $,a as bt,b as je}from"./uY512OOx.js";import{C as A,P as Je,a as zt,W as _t,b as Mt}from"./DOht_prs.js";import{r as f,t as a,v as c,W as Se,x as r,_ as E,i as z,o as De,X as Ze,C as P,J as ze,Y as I,Z as L,I as B,g as M,$ as et,a0 as tt,y as $e,z as S,A as te,a1 as St,G as X,F as _,a2 as Ct,a3 as xt,D as k,a4 as kt,Q as _e,a5 as Z,N as Me,a6 as nt,L as ne,a7 as Tt,E as Pt,a8 as Et,q as Ge}from"./Ch0O_PD7.js";import{g as Ye}from"./eWVB96m7.js";import{c as he,W as Ot}from"./3XbQufL3.js";import{g as Ht,a as Wt,b as Rt,c as Vt}from"./CFhzTvZQ.js";import{s as ot}from"./D8pHmECz.js";import{W as At}from"./BcU9zD8X.js";import{W as Bt}from"./Y4c6azFC.js";import{C as Dt}from"./CqG0niDR.js";import{f as ee}from"./DiMljdOs.js";import{W as $t}from"./4cdad17F.js";import{u as Lt}from"./10sAnKpN.js";import{u as It}from"./CENrF9bO.js";import{u as Ft}from"./BW_6Wfr_.js";import"./DwAjpAW9.js";import"./C5mdboMC.js";import"./GMYRXBC3.js";import"./BiYes1lM.js";import"./PIkGlXJS.js";import"./BrQUI1fL.js";import"./Bokpp9IN.js";import"./CVBYpffg.js";import"./CIdvROiH.js";import"./Ch1ekGp5.js";import"./BQV-5ZGw.js";import"./NjTd_2xk.js";import"./DvTq3dTW.js";function Nt(t){t=t||document.body,t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}function Ut(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function qt(t,e){t=t||document.body,Ae()?Ut():Nt(t)}function Ae(){return!!document.fullscreenElement}const jt=({core:t})=>[{name:["fullscreen"],description:"Toggle Fullscreen",args:[new Re({name:"set",description:"Set Fullscreen"}),new Re({name:"toggle",description:"Toggle Fullscreen",flag:!0}),new Re({name:"is",description:"check fullscreen",flag:!0})],async action({is:e,fullscreen:n,toggle:i}){if(e)return Ae();if(n||i){let s="Enter Fullscreen?";Ae()&&(s="Leave Fullscreen?"),await t.executeCommand(`openDialog "${s}" -confirm`)&&qt(document.body)}}}];var ce,Y,ue;class Gt{constructor(){le(this,ce);le(this,Y);le(this,ue);R(this,"current",f(null));J(this,ce,this.getCursor(A.WAIT)),this.current.value=J(this,ue,this.getCursor(A.POINTER_1))}setWait(e){!j(this,Y)&&e?(J(this,Y,this.current.value),this.current.value=j(this,ce)):(this.current.value=j(this,Y),J(this,Y,null))}getCursor(e){return new{[A.POINTER_1]:Je,[A.POINTER_MOONCITY]:zt,[A.WAIT]:_t,[A.CROSSHAIR]:Mt}[String(e)]}setCurrent(e){e?this.current.value=this.getCursor(e):this.current.value=j(this,ue)}}ce=new WeakMap,Y=new WeakMap,ue=new WeakMap;var oe;class st extends dt{constructor(n){const{core:i,contentEl:s}=Object.assign({core:null,contentEl:null},n);super({commands:jt,core:i});R(this,"defaultTheme",f(null));R(this,"currentTheme",f(null));R(this,"cursor",new Gt);le(this,oe);R(this,"sizes",{content:l(0,0)});R(this,"positions",{content:l(0,0)});R(this,"screenLayout",{size:l(0,0),position:l(0,0)});R(this,"contentLayout",{size:l(0,0),position:l(0,0)});if(J(this,oe,s),this.defaultTheme.value=this.currentTheme.value=this.getDefaultTheme(),window===void 0)throw new Error("ScreenControl is only for Browser");pt.then(this.onReady.bind(this)).catch(o=>{throw o})}destroy(){window.removeEventListener("resize",this.onResize.bind(this),!1)}updateContentLayout(n){const{x:i,y:s,width:o,height:h}=n.getBoundingClientRect();this.contentLayout={size:l(o,h),position:l(i,s)}}updateScreenLayout(n){const{x:i,y:s,width:o,height:h}=n.getBoundingClientRect();this.screenLayout={size:l(o,h),position:l(i,s)}}getDefaultTheme(){const n=this.core.config.get(T.THEME)||ft[String(wt)];return new yt("current",n)}setTheme(n){return this.currentTheme.value=n||this.getDefaultTheme()}onReady(){window.addEventListener("resize",this.onResize.bind(this),!1),this.onResize()}onResize(){if(j(this,oe)){const{x:n,y:i,width:s,height:o}=j(this,oe).getBoundingClientRect();this.positions.content=l(n,i),this.sizes.content=l(s,o)}}}oe=new WeakMap,R(st,"NAME","Screen");window.oncontextmenu=t=>{t.preventDefault()};const Yt="data:image/svg+xml,%3csvg%20class='wb_cursor_pointer'%20xmlns='http://www.w3.org/2000/svg'%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%3e%3cpath%20d='M0%2012h2v2h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2h-2V0H0z'%20/%3e%3cpath%20fill='%23f00'%20d='M2%202v10h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z'%20/%3e%3cpath%20fill='%23fff'%20d='M2%202v2h8v2H8v2h2v2h2v2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z'%20/%3e%3c/svg%3e",Xt={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 900 815"};function Qt(t,e){return a(),c("svg",Xt,e[0]||(e[0]=[Se('<path d="M887 5H13c-4.4 0-8 3.6-8 8v764c0 4.4 3.6 8 8 8h874c4.4 0 8-3.6 8-8V13c0-4.4-3.6-8-8-8m-97 633s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#aea59f;"></path><path d="M25 25v690h850V25zm765 613s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#928c7f;"></path><path d="M35 35v670h830V35zm755 603s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#837c72;"></path><path d="M813 72H87c-4.4 0-8 3.6-8 8v580c0 4.4 3.6 8 8 8h726c4.4 0 8-3.6 8-8V80c0-4.4-3.6-8-8-8m-23 566s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#615a52;"></path><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="opacity:.1;fill:#fff;"></path><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="opacity:.2;"></path><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="opacity:.1;"></path><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="opacity:.1;fill:#fff;"></path><linearGradient id="a" x1="670.572" x2="964.642" y1="283.613" y2="610.211" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="fill:url(#a);"></path><linearGradient id="b" x1="284.95" x2="615.999" y1="924.997" y2="557.329" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="fill:url(#b);"></path><linearGradient id="c" x1="-66.233" x2="229.922" y1="297.922" y2="594.078" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="fill:url(#c);"></path><linearGradient id="d" x1="265.69" x2="634.31" y1="334.62" y2="-34" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="fill:url(#d);"></path><linearGradient id="e" x1="284.95" x2="615.999" y1="924.997" y2="557.329" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="fill:url(#e);"></path><linearGradient id="f" x1="670.572" x2="964.642" y1="283.613" y2="610.211" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="fill:url(#f);"></path><linearGradient id="g" x1="265.69" x2="634.31" y1="334.62" y2="-34" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="fill:url(#g);"></path><linearGradient id="h" x1="-66.233" x2="229.922" y1="297.922" y2="594.078" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="fill:url(#h);"></path><path d="M70 785h760v25H70z" style="fill:#9d958a;"></path><path d="M887 5c4.4 0 8 3.6 8 8v764c0 4.4-3.6 8-8 8H13c-4.4 0-8-3.6-8-8V13c0-4.4 3.6-8 8-8zm0-5H13C5.8 0 0 5.8 0 13v764c0 7.2 5.8 13 13 13h874c7.2 0 13-5.8 13-13V13c0-7.2-5.8-13-13-13" style="fill:#7e776e;"></path><path d="M70 790h760v5H70z" style="opacity:.3;"></path><path d="M25 25h850v2H25zM33 33h834v2H33zM25 27h2v686h-2zM873 27h2v686h-2zM25 713h850v2H25zM33 705h834v2H33zM33 35h2v670h-2zM865 35h2v670h-2zM835 790h-5v20H70v-20H40v5h25v20h770v-20h25v-5zM343 715h2v70h-2z" style="opacity:.2;"></path><path d="M345 715h406v70H345zM753 715h66v70h-66z" style="opacity:.3;"></path><path d="M345 715v70h406v-70zm403 67H348v-64h400z" style="opacity:.1;"></path><path d="M343 713v74h410v-74zm408 72H345v-70h406z" style="fill:#757066;"></path><path d="M753 715v70h66v-70zm63 67h-60v-64h60z" style="opacity:.1;"></path><path d="M751 715h2v70h-2zM819 715h2v70h-2zM753 785h68v2h-68z" style="fill:#757066;"></path><path d="M751 713v74h70v-74zm68 72h-66v-70h66z" style="fill:#757066;"></path><path d="M25.3 738.9h133.6v31.2H25.3z" style="opacity:.2;fill:#fff;"></path><path d="M68.8 743.1c-.3.3-.6.6-.9.8h3.3l.2-.8zm15.7 0c-1.1 0-2.2.3-3.1.8h6.1c-.9-.5-1.9-.8-3-.8m17 0c-1.3 0-2.5.3-3.5.8h7.2c-1-.5-2.2-.8-3.7-.8m19.7.1-.6.7h4.2l.1-.7zM66.5 745c-.5.4-1 .8-1.5 1.1h5.8l.2-1.1zm13.3 0c-.1 0-.1.1 0 0-.4.4-.7.7-1 1.1h10.9c-.2-.4-.5-.7-.8-1l-.1-.1zm16.5 0c-.3.3-.7.7-.9 1.1h11.9c-.2-.4-.5-.8-.8-1.1zm23.4 0-1 1.1h5.6l.3-1.1zm-56.6 2.3c-.7.4-1.4.7-2.2 1.1h9.4l.2-1.1zm14.8 0c-.2.4-.4.7-.6 1.1h4.5c.1-.2.3-.5.4-.6.1-.2.3-.3.4-.5zm7.8 0q.15 0 0 0c.3.3.4.7.5 1.1h4.2c-.1-.4-.2-.8-.3-1.1zm9.2 0c-.1.4-.2.7-.3 1.1h4.1c.1-.4.3-.7.6-1l.1-.1zm8.3 0c.3.3.4.7.5 1.1h4.2c0-.4-.1-.8-.2-1.1zm14.6 0-1 1.1h7.1l.2-1.1zm-58 2.2-.3 1.1h5c.3-.2.7-.4 1-.6l-.1.6h4.4l.3-1.1zm17 0c-.2.3-.3.7-.4 1.1h4.5c.1-.4.3-.8.5-1.1zm9.6 0v.3c0 .2-.1.6-.1.8h4.4c0-.4 0-.8-.1-1.1zm8.2 0c0 .4.1.8.2 1.1h4c-.1-.3-.2-.7-.2-1.1zm9.2 0c-.1.4-.3.8-.6 1.1h4.2c.2-.4.3-.7.3-1.1zm12.1 0-.9 1.1h4.2l.2-.3-.1.3h4.1l.2-1.1zm-56.5 2.2-.2 1c.9-.2 1.9-.5 3-1zm5.8 0-.2 1.1h4.3l.3-1.1zm10.7 0c-.1.4-.2.7-.3 1.1h4.5c.1-.4.2-.8.3-1.1zm10.3 0c0 .4-.1.7-.2 1.1h4.5c0-.4.1-.7.1-1.1zm9.1 0c.3.4.6.8 1 1.1h9c.5-.3 1-.7 1.4-1.1h-5.1c-.3.1-.5.1-.8.1-.2 0-.4-.1-.6-.1zm18.7 0-1 1.1h4.2l1-1.1zm5.1 0-.3 1.1h4.1l.3-1.1zM64.7 754l-.2 1.1h4.4l.2-1.1zm10.7 0c-.1.4-.1.7-.2 1.1h4.5c.1-.4.1-.7.2-1.1zm10.5 0c-.1.4-.1.7-.2 1.1h4.5c.1-.4.2-.7.2-1.1zm9.6 0c-.5.3-1.1.7-1.5 1.1h11.7c-.3-.4-.7-.8-1.1-1.1zm16.6 0-1 1.1h4.2l1-1.1zm6.5 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.2 1.1h4.4l.2-1.1zm10.7 0c0 .4-.1.7-.1 1.1h4.4c0-.4.1-.7.1-1.1zm10.5 0c-.1.4-.2.8-.3 1.1h4.5c.1-.4.3-.7.3-1.1zm7.8 0c-.2.4-.4.7-.6 1.1h4.5c.1-.3.3-.6.5-.8l.3-.3zm8.9 0c.2.3.4.7.4 1.1h4.2c-.1-.4-.2-.8-.3-1.1zm8.1 0-.9 1.1h4.2l1-1.1zm8 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.3 1.1h4.4l.3-1.1zm11 0c0 .4 0 .8.1 1.1h4.2v-.3c0-.2.1-.5.1-.8zm10 0c-.1.4-.3.8-.4 1.1h4.5c.2-.4.3-.7.4-1.1zm7.6 0c-.1.4-.1.7-.1 1.1h4.3c0-.4.1-.8.1-1.1zm10.1 0c0 .4 0 .8-.1 1.1h4.3c.1-.4.1-.7.1-1.1zm6.5 0-.3 1.1h15.6l.3-1.1zm-45.7 2.2-.3 1.1h4.4l.3-1.1zm11.8 0c.1.4.2.8.3 1.1h4.4l-.1-.1c-.2-.3-.3-.6-.4-1zm8.7 0c-.1.2-.3.5-.4.6l-.5.5h4.8c.2-.3.4-.7.6-1.1zm8.5 0c0 .4.1.8.2 1.1h4.7c-.3-.3-.4-.7-.5-1.1zm9.6 0c-.1.1-.1.2-.2.3-.2.3-.3.6-.6.8h4.9c.2-.4.3-.7.4-1.1zm6.6 0-.1.3h8.8l-.1.8h4.1l.1-.8h2.7l.1-.3zm-45.7 2.3-.2 1.1H67l.2-1.1zm13.1 0c.2.4.5.8.8 1.1H86l.1-.1c.3-.3.6-.7.9-1zm17.1 0c.2.4.4.8.8 1.1h10.4c.4-.3.7-.7 1-1l.1-.1zm23.8 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.1.4h4.4l.1-.4zm15.6 0c.9.5 1.9.8 3.1.8 1.1 0 2.2-.3 3.1-.8zm17.3 0c1 .5 2.2.8 3.5.8 1.4 0 2.7-.3 3.8-.8zm21 0-.1.4h4.1l.1-.4z" style="fill:#2c5aa0;"></path><path d="M790 102S620 87 450 87s-340 15-340 15-10 134-10 268 10 268 10 268 170 15 340 15 340-15 340-15 10-134 10-268-10-268-10-268z" style="fill:none;stroke:#333;stroke-width:1.5px;stroke-miterlimit:10;"></path>',37)]))}const Kt={render:Qt},Jt={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer"};function Zt(t,e){return a(),c("svg",Jt,e[0]||(e[0]=[r("path",{d:"M0 12h2v2h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2h-2V0H0z"},null,-1),r("path",{fill:"red",d:"M2 2v10h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z"},null,-1),r("path",{fill:"#fff",d:"M2 2v2h8v2H8v2h2v2h2v2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z"},null,-1)]))}const en={render:Zt},tn={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"26",class:"wb_cursor_pointer_mooncity"};function nn(t,e){return a(),c("svg",tn,e[0]||(e[0]=[r("path",{fill:"#0666cc",d:"M2 2h2v2H2zm2 2h2v2H4zm2 2h2v2H6zm2 2h2v2H8zm6 6v-2h-2v-2h-2v4h2zm-6 0h2v4H8zm2 4h2v4h-2zm0 6h2v2h-2zm2-2h2v2h-2z"},null,-1),r("path",{fill:"#0688cc",d:"M8 18h2v4H8zm2-4v-4H8V8H6V6H4V4H2v12h4v2h2v-4zm0 8h2v2h-2z"},null,-1),r("path",{fill:"#0accff",d:"M2 16V0H0v20h2v-2h4v-2zm4 2h2v4H6zm2 4h2v4H8z"},null,-1)]))}const on={render:nn},sn={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"48",class:"wb_cursor_wait"};function rn(t,e){return a(),c("svg",sn,e[0]||(e[0]=[r("path",{d:"M32 20v-4h-2v-4h-2v-2h-2V6h-2V4h-2V2h-2v2h-2V2h-2V0h-4v2h-2v2H6v2H4v2H2v6H0v2h2v4h2v2H2v2h2v2h2v2h2v2h4v2h-2v2H8v2h2v2h2v2h4v4h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-4h2v-2h-2v-2h4v-2h2v-2h2v-2h2v-4h2v-2z"},null,-1),r("path",{fill:"red",d:"M30 20v-4h-2v-4h-2v-2h-2V6h-2V4h-2v2h-2V4h-2V2h-4v2h-2v2H6v2H4v6H2v2h2v4h2v2H4v2h2v2h2v2h4v2h4v2h-4v2h-2v2h2v2h4v-2h2v2h2v-2h2v-2h-4v-2h4v-2h4v-2h2v-2h2v-4h2v-2zm-8 20h-4v4h2v2h2v-2h2v-2h-2z"},null,-1),r("path",{fill:"#fff",d:"M18 18v2h4v2h-2v2h-2v2h8v-2h-4v-2h2v-2h2v-2zM8 10v2h4v2h-2v2H8v2h8v-2h-4v-2h2v-2h2v-2z"},null,-1)]))}const ln={render:rn},an={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer_crosshair"};function hn(t,e){return a(),c("svg",an,e[0]||(e[0]=[r("path",{d:"M10 0h2v8h-2zM10 14h2v8h-2zM0 10h8v2H0zM14 10h8v2h-8z"},null,-1),r("path",{d:"M10 10h1v1h-1z",class:"crosshair-center"},null,-1)]))}const cn={render:hn},un={__name:"Cursor",props:{parentLayout:{type:Object,default(){return{position:l(5,5)}}},cursor:{type:Object,default(){return new Je}},offset:{type:ut,default(){return l()}}},setup(t){const e=t,n=f(l()),i=f(null),s=f(null),o=z(()=>({[A.POINTER_1]:en,[A.POINTER_MOONCITY]:on,[A.WAIT]:ln,[A.CROSSHAIR]:cn})[e.cursor.name]),h=z(()=>Object.assign(e.cursor.toCSSVars(),{"--position-x":`${n.value.x}px`,"--position-y":`${n.value.y}px`})),u=z(()=>({[`cursor-${e.cursor.name}`]:e.cursor.name}));De(()=>{i.value=[C.getPointerMove().subscribe(p)]}),Ze(()=>{i.value.forEach(v=>!v.unsubscribe())});const p=v=>{G(v),window.cancelAnimationFrame(s.value),s.value=window.requestAnimationFrame(()=>{n.value=l(()=>Math.round(Math.min(Math.max(l(v)-e.parentLayout.position-e.offset,0),e.parentLayout.size)))})};return(v,y)=>(a(),c("i",{class:I(["wb-env-atom-cursor",u.value]),style:L(h.value)},[(a(),P(ze(o.value)))],6))}},vn=E(un,[["__scopeId","data-v-afcde034"]]);function dn(t,e){const{x:n,y:i,width:s,height:o}=e,h=l(n,i),u=l(()=>l(s,o)/2),p=l(t.x,t.y);return l(()=>(p-h-u)/u)}function Be(t,e,n,i,s){if(t===0||t===1)return t;const o=(i-n)/2+n,h=e(o);return Math.abs(h-t)<s?o:h>t?Be(t,e,n,o,s):Be(t,e,o,i,s)}function pn(t,e){const n=new Array(e+1).fill(void 0);return i=>{const s=Math.round(i*e);let o=n[Number(s)];return o===void 0&&(o=t(s/e),n[Number(s)]=o),o}}function mn(t=fn,e=0,n=1,i=1e-5){return pn(o=>Be(o,t,e,n,i),Math.round(1/i))}function fn(t){return t}const wn={props:{styleType:{type:String,default:null},name:{type:String,default:"value"},model:{type:Object,default(){return{value:0}}},min:{type:Number,default:0},max:{type:Number,default:100},easing:{type:Function,default(t){return t}},circumference:{type:Number,default(){return Math.PI*2}}},data(){return{active:!1,subscription:new ae,reverse:mn(this.easing),offsetRad:0,startRad:0,currentRad:0}},computed:{styleClasses(){return{"transition-active":this.active,[`type-${this.styleType}`]:this.styleType}},style(){return{"--rad":this.progress*2*Math.PI*this.range}},range(){return this.circumference/(Math.PI*2)},circumferenceCenter(){return this.circumference/2},progress(){return this.reverse(this.value/this.max)},value:{get(){return this.model[this.name]},set(t){this.model[this.name]=t}}},unmounted(){this.resetSubscriptions()},methods:{resetSubscriptions(){this.subscription.unsubscribe(),this.subscription=new ae,this.active=!1},onPointerDown(t){this.subscription.add(C.getPointerMove().subscribe(this.onPointerMove.bind(this)),C.getPointerUp().subscribe(this.onPointerUp.bind(this))),this.active=!0,this.startNormRad=this.getNormRadFromPosition(t),this.startNormValue=this.value/this.max},getNormRadFromPosition(t){const e=Ht(this.$el),n=dn(t,this.$el.getBoundingClientRect()),i=Wt(n,-e-Math.PI-this.circumferenceCenter),s=Rt(i)-Math.PI;return(Vt(s/this.circumferenceCenter,-1,1)+1)/2},onPointerMove(t){let e=this.getNormRadFromPosition(t);const n=e-this.startNormRad;e=Math.min(Math.max(this.startNormValue+n,0),1),Math.abs(this.progress-e)<.5?this.value=this.easing(e)*this.max:this.value=Math.round(this.progress)*this.max},onPointerUp(){this.resetSubscriptions()}}},yn={class:"handle-wrapper"};function gn(t,e,n,i,s,o){return a(),c("div",{class:I(["wb-atom-radial-slider",o.styleClasses]),"touch-action":"none",style:L(o.style)},[r("div",yn,[r("div",{class:"handle",onPointerdown:e[0]||(e[0]=(...h)=>o.onPointerDown&&o.onPointerDown(...h))},null,32),e[1]||(e[1]=r("div",{class:"indicator"},null,-1))])],6)}const bn=E(wn,[["render",gn],["__scopeId","data-v-41cf139c"]]),zn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 105 80"};function _n(t,e){return a(),c("svg",zn,e[0]||(e[0]=[r("path",{d:"M45 11c15.24 0 30.17.93 37.63 1.48C83.18 18.43 84 29.06 84 40c0 10.93-.82 21.56-1.37 27.52C75.16 68.07 60.24 69 45 69c-15.14 0-29.97-.92-37.48-1.47C6.96 59.88 6 45.75 6 40s.96-19.88 1.52-27.53C15.03 11.92 29.86 11 45 11m0-6C22.98 5 1.91 6.89 1.91 6.89S0 31.64 0 40s1.91 33.11 1.91 33.11S22.98 75 45 75s43.09-1.89 43.09-1.89S90 57.03 90 40 88.09 6.89 88.09 6.89 67.02 5 45 5"},null,-1),r("path",{d:"M70 22.9c11.11 0 22 .53 28.08.88.42 3.92.92 9.98.92 16.22 0 6.22-.51 12.29-.92 16.22-6.07.36-16.96.88-28.08.88-11.02 0-21.83-.52-27.94-.87C41.62 51.17 41 43.33 41 40s.62-11.17 1.06-16.23c6.1-.35 16.91-.87 27.94-.87m0-5.4c-17.13 0-33.51 1.22-33.51 1.22S35 34.63 35 40s1.49 21.28 1.49 21.28S52.87 62.5 70 62.5s33.51-1.22 33.51-1.22S105 50.94 105 40s-1.49-21.28-1.49-21.28S87.13 17.5 70 17.5"},null,-1)]))}const Mn={render:_n},Sn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Cn(t,e){return a(),c("svg",Sn,e[0]||(e[0]=[r("path",{d:"M50 31c10.48 0 19 8.52 19 19s-8.52 19-19 19-19-8.52-19-19 8.52-19 19-19m0-6c-13.81 0-25 11.19-25 25s11.19 25 25 25 25-11.19 25-25-11.19-25-25-25M50 100c-1.66 0-3-1.34-3-3V83c0-1.66 1.34-3 3-3s3 1.34 3 3v14c0 1.66-1.34 3-3 3M50 20c-1.66 0-3-1.34-3-3V3c0-1.66 1.34-3 3-3s3 1.34 3 3v14c0 1.66-1.34 3-3 3M85.36 85.36a3 3 0 0 1-4.24 0l-9.9-9.9a3 3 0 0 1 0-4.24 3 3 0 0 1 4.24 0l9.9 9.9c1.17 1.16 1.17 3.06 0 4.24M28.79 28.79a3 3 0 0 1-4.24 0l-9.9-9.9a3 3 0 0 1 0-4.24 3 3 0 0 1 4.24 0l9.9 9.9a3 3 0 0 1 0 4.24M14.64 85.36a3 3 0 0 1 0-4.24l9.9-9.9a3 3 0 0 1 4.24 0 3 3 0 0 1 0 4.24l-9.9 9.9c-1.16 1.17-3.06 1.17-4.24 0M71.21 28.79a3 3 0 0 1 0-4.24l9.9-9.9a3 3 0 0 1 4.24 0 3 3 0 0 1 0 4.24l-9.9 9.9a3 3 0 0 1-4.24 0M100 50c0 1.66-1.34 3-3 3H83c-1.66 0-3-1.34-3-3s1.34-3 3-3h14c1.66 0 3 1.34 3 3M20 50c0 1.66-1.34 3-3 3H3c-1.66 0-3-1.34-3-3s1.34-3 3-3h14c1.66 0 3 1.34 3 3"},null,-1)]))}const xn={render:Cn},kn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Tn(t,e){return a(),c("svg",kn,e[0]||(e[0]=[r("path",{d:"M50 6c24.26 0 44 19.74 44 44S74.26 94 50 94 6 74.26 6 50 25.74 6 50 6m0-6C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),r("path",{d:"M50 0v100c27.61 0 50-22.39 50-50S77.61 0 50 0"},null,-1)]))}const Pn={render:Tn},En={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function On(t,e){return a(),c("svg",En,e[0]||(e[0]=[r("path",{fill:"none",d:"M62 54v20c5.52 0 10-4.48 10-10s-4.48-10-10-10"},null,-1),r("path",{d:"M50 6c24.26 0 44 19.74 44 44S74.26 94 50 94 6 74.26 6 50 25.74 6 50 6m0-6C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),r("circle",{cx:"30",cy:"64",r:"10"},null,-1),r("path",{d:"M43 24c0 4.48 2.94 8.27 7 9.54V14.46c-4.06 1.27-7 5.06-7 9.54M50 0v14.46c.95-.3 1.95-.46 3-.46 5.52 0 10 4.48 10 10s-4.48 10-10 10c-1.05 0-2.05-.16-3-.46V100c27.61 0 50-22.39 50-50S77.61 0 50 0m25 68c-5.52 0-10-4.48-10-10s4.48-10 10-10 10 4.48 10 10-4.48 10-10 10"},null,-1)]))}const Hn={render:On},Wn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 80"};function Rn(t,e){return a(),c("svg",Wn,e[0]||(e[0]=[r("path",{d:"M50 11c15.24 0 30.17.93 37.63 1.48C88.18 18.43 89 29.06 89 40c0 10.93-.82 21.56-1.37 27.52C80.16 68.07 65.24 69 50 69c-15.14 0-29.97-.92-37.48-1.47C11.96 59.88 11 45.75 11 40s.96-19.88 1.52-27.53C20.03 11.92 34.86 11 50 11m0-6C27.98 5 6.91 6.89 6.91 6.89S5 31.64 5 40s1.91 33.11 1.91 33.11S27.98 75 50 75s43.09-1.89 43.09-1.89S95 57.03 95 40 93.09 6.89 93.09 6.89 72.02 5 50 5"},null,-1),r("path",{d:"M49 69V10h16L54 69z"},null,-1)]))}const Vn={render:Rn},An={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Bn(t,e){return a(),c("svg",An,e[0]||(e[0]=[r("path",{d:"M94 34.71V69H25.42zm6-9.71L0 75h100z"},null,-1)]))}const Dn={render:Bn},$n={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"};function Ln(t,e){return a(),c("svg",$n,e[0]||(e[0]=[r("path",{d:"M7.5 3.5v4",style:{stroke:"#000","stroke-linecap":"round","stroke-miterlimit":"10"}},null,-1),r("path",{d:"M7.5-.5v16M-.5 7.5h16M1.84 1.84l11.32 11.32M1.84 13.16 13.16 1.84",style:{fill:"none",stroke:"#faf100","stroke-miterlimit":"10"}},null,-1)]))}const In={render:Ln},Fn={components:{SvgScreenPanelStickTexture:In,WbRadialSlider:bn},props:{model:{type:Object,default(){return{}}}},data(){return{clickMultiplicator:1,clickInterval:null}},computed:{buttons(){return[{name:"horizontalCentering",model:this.model,svg:B(Mn),label:"H. Centering",min:0,max:1,step:.01},{name:"brightness",model:this.model,svg:B(xn),label:"Brightness",min:0,max:1,step:.01},{name:"contrast",model:this.model,svg:B(Pn),label:"Contrast",min:0,max:1,step:.01},{name:"color",model:this.model,svg:B(Hn),label:"Color",min:0,max:1,step:.01},{name:"sharpness",model:this.model,svg:B(Vn),label:"Sharpness",min:0,max:1,step:.01},{name:"soundVolume",model:this.model,svg:B(Dn),label:"Volume",min:0,max:1,step:.01}]}},methods:{onPointerDown(t,e,n){t.preventDefault(),window.clearInterval(this.clickInterval),this.clickInterval=ot(()=>{const i=e.step*this.clickMultiplicator;n?e.model[e.name]=Math.min(e.model[e.name]+i,e.max):e.model[e.name]=Math.max(e.model[e.name]-i,e.min),this.clickMultiplicator=Math.min(this.clickMultiplicator+1,10)},125)},onPointerUp(t){t.preventDefault(),window.clearInterval(this.clickInterval),this.clickMultiplicator=1}}},Nn={class:"wb-env-screen-panel"},Un=["disabled"],qn={class:"label"},jn=["onPointerdown"],Gn={class:"knob"},Yn=["onPointerdown"];function Xn(t,e,n,i,s,o){const h=M("svg-screen-panel-stick-texture"),u=M("wb-radial-slider");return a(),c("div",Nn,[(a(!0),c(et,null,tt(o.buttons,(p,v)=>(a(),c("div",{key:v,class:"control",disabled:p.disabled},[(a(),P(ze(p.svg))),r("span",qn,$e(p.label),1),r("div",null,[r("button",{onPointerdown:y=>o.onPointerDown(y,p,!1),onPointerup:e[0]||(e[0]=(...y)=>o.onPointerUp&&o.onPointerUp(...y))},null,40,jn),r("div",Gn,[r("i",{style:L({"--value":p.model[p.name]})},[r("div",null,[S(h),e[2]||(e[2]=r("span",null,null,-1))])],4),S(u,{"style-type":"screen-panel-control-knob",min:0,max:1,model:n.model,name:p.name},null,8,["model","name"])]),r("button",{onPointerdown:y=>o.onPointerDown(y,p,!0),onPointerup:e[1]||(e[1]=(...y)=>o.onPointerUp&&o.onPointerUp(...y))},null,40,Yn)])],8,Un))),128))])}const Qn=E(Fn,[["render",Xn],["__scopeId","data-v-b6d53b79"]]),Kn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Jn(t,e){return a(),c("svg",Kn,e[0]||(e[0]=[r("path",{d:"M50 8c23.16 0 42 18.84 42 42S73.16 92 50 92 8 73.16 8 50 26.84 8 50 8m0-8C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),r("path",{d:"M50 77c-2.21 0-4-1.79-4-4V27c0-2.21 1.79-4 4-4s4 1.79 4 4v46c0 2.21-1.79 4-4 4"},null,-1)]))}const Zn={render:Jn},eo={components:{SvgScreenPower:Zn},props:{active:{type:Boolean,default:!1}},emits:["click"],data(){return{broken:!1,clickCounter:0}},computed:{styleClasses(){return{active:this.active,broken:this.broken}}},methods:{onClickBackground(t){this.onClick(t)},onClickForeground(t){this.broken||(this.clickCounter>=10?this.broken=!0:(this.onClick(t),this.clickCounter++),window.clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{this.clickCounter=0},500))},onClick(t){this.$emit("click",t)}}},to={class:"background"};function no(t,e,n,i,s,o){const h=M("svg-screen-power");return a(),c("div",{class:I(["wb-env-screen-power-button",o.styleClasses])},[r("div",to,[e[2]||(e[2]=r("i",{class:"light"},null,-1)),r("button",{onClick:e[0]||(e[0]=(...u)=>o.onClickBackground&&o.onClickBackground(...u))})]),r("button",{class:"foreground",onClick:e[1]||(e[1]=(...u)=>o.onClickForeground&&o.onClickForeground(...u))},[e[3]||(e[3]=r("i",{class:"light"},null,-1)),e[4]||(e[4]=r("span",null,"POWER",-1)),S(h)])],2)}const oo=E(eo,[["render",no],["__scopeId","data-v-7edca99a"]]),so={components:{SvgScreen:Kt,WbEnvAtomCursor:vn,WbEnvScreenPanel:Qn,WbEnvScreenPowerButton:oo},props:{core:{type:Object,default(){return null}},theme:{type:Object,default(){return null}},cursor:{type:Object,default(){return null}},hasScanLines:{type:Boolean,default:!1},hasRealLook:{type:Boolean,default:!1},bootSequence:{type:[String,Number],default:$.SEQUENCE_3},frameActive:{type:Boolean,default:!0},hasActiveAnimation:{type:Boolean,default:!0},model:{type:Object,default(){return{contrast:0,brightness:0,color:0,sharpness:-1,horizontalCentering:0,soundVolume:1}}}},emits:["toggleScreenActive"],data(){return{openPanel:!1,screenActive:!1,turnOptions:{name:"",duration:0,resolve:null},animate:!1,wrapperPosition:null,containerLayout:null}},computed:{cursorOffset(){return l(()=>this.containerLayout.size*l(this.model.horizontalCentering-.5,0))},currentCursor(){return this.cursor?this.cursor.current:null},screenBackground(){return this.theme.colors.screen.background},styleClasses(){return{animate:this.animate,"active-animation":this.hasActiveAnimation,"frame-active":this.frameActive,"screen-active":this.screenActive,"real-look":this.hasRealLook,"open-panel":this.openPanel,["boot-sequence-"+this.bootSequence]:!0}},style(){return{"--turn-duration":this.turnOptions.duration+"ms","--horizontal-centering":this.model.horizontalCentering-.5}},manipulationStyle(){return{"backdrop-filter":[`contrast(${this.model.contrast*2*100}%)`,`brightness(${this.model.brightness*2*100}%)`,`saturate(${this.model.color*2*100}%)`,`blur(${this.model.sharpness*50}px)`].join(" ")}},wrapperStyle(){if(this.wrapperPosition){const t=l(()=>Math.round(this.wrapperPosition));return{"--wrapper-position-x":t.x+"px","--wrapper-position-y":t.y+"px"}}return{}}},watch:{model:{handler(t){he.config.set(T.SCREEN_CONFIG,t)},deep:!0},screenActive(t){this.$emit("toggleScreenActive",t)},frameActive(){this.$nextTick(()=>{this.onResize()})},screenBackground(t){document.querySelector('[name="theme-color"]').setAttribute("content",t)},bootSequence(){let t;this.bootSequence<4?t=getComputedStyle(document.documentElement).getPropertyValue("--color-boot-sequence-"+this.bootSequence):t=getComputedStyle(document.documentElement).getPropertyValue("--color-background"),document.querySelector('[name="theme-color"]').setAttribute("content",t)}},mounted(){this.subscriptions=[C.resize.subscribe(this.onResize.bind(this))],this.onResize()},methods:{afterEnterTurn(){this.turnOptions.resolve&&this.turnOptions.resolve()},afterLeaveTurn(){this.turnOptions.resolve&&this.turnOptions.resolve()},onResize(){this.wrapperPosition=l(()=>(l(window.innerWidth,window.innerHeight)-Ye(this.$refs.wrapper).size)/2),this.$nextTick(()=>{this.containerLayout=Ye(this.$refs.container)})},turnOn(t=4e3){if(this.animate)return;this.hasActiveAnimation||(t=0),this.turnOptions.duration=t,this.animate=!0;const e=this.$nextTick;return new Promise(n=>{this.turnOptions.resolve=n,e(()=>this.screenActive=!0)}).then(()=>(this.animate=!1,!0)).catch(n=>{throw n})},turnOff(t=550){if(this.animate)return;this.hasActiveAnimation||(t=0),this.turnOptions.duration=t,this.animate=!0;const e=this.$nextTick;return new Promise(n=>{this.turnOptions.resolve=n,e(()=>this.screenActive=!1)}).then(()=>(this.animate=!1,!0)).catch(n=>{throw n})},togglePanel(t=!this.openPanel){this.openPanel=t},onClickPanelCover(){this.togglePanel()},onClickPowerButton(){this.screenActive?this.turnOff():this.turnOn()}}},ro={ref:"container",class:"container"},io={ref:"background",class:"background"},lo={class:"content"},ao={key:0,class:"scanlines"},ho={key:0,class:"frame"},co={class:"panel"};function uo(t,e,n,i,s,o){const h=M("wb-env-atom-cursor"),u=M("svg-screen"),p=M("wb-env-screen-power-button"),v=M("wb-env-screen-panel");return a(),c("div",{class:I(["wb-env-screen",o.styleClasses]),style:L(o.style)},[r("div",{ref:"wrapper",class:"wrapper",style:L(o.wrapperStyle)},[r("div",ro,[S(xt,{name:"animation-turn",onAfterEnter:o.afterEnterTurn,onAfterLeave:o.afterLeaveTurn},{default:te(()=>[St(r("div",io,[r("div",lo,[X(t.$slots,"default",{},void 0,!0)]),n.hasScanLines&&s.screenActive?(a(),c("div",ao,e[1]||(e[1]=[r("div",null,null,-1)]))):_("",!0),o.currentCursor&&s.containerLayout?(a(),P(h,{key:1,class:"cursor","parent-layout":s.containerLayout,offset:o.cursorOffset,cursor:o.currentCursor},null,8,["parent-layout","offset","cursor"])):_("",!0),r("div",{class:"manipulation",style:L(o.manipulationStyle)},null,4)],512),[[Ct,s.screenActive]])]),_:3},8,["onAfterEnter","onAfterLeave"]),X(t.$slots,"container",{containerLayout:s.containerLayout},void 0,!0)],512),n.frameActive?(a(),c("div",ho,[S(u),S(p,{active:s.screenActive,class:"power-button",options:n.model,onClick:o.onClickPowerButton},null,8,["active","options","onClick"]),r("div",co,[S(v,{model:n.model},null,8,["model"]),r("button",{class:"cover",onClick:e[0]||(e[0]=(...y)=>o.onClickPanelCover&&o.onClickPanelCover(...y))},e[2]||(e[2]=[r("span",null,"Push",-1)]))])])):_("",!0)],4)],6)}const vo=E(so,[["render",uo],["__scopeId","data-v-abb5a9f8"]]),po={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"260",height:"262"};function mo(t,e){return a(),c("svg",po,e[0]||(e[0]=[Se('<path d="M258 24v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h-2V4h-2V2h-2V0H48v88h-2v2h-4v2h-4v2h-4v2h-2v2h-2v4h-2v4h-2v4h-2v6h-2v4h-2v2h-2v2h-4v2h-2v2h-2v2H8v2H6v4H4v2H2v4H0v58h2v62h102v-22h2v-2h4v-2h4v-2h4v-2h2v-2h2v-4h2v-2h2v-4h2v-2h2v-4h2v-2h4v-2h2v-2h2v-2h2v-2h2v-4h2v-2h2v-4h2v-4h2v-4h2v-4h2v-10h104V24z"></path><path fill="#77c" d="M54 4v118h4v-2h2v-2h4v-2h2v-2h2v-2h4V92h14v-4h22v2h2v2h128v76h16V24h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h-2V4z"></path><g fill="#fff"><path d="M116 96v24h-2v2h-2v2h-2v2h-4v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-4v2h-2v2h-2v22h2v2h144V96zM80 100h2v-4h-4v6h2zM92 172h-2v6h4v-2h2v-2h-3zM116 186v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2H96v2h4v2h4v2h2v2h2v2h2v2h2v2zM138 174h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h4v-2h6v2h4v2h2v2h2v4h-2v4h4v-4h2v-2h2v-4h2v-4h2v-4h2v-4h2v-10h-14z"></path><path d="M134 196v-2h-4v-2h-6v2h-4v6h2v4h8v-2h4v-2h2v-4zM88 182h2v8h-2zM102 192h6v-4h2v-2h-2v-2h-2v-2h-2v-2h-8v2h-4v6h2v2h8zM90 190h4v2h-4zM94 192h8v2h-8zM130 204h4v2h-4zM130 208v4h2v-2h4v-2h2v-2h-4v2zM116 200h2v2h-2zM104 236h2v2h-2zM120 206v-2h-2v2h1z"></path><path d="M120 208h-2v-2h-2v-4h-2v-2h-2v-4H94v-2h-4v16h-2v2h-2v2h-2v2h-2v2h-2v2H66v38h34v-22h4v-2h6v-2h4v-2h4v-4h2v-2h2v-4h2v-2h2v-4h2v-4h-8z"></path><path d="M120 206h2v2h-2zM102 92h-8v-2h-6v4h-2v6h-2v4h2v2h2v2h2v2h14V94h-2zM38 134h2v2h-2z"></path><path d="M80 214h2v-2h2v-2h2v-40h-2v-4h-2v-22h2v-2h2v-2h2v-2h4v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2h2v-2h2V94h-4v-2h-4v2h2v2h2v16h-2v2H90v-2h-2v-2h-2v-2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-4v2h-4v2h-4v2h-4v2h-4v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v-4h2v-2h2v-2h4v-2h2v-2h2v-2h4v-2h2v-2h2v-2h2v-2h-6v-2h-2v-2h-2v-2h-2v-2h2v2h4v2h4v2h6v-2h4V92h-4v2h-2v2h-4v2h-4v4h-2v4h-2v4h-2v4h-2v6h-2v2h-2v2h-2v2h-4v2h-2v2h-2v2h-2v4H8v2H6v4H4v56h2v60h56v-42h18z"></path><path d="M30 140h2v2h-2zM22 146h2v2h-2zM54 124.12v1.85l4 .03v-1.88z"></path></g><path fill="#333" d="M144 8h24v30h-24z"></path><g fill="#77c"><path d="M130 118v-2h-4v-2h-4v2h2v2zM132 122h6v-2h-2v-6h2v-4h2v-2h-10v2h2v4h-2v2h2zM152 112h2v-2h4v-2h-14v2h4v2h-2v2h6z"></path><path d="M144 118h10v-2h2v-4h-2v2h-2v2h-6v-2h-4v2h2zM162 118h12v-10h-6v2h-2v2h4v4h-6v-4h-4v4h2zM178 116h2v2h10v-2h2v-4h-14zm4-2h6v2h-6zM210 120v-8h-2v-2h-2v-2h-12v2h-2v2h4v4h2v2h6v-2h-4v-4h6v2h-2v2h2v6h6v-2zM198 130h-2v2h-4v-2h-2v-2h-4v14h4v-8h2v2h4v-2h2v8h4v-14h-4zM180 128h-10v2h-2v6h2v2h10v-2h2v-6h-2zm-2 8h-6v-6h6zM156 130h2v4h-2v2h2v2h6v-2h-2v-6h2v-2h-8zM152 132h-4v4h2v2h6v-2h-4zM140 132h-4v-2h-2v-2h-4v2h2v2h2v2h-2v2h-2v2h4v-2h2v-2h4v8h6v-2h-2v-10h2v-2h-6z"></path></g><g fill="#bbb"><path d="M146 160v-2h2v-6h-2v-2h-4v-2h-24v2h2v2h-8v-2h2v-2h-12v2h4v14h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v4h-2v2h10v-2h-2v-4h2v2h2v2h2v4h-2v2h-2v2h-4v-2h-2v-2h-2v6h14v-2h2v-2zm-30-4h-2v2h-2v-4h4z"></path><path d="M210 148v2h2v2h-8v-2h2v-2h-20v2h4v2h-2v2h-2v2h-2v-8h-6v4h-2v2h-2v2h-2v-4h2v-2h2v-2h-28v2h4v6h-2v4h-4v2h-2v2h28v-2h2v-2h2v-2h2v6h10v-2h-2v-4h2v-2h2v-2h2v-2h4v-2h2v14h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2zm-44 8h-2v4h-2v2h-8v-2h2v-4h2v-4h2v-2h6zm42 0h-2v2h-2v-4h4z"></path></g><path d="M108 164h2v-2h2v-2h2v-2h-6zM140 160h-2v2h4v-2h2v-2h-4zM130 158h-2v6h10v-2h-8zM154 158h-4v4h-4v2h10v-2h-2zM170 160h-2v-2h-4v4h-2v2h8v-2h2v-2h2v-2h-4zM178 164h8v-2h-2v-2h2v-2h-8zM200 158v6h2v-2h2v-2h2v-2zM98 0v48h112V0zm106 44H104V4h100z"></path><path d="M198 8h-24v30h24zm-6 26h-12V12h12z"></path><path fill="#bbb" d="M104 4v40h100V4zm94 34h-24V8h24z"></path><path d="M188 182h4v2h-2v2h-2v2h-2v2h-2v2h-2v-10h2v-2h-10v2h2v18h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2h-14zM218 180h-6v2h-2v2h-2v2h4v10h-4v4h14v-4h-4zM226 196h4v4h-4zM252 188v-2h2v-2h-2v-2h-2v-2h-12v2h-2v2h-2v2h8v-2h4v4h-4v4h4v4h-4v-2h-8v2h2v2h2v2h12v-2h2v-2h2v-2h-2v-2h-2v-4z"></path>',10)]))}const fo={render:mo},wo={class:"wb-env-no-disk"},yo={__name:"NoDisk",setup(t){return(e,n)=>(a(),c("div",wo,[S(k(fo))]))}},go=E(yo,[["__scopeId","data-v-cb5202d9"]]),bo={components:{WbEnvMoleculeContextMenu:Bt},props:{parentLayout:{type:Object,default(){return{size:l(window.innerWidth,window.innerHeight)}}},title:{type:String,default:"Web-Workbench release. Version 1.3"},showCover:{type:Boolean,default:!1},items:{type:Array,default(){return he.modules.windows.contextMenu.activeItems.items}}},emits:["inputContextMenu"],data(){return{cover:!1}},methods:{onUpdateModelValueContextMenu(...t){this.$emit("inputContextMenu",...t)},onMouseOut(){this.cover=!1},onPointerDown(t){t.which===3&&(t.preventDefault(),this.cover=!0)},onPointerUp(t){t.which===3&&(this.cover=!1)}}},zo={key:0,ref:"menu",class:"menu"},_o={key:1,class:"cover"};function Mo(t,e,n,i,s,o){const h=M("wb-env-molecule-context-menu");return a(),c("header",{class:"wb-env-molecule-header",onMouseout:e[0]||(e[0]=(...u)=>o.onMouseOut&&o.onMouseOut(...u)),onPointerdown:e[1]||(e[1]=(...u)=>o.onPointerDown&&o.onPointerDown(...u)),onPointerup:e[2]||(e[2]=(...u)=>o.onPointerUp&&o.onPointerUp(...u))},[n.showCover||s.cover?_("",!0):(a(),c("nav",zo,[S(h,{items:n.items,"parent-layout":n.parentLayout,"onUpdate:modelValue":o.onUpdateModelValueContextMenu},null,8,["items","parent-layout","onUpdate:modelValue"])],512)),n.showCover||s.cover?(a(),c("div",_o,[r("span",null,$e(n.title),1)])):_("",!0)],32)}const So=E(bo,[["render",Mo],["__scopeId","data-v-c37b4430"]]),Co={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"14"};function xo(t,e){return a(),c("svg",Co,e[0]||(e[0]=[r("path",{d:"M6 4V0H0v6h4v8h8V4zM4 4H2V2h2zm6 8H6V6h4z",class:"svg-primary"},null,-1)]))}const ko={render:xo},To={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12",viewBox:"4 4 14 12"};function Po(t,e){return a(),c("svg",To,e[0]||(e[0]=[r("g",{class:"svg-primary"},[r("path",{d:"M4 8h2v2H4zM6 6h2v2H6zM14 6h2v2h-2zM16 8h2v2h-2zM8 4h6v2h-2v10h-2V6H8z"})],-1)]))}const Eo={render:Po},Oo={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12"};function Ho(t,e){return a(),c("svg",Oo,e[0]||(e[0]=[r("g",{class:"svg-primary"},[r("path",{d:"M0 6h2v2H0zM6 0h2v10h2v2H4v-2h2zM2 8h2v2H2zM10 8h2v2h-2zM12 6h2v2h-2z"})],-1)]))}const Wo={render:Ho},Ro={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"14"};function Vo(t,e){return a(),c("svg",Ro,e[0]||(e[0]=[r("path",{d:"M1 2v2H0v6h1v2h2v2h3v-2H4v-2H2V8h9V6H2V4h2V2h2V0H3v2z",class:"svg-primary"},null,-1)]))}const Ao={render:Vo},Bo={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"14"};function Do(t,e){return a(),c("svg",Bo,e[0]||(e[0]=[r("path",{d:"M10 2v2h1v6h-1v2H8v2H5v-2h2v-2h2V8H0V6h9V4H7V2H5V0h3v2z",class:"svg-primary"},null,-1)]))}const $o={render:Do},Lo={class:"sidebar-left"},Io={key:0,class:"scrollbar scrollbar-right"},Fo={class:"range"},No={key:1,class:"scrollbar-corner"},Uo={key:2,class:"scrollbar scrollbar-bottom"},qo={class:"range"},jo={__name:"ScrollContent",props:{options:{type:Object,default(){return{scrollX:!0,scrollY:!0,clampLeft:!1,clampBottom:!1}}},setTriggerReset:{type:Boolean,default:!1},setTriggerRefresh:{type:Object,default(){return null}},embed:{type:Boolean,default:!1},rootLayout:{type:Object,default(){return{size:l(0,0)}}},parentLayout:{type:Object,default(){return{size:l(0,0)}}},parentLayoutSizeOffset:{type:Object,default(){return l(0,0)}}},emits:["click","refresh"],setup(t,{emit:e}){const n={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3},i=t,s=f(i.parentLayout.size),o=e,h=f(null),u=f(null),p=f(null),v=f(null),y=f(null),D=f(!0),N=f({}),g=f({spacer:l(0,0),helper:l(0,0),content:l(0,0),wrapper:l(0,0),inner:l(0,0)}),b=f({startScroll:null,current:vt(0,0),start:null,move:null}),ve=kt(),de=z(()=>i.options.scrollX||i.options.scrollY||!!ve.corner),Ce=z(()=>({"--scroll-bar-size":`${Math.max(15-Ve.size,0)}`,...N.value})),xe=z(()=>({active:D.value,"axis-x":i.options.scrollX,"axis-y":i.options.scrollY,embed:i.embed}));_e(()=>i.setTriggerReset,()=>{U()}),_e(()=>i.setTriggerRefresh,m=>{m&&m.reset?ke():m&&m.scroll&&U()}),De(()=>{window.requestAnimationFrame(()=>{Q()})});const Q=()=>{const m=pe();console.log(m);const x=l(i.options.scrollY?20:0,i.options.scrollX?20:0),O=i.parentLayout;if(O){const q=l(()=>x+i.parentLayoutSizeOffset);i.options.scrollX&&i.options.scrollY||(O.size=l(Math.min(m.x+q.x,i.rootLayout.size.x),Math.min(m.y+q.y,i.rootLayout.size.y)))}s.value=O.size},ke=()=>{i.parentLayout.size=l(0,0),Z(()=>{Q()})},Te=()=>l(h.value.offsetWidth,h.value.offsetHeight),pe=()=>l(u.value.offsetWidth,u.value.offsetHeight),Pe=()=>{window.requestAnimationFrame(()=>{se(),me()}),i.parentLayout.scrollOffset=d(),o("refresh")},U=()=>{g.value.content=Te(),g.value.wrapper=l(p.value.offsetWidth,p.value.offsetHeight),g.value.inner=pe(),g.value.helper=l(v.value?v.value.offsetWidth:0,y.value?y.value.offsetHeight:0),g.value.spacer=l(()=>Math.min(g.value.wrapper/g.value.inner,1)*g.value.helper);const m=d();i.parentLayout.scrollOffset=m,se(),me(),o("refresh"),h.value.scrollTo(i.options.clampLeft?0:m.x,i.options.clampBottom?g.value.inner.y:m.y)},me=()=>{const m=l(()=>b.value.current*(1-g.value.spacer/g.value.helper)),x=l(()=>g.value.spacer/g.value.helper);N.value=Object.assign(m.toCSSVars("helper-position"),x.toCSSVars("helper-size"))},d=()=>l(h.value.scrollLeft,h.value.scrollTop),se=()=>{const m=l(i.options.scrollY?Ve.size:0,i.options.scrollX?Ve.size:0),x=d();b.value.current=V(()=>x/(g.value.inner-g.value.content+m))},fe=m=>{G(m),m.preventDefault(),b.value.start=l(m.clientX,m.clientY),b.value.startScroll=h.value.scrollTop;const x=C.pointerMove.subscribe(O=>{b.value.move=V(()=>l(O.clientX,O.clientY)-b.value.start),h.value.scrollTop=b.value.startScroll+g.value.inner.y*b.value.move.y/g.value.helper.y});C.pointerUp.pipe(ee()).subscribe(()=>{x.unsubscribe()})},Ee=m=>{m.preventDefault(),b.value.start=l(m.clientX,m.clientY),b.value.startScroll=h.value.scrollLeft;const x=C.pointerMove.subscribe(O=>{b.value.move=V(()=>l(O.clientX,O.clientY)-b.value.start),h.value.scrollLeft=b.value.startScroll+g.value.inner.x*b.value.move.x/g.value.helper.x});C.pointerUp.pipe(ee()).subscribe(()=>{x.unsubscribe()})},Oe=()=>{H(n.TOP)},He=()=>{H(n.BOTTOM)},we=()=>{H(n.LEFT)},We=()=>{H(n.RIGHT)};let re=null;const K=()=>{window.clearInterval(re)},H=m=>{window.clearInterval(re),re=ot(()=>{switch(m){case n.LEFT:h.value.scrollLeft-=16;break;case n.TOP:h.value.scrollTop-=16;break;case n.RIGHT:h.value.scrollLeft+=16;break;case n.BOTTOM:h.value.scrollTop+=16;break}},125)};return Me("scrollContent",{refresh:U,setParentSize:Q}),(m,x)=>(a(),c("div",{class:I(["wb-env-scroll-content",k(xe)]),style:L(k(Ce))},[r("div",{ref_key:"scrollWrapperEl",ref:p,class:"wrapper"},[r("div",Lo,[X(m.$slots,"sidebarLeft",{},void 0,!0)]),r("div",{ref_key:"scrollContentEl",ref:h,class:"content",onScroll:Pe},[r("div",{ref_key:"scrollInnerEl",ref:u,class:"inner"},[r("div",null,[X(m.$slots,"default",{},()=>[x[0]||(x[0]=Se('<div style="width:680px;height:100px;margin:20px;background:red;" data-v-f2c8b705></div><div style="width:250px;height:240px;margin:20px;background:red;" data-v-f2c8b705></div><div style="width:500px;height:240px;margin:20px;background:green;" data-v-f2c8b705></div><div style="width:800px;height:240px;margin:20px;background:yellow;" data-v-f2c8b705></div><div style="width:250px;height:240px;margin:20px;background:red;" data-v-f2c8b705></div><div style="width:500px;height:3000px;margin:20px;background:green;" data-v-f2c8b705></div><div style="width:800px;height:240px;margin:20px;background:yellow;" data-v-f2c8b705></div>',7))],!0)])],512)],544)],512),k(D)&&i.options.scrollY?(a(),c("div",Io,[r("span",{class:"helper-top","touch-action":"none",onPointerdown:Oe,onPointerup:K},[S(k(Eo))],32),r("span",Fo,[r("span",{ref_key:"scrollRightHelperEl",ref:y,class:"helper"},[r("span",{class:"spacer","touch-action":"none",onPointerdown:fe},null,32)],512)]),r("span",{class:"helper-bottom","touch-action":"none",onPointerdown:He,onPointerup:K},[S(k(Wo))],32)])):_("",!0),k(de)?(a(),c("span",No,[X(m.$slots,"corner",{},void 0,!0)])):_("",!0),k(D)&&i.options.scrollX?(a(),c("div",Uo,[r("span",{class:"helper-left","touch-action":"none",onPointerdown:we,onPointerup:K},[S(k(Ao))],32),r("span",qo,[r("span",{ref_key:"scrollBottomHelperEl",ref:v,class:"helper"},[r("span",{ref:"scrollBottomSpacerEl",class:"spacer","touch-action":"none",onPointerdown:Ee},null,544)],512)]),r("span",{class:"helper-right","touch-action":"none",onPointerdown:We,onPointerup:K},[S(k($o))],32)])):_("",!0)],6))}},Go=E(jo,[["__scopeId","data-v-f2c8b705"]]),Yo={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"};function Xo(t,e){return a(),c("svg",Yo,e[0]||(e[0]=[r("g",{class:"svg-primary"},[r("path",{d:"M4 4h12v12H4z"}),r("path",{d:"M0 0v20h20V0zm18 18H2V2h16z"})],-1),r("path",{fill:"#FFF",d:"M8 8h4v4H8z",class:"svg-secondary"},null,-1)]))}const Qo={render:Xo},Ko={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20"};function Jo(t,e){return a(),c("svg",Ko,e[0]||(e[0]=[Se('<g class="svg-primary"><path d="M0 0v20h22V0zm16 14H2V2h14z"></path><path d="M4 4h10v8H4z"></path></g><g fill="#FFF" class="svg-secondary"><path fill="#" d="M6 6h14v12H6z" class="svg-secondary"></path></g>',2)]))}const Zo={render:Jo},es={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20"};function ts(t,e){return a(),c("svg",es,e[0]||(e[0]=[r("g",{class:"svg-primary"},[r("path",{d:"M8 6h10v10H8z"}),r("path",{d:"M0 0v20h22V0zm20 18H6V4h14z"})],-1),r("path",{fill:"#A4A5A5",d:"M2 2h14v2H6v10H2z",class:"svg-secondary"},null,-1)]))}const ns={render:ts},os={components:{SvgControlClose:Qo,SvgControlFocusMax:Zo,SvgControlFocusMin:ns},props:{close:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},title:{type:String,default:"Window Header"},focused:{type:Boolean,default:!1}},emits:["close","click","up","down"],data(){return{}},computed:{styleClasses(){return{focused:this.focused}}},methods:{onPointerUpClose(t){t.preventDefault(),G(t),this.$emit("close",t)},onPointerDownTitleWrapper(t){t.preventDefault(),G(t),this.$emit("click",t)},onPointerUpOverlayTop(t){t.preventDefault(),G(t),this.$emit("up",t)},onPointerUpOverlayBottom(t){t.preventDefault(),G(t),this.$emit("down",t)}}},ss={key:0,ref:"windowTitleWrapper",class:"title"},rs={class:"handlers handlers-right"};function is(t,e,n,i,s,o){const h=M("svg-control-close"),u=M("svg-control-focus-max"),p=M("svg-control-focus-min");return a(),c("header",{class:I(["wb-env-molecule-window-header",o.styleClasses])},[r("div",{class:I(["handlers handlers-left",{"has-close":n.close}])},[n.close?(a(),c("span",{key:0,class:"control close","touch-action":"none",onPointerup:e[0]||(e[0]=(...v)=>o.onPointerUpClose&&o.onPointerUpClose(...v))},[S(h)],32)):_("",!0)],2),r("div",{class:"title-wrapper",onPointerdown:e[1]||(e[1]=(...v)=>o.onPointerDownTitleWrapper&&o.onPointerDownTitleWrapper(...v))},[e[4]||(e[4]=r("span",{class:"background"},[r("span",{class:"line"}),r("span",{class:"line"}),r("span",{class:"dots"})],-1)),n.title?(a(),c("span",ss,[r("span",{ref:"windowTitle"},$e(n.title),513)],512)):_("",!0)],32),r("div",rs,[n.overlay?(a(),c("span",{key:0,class:"control overlay-top","touch-action":"none",onPointerup:e[2]||(e[2]=(...v)=>o.onPointerUpOverlayTop&&o.onPointerUpOverlayTop(...v))},[S(u)],32)):_("",!0),n.overlay?(a(),c("span",{key:1,class:"control overlay-bottom","touch-action":"none",onPointerup:e[3]||(e[3]=(...v)=>o.onPointerUpOverlayBottom&&o.onPointerUpOverlayBottom(...v))},[S(p)],32)):_("",!0)])],2)}const ls=E(os,[["render",is],["__scopeId","data-v-d4206978"]]),Xe=20,as=2,hs={__name:"Window",props:{window:{type:Object,default:null},id:{type:String,default(){return null}},wrapper:{type:Object,default(){return null}},layout:{type:Object,default(){return{rootSize:l(),position:l(),size:l(600,400)}}},sidebarComponent:{type:Object,default(){return null}},sidebarComponentData:{type:Object,default(){return null}},component:{type:Object,default(){return null}},componentData:{type:Object,default(){return null}},symbolWrapper:{type:Object,default(){return null}}},emits:["focused","ready","close","up","down","refresh"],setup(t,{emit:e}){const n=f(null),i=f(null),s=t,o=e,h=l(4,Xe+as);let u=f(!0);const p=f({start:null,move:null}),v=f({start:null,move:null}),y=new ae,D=f(!1),N=f(!1),g=f(!1),b=f(null),ve=f(!0),de=f(0),Ce=z(()=>({size:V(()=>s.layout.size-l(16,0)),position:s.layout.position})),xe=z(()=>d.value.sidebar?he.config.observable[Dt.SHOW_STORAGE_SPACE]:!1),Q=z(()=>s.wrapper?s.wrapper.layout:{size:l(window.innerWidth,window.innerHeight)}),ke=z(()=>({focused:d.value.focused})),Te=z(()=>({close:d.value.close,overlay:d.value.overlay,title:d.value.title,focused:d.value.focused})),pe=z(()=>Object.assign({"--header-height":de.value},s.layout.size.toCSSVars("size"),s.layout.position.toCSSVars("position"))),Pe=z(()=>({moving:D.value,scaling:N.value,scale:fe.value,"scroll-x":d.value.scrollX,"scroll-y":d.value.scrollY,freeze:d.value.freeze,visible:u.value,embed:d.value.embed,focused:d.value.focused,borderless:d.value.borderless})),U=z(()=>Q.value.size),me=z(()=>s.layout.size),d=z(()=>s.window.options),se=z(()=>d.value.focused),fe=z(()=>d.value.scaleX||d.value.scaleY);_e(()=>me.value,()=>{N.value||(v.value.start=s.layout.position,v.value.offset=0,O(s.layout.position,we()))}),_e(()=>se.value,w=>{Z(()=>{o("focused",w)}),w?y.add(C.get("click").pipe(Ne(({target:W})=>!Ue(W,i)),ee()).subscribe(()=>{d.value.focused=!1})):y.unsubscribe()}),De(()=>{n.value&&(de.value=n.value.offsetHeight),s.wrapper&&ve&&(ve.value=!1,H({scroll:!0}),d.value.center&&window.requestAnimationFrame(()=>{s.wrapper.centerWindow(s.id)})),se.value&&window.setTimeout(()=>{y.add(C.get("click").pipe(Ne(({target:w})=>!Ue(w,i)),ee()).subscribe(()=>{d.value.focused=!1}))},300)}),Ze(()=>{y.unsubscribe()});function Ee(){d.value.focused=!1,d.value.freeze=!0}function Oe(){Z(()=>{d.value.freeze=!1,d.value.focused=!0})}function He(){o("ready",q())}function we(){return V(()=>U.value-s.layout.size)}function We(w){b.value=w,Z(()=>b.value=null)}function re(w){Le(w)}function K(w){H(w)}function H(w){b.value=Object.assign({scroll:!0,resize:!0,reset:!1},w),Z(()=>b.value=null)}function m(){d.value.freeze||s.wrapper.setActiveWindow(s.id)}function x(w){if(!d.value.freeze){v.value.start=l(w),v.value.offset=V(()=>v.value.start-s.layout.position);const W=we();D.value=!0;const F=C.pointerMove.subscribe(ye=>O(l(ye),W));C.pointerUp.pipe(ee()).subscribe(()=>{F.unsubscribe(),D.value=!1,H(),s.wrapper.savePosition(s.id,s.layout.position)})}}function O(w,W){w=l(()=>Math.min(w,s.wrapper.layout.position+U.value)),v.value.move=V(()=>w-v.value.start);const F=V(()=>Math.round(v.value.start+v.value.move-v.value.offset));s.layout.position=l(Math.max(d.value.clampX?Math.min(F.x,W.x):F.x,0),Math.max(d.value.clampY?Math.min(F.y,W.y):Math.min(F.y,W.y+s.layout.size.y-Xe),0))}const q=()=>({id:s.id,refresh:H});function rt(){o("up",q())}function it(){o("down",q())}function Le(w){Z(()=>{o("close",q(),w)})}function lt(){Le()}function at(w){G(w),p.value.start=l(w),p.value.offset=l(()=>p.value.start-s.layout.size);const W=U.value,F=C.pointerMove.subscribe(ye=>{p.value.move=V(()=>l(ye.clientX,ye.clientY)-p.value.start);const ie=V(()=>Math.round(p.value.start+p.value.move-p.value.offset)),{scaleX:ge,scaleY:be}=d.value;(!ge||ge&&ie.x+s.layout.position.x<=W.x)&&(!be||be&&ie.y+s.layout.position.y<=W.y)&&(!ge&&be?s.layout.size=l(s.layout.size.x,ie.y):ge&&!be?s.layout.size=l(ie.x,s.layout.size.y):s.layout.size=ie)});N.value=!0,C.pointerUp.pipe(ee()).subscribe(()=>{F.unsubscribe(),N.value=!1,H(),s.wrapper.saveSize(s.id,s.layout.size)})}return Me("window",nt(s,"window")),Me("window:refresh",H),(w,W)=>(a(),c("aside",{ref_key:"rootEl",ref:i,class:I(["wb-components-window",Pe.value]),style:L(pe.value),onPointerdown:m},[r("div",null,[r("div",{ref_key:"headerEl",ref:n},[d.value.embed?_("",!0):(a(),P(k(ls),ne({key:0},Te.value,{onClick:x,onUp:rt,onDown:it,onClose:lt}),null,16))],512),S(k(Go),{options:d.value,class:"content",embed:"","parent-layout":t.layout,"parent-layout-size-offset":k(h),"root-layout":Q.value,"set-trigger-refresh":b.value,"set-trigger-reset":g.value,onRefresh:We},Tt({sidebarLeft:te(()=>[xe.value?(a(),P(ze(t.sidebarComponent),ne({key:0},t.sidebarComponentData,{class:"sidebar-left"}),null,16)):_("",!0)]),default:te(()=>[X(w.$slots,"default",{},()=>[(a(),P(ze(t.component),ne(t.componentData,{"root-element":w.$el,"parent-focused":d.value.focused,options:ke.value,"parent-layout":Ce.value,"set-trigger-refresh":b.value,"window-options":d.value,onRefresh:K,onClose:re,onFreeze:Ee,onUnfreeze:Oe,onReady:He}),null,16,["root-element","parent-focused","options","parent-layout","set-trigger-refresh","window-options"]))],!0)]),_:2},[fe.value?{name:"corner",fn:te(()=>[r("span",{class:"helper-scale","touch-action":"none",onPointerdown:at},[S(k(ko))],32)]),key:"0"}:void 0]),1032,["options","parent-layout","parent-layout-size-offset","root-layout","set-trigger-refresh","set-trigger-reset"])])],38))}},cs=E(hs,[["__scopeId","data-v-ef478f97"]]),us={components:{WbEnvWindow:cs},props:{parentLayout:{type:Object,default(){return{size:l(window.innerWidth,window.innerHeight)}}},core:{type:Object,default(){return he}},wrapper:{type:qe,default(){return new qe(he,[{title:"Test",layout:{position:l(400,400),size:l(640,400)},scrollX:!1}])}}},data(){return{subscription:new ae,ready:!1,screenModul:B(this.core.modules.screen)}},computed:{contentLayoutSize(){return this.screenModul.contentLayout.size},sortedWindows(){return Array.from(this.wrapper.models.value).sort((t,e)=>t.layout.zIndex-e.layout.zIndex)}},watch:{parentLayout:{deep:!0,handler(){this.refresh()}},contentLayoutSize(t){this.wrapper.layout.size=t},wrapper(){this.refresh()}},async mounted(){this.subscription.add(C.resize.subscribe(this.onRefresh)),await this.refresh(!0),this.ready=!0},unmounted(){this.subscription.unsubscribe()},methods:{getWindowProps(t){const{id:e,layout:n,sidebarComponent:i,sidebarComponentData:s,component:o,componentData:h,symbolWrapper:u}=t;return{window:t,id:e,wrapper:this.wrapper,layout:n,sidebarComponent:i,sidebarComponentData:s,component:o,componentData:h,symbolWrapper:u}},refresh(t){return t?(this.onRefresh(),Promise.resolve()):new Promise(e=>{this.$nextTick(()=>{window.setTimeout(()=>{this.onRefresh(),e()},500)})})},onRefresh(){const{x:t,y:e,width:n,height:i}=this.$el.getBoundingClientRect();this.wrapper.layout.position=l(t,e),this.wrapper.layout.size=l(n,i)},onReadyWindow(t){this.wrapper.get(t.id).ready()},onFocusedWindow(t,e){e&&this.wrapper.get(t.id).focus()},onUpWindow(t){this.wrapper.setWindowUpDown(t.id,!1)},onDownWindow(t){this.wrapper.setWindowUpDown(t.id,!0)},onCloseWindow(t,e){this.wrapper.get(t.id).close(e)}}},vs={class:"wb-components-window-wrapper"};function ds(t,e,n,i,s,o){const h=M("wb-env-window");return a(),c("div",vs,[X(t.$slots,"default",{},void 0,!0),n.wrapper&&s.ready?(a(!0),c(et,{key:0},tt(o.sortedWindows,u=>(a(),P(h,ne({key:u.id,ref_for:!0},o.getWindowProps(u),{onReady:o.onReadyWindow,onFocused:o.onFocusedWindow,onClose:o.onCloseWindow,onUp:o.onUpWindow,onDown:o.onDownWindow}),null,16,["onReady","onFocused","onClose","onUp","onDown"]))),128)):_("",!0)])}const ps=E(us,[["render",ds],["__scopeId","data-v-a9a4652a"]]),ms={components:{WbComponentsConsole:$t},props:{command:{type:String,default:null}},emits:["close"],setup(){return Lt()},data(){return{startCommands:[],rows:[`Make by Lammpee ${new Date().getFullYear()}`,`Release ${this.core.version}`]}},methods:{onStartCommandsComplete(){window.setTimeout(()=>{this.$emit("close")},1e3*(2+Math.floor(Math.random()*3)))}}};function fs(t,e,n,i,s,o){const h=M("wb-components-console");return a(),P(h,{"show-introduction":!1,"delimiter-prefix":null,"start-commands":n.command,core:t.core,class:"wb-module-core-web-dos","pre-rows":s.rows,onStartCommandsComplete:o.onStartCommandsComplete},null,8,["start-commands","core","pre-rows","onStartCommandsComplete"])}const ws=E(ms,[["render",fs],["__scopeId","data-v-54860292"]]),Qe=""+new URL("AmigaTopazWB13.CBfz6dJl.woff2",import.meta.url).href,Ke=""+new URL("AmigaTopazWB13Monospace.Ds3lXCLM.woff2",import.meta.url).href,ys={components:{WbEnvScreen:vo,WbEnvNoDisk:go,WbEnvError:At,WbEnvWindowWrapper:ps,WbEnvSymbolWrapper:Ot,WbEnvMoleculeHeader:So},props:{core:{type:Object,required:!0},disks:{type:Object,default:()=>({})},forceNoDisk:{type:Boolean,default:!1}},emits:["ready"],setup(t){const{registerFont:e}=It();e([{preload:!0,fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[Qe,"woff2"]},{preload:!0,fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[Ke,"woff2"]},{fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[Qe,"woff2"]},{fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[Ke,"woff2"]}]);const n=f(),i=z(()=>n.value?n.value.currentTheme:new gt),s=z(()=>{const p=i.value.toCSSVars();return`:root {
        ${Object.keys(p).map(v=>`${v}: ${p[String(v)]};`).join(`
`)}
      }`});Ft(()=>({style:[s.value&&{key:"wb-core-vars",type:"text/css",innerHTML:s.value}].filter(Boolean)}));const o=nt(t,"core"),h=o.value.executionCounter;o.value.modules.files.addDisks(t.disks);const u=Pt();return Me("core",o),{noBoot:"no-boot"in u.query,noWebDos:"no-webdos"in u.query,noDisk:t.forceNoDisk||"no-disk"in u.query,noCloudStorage:"no-cloud-storage"in u.query,executionCounter:h,screenModule:n,theme:i,vars:s}},data(){return{subscription:new ae,error:null,symbolsModule:B(this.core.modules.symbols),windowsModule:B(this.core.modules.windows),filesModule:B(this.core.modules.files),layout:{position:l(0,0),size:l(0,0)},renderComponents:!1,renderSymbols:!1,ready:!1,wait:!1,activeDisks:[],webWorkbenchConfig:{...bt},bootSequence:$.SEQUENCE_1}},computed:{screenOptions(){return this.webWorkbenchConfig[T.SCREEN_CONFIG]},style(){return{"--default-cursor":`url(${Yt})`}},showNoDisk(){return this.bootSequence===$.NO_DISK},horizontalCentering(){return this.screenOptions.horizontalCentering},headerVisible(){return this.windowsModule?this.windowsModule.contentWrapper.isHeaderVsible():!0},embedWindow(){return this.windowsModule?this.windowsModule.contentWrapper.hasEmbbedWindow():!1},screenBootSequence(){return this.error?$.ERROR:this.bootSequence},cursor(){return this.screenModule?this.screenModule.cursor:null},screen(){return{frameActive:this.webWorkbenchConfig[T.SCREEN_1084_FRAME],hasRealLook:this.webWorkbenchConfig[T.SCREEN_REAL_LOOK],hasScanLines:this.webWorkbenchConfig[T.SCREEN_SCAN_LINES],hasActiveAnimation:!this.noBoot&&this.webWorkbenchConfig[T.SCREEN_ACTIVE_ANIMATION]}},themeColors(){return this.webWorkbenchConfig[T.THEME]},hasFrame(){return this.webWorkbenchConfig[T.SCREEN_1084_FRAME]},styleClasses(){return{ready:this.ready,waiting:this.waiting}},waiting(){return this.executionCounter>0},headerItems(){return this.windowsModule.contextMenu.activeItems.items}},watch:{horizontalCentering(){this.onResize()},waiting(t){Et(this.screenModule.cursor).setWait(t)},hasFrame(){this.$nextTick(()=>{this.onResize(),this.$nextTick(()=>{this.symbolsModule.defaultWrapper.rearrangeIcons({root:!0}),this.windowsModule.contentWrapper.setWindowPositions(mt.CENTER)})})}},async mounted(){this.subscription.add(C.resize.subscribe(this.onResize)),this.core.addModule(st,{contentEl:this.$refs.content});const t=await this.core.setup();this.onResize(),this.screenModule=t.modules.screen,this.webWorkbenchConfig=t.config.observable,this.subscription.add(t.errorObserver.subscribe(e=>{this.setError(e)})),await this.screenActiveAnimation(),await this.onReady()},unmounted(){this.activeDisks.forEach(t=>this.core.modules.files.fs.removeFloppyDisk(t)),this.core.modules.windows.clear(),this.subscription.unsubscribe()},methods:{onToggleScreenActive(t){!this.ready&&!t&&(this.noDisk=!0),t&&this.$nextTick(()=>{this.onResize()})},screenActiveAnimation(){let t,e=!1;if(this.noBoot||(this.webWorkbenchConfig[T.BOOT_WITH_SEQUENCE]?t=new Promise(n=>window.setTimeout(async()=>{await this.$refs.screen.turnOn(1500),n()},1e3)):this.webWorkbenchConfig[T.BOOT_WITH_WEBDOS]?t=this.$refs.screen.turnOn(2e3):t=this.$refs.screen.turnOn(0)),e=!!t,e||(t=this.$refs.screen.turnOn(2e3).then(()=>{var n;return(n=this.$refs.windowWrapper)==null?void 0:n.refresh()}).catch(n=>{throw n})),t.then(()=>this.$refs.screen.togglePanel(!0)).catch(n=>{throw n}),e)return t},onResize(){const{left:t,top:e,width:n,height:i}=this.$el.getBoundingClientRect();this.layout={position:l(t,e),size:l(n,i)},this.$refs.content&&(this.core.modules.screen.updateContentLayout(this.$refs.content),this.core.modules.screen.updateScreenLayout(this.$refs.inner))},async onReady(){const t=this.core.addExecution(),e=this.noBoot?!1:this.webWorkbenchConfig[T.BOOT_WITH_SEQUENCE];await this.startBootSequence(e),this.noDisk?this.bootSequence=$.NO_DISK:(this.bootSequence=$.READY,this.onResize(),this.renderComponents=!0,await new Promise(n=>{this.$nextTick(async()=>{this.core.modules.screen.updateContentLayout(this.$refs.content),this.core.modules.screen.updateScreenLayout(this.$refs.inner),this.renderSymbols=!0;const i=this.noWebDos?!1:this.webWorkbenchConfig[T.BOOT_WITH_WEBDOS];await this.boot(i),this.ready=!0,n()})}),t(),this.$emit("ready"))},onClickError(){this.error=null},setError(t,e=!0){console.warn(t);const n={input:"Press left mouse button or touch to continue.",text:t.message,stack:null,code:`#${Math.floor(Math.random()*99999999)}.${Math.floor(Math.random()*99999999)}`};e||(n.input=null),n.userInteraction=e,this.error=n},async startBootSequence(t){const e=[$.SEQUENCE_1,$.SEQUENCE_2,$.SEQUENCE_3];if(t){let n=e.length;const i=async()=>{n--,this.bootSequence=e[e.length-Number(n)],n>0&&(await new Promise(s=>{window.setTimeout(s,je)}),await i())};await new Promise(s=>window.setTimeout(s,je/2)),await i()}else this.bootSequence=e[e.length-1]},async boot(t){return await this.prepareMemory(),await this.createBootScript(t),t?await this.startWebDos():await this.core.executeCommand('basic "TMP:BOOT.basic"'),this.core.executeCommands(['remove "TMP:BOOT.basic"','mountDisk "debug"'])},startWebDos(){const t=this.windowsModule.addWindow({title:"WebDOS",component:ws,componentData:{core:this.core,command:'basic "TMP:BOOT.basic"'},options:{scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!0,embed:!0}},{full:!0});return t.wrapper.centerWindow(t),t.focus(),t.awaitClose()},prepareMemory(){const{firebase:t}=Ge().public;this.core.modules.parser.memory.set("FIREBASE_API_KEY",'"'+t.apiKey+'"')},createBootScript(t){const{firebase:e}=Ge().public,n=["// Functions","SUB Separator(stars) STATIC",'PRINT STRING$(stars, "*")',"END SUB","SUB Headline(title$) STATIC",'LET title$ = "*** " + title + " ***"','PRINT ""',"Separator(LEN(title$))","PRINT title$","Separator(LEN(title$))",'PRINT ""',"END SUB","// Output"],i=(h=1e3)=>t?"SLEEP "+h:"",s=["workbench13","extras13","moonCity"];n.push(i(1e3),'Headline("Mount Disks")',i(1e3),...s.reduce((h,u)=>h.concat([`mountDisk "${u}"`,i(1e3)]),[]),"rearrangeIcons -root");const o=["CDLAMMPEE"];return!this.noCloudStorage&&o.length&&e.apiKey&&e.url&&n.push(i(1e3),'Headline("Mount Cloud Storages")',i(1e3),...o.reduce((h,u)=>(h.push(`cloudMount "${u}" --api-key="${e.apiKey}" --url="${e.url}"`,i(1e3)),h),[])),n.push(i(1e3),'PRINT ""','PRINT "<strong>Waiting is user experience </strong>"'),this.core.modules.files.fs.createTmpFile("BOOT.basic",{type:"basic",content:n})}}},gs={ref:"inner",class:"inner"},bs={ref:"content",class:"content"};function zs(t,e,n,i,s,o){const h=M("wb-env-molecule-header"),u=M("wb-env-symbol-wrapper"),p=M("wb-env-window-wrapper"),v=M("wb-env-no-disk"),y=M("wb-env-error"),D=M("wb-env-screen");return a(),c("div",{class:I(["wb-env-core",o.styleClasses]),style:L(o.style)},[S(D,ne({ref:"screen","boot-sequence":o.screenBootSequence,model:o.screenOptions,theme:i.theme,cursor:o.cursor},o.screen,{onToggleScreenActive:o.onToggleScreenActive}),{default:te(()=>[r("div",gs,[s.renderComponents&&o.headerVisible?(a(),P(h,{key:0,"show-cover":!s.ready,items:o.headerItems,"parent-layout":s.windowsModule.contentWrapper.layout},null,8,["show-cover","items","parent-layout"])):_("",!0),r("div",bs,[s.renderComponents?(a(),P(p,{key:0,ref:"windowWrapper",core:n.core,wrapper:s.windowsModule.contentWrapper,"clamp-y":!1,"parent-layout":s.layout},{default:te(()=>[s.renderSymbols?(a(),P(u,{key:0,"parent-scrollable":!1,class:"symbol-wrapper","clamp-symbols":!0,"show-storage-bar":!1,"parent-layout":s.layout,wrapper:s.symbolsModule.defaultWrapper},null,8,["parent-layout","wrapper"])):_("",!0)]),_:1},8,["core","wrapper","parent-layout"])):_("",!0),o.showNoDisk?(a(),P(v,{key:1})):_("",!0),s.error?(a(),P(y,ne({key:2},s.error,{onClose:o.onClickError}),null,16,["onClose"])):_("",!0)],512)],512)]),_:1},16,["boot-sequence","model","theme","cursor","onToggleScreenActive"])],6)}const er=E(ys,[["render",zs],["__scopeId","data-v-12d6d9fb"]]);export{er as default};

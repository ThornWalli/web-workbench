(window.webpackJsonp=window.webpackJsonp||[]).push([[15,19,32,33,34,45,46],{115:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var n=r(72),h=r(80);class o extends h.default{onPointerDown(t){if(this.selectedAnchor){var e=this.getAnchorByPosition(t.x,t.y);if(!e)return this._app.canvas.addRenderAction(()=>{this.render(!1),this.reset()}),{save:!0,render:!0};this.selectedAnchor=e,this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)})}return{render:!0}}onPointerMove(t,e){if(e.pressed)return this.anchors.length<1&&(this.addAnchor(t.x,t.y),this.selectedAnchor=this.addAnchor(t.x,t.y)),this.selectedAnchor.x=t.x,this.selectedAnchor.y=t.y,this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}}render(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.anchors.length&&(Object(n.line)((t,e)=>{var data=[].concat(this._brush.data);h.default.drawBrush({color:this._brush.primaryColor,data:data,x:t,y:e,app:this._app})},this.anchors[0].x,this.anchors[0].y,this.anchors[1].x,this.anchors[1].y,{}),t&&this.drawAnchors())}}},72:function(t,e,r){"use strict";function n(t,e,r,n){for(var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=Math.abs(r-t),c=t<r?1:-1,l=Math.abs(n-e),d=e<n?1:-1,f=(o>l?o:-l)/2,v=[],i=0;0===h||i>=1?(v.push([t,e]),i=0):i+=1/h,t!==r||e!==n;){var _=f;_>-o&&(f-=l,t+=c),_<l&&(f+=o,e+=d)}return v}function line(t,e,r,h,o,c){var{density:l=0}=c;n(e,r,h,o,l).forEach(e=>{t(e[0],e[1])})}function h(t,e,r,n,h,o,c,l,d){var f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:.001,v=0,_=0,u=0;for(u=0;u<=1;u+=f)v=(1-u)**3*e+3*u*(1-u)**2*n+3*u**2*(1-u)*o+u**3*l,_=(1-u)**3*r+3*u*(1-u)**2*h+3*u**2*(1-u)*c+u**3*d,t(parseInt(v),parseInt(_))}function o(t,e,r,n,h,o){var{strokeSize:c=0,filled:l=!1,density:d}=o;if(l)for(var f=(e,r)=>t(e,r,!0),i=r;h<0?i>=r+h:i<=r+h;h<0?i--:i++)line(f,e,i,e+n,i,{density:d});if(c>0){c=Math.floor(c/2);var v=[e-(c=[n<0?-c:c,h<0?-c:c])[0],r-c[1]];[[e-c[0],r-c[1]],[e-c[0],r+h+c[1]],[e+n+c[0],r+h+c[1]],[e+n+c[0],r-c[1]],v].forEach(e=>{line(t,v[0],v[1],e[0],e[1],{density:d}),v=e})}}function ellipse(t,e,r,n,h,o){var{filled:c=!1,density:l=0}=o;n<0&&(n=Math.abs(n)),h<0&&(h=Math.abs(h));var d,f,v,_=n*n,y=h*h,m=4*_,A=4*y,i=0,N=(e,r)=>t(e,r,!0),M=[];for(d=0,f=h,v=2*y+_*(1-2*h);y*d<=_*f;d++)!l||i>=1?(M.push([e+d,r+f]),M.push([e-d,r-f]),M.push([e-d,r+f]),M.push([e+d,r-f]),i=0):i+=1/l,v>=0&&(v+=m*(1-f),f--),v+=y*(4*d+6);for(i=0,d=n,f=0,v=2*_+y*(1-2*n);_*f<=y*d;f++)!l||i>=1?(M.push([e+d,r+f]),M.push([e-d,r+f]),M.push([e+d,r-f]),M.push([e-d,r-f]),i=0):i+=1/l,v>=0&&(v+=A*(1-d),d--),v+=_*(4*f+6);if(c)for(var O=-h;O<=h;O++)for(var x=-n;x<=n;x++)x*x*h*h+O*O*n*n<=h*h*n*n&&N(e+x,r+O);M.forEach(e=>{t(e[0],e[1])})}function polygon(t,e,r,n){var h,{strokeSize:o=0,filled:l=!1,density:d=0}=n,f=Number.MAX_VALUE,v=Number.MAX_VALUE,_=Number.MIN_VALUE,y=Number.MIN_VALUE;if(e.forEach(e=>{h&&(e.x>_&&(_=e.x),e.y>y&&(y=e.y),e.x<f&&(f=e.x),e.y<v&&(v=e.y),line(t,h.x,h.y,e.x,e.y,{density:d})),h=e}),r){var m=e[0];h&&(m.x>_&&(_=m.x),m.y>y&&(y=m.y),m.x<f&&(f=m.x),m.y<v&&(v=m.y),line(t,h.x,h.y,m.x,m.y,{density:d}))}if(l){c((e,r)=>t(e,r,!0),e,{IMAGE_LEFT:f,IMAGE_TOP:v,IMAGE_RIGHT:_,IMAGE_BOTTOM:y})}}function c(t,e,r){var n,{IMAGE_LEFT:h=0,IMAGE_TOP:o=0,IMAGE_RIGHT:c,IMAGE_BOTTOM:l}=r,d=[],f=[];e.forEach(polygon=>{d.push(polygon.y),f.push(polygon.x)});var v,_,i,y,m,A=Array(e.length);for(_=o;_<l;_++){for(n=0,y=e.length-1,i=0;i<e.length;i++)(d[Number(i)]<_&&d[Number(y)]>=_||d[Number(y)]<_&&d[Number(i)]>=_)&&(A[n++]=Math.round(f[Number(i)]+(_-d[Number(i)])/(d[Number(y)]-d[Number(i)])*(f[Number(y)]-f[Number(i)]))),y=i;for(i=0;i<n-1;)A[Number(i)]>A[i+1]?(m=A[Number(i)],A[Number(i)]=A[i+1],A[i+1]=m,i&&i--):i++;for(i=0;i<n&&!(A[Number(i)]>=c);i+=2)if(A[i+1]>h)for(A[Number(i)]<h&&(A[Number(i)]=h),A[i+1]>c&&(A[i+1]=c),v=A[Number(i)];v<A[i+1];v++)t(v,_)}}r.r(e),r.d(e,"getLinePoints",(function(){return n})),r.d(e,"line",(function(){return line})),r.d(e,"curve",(function(){return h})),r.d(e,"rectangle",(function(){return o})),r.d(e,"ellipse",(function(){return ellipse})),r.d(e,"polygon",(function(){return polygon})),r.d(e,"fillPolygon",(function(){return c}))},73:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return h}));var n=r(74);class h extends n.default{constructor(t){super(t),this._brush=t.brush}get brush(){return this._brush}set brush(t){this._brush=t}static drawBrush(t){var{x:e,y:r,data:data,app:n,color:h}=t;e=Math.floor(e-data[0].length/2+1),r=Math.floor(r-data.length/2);for(var o=[],i=0;i<data[0].length;i++)for(var c=0;c<data.length;c++)data[Number(c)][Number(i)]>0&&h.alpha?(n.canvas.setPixel(e+i,r+c,h),o.push([e+i,r+c])):data[Number(c)][Number(i)]<0&&n.canvas.setPixel(e+i,r+c);return o}}},74:function(t,e,r){"use strict";function n(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}r.r(e),r.d(e,"default",(function(){return o}));var h=0;class o{constructor(t){Object.defineProperty(this,c,{writable:!0,value:!1}),this._app=t.app,this.passive=t.passive||!1,n(this,c)[c]=t.pointerDownHold||!1}get pointerDownHold(){return n(this,c)[c]}deconstructor(){}onActive(){}onPointerDown(){}onPointerUp(){}onPointerMove(){}onContextMenu(){}get app(){return this._app}get setPixel(){return this._app.activeDisplay.setPixel}}var c="__private_"+h+++"_"+"pointerDownHold"},76:function(t,e,r){"use strict";r.r(e);var n=r(78);function h(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var o=0;function c(t){return"__private_"+o+++"_"+t}class l{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Object.defineProperty(this,d,{writable:!0,value:0}),Object.defineProperty(this,f,{writable:!0,value:0}),Object.defineProperty(this,v,{writable:!0,value:0}),this.set(t,e,r,n)}set(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Array.isArray(t)&&(n=t[3],r=t[2],e=t[1],t=t[0]),this.red=t,this.green=e,this.blue=r,this.alpha=void 0===n?255:n}get r(){return h(this,d)[d]}get red(){return h(this,d)[d]}set red(t){h(this,d)[d]=Object(n.b)(t,0,255)}get g(){return this._green}get green(){return this._green}set green(t){this._green=Object(n.b)(t,0,255)}get blue(){return this._blue}get b(){return this._blue}set blue(t){this._blue=Object(n.b)(t,0,255)}get a(){return this._alpha}get alpha(){return this._alpha}set alpha(t){this._alpha=Object(n.b)(t,0,255)}get sum(){return h(this,d)[d]+this._blue+this._green+this._alpha}toRGB(){return"rgb(".concat(h(this,d)[d],",").concat(this._green,",").concat(this._blue,")")}toRGBA(){return"rgba(".concat(h(this,d)[d],",").concat(this._green,",").concat(this._blue,",").concat(this._alpha/255,")")}toJSON(){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}}is(t){return this.red===t.red&&this.blue===t.blue&&this.green===t.green&&this.alpha===t.alpha}invert(){return h(this,d)[d]=255-h(this,d)[d],this._green=255-this._green,this._blue=255-this._blue,this}add(t){this.red=Object(n.b)(this.red+t.red,0,255),this.green=Object(n.b)(this.green+t.green,0,255),this.blue=Object(n.b)(this.blue+t.blue,0,255)}subtract(t){this.red=Object(n.b)(this.red-t.red,0,255),this.green=Object(n.b)(this.green-t.green,0,255),this.blue=Object(n.b)(this.blue-t.blue,0,255)}multiply(t){this.red=Object(n.b)(this.red*t.red,0,255),this.green=Object(n.b)(this.green*t.green,0,255),this.blue=Object(n.b)(this.blue*t.blue,0,255)}divide(t){this.red=Object(n.b)(this.red/t.red,0,255),this.green=Object(n.b)(this.green/t.green,0,255),this.blue=Object(n.b)(this.blue/t.blue,0,255)}}var d=c("red"),f=c("green"),v=c("blue");l.COLOR_BLACK=[0,0,0,255],l.COLOR_WHITE=[255,255,255,255],l.COLOR_TRANSPARENT=[0,0,0,0],e.default=l},78:function(t,e,r){"use strict";r.d(e,"b",(function(){return h})),r.d(e,"d",(function(){return o})),r.d(e,"c",(function(){return c})),r.d(e,"a",(function(){return l}));var n=r(71);function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),r)}function o(t){return Math.atan2(t.y,t.x)+Math.PI}function c(t){var e=window.getComputedStyle(t).transform,r=new DOMMatrix(e);return Math.atan2(r.b,r.a)}function l(t,e){var r=Math.cos(e)*t.x-Math.sin(e)*t.y,h=Math.sin(e)*t.x+Math.cos(e)*t.y;return new n.c(r,h)}},80:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return l})),r.d(e,"Anchor",(function(){return d}));var n=r(72),h=r(76),o=r(81),c=r(73);class l extends c.default{constructor(t){super(t),this.COLOR_TRANSPARENT=new h.default(h.default.COLOR_TRANSPARENT),this.filled=!1,this.selectedAnchor=null,this.anchors=[],this.anchorBrush=new(Object(o.getBrushByIndex)(0))({app:this._app,size:1,primaryColor:new h.default(h.default.COLOR_BLACK),secondaryColor:new h.default(h.default.COLOR_WHITE)})}onPointerDown(t){this.startEvent=t}drawAnchors(){var data=[].concat(this.anchorBrush.data);this.anchors.forEach(t=>{this.drawAnchor(t,data)})}drawAnchor(t,data){t.intersectMap={},Object(n.rectangle)((e,r,n)=>{var h=this._app.canvas.getColorFromPixel(e,r);0===h.alpha?h=n?this.anchorBrush.secondaryColor:this.anchorBrush.primaryColor:h.invert(),t.intersectMap[Number(e)]=t.intersectMap[Number(e)]||{},t.intersectMap[Number(e)][Number(r)]=!0,c.default.drawBrush({color:h,data:data,x:e,y:r,app:this._app})},t.x-5,t.y-5,10,10,{strokeSize:1,filled:!0})}getAnchorByPosition(t,e){return this.anchors.find(r=>{if(r.intersectAnchor(t,e))return r})}addAnchor(t,e){var r=new d(t,e,this.anchorBrush);return this.anchors.push(r),r}reset(){this.anchors=[],this.selectedAnchor=null}}class d{constructor(t,e,r){this.x=t,this.y=e,this.brush=r}intersectAnchor(t,e){return this.intersectMap&&this.intersectMap[Number(t)]&&this.intersectMap[Number(t)][Number(e)]}}},81:function(t,e,r){"use strict";r.r(e),r.d(e,"getBrushByIndex",(function(){return f}));var n=r(72);class h{constructor(t){var{app:e,size:r=1,lowres:n=!0,primaryColor:h,secondaryColor:o}=t;this._app=e,this._size=r,this._lowres=n,this._data=this.getScaledData(this._size),this._primaryColor=h,this._secondaryColor=o}get lowres(){return this._lowres}get data(){return this._data}get size(){return this._size}set size(t){void 0===t&&(t=1),this._size=t,this._data=this.getScaledData(this._size)}get primaryColor(){return this._primaryColor||this._app.primaryColor}get secondaryColor(){return this._secondaryColor||this._app.secondaryColor}getData(t){return h.scale([],t)}getScaledData(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h.scale(this.getData(t),this._app.density)}static scale(data,t){for(var e=[],r=0;r<data.length*t;r++){e.push([]);for(var n=0;n<data[0].length*t;n++)e[Number(r)].push(data[Math.floor(r/t)][Math.floor(n/t)])}return e}static scaleAsCopy(data,t){for(var e=[],r=0;r<data.length*t;r++){e.push([]);for(var n=0;n<data[0].length*t;n++)e[Number(r)].push(data[r%data.length][n%data[0].length])}return e}}class o extends h{getData(t){return t>1?c(t):t?[[1]]:[]}}function c(t){t=2*(t-1);for(var data=Array(t+1),i=0;i<t+1;i++)data[Number(i)]=Array(t+1).fill(0);return n.ellipse((t,e)=>{data[Math.round(t)][Math.round(e)]=1},t/2,t/2,t/2,t/2,{filled:!0}),data}class l extends h{getData(t){return function(t){for(var data=Array(t+1),i=0;i<t+1;i++)data[Number(i)]=Array(t+1).fill(0);return n.rectangle((t,e)=>{data[Math.round(t)][Math.round(e)]=1},0,0,t,t,{filled:!0}),data}(t)}}class d extends h{getData(t){return function(t){for(var data=c(t+2),i=0;i<data.length;i++)for(var e=0;e<data[Number(i)].length;e++)data[Number(i)][Number(e)]>0&&Math.random()<.15/t?data[Number(i)][Number(e)]=1:data[Number(i)][Number(e)]=0;return data}(t)}get data(){return this._data=this.getScaledData(this._size),this._data}}function f(t){return[o,l,d][Number(t)]}e.default=h}}]);
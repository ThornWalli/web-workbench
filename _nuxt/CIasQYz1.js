import{c as n,d as e}from"./B-meQdOw.js";import{i as r}from"./Caivkp23.js";import{S as o}from"./D3MPJlJW.js";import{o as t,b as i}from"./CrNGlbV0.js";function share(n){void 0===n&&(n={});var e=n.connector,s=void 0===e?function(){return new o}:e,u=n.resetOnError,c=void 0===u||u,a=n.resetOnComplete,f=void 0===a||a,l=n.resetOnRefCountZero,d=void 0===l||l;return function(n){var e,o,u,a=0,l=!1,v=!1,cancelReset=function(){null==o||o.unsubscribe(),o=void 0},reset=function(){cancelReset(),e=u=void 0,l=v=!1},resetAndUnsubscribe=function(){var n=e;reset(),null==n||n.unsubscribe()};return t(function(n,t){a++,v||l||cancelReset();var b=u=null!=u?u:s();t.add(function(){0!==--a||v||l||(o=handleReset(resetAndUnsubscribe,d))}),b.subscribe(t),!e&&a>0&&(e=new i({next:function(n){return b.next(n)},error:function(n){v=!0,cancelReset(),o=handleReset(reset,c,n),b.error(n)},complete:function(){l=!0,cancelReset(),o=handleReset(reset,f),b.complete()}}),r(n).subscribe(e))})(n)}}function handleReset(o,t){for(var s=[],u=2;u<arguments.length;u++)s[u-2]=arguments[u];if(!0!==t){if(!1!==t){var c=new i({next:function(){c.unsubscribe(),o()}});return r(t.apply(void 0,n([],e(s)))).subscribe(c)}}else o()}export{share as s};

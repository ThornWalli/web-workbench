import{W as L}from"./B1olVgM4.js";import{W as b}from"./Uu07fvcW.js";import{W as M}from"./C0s6aVd8.js";import{W as z}from"./CtYz4Lhf.js";import{W as h}from"./BHtCX32_.js";import{p as D,d as E}from"./BnQx2YJv.js";import{u as R}from"./DcvgOCRL.js";import{d as U,r as _,O as i,k as o,o as $,y as G,z as J,C as a,D as y,P as F,G as N,S as O,ac as T,_ as j}from"./BUU1NkbK.js";import"./_N77y_hU.js";import"./CZFypg2d.js";import"./CpIyErmU.js";import"./RAasLaaH.js";import"./D4lI5vpz.js";import"./DdQrQ7-5.js";import"./6C4StZv5.js";import"./7MFW2ODw.js";const q={class:"wb-module-files-save"},A=U({__name:"Save",props:{fsItem:{},id:{},model:{}},emits:["close"],setup(W,{emit:S}){var f,d,p;const{core:s}=R();if(!((f=s.value)!=null&&f.modules.files))throw new Error("Files module not found");const t=W,u=S,l=_({path:"",filename:"",file:null,...t.model}),m=((d=s.value)==null?void 0:d.modules.files)&&i((p=s.value)==null?void 0:p.modules.files),c={cancel:"Cancel",save:"Save"},C=o(()=>({hideLabel:!0,label:"Path",placeholder:"Path…",modelValue:l.value.path})),k=o(()=>({hideLabel:!0,label:"Filename",placeholder:"Filename…",modelValue:l.value.filename,"onUpdate:model-value":e=>{l.value.filename=e}})),P=o(()=>({name:"path",modelValue:l.value.path,"onUpdate:model-value":e=>{l.value.path=e},onSelect:B})),r=_(t.fsItem||i(m.fs.root)),w=o(()=>{var e,n,v;return t.fsItem?t.fsItem:(n=(e=s.value)==null?void 0:e.modules.files)!=null&&n.fs.root?(v=s.value)==null?void 0:v.modules.files.fs.root:null}),x=o(()=>r.value?r.value.locked:!1),g=o(()=>!l.value.filename),B=e=>{r.value=i(e),e instanceof E?l.value.path=e.getPath():e.name&&(l.value.filename=e.name)};$(()=>{t.id&&(l.value.filename=t.id)});const I=()=>{u("close")},V=()=>{const e=D(l.value.path,l.value.filename);u("close",e)};return(e,n)=>(J(),G("div",q,[a(L,{onSubmit:V},{default:y(()=>[a(h,F(C.value,{readonly:""}),null,16),a(z,F(P.value,{"file-system":N(m).fileSystem,"fs-item":w.value}),null,16,["file-system","fs-item"]),a(h,O(T(k.value)),null,16),a(M,{align:"outer",full:""},{default:y(()=>[a(b,{"style-type":"secondary",label:c.cancel,onClick:I},null,8,["label"]),a(b,{"style-type":"primary",label:c.save,type:"submit",disabled:x.value||g.value},null,8,["label","disabled"])]),_:1})]),_:1})]))}}),me=j(A,[["__scopeId","data-v-5b90e1c7"]]);export{me as default};

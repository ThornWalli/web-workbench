import{W as I}from"./BXIB5LbF.js";import{W as g}from"./DogGH0My.js";import{W as x}from"./fxYYEoKC.js";import{W as L}from"./Ck78BBCY.js";import{u as _,M as $}from"./Dr9DEtSu.js";import{A as M}from"./DlyVNOZd.js";import{_ as C,r as k,t as W,v as h,z as o,D as t,j as b,A as w,K as f}from"./CYlf7ZdY.js";import{W as y}from"./CVVz7dGi.js";import{W as A}from"./BN92RPm7.js";import"./C6aID195.js";import"./CL8geYCd.js";const K={class:"wb-disks-workbench13-cloud-info"},S={__name:"Info",setup(n){const{setContextMenu:l}=_();l(V);const d=k(["# Cloud",`Connect to a Firebase storage.  
`,`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`));return(c,r)=>(h(),W("div",K,[o(t(M),{content:d.value},null,8,["content"])]))}},D=C(S,[["__scopeId","data-v-b6c1ecb8"]]),U={class:"wb-module-files-cloud-connect"},E="Connect",F={__name:"Connect",props:{model:{type:Object,default(){return{id:null,apiKey:null,url:null}}}},emits:["close"],setup(n,{emit:l}){const d=n,c=l,{setContextMenu:r}=_();r(V,{model:d.model});const e=k({...d.model}),i={id:{label:"ID",placeholder:"ID…"},apiKey:{label:"Api Key",placeholder:"Api Key…"},url:{label:"Url",placeholder:"https://…"}},m=b(()=>!e.value.id||!e.value.apiKey||!e.value.url),p=()=>{m.value||c("close",e.value)};return(u,s)=>(h(),W("div",U,[o(t(I),{onSubmit:p},{default:w(()=>[o(t(y),f(i.id,{modelValue:e.value.id,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value.id=a)}),null,16,["modelValue"]),o(t(y),f(i.apiKey,{modelValue:e.value.apiKey,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value.apiKey=a)}),null,16,["modelValue"]),o(t(y),f(i.url,{modelValue:e.value.url,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value.url=a)}),null,16,["modelValue"]),o(t(L),{align:"outer",full:""},{default:w(()=>[o(t(g),{"style-type":"primary",label:E,type:"submit",disabled:m.value},null,8,["disabled"])]),_:1})]),_:1})]))}},P=C(F,[["__scopeId","data-v-606963ef"]]),Y={class:"wb-module-files-cloud-connect"},X="Login",j={__name:"Login",props:{model:{type:Object,default(){return{email:null,password:null,storage:null}}},items:{type:Array,default(){return[]}}},emits:["close"],setup(n,{emit:l}){const d=n,c=l,{setContextMenu:r}=_();r(V,{model:d.model});const e=k({...d.model}),i={email:{type:"email",label:"Email",placeholder:"Email…"},password:{type:"password",label:"Password",placeholder:"Password…"},storage:{label:"Storage"}},m=b(()=>[{title:"Select Storage",value:null},...d.items.map(s=>({title:s.name,value:s.id}))]),p=b(()=>!e.value.email||!e.value.password||!e.value.storage);function u(){p.value||c("close",e.value)}return(s,a)=>(h(),W("div",Y,[o(t(I),{onSubmit:u},{default:w(()=>[o(t(A),f(i.storage,{modelValue:e.value.storage,"onUpdate:modelValue":a[0]||(a[0]=v=>e.value.storage=v),options:m.value}),null,16,["modelValue","options"]),o(t(y),f(i.email,{modelValue:e.value.email,"onUpdate:modelValue":a[1]||(a[1]=v=>e.value.email=v)}),null,16,["modelValue"]),o(t(y),f(i.password,{modelValue:e.value.password,"onUpdate:modelValue":a[2]||(a[2]=v=>e.value.password=v)}),null,16,["modelValue"]),o(t(L),{align:"outer",full:""},{default:w(()=>[o(t(g),{"style-type":"primary",label:X,type:"submit",disabled:p.value},null,8,["disabled"])]),_:1})]),_:1})]))}},O=C(j,[["__scopeId","data-v-18c10189"]]),V=({core:n,model:l})=>[{title:"Cloud",items:[{title:"Connect with…",action:N(n,l)},{title:"Login with…",action:B(n,l)},{type:$.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:T(n)}]}];function T(n){return()=>{n.modules.windows.addWindow({title:"Info",component:D,componentData:{},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"})}}function B(n,l){return()=>{const d=n.modules.windows.addWindow({title:"Login with",component:O,componentData:{items:l.items},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(c=>{d.events.subscribe(async({name:r,value:e})=>{if(r==="close"){if(e){const{email:i,password:m,storage:p}=e;try{await l.actions.login(i,m,p)}catch(u){debugger;alert(u)}}c()}})})}}function N(n,l){return()=>{const d=n.modules.windows.addWindow({title:"Connect with",component:P,componentData:{model:{id:null,apiKey:null,url:null}},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(c=>{d.events.subscribe(async({name:r,value:e})=>{if(r==="close"){if(e){const{id:i,url:m,apiKey:p}=e;await l.actions.connect(i,p,m)}c()}})})}}const G={class:"wb-disks-workbench13-cloud-connect"},R="Disconnect",z="Logout",q={__name:"Cloud",props:{model:{type:Object,default(){return{id:null,items:[]}}},setId:{type:Function,default(){return()=>{}}}},setup(n){const l=n,{setContextMenu:d}=_();d(V,{model:l.model});const c={title:"Mounted Storages:",name:"id",modelValue:l.model.id,"onUpdate:model-value":u=>l.setId(u)},r=b(()=>{const u=l.model.items;return u.map(s=>{const a=s.isLogged();return{label:`${s.name} ${a?"LOGGED IN":""}`,value:s.id,isLogged:a,id:s.id}}).concat(Array(Math.max(3-u.length,0)).fill({label:null,disabled:!0}))}),e=b(()=>!l.model.id||l.model.items.length<1),i=b(()=>!r.value.find(u=>u.id===l.model.id&&u.isLogged)||l.model.items.length<1),m=()=>{l.model.actions.disconnect(l.model.id)},p=()=>{l.model.actions.logout(l.model.id)};return(u,s)=>(h(),W("div",G,[o(t(I),null,{default:w(()=>[o(t(x),f(c,{items:r.value}),null,16,["items"]),o(t(L),{align:"outer",full:""},{default:w(()=>[o(t(g),{"style-type":"secondary",label:R,disabled:e.value,onClick:m},null,8,["disabled"]),o(t(g),{"style-type":"secondary",label:z,disabled:i.value,onClick:p},null,8,["disabled"])]),_:1})]),_:1})]))}},de=C(q,[["__scopeId","data-v-73769075"]]);export{de as default};

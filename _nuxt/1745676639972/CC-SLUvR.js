import{i as f,o as U}from"./gfIAX8eU.js";import{M as y,g as X}from"./Dr9DEtSu.js";import{v as q}from"./xlSE9NhY.js";import{d as V}from"./0lJVpglL.js";import{S as F,W as Y}from"./BtN4NQcH.js";import{S as G}from"./D6W2Pk7K.js";import{t as m,v as a,x as N,d as J,r as c,j as s,o as Q,a0 as A,V as Z,C as b,A as D,F as u,M as T,K as ee,z as C,D as h,y as B,B as te,X as oe,_ as ne}from"./CYlf7ZdY.js";import{e as ie}from"./B6KsP_aU.js";import{S as ae}from"./6C4StZv5.js";import"./C6aID195.js";import"./DmCMAY6H.js";import"./D4lI5vpz.js";import"./DlfJZ9EB.js";import"./JXQ19Fa6.js";import"./D7n7Xkqx.js";import"./CSlkdJUE.js";import"./CL8geYCd.js";import"./__NSLBDc.js";const se={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"};function ce(o,v){return a(),m("svg",se,v[0]||(v[0]=[N("path",{d:"M0 0h2v2h2v2h2v2H4v2H2v2H0z",class:"svg-primary"},null,-1)]))}const re={render:ce},le=["type","name","value","checked"],ue={key:1,class:"checkbox"},me={class:"title"},ve={key:2,class:"hotkey"},de={key:3,class:"indicator-context"},pe=J({__name:"Item",props:{item:{type:Object,required:!0},parentLayout:{type:Object,default(){return{size:q.screenSize}}},tag:{type:String,default:"div"},direction:{type:String,default:"bottom",validator:o=>["top","bottom"].includes(o)}},emits:["click","update:model-value"],setup(o,{emit:v}){const e=o,x=v,I=c(),O=c(),g=c(),k=c(!1),d=c(!1),r=c(f(2,3)),w=new ae,z=s(()=>e.item.type===y.RADIO?"radio":"checkbox"),l=s(()=>[y.CHECKBOX,y.RADIO].includes(e.item.type)),M=s(()=>e.item.type===y.RADIO),K=s(()=>l.value?"label":e.item.url?"a":"button"),P=s(()=>{const t={class:"inner",is:void 0};return l.value?t.is="label":e.item.url&&(t.is="a",t.href=e.item.url),t}),R=s(()=>({"force-visible":k.value,"context-ready":d.value,"context-halign-left":r.value.x===0,"context-halign-right":r.value.x===2,"context-valign-top":r.value.y===1,"context-valign-bottom":r.value.y===3,disabled:H.value.disabled})),H=s(()=>e.item.options);Q(()=>{A(()=>{e.item.hotKey&&w.add(V.keyDown.subscribe(t=>{V.cmdActive&&e.item.hotKey.charCodeAt(0)===t.keyCode&&$()}))})}),Z(()=>{w.unsubscribe()});function _(t,n){x("update:model-value",t,n)}function $(){e.item.action?e.item.action():I.value.click()}function j(t){let n;const i=t.target;M.value?n=i==null?void 0:i.value:n=i==null?void 0:i.checked,ie(n)?e.item.setValue(Number(n)):e.item.setValue(n),x("update:model-value",e.item.name,n),typeof e.item.action=="function"&&Promise.resolve(e.item.action(n)).catch(p=>{throw p})}function L(t){t.stopPropagation(),!l.value&&typeof e.item.action=="function"?Promise.resolve(e.item.action()).catch(n=>{throw n}):x("click",t)}function W(){d.value||(k.value=!0),E()}function E(){d.value||(d.value=!0,A(()=>{window.setTimeout(()=>{if(g.value){const t=g.value.$el.getBoundingClientRect(),{size:n,position:i}=e.parentLayout,p=U(()=>f(t.left,t.top)-(i.x>0?i:0)+f(t.width,t.height)),S=e.direction==="bottom";r.value=f(n.x<p.x?0:2,n.y-2<=p.y?S?1:3:S?3:1)}k.value=!1},0)}))}return(t,n)=>(a(),b(T(o.tag),{class:oe(["wb-env-atom-context-menu-item",R.value]),onMouseover:E,onTouchstart:W,onClick:L},{default:D(()=>[(a(),b(T(K.value),ee({ref_key:"clickEl",ref:I},P.value),{default:D(()=>[l.value?(a(),m("input",{key:0,ref_key:"inputEl",ref:O,type:z.value,name:o.item.name,value:o.item.value,checked:M.value?o.item.getValue()===o.item.value:o.item.getValue(),onInput:j},null,40,le)):u("",!0),l.value?(a(),m("span",ue,[C(h(G))])):u("",!0),N("span",me,B(o.item.title),1),o.item.hotKey?(a(),m("span",ve,[C(h(F)),te(" "+B(o.item.hotKey),1)])):u("",!0),o.item.items.length>0?(a(),m("span",de,[C(h(re))])):u("",!0)]),_:1},16)),o.item.items.length>0?(a(),b(Y,{key:0,ref_key:"contextMenuEl",ref:g,items:h(X)(o.item.items),"parent-layout":o.parentLayout,onInput:_},null,8,["items","parent-layout"])):u("",!0)]),_:1},40,["class"]))}}),Ne=ne(pe,[["__scopeId","data-v-4c63a895"]]);export{Ne as default};

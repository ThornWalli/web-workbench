var m=Object.defineProperty;var v=(t,e,i)=>e in t?m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var s=(t,e,i)=>v(t,typeof e!="symbol"?e+"":e,i);import{i as c}from"./gfIAX8eU.js";import{b as h,f as g}from"./D7n7Xkqx.js";import{s as n}from"./DlfJZ9EB.js";var w=(t=>(t.ENTER="Enter",t.SHIFT_LEFT="ShiftLeft",t.SHIFT_RIGHT="ShiftRight",t.CAPS_LOCK="CapsLock",t.ARROW_UP="ArrowUp",t.ARROW_DOWN="ArrowDown",t))(w||{}),A=(t=>(t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT",t[t.BACK=3]="BACK",t[t.FORWARD=4]="FORWARD",t))(A||{});const x=new Promise(t=>{/complete|interactive|loaded/.test(document.readyState)?t(!0):document.addEventListener("DOMContentLoaded",t,!1)});class y{constructor(){s(this,"size",0);window.requestAnimationFrame(()=>{document.documentElement.style.overflowY="scroll",this.size=window.innerWidth-document.body.offsetWidth,document.documentElement.style.overflowY=""})}}const z=new y;function b(t,e){return t===e?!0:t instanceof HTMLElement&&t.parentElement?t.parentElement!==e?b(t.parentElement,e):!0:!1}window.requestAnimationFrame(()=>{document.documentElement.style.overflowY="scroll",window.innerWidth-document.body.offsetWidth,document.documentElement.style.overflowY=""});class p{constructor({x:e,y:i,target:r=null,preventDefault:o,stopPropagation:a}){s(this,"x");s(this,"y");s(this,"target");s(this,"preventDefault");s(this,"stopPropagation");this.x=e,this.y=i,this.target=r,this.preventDefault=o,this.stopPropagation=a}get clientX(){return console.warn("clientX is deprecated, use x instead"),this.x}get clientY(){return console.warn("clientY is deprecated, use y instead"),this.y}}function f(t){let e=0,i=0;if(t instanceof TouchEvent&&t.touches&&t.touches.length>0){const r=t.touches[0];e=r.clientX,i=r.clientY}else(t instanceof p||t instanceof MouseEvent||t instanceof PointerEvent)&&(e=t.x,i=t.y);return new p({x:e,y:i,target:t.target,preventDefault:t.preventDefault.bind(t),stopPropagation:t.stopPropagation.bind(t)})}function F(t,e){const{x:i,y:r,width:o,height:a}=e,u=c(i,r),l=c(()=>c(o,a)/2),d=c(t.x,t.y);return c(()=>(d-u-l)/l)}class L{constructor(){s(this,"observers",new Map);s(this,"capsLockActive",!1);s(this,"shiftLeftActive",!1);s(this,"shiftRightActive",!1);s(this,"cmdLeftActive",!1);s(this,"cmdRightActive",!1);s(this,"altLeftActive",!1);s(this,"altRightActive",!1);s(this,"pointerDown");s(this,"pointerUp");s(this,"pointerMove");s(this,"keyDown");s(this,"keyUp");s(this,"keyPress");s(this,"resize");var e,i;this.resize=this.get("resize",window).pipe(n()),this.pointerDown=this.getPointerDown(),this.pointerUp=this.getPointerUp(),this.pointerMove=this.getPointerMove(),this.keyPress=this.get("kexypress").pipe(n()),this.keyDown=this.get("keydown").pipe(n()),this.keyUp=this.get("keyup").pipe(n()),(e=this.keyDown)==null||e.subscribe(({code:r,location:o})=>{switch(Number(r)){case 91:this.cmdLeftActive=!0;break;case 93:this.cmdRightActive=!0;break;case 16:o===2?this.shiftRightActive=!0:this.shiftLeftActive=!0;break;case 18:o===2?this.altRightActive=!0:this.altLeftActive=!0;break;case 20:this.capsLockActive=!this.capsLockActive;break}}),(i=this.keyUp)==null||i.subscribe(({code:r,location:o})=>{switch(Number(r)){case 91:this.cmdLeftActive=!1;break;case 93:this.cmdRightActive=!1;break;case 16:o===2?this.shiftRightActive=!1:this.shiftLeftActive=!1;break;case 18:o===2?this.altRightActive=!1:this.altLeftActive=!1;break}})}getPointerDown(e){return this.get("pointerdown",e).pipe(h(i=>f(i))).pipe(n())}getPointerUp(e){return this.get("pointerup",e).pipe(h(i=>f(i))).pipe(n())}getPointerMove(e){return this.get("pointermove",e).pipe(h(i=>f(i))).pipe(n())}get(e,i){i=i||document,this.observers.has(i)||this.observers.set(i,new Map);const r=this.observers.get(i);if(r&&!r.has(e)){const o={passive:!0,capture:!1};r.set(e,g(i,e,o))}return r.get(e)}reset(){this.observers.clear()}get cmdActive(){return this.cmdLeftActive||this.cmdRightActive}get altActive(){return this.altLeftActive||this.altRightActive}get shiftActive(){return this.shiftLeftActive||this.shiftRightActive}}const W=new L;export{w as K,A as M,x as a,b as c,W as d,F as g,f as n,z as s};

import{c as F,d as O}from"./D4lI5vpz.js";import{i as p,b as T,O as k}from"./JXQ19Fa6.js";import{o as M,i as a}from"./6C4StZv5.js";import{c as h}from"./CSlkdJUE.js";function P(n,e,i,r,t){r===void 0&&(r=0),t===void 0&&(t=!1);var u=e.schedule(function(){i(),t?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(u),!t)return u}function w(n,e){return M(function(i,r){var t=0;i.subscribe(h(r,function(u){r.next(n.call(e,u,t++))}))})}var _=Array.isArray;function g(n,e){return _(e)?n.apply(void 0,F([],O(e))):n(e)}function q(n){return w(function(e){return g(n,e)})}function z(n,e,i,r,t,u,v,d){var o=[],f=0,s=0,y=!1,E=function(){y&&!o.length&&!f&&e.complete()},I=function(c){return f<r?x(c):o.push(c)},x=function(c){f++;var L=!1;p(i(c,s++)).subscribe(h(e,function(m){e.next(m)},function(){L=!0},void 0,function(){if(L)try{f--;for(var m=function(){var l=o.shift();v||x(l)};o.length&&f<r;)m();E()}catch(l){e.error(l)}}))};return n.subscribe(h(e,I,function(){y=!0,E()})),function(){}}function C(n,e,i){return i===void 0&&(i=1/0),a(e)?C(function(r,t){return w(function(u,v){return e(r,u,t,v)})(p(n(r,t)))},i):(typeof e=="number"&&(i=e),M(function(r,t){return z(r,t,n,i)}))}var B=["addListener","removeListener"],H=["addEventListener","removeEventListener"],J=["on","off"];function b(n,e,i,r){if(a(i)&&(r=i,i=void 0),r)return b(n,e,i).pipe(q(r));var t=O(V(n)?H.map(function(d){return function(o){return n[d](e,o,i)}}):Q(n)?B.map(A(n,e)):R(n)?J.map(A(n,e)):[],2),u=t[0],v=t[1];if(!u&&T(n))return C(function(d){return b(d,e,i)})(p(n));if(!u)throw new TypeError("Invalid event target");return new k(function(d){var o=function(){for(var f=[],s=0;s<arguments.length;s++)f[s]=arguments[s];return d.next(1<f.length?f:f[0])};return u(o),function(){return v(o)}})}function A(n,e){return function(i){return function(r){return n[i](e,r)}}}function Q(n){return a(n.addListener)&&a(n.removeListener)}function R(n){return a(n.on)&&a(n.off)}function V(n){return a(n.addEventListener)&&a(n.removeEventListener)}export{C as a,w as b,P as e,b as f,q as m};

import{e as x,_ as P,c as k,d as F}from"./D4lI5vpz.js";import{k as w,O as C,i as j}from"./JXQ19Fa6.js";import{e as T,E as I,S as z,a as Z,o as B,b as R}from"./6C4StZv5.js";var D=T(function(o){return function(){o(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),A=function(o){x(n,o);function n(){var r=o.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return n.prototype.lift=function(r){var e=new g(this,this);return e.operator=r,e},n.prototype._throwIfClosed=function(){if(this.closed)throw new D},n.prototype.next=function(r){var e=this;w(function(){var t,u;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var i=P(e.currentObservers),s=i.next();!s.done;s=i.next()){var m=s.value;m.next(r)}}catch(y){t={error:y}}finally{try{s&&!s.done&&(u=i.return)&&u.call(i)}finally{if(t)throw t.error}}}})},n.prototype.error=function(r){var e=this;w(function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=r;for(var t=e.observers;t.length;)t.shift().error(r)}})},n.prototype.complete=function(){var r=this;w(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var e=r.observers;e.length;)e.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(r){return this._throwIfClosed(),o.prototype._trySubscribe.call(this,r)},n.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},n.prototype._innerSubscribe=function(r){var e=this,t=this,u=t.hasError,i=t.isStopped,s=t.observers;return u||i?I:(this.currentObservers=null,s.push(r),new z(function(){e.currentObservers=null,Z(s,r)}))},n.prototype._checkFinalizedStatuses=function(r){var e=this,t=e.hasError,u=e.thrownError,i=e.isStopped;t?r.error(u):i&&r.complete()},n.prototype.asObservable=function(){var r=new C;return r.source=this,r},n.create=function(r,e){return new g(r,e)},n}(C),g=function(o){x(n,o);function n(r,e){var t=o.call(this)||this;return t.destination=r,t.source=e,t}return n.prototype.next=function(r){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.next)===null||t===void 0||t.call(e,r)},n.prototype.error=function(r){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.error)===null||t===void 0||t.call(e,r)},n.prototype.complete=function(){var r,e;(e=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||e===void 0||e.call(r)},n.prototype._subscribe=function(r){var e,t;return(t=(e=this.source)===null||e===void 0?void 0:e.subscribe(r))!==null&&t!==void 0?t:I},n}(A),M={now:function(){return(M.delegate||Date).now()},delegate:void 0};function G(o){o===void 0&&(o={});var n=o.connector,r=n===void 0?function(){return new A}:n,e=o.resetOnError,t=e===void 0?!0:e,u=o.resetOnComplete,i=u===void 0?!0:u,s=o.resetOnRefCountZero,m=s===void 0?!0:s;return function(y){var c,a,l,v=0,d=!1,h=!1,p=function(){a==null||a.unsubscribe(),a=void 0},S=function(){p(),c=l=void 0,d=h=!1},U=function(){var f=c;S(),f==null||f.unsubscribe()};return B(function(f,E){v++,!h&&!d&&p();var b=l=l??r();E.add(function(){v--,v===0&&!h&&!d&&(a=O(U,m))}),b.subscribe(E),!c&&v>0&&(c=new R({next:function(_){return b.next(_)},error:function(_){h=!0,p(),a=O(S,t,_),b.error(_)},complete:function(){d=!0,p(),a=O(S,i),b.complete()}}),j(f).subscribe(c))})(y)}}function O(o,n){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];if(n===!0){o();return}if(n!==!1){var t=new R({next:function(){t.unsubscribe(),o()}});return j(n.apply(void 0,k([],F(r)))).subscribe(t)}}export{A as S,M as d,G as s};

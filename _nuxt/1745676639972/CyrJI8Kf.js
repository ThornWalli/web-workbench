import{e as u,c as l,d as a}from"./D4lI5vpz.js";import{S as d,a as f}from"./6C4StZv5.js";import{d as v}from"./DlfJZ9EB.js";var p=function(s){u(i,s);function i(t,e){return s.call(this)||this}return i.prototype.schedule=function(t,e){return this},i}(d),h={setInterval:function(s,i){for(var t=[],e=2;e<arguments.length;e++)t[e-2]=arguments[e];return setInterval.apply(void 0,l([s,i],a(t)))},clearInterval:function(s){return clearInterval(s)},delegate:void 0},y=function(s){u(i,s);function i(t,e){var r=s.call(this,t,e)||this;return r.scheduler=t,r.work=e,r.pending=!1,r}return i.prototype.schedule=function(t,e){var r;if(e===void 0&&(e=0),this.closed)return this;this.state=t;var n=this.id,c=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(c,n,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(c,this.id,e),this},i.prototype.requestAsyncId=function(t,e,r){return r===void 0&&(r=0),h.setInterval(t.flush.bind(t,this),r)},i.prototype.recycleAsyncId=function(t,e,r){if(r===void 0&&(r=0),r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&h.clearInterval(e)},i.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(t,e){var r=!1,n;try{this.work(t)}catch(c){r=!0,n=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},i.prototype.unsubscribe=function(){if(!this.closed){var t=this,e=t.id,r=t.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,f(n,this),e!=null&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,s.prototype.unsubscribe.call(this)}},i}(p),o=function(){function s(i,t){t===void 0&&(t=s.now),this.schedulerActionCtor=i,this.now=t}return s.prototype.schedule=function(i,t,e){return t===void 0&&(t=0),new this.schedulerActionCtor(this,i).schedule(e,t)},s.now=v.now,s}(),A=function(s){u(i,s);function i(t,e){e===void 0&&(e=o.now);var r=s.call(this,t,e)||this;return r.actions=[],r._active=!1,r}return i.prototype.flush=function(t){var e=this.actions;if(this._active){e.push(t);return}var r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}},i}(o),b=new A(y),m=b;export{b as a,m as b};

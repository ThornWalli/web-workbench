import{A as H}from"./DlyVNOZd.js";import{s as j}from"./0lJVpglL.js";import{t as d,v as s,x as a,_ as F,r as i,z as w,D as u,j as S,$ as P,o as Y,C as x,F as h,y as W,W as B}from"./CYlf7ZdY.js";import{u as C,M as g}from"./Dr9DEtSu.js";import{getDefaultDocumentModel as y,FONT_SIZES as L,FONT_FAMILES as O,FONT_TYPES as U,PROPERTY as _}from"./CrmfUNPX.js";import"./gfIAX8eU.js";import"./D7n7Xkqx.js";import"./D4lI5vpz.js";import"./JXQ19Fa6.js";import"./6C4StZv5.js";import"./CSlkdJUE.js";import"./DlfJZ9EB.js";import"./C6aID195.js";import"./BY0KaPQX.js";import"./C5mdboMC.js";import"./B6KsP_aU.js";import"./__NSLBDc.js";const Z={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"14"};function K(r,e){return s(),d("svg",Z,e[0]||(e[0]=[a("path",{fill:"#05a",d:"M0 0h12v14H0z"},null,-1),a("path",{fill:"#fff",d:"M0 2v2h1v2h2v2h1v2h2v2h1v2h3V2z"},null,-1)]))}const T={render:K},X={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"18"};function q(r,e){return s(),d("svg",X,e[0]||(e[0]=[a("path",{d:"M6 2h1v2H6zM7 4h1v2H7zM5 0h1v2H5zM4 2h1v2H4zM7 16H4v-4H3v6h5v-6H7zM8 6h1v2H8zM10 10V8H9v2H8v2h3v-2zM2 10V8H1v2H0v2h3v-2zM3 4h1v2H3zM2 6h1v2H2z"},null,-1)]))}const z={render:q},G={class:"wb-disks-workbench13-document-reader-info"},J={__name:"Info",props:{model:{type:Object,default(){return{value:y()}}}},setup(r){const e=r,{setContextMenu:o}=C();o(b,{model:e.model});const v=i(["# Document Reader",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`));return(p,t)=>(s(),d("div",G,[w(u(H),{content:v.value},null,8,["content"])]))}},Q=F(J,[["__scopeId","data-v-241987e8"]]),b=({core:r,model:e})=>{const{windows:o}=r.modules;return[{title:"Document Reader",items:[{title:"Openâ€¦",hotKey:"O",keyCode:79,action:v},{type:g.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:p}]},{title:"Font Family",items:Object.keys(O).map(t=>{const n=O[String(t)];return{title:U[String(t)],items:Object.keys(n).map(c=>{const m=n[String(c)];return{title:c,type:g.RADIO,name:_.FONT_FAMILY,value:m,model:e.value}})}})},{title:"Font Size",items:L.map(t=>({title:`${t}px`,type:g.RADIO,name:_.FONT_SIZE,value:t,model:e.value}))}];async function v(){const t=await r.executeCommand("openFileDialog");if(t)if("content"in t.value)e.fsItem=t.fsItem,e.value=Object.assign(e.value,y(),t.value);else throw new Error("Can't read file content")}function p(){o.addWindow({title:"Info",component:Q,componentData:{model:e},options:{scaleX:!1,scaleY:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentReader"})}},ee={class:"content"},te={class:"pagination"},ne={__name:"DocumentReader",props:{model:{type:Object,default(){return{fsItem:null,value:y()}}}},setup(r){const e=i(null),o=r,{setContextMenu:v,...p}=C();v(b,{model:o.model});const t=i([]),n=i(0),c=i(null),m=i(0),E=S(()=>{const l=o.model.value[_.FONT_FAMILY];return{"--scroll-bar-size":`${j.size}`,"--font-size-markdown":`${o.model.value[_.FONT_SIZE]}`,"--font-markdown-typo-headline-primary":l,"--font-markdown-typo-headline-secondary":l,"--font-markdown-typo-text":l,"--font-markdown-typo-code":l,"--font-markdown-typo-blockquote":l}}),N=S(()=>t.value[n.value]);P(()=>n.value,()=>{e.value.scrollTop=0}),P(()=>o.model,()=>{M()},{deep:!0}),Y(()=>{M()});function M(){o.model.fsItem&&(p.window.value.options.title=o.model.fsItem.name+" - Document Reader");const f=o.model.value.content.split(/\[PAGE\][\n]+/);n.value=0,t.value=f}function k(){n.value=Math.max(n.value-1,0)}function R(){n.value=Math.min(n.value+1,t.value.length-1)}function A(){D(()=>{e.value.scrollTop=Math.max(e.value.scrollTop-20,0)})}function $(){D(()=>{e.value.scrollTop=Math.min(e.value.scrollTop+20,e.value.scrollHeight)})}function I(){window.clearInterval(c.value)}function D(l){window.clearInterval(c.value),c.value=setInterval(l,125)}function V(l){l.preventDefault(),m.value=e.value.scrollTop/(e.value.scrollHeight-e.value.offsetHeight)}return(l,f)=>(s(),d("div",{class:"wb-disks-workbench13-document-reader",style:B(E.value)},[a("div",ee,[a("div",{ref_key:"scrollContainerEl",ref:e,class:"content-scroll",onScroll:V},[w(u(H),{content:N.value},null,8,["content"])],544)]),a("div",te,[a("div",{class:"pagination-frame pagination-current",onPointerdown:k},[a("span",null,W(n.value+1),1)],32),m.value>0?(s(),d("div",{key:0,class:"pagination-frame pagination-scroll_up",onPointerdown:A,onPointerup:I},[a("i",null,[w(u(z))])],32)):h("",!0),f[0]||(f[0]=a("div",{class:"pagination-spacer"},null,-1)),m.value<1?(s(),d("div",{key:1,class:"pagination-frame pagination-scroll-down",onPointerdown:$,onPointerup:I},[a("i",null,[w(u(z))])],32)):h("",!0)]),n.value>0?(s(),x(u(T),{key:0,class:"corner corner_left",onPointerdown:k})):h("",!0),n.value<t.value.length-1?(s(),x(u(T),{key:1,class:"corner corner-right",onPointerdown:R})):h("",!0)],4))}},ye=F(ne,[["__scopeId","data-v-685728a3"]]);export{ye as default};

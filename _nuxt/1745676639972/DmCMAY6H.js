import{e as m}from"./D4lI5vpz.js";import{d as p,S as u}from"./DlfJZ9EB.js";var c=function(s){m(a,s);function a(t,e,n){t===void 0&&(t=1/0),e===void 0&&(e=1/0),n===void 0&&(n=p);var i=s.call(this)||this;return i._bufferSize=t,i._windowTime=e,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=e===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,e),i}return a.prototype.next=function(t){var e=this,n=e.isStopped,i=e._buffer,o=e._infiniteTimeWindow,f=e._timestampProvider,r=e._windowTime;n||(i.push(t),!o&&i.push(f.now()+r)),this._trimBuffer(),s.prototype.next.call(this,t)},a.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),n=this,i=n._infiniteTimeWindow,o=n._buffer,f=o.slice(),r=0;r<f.length&&!t.closed;r+=i?1:2)t.next(f[r]);return this._checkFinalizedStatuses(t),e},a.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,n=t._timestampProvider,i=t._buffer,o=t._infiniteTimeWindow,f=(o?1:2)*e;if(e<1/0&&f<i.length&&i.splice(0,i.length-f),!o){for(var r=n.now(),d=0,_=1;_<i.length&&i[_]<=r;_+=2)d=_;d&&i.splice(0,d+1)}},a}(u);export{c as R};

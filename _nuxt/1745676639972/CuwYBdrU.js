import{W as $}from"./DogGH0My.js";import{a as x,N as y}from"./B-KIywKT.js";import{N as b}from"./DMsu-ujD.js";import{g as R}from"./BSj7esSs.js";import{_ as N,r as h,j as v,o as k,a0 as B,t as m,v as c,Y as z,Z as S,x as i,z as w,g}from"./CYlf7ZdY.js";import{u as A}from"./Dr9DEtSu.js";import"./gfIAX8eU.js";import"./D4lI5vpz.js";import"./CkopU8PM.js";import"./C5mdboMC.js";import"./CNkvSXuu.js";import"./C6aID195.js";const D=["width","height"],E={__name:"NoteCanvas",props:{density:{type:Number,default(){return window.devicePixelRatio||1}},notes:{type:Array,default:()=>[[["C#","2m"],["C#2","2m"],["C#2","2m."],["C#","1m"],["C#2","1m"],["C#2","1m."],["C#","2n."],["C#2","2n"],["C#2","2n."],["C#2","4n."]],[["","2m"],["","1m"],["","2n"],["","4n"],["","8n"],["","16n"],["","32n"]],[["C4","2m"],["C4","1m"],["C4","2n"],["C4","4n"],["C4","8n"],["C4","16n"],["C4","32n"]],[["C4","2m."],["C4","1m."],["C4","2n."],["C4","4n."],["C4","8n."],["C4","16n."],["C4","32n."]]]}},emits:["refresh"],setup(o,{emit:t}){const C=t,s=h(null),u=h(null),l=o,d=v(()=>l.notes.flat().map(([e,r])=>new b({note:e,time:r}))),p=v(()=>s.value?d.value:[]);k(()=>{const e=new DOMParser;window.svgNode=u.value=e.parseFromString(x,"image/svg+xml").querySelector("svg"),s.value=new y(u.value),B(async()=>{const r=Array.from(document.querySelectorAll("canvas"));await Promise.all(r.map((a,n)=>f(a,d.value[Number(n)]))),C("refresh")})});const f=async(e,r)=>{const a=e.getContext("2d");a.clearRect(0,0,e.width,e.height);const n=await s.value.render(r,{colors:{primary:"#ffffff",secondary:"#000000",tertiary:"#ff0000"}});e.width=n.canvas.width*l.density,e.height=n.canvas.height*l.density,e.style=`width: ${n.canvas.width}px; height: ${n.canvas.height}px;`;const _=R(n.canvas,e.width);a.drawImage(_,0,0)};return(e,r)=>(c(),m("ul",null,[(c(!0),m(z,null,S(p.value,a=>(c(),m("li",{key:a},[i("canvas",{width:s.value.dimension.x,height:s.value.dimension.y},null,8,D)]))),128))]))}},I=N(E,[["__scopeId","data-v-33f5c031"]]),P={components:{NoteCanvas:I,WbButton:$},emits:["refresh"],setup(){return{...A()}},data:function(){return{noteRenderer:new y}},mounted(){console.log("DEBUG",{noteRenderer:this.noteRenderer}),this.$nextTick(()=>{this.$emit("refresh")})}},W={class:"wb-disks-extras13-synthesizer-debug-notes"};function q(o,t,C,s,u,l){const d=g("wb-button"),p=g("note-canvas");return c(),m("div",W,[i("fieldset",null,[t[2]||(t[2]=i("legend",null,"Note Cache",-1)),w(d,{label:`Clear Cache (${o.noteRenderer.cache.size} Bitmaps)`,onClick:t[0]||(t[0]=f=>o.noteRenderer.cache.clear())},null,8,["label"])]),i("fieldset",null,[t[3]||(t[3]=i("legend",null,"Notes",-1)),w(p,{onRefresh:t[1]||(t[1]=f=>o.$emit("refresh"))})])])}const J=N(P,[["render",q],["__scopeId","data-v-a805be74"]]);export{J as default};

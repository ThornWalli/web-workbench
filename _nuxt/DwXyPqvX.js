import{g as r,S as C,N as O}from"./BxO05Tpb.js";import{M as a,g as S}from"./BukgkFri.js";import{W as M,S as w}from"./Cjfju0xA.js";import{v as A}from"./BuD4WQ83.js";import{d as f}from"./BmG3vGke.js";import{S as R}from"./Bq1CIWZA.js";import{t as s,v as l,x as _,_ as E,g as u,C as m,A as y,J as x,L as N,F as c,z as p,y as g,B,Y as P}from"./C5IvAcAs.js";import"./DwAjpAW9.js";import"./C5mdboMC.js";import"./PIkGlXJS.js";import"./AgLYVh2m.js";const V={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"};function H(t,e){return s(),l("svg",V,e[0]||(e[0]=[_("path",{d:"M0 0h2v2h2v2h2v2H4v2H2v2H0z",class:"svg-primary"},null,-1)]))}const L={render:H},i={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3},D={components:{WbEnvMoleculeContextMenu:M,SvgControlInputCheckbox:R,SvgControlContextInputHotkey:w,SvgControlContextMenuItemIndicatorContext:L},props:{direction:{type:String,default:"bottom",validator:t=>["top","bottom"].includes(t)},id:{type:String,default:null},tag:{type:String,default:"div"},options:{type:Object,default(){return{checked:!1,disabled:!1}}},model:{type:Object,default:null},parentLayout:{type:Object,default(){return{size:A.screenSize}}},title:{type:String,default:"Item Title"},hotKey:{type:String,default:null},command:{type:String,default:null},action:{type:Function,default:null},url:{type:String,default:null},name:{type:String,default:null},value:{type:[String,Number],default:null},type:{type:Number,default:a.DEFAULT},items:{type:Array,default(){return S([{title:"Sub Item 1",hotKey:"S",keyCode:73},{type:a.SEPARATOR},{title:"Sub Item 2",items:[{title:"Sub Item 2.1"},{title:"Sub Item 2.2"}]},{title:"Sub Item 3"}])}}},emits:["click","update:modelValue"],data(){return{forceVisible:!1,contextReady:!1,contextAlign:r(i.RIGHT,i.BOTTOM),subscription:new C,optionsWrapper:{disabled:!1,checked:!1}}},computed:{inputType(){return this.isInputRadio?"radio":"checkbox"},hasInput(){return[a.CHECKBOX,a.RADIO].includes(this.type)},isInputRadio(){return this.type===a.RADIO},clickTag(){return this.hasInput?"label":this.url?"a":"button"},clickData(){const t={class:"inner"};return this.hasInput?t.is="label":this.url&&(t.is="a",t.href=this.url),t},disabled(){return this.options.disabled},styleClasses(){return{"force-visible":this.forceVisible,"context-ready":this.contextReady,"context-halign-left":this.contextAlign.x===i.LEFT,"context-halign-right":this.contextAlign.x===i.RIGHT,"context-valign-top":this.contextAlign.y===i.TOP,"context-valign-bottom":this.contextAlign.y===i.BOTTOM,disabled:this.optionsWrapper.disabled}}},watch:{options(t){this.optionsWrapper=t}},mounted(){this.optionsWrapper=this.options,this.$nextTick(()=>{this.hotKey&&this.subscription.add(f.keyDown.subscribe(t=>{var e;f.cmdActive&&((e=this.hotKey)==null?void 0:e.charCodeAt(0))===t.keyCode&&this.executeAction()}))})},unmounted(){this.subscription.unsubscribe()},methods:{onInputContextMenu(...t){this.$emit("update:modelValue",...t)},executeAction(){this.action?this.action():this.$refs.click.click()},onInput(t){let e;this.isInputRadio?e=t.target.value:e=t.target.checked,typeof e=="boolean"||isNaN(e)?this.model[this.name]=e:this.model[this.name]=Number(e),this.$emit("update:modelValue",this.name,e),typeof this.action=="function"&&Promise.resolve(this.action(e)).catch(n=>{throw n})},onClick(t){t.stopPropagation(),!this.hasInput&&typeof this.action=="function"?Promise.resolve(this.action()).catch(e=>{throw e}):this.$emit("click",t)},onTouchstart(){this.contextReady||(this.forceVisible=!0),this.onMouseOver()},onMouseOver(){this.contextReady||(this.contextReady=!0,this.$nextTick(()=>{window.setTimeout(()=>{if(this.$refs.contextMenu){const t=this.$refs.contextMenu.$el.getBoundingClientRect(),{size:e,position:n}=this.parentLayout,h=O(()=>r(t.left,t.top)-(n.x>0?n:0)+r(t.width,t.height)),d=this.direction==="bottom";this.contextAlign=r(e.x<h.x?i.LEFT:i.RIGHT,e.y-2<=h.y?d?i.TOP:i.BOTTOM:d?i.BOTTOM:i.TOP)}this.forceVisible=!1},0)}))}}},K=["type","name","value","checked"],z={key:1,class:"checkbox"},F={class:"title"},W={key:2,class:"hotkey"},G={key:3,class:"indicator-context"};function j(t,e,n,h,d,o){const v=u("svg-control-input-checkbox"),b=u("svg-control-context-input-hotkey"),k=u("svg-control-context-menu-item-indicator-context"),I=u("wb-env-molecule-context-menu");return s(),m(x(n.tag),{class:P(["wb-env-atom-context-menu-item",o.styleClasses]),onMouseover:o.onMouseOver,onTouchstart:o.onTouchstart,onClick:o.onClick},{default:y(()=>[(s(),m(x(o.clickTag),N({ref:"click"},o.clickData),{default:y(()=>[o.hasInput?(s(),l("input",{key:0,ref:"input",type:o.inputType,name:n.name,value:n.value,checked:o.isInputRadio?n.model[n.name]===n.value:n.model[n.name],onInput:e[0]||(e[0]=(...T)=>o.onInput&&o.onInput(...T))},null,40,K)):c("",!0),o.hasInput?(s(),l("span",z,[p(v)])):c("",!0),_("span",F,g(n.title),1),n.hotKey?(s(),l("span",W,[p(b),B(" "+g(n.hotKey),1)])):c("",!0),n.items.length>0?(s(),l("span",G,[p(k)])):c("",!0)]),_:1},16)),n.items.length>0?(s(),m(I,{key:0,ref:"contextMenu",items:n.items,"parent-layout":n.parentLayout,onInput:o.onInputContextMenu},null,8,["items","parent-layout","onInput"])):c("",!0)]),_:1},40,["class","onMouseover","onTouchstart","onClick"])}const ot=E(D,[["render",j],["__scopeId","data-v-63ac9d3f"]]);export{ot as default};

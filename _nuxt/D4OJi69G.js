import{i as w}from"./OlYXjGCK.js";import{f as h,v as O}from"./Dv1mzSl-.js";import{d as N,r as _,k as H,a0 as E,o as U,y as X,z as j,A as Q,Z as Y,$ as z,_ as Z}from"./BkRx7U8b.js";function J(r,u,c,l){const t=l/2;if(!(t<=0))for(let a=0;a<=360;a++){const o=(a-1)*Math.PI/180,i=a*Math.PI/180,e=x(a,1,1);r.beginPath(),r.moveTo(u+l/2,c+l/2),r.arc(u+l/2,c+l/2,t,o,i),r.closePath(),r.fillStyle=`rgb(${e.r},${e.g},${e.b})`,r.fill()}}function K(r,u,c,l,t=w(1,1)){if(t===1)return J(r,u,c,l);const a=l/2;if(!(a<=0))for(let o=0;o<l;o+=t.y)for(let i=0;i<l;i+=t.x){const e=i+t.x/2-a,n=o+t.y/2-a;if(Math.sqrt(e*e+n*n)<=a){let m=Math.atan2(n,e)*180/Math.PI;m<0&&(m+=360);const v=x(m,1,1);r.fillStyle=`rgb(${v.r},${v.g},${v.b})`,r.fillRect(Math.round(u+i),Math.round(c+o),Math.round(t.x),Math.round(t.y))}}}function T(r,u,c,l,t=w(1,1)){const a=w(()=>l/t);if(!(a.x<=0||a.y<=0))for(let o=0;o<a.y;o++)for(let i=0;i<a.x;i++){const e=(i/a.x-1)*360,n=1-o/a.y,m=O(e,n,.5);r.fillStyle=`rgb(${m.r},${m.g},${m.b})`,r.fillRect(u+i*t.x,c+o*t.y,t.x,t.y)}}function x(r,u,c){let l,t,a;const o=Math.floor(r/60),i=r/60-o,e=c*(1-u),n=c*(1-i*u),d=c*(1-(1-i)*u);switch(o%6){case 0:l=c,t=d,a=e;break;case 1:l=n,t=c,a=e;break;case 2:l=e,t=c,a=d;break;case 3:l=e,t=n,a=c;break;case 4:l=d,t=e,a=c;break;case 5:l=c,t=e,a=n;break;default:l=0,t=0,a=0}return{r:Math.round(l*255),g:Math.round(t*255),b:Math.round(a*255)}}function L(r,u,c,l,t){if(r<0||r>=l||u<0||u>=t)return new h(0,0,0,0);const a=c.getImageData(r*window.devicePixelRatio,u*window.devicePixelRatio,1,1).data,o=a[0],i=a[1],e=a[2],n=a[3];return new h(o,i,e,n)}function y(r,u,c,l,t,a,o=w(1,1),i=new h(0,0,0,255)){if(!(t<=0||a<=0))switch(r){case"red":{const e=o.y;for(let n=0;n<a;n+=e){const d=Math.floor(n/(a-e)*255);u.fillStyle=`rgba(${d}, ${i.g}, ${i.b}, ${i.a})`,u.fillRect(c,l+n,t,e)}}break;case"green":{const e=o.y;for(let n=0;n<a;n+=e){const d=Math.floor(n/(a-e)*255);u.fillStyle=`rgba(${i.r}, ${d}, ${i.b}, ${i.a})`,u.fillRect(c,l+n,t,e)}}break;case"blue":{const e=o.y;for(let n=0;n<a;n+=e){const d=Math.floor(n/(a-e)*255);u.fillStyle=`rgba(${i.r}, ${i.g}, ${d}, ${i.a})`,u.fillRect(c,l+n,t,e)}}break;case"alpha":{const e=o.y;for(let n=0;n<a;n+=e){const d=n/(a-e);u.fillStyle=`rgba(${i.r}, ${i.g}, ${i.b}, ${d})`,u.fillRect(c,l+n,t,e)}}break}}function C(r,u,c,l,t,a,o=w(1,1),i=new h(0,0,0,255)){if(t<=0||a<=0)return;const[e,n,d]=i.toHsl();switch(r){case"hue":{const m=o.y;for(let v=0;v<a;v+=m){const g=Math.min(v/(a-m),1)*360,b=h.fromHsl(g,n,d);u.fillStyle=b.toHex(),u.fillRect(c,l+v,t,m)}}break;case"saturation":{const m=o.y;for(let v=0;v<a;v+=m){const g=v/a,b=h.fromHsl(e,g,d);u.fillStyle=b.toHex(),u.fillRect(c,l+v,t,m)}}break;case"lightness":{const m=o.y;for(let v=0;v<a;v+=m){const g=v/(a-m),b=h.fromHsl(e,n,g);u.fillStyle=b.toHex(),u.fillRect(c,l+v,t,m)}}break;case"alpha":{const m=o.y;for(let v=0;v<a;v+=m){const g=v/(a-m),b=h.fromHsl(e,n,g);b.a=Math.round(g*255),u.fillStyle=b.toHex(),u.fillRect(c,l+v,t,m)}}break}}function ee(r,u,c,l,t=w(1,1),a=new h(255,0,0,255)){const o=w(()=>l/t);if(o.x<=0||o.y<=0)return;const i=a.toHsv()[0];for(let e=0;e<o.y;e++)for(let n=0;n<o.x;n++){const d=1-e/(o.y-1),m=n/(o.x-1),v=x(i,d,m);r.fillStyle=`rgb(${v.r},${v.g},${v.b})`,r.fillRect(u+n*t.x,c+e*t.y,t.x,t.y)}}var ae=(r=>(r.CIRCLE="circle",r.SQUARE="square",r.SQUARE_EXTEND="square_extend",r.HSLA_HUE="hsla_hue",r.HSLA_SATURATION="hsla_saturation",r.HSLA_LIGHTNESS="hsla_lightness",r.HSLA_ALPHA="hsla_alpha",r.RGBA_RED="rgba_red",r.RGBA_GREEN="rgba_green",r.RGBA_BLUE="rgba_blue",r.RGBA_ALPHA="rgba_alpha",r.ALPHA="alpha",r))(ae||{});const le=N({__name:"ColorPicker",props:{width:{},height:{},modelValue:{},type:{},density:{},grid:{type:Boolean}},emits:["hover","update:model-value"],setup(r,{emit:u}){const c=_(null),l=_(null),t="square",a=u,o=4*window.devicePixelRatio;let i=w(0,0);const e=_(w(0,0)),n=_(w(o,o)),d=r,m=H(()=>d.type||t),v=H(()=>d.density),g=H(()=>w(()=>Math.round(i/v.value))),b=_(null),S=_(null);E(()=>d.modelValue,()=>{k({background:!1})}),E(()=>d.density,()=>{q(),k()}),U(()=>{b.value=document.createElement("canvas"),S.value=b.value.getContext("2d",{willReadFrequently:!0}),q(),k()});function q(){if(!(!c.value||!l.value||!b.value)){if(e.value=w(d.width*window.devicePixelRatio,(d.height||d.width)*window.devicePixelRatio),d.type!=="circle"){const s=w(()=>(e.value-n.value)/window.devicePixelRatio),f=w(()=>Math.round(s/v.value)*v.value*window.devicePixelRatio);e.value=f}i=w(()=>e.value-o*2),l.value.style.width=e.value.x/window.devicePixelRatio+"px",l.value.style.height=e.value.y/window.devicePixelRatio+"px",l.value.width=e.value.x,l.value.height=e.value.y,b.value&&(b.value.width=i.x,b.value.height=i.y)}}const $=_();function D(s){if(!l.value)return;const f=l.value.getBoundingClientRect(),p=s.clientX-f.left-o/window.devicePixelRatio,R=s.clientY-f.top-o/window.devicePixelRatio;if(!l.value.getContext("2d",{willReadFrequently:!0}))return;const M=L(p,R,S.value,b.value.width,b.value.height),A=g.value;P.value=w(()=>Math.floor(w(p,R)/(g.value/window.devicePixelRatio))*A),k({background:!1}),a("update:model-value",M)}function I(){!l.value||!l.value.getContext("2d",{willReadFrequently:!0})||($.value=void 0,k({background:!1}))}function W(s){if(!l.value)return;const f=l.value.getBoundingClientRect(),p=s.clientX-f.left-o/window.devicePixelRatio,R=s.clientY-f.top-o/window.devicePixelRatio;if(!l.value.getContext("2d",{willReadFrequently:!0}))return;const M=L(p,R,S.value,b.value.width,b.value.height),A=g.value;$.value=w(()=>Math.floor(w(p,R)/(g.value/window.devicePixelRatio))*A),k({background:!1}),a("hover",M)}function k({background:s}={background:!0}){const f=l.value.getContext("2d"),p=S.value;f.clearRect(0,0,e.value.x,e.value.y),s&&(p.clearRect(0,0,e.value.x,e.value.y),F(p,b.value.width,b.value.height)),V(f)}E(()=>d.modelValue,()=>{switch(m.value){case"hsla_hue":b.value&&k();break;case"hsla_saturation":b.value&&k();break;case"hsla_lightness":b.value&&k();break;case"square_extend":b.value&&k();break;case"hsla_alpha":b.value&&k();break;case"rgba_alpha":b.value&&k();break}});function F(s,f,p){if(!s||!l.value)return;const R=d.modelValue;switch(m.value){case"hsla_hue":C("hue",s,0,0,f,p,g.value,R);break;case"hsla_saturation":C("saturation",s,0,0,f,p,g.value,R);break;case"hsla_lightness":C("lightness",s,0,0,f,p,g.value,R);break;case"hsla_alpha":C("alpha",s,0,0,f,p,g.value,R);break;case"rgba_red":y("red",s,0,0,f,p,g.value);break;case"rgba_green":y("green",s,0,0,f,p,g.value);break;case"rgba_blue":y("blue",s,0,0,f,p,g.value);break;case"rgba_alpha":y("alpha",s,0,0,f,p,g.value,R);break;case"circle":K(s,0,0,Math.min(f,p),g.value);break;case"square_extend":ee(s,0,0,f,g.value,R);break;default:T(s,0,0,f,g.value);break}}const P=_(),B=_(null);function V(s){window.cancelAnimationFrame(B.value),B.value=window.requestAnimationFrame(()=>{if(!s||!l.value||!b.value)return;s.drawImage(b.value,n.value.x,n.value.y);const f=$.value;f&&f.x>=0&&f.y>=0&&f.x<i.x-o*2&&f.y<i.y-o*2&&f&&(!P.value||P.value&&f&&!f.equals(P.value))&&(s.globalCompositeOperation="difference",s.strokeStyle="rgba(255, 255, 255, 1)",s.lineWidth=o,s.strokeRect(o/2+f.x,o/2+f.y,g.value.x+o,g.value.y+o),s.setLineDash([]),s.lineWidth=1,s.globalCompositeOperation="source-over"),P.value&&(s.globalCompositeOperation="hard-light",s.lineWidth=o,s.strokeStyle="rgba(255, 255, 255, 1)",s.strokeRect(o/2+P.value.x,o/2+P.value.y,g.value.x+o,g.value.y+o),s.globalCompositeOperation="source-over"),s.lineWidth=1})}return(s,f)=>(j(),X("div",{ref_key:"rootEl",ref:c,class:z(["wb-disks-extras13-web-paint-color-picker",{grid:s.grid}]),style:Y({...n.value.toCSSVars("offset"),...e.value.toCSSVars("outer-dimension")})},[Q("canvas",{ref_key:"canvasEl",ref:l,onPointerdown:D,onPointermove:W,onPointerout:I},null,544)],6))}}),re=Z(le,[["__scopeId","data-v-7f21fd61"]]);export{re as C,ae as T};

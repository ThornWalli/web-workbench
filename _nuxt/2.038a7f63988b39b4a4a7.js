(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{134:function(e,t,n){"use strict";(function(e){var o=n(451),r=n(657),l=n(486),c=n(137),d=n(85),h=n(104);t.a={props:{rootElement:{type:HTMLElement,default:()=>null},options:{type:Object,default:()=>({focused:!1})},readonly:{type:Boolean,required:!1,default:!1},multiline:{type:Boolean,required:!1,default:!0},name:{type:String,default:"value"},model:{type:Object,required:!1,default:()=>({value:"Input Value"})}},data:()=>({escapeHtml:c.a,selectionLength:null,selectionStart:null,selectionEnd:null,controlShiftActive:!1,controlCapsLockActive:!1,focusedSubscriptions:[],refreshFrame:null}),computed:{focused(){return this.options.focused},value:{get(){return this.model[this.name]},set(e){this.model[this.name]=e}},styleClasses(){return{"js--readonly":this.readonly,"js--multiline":this.multiline,"js--selection-empty":!this.selectionLength,"js--focused":this.focused,"js--shift-active":this.controlShiftActive,"js--caps-lock-active":this.controlCapsLockActive}}},watch:{focused(e){e?(this.focusedSubscriptions.push(d.a.get("click").pipe(Object(o.a)((e=>{var{target:t}=e;return!Object(h.a)(t,this.rootElement||this.$parent.$el)})),Object(r.a)()).subscribe(this.blur.bind(this)),d.a.get("keypress").subscribe(function(){this.$refs.input.focus()}.bind(this)),d.a.get("keydown").subscribe((e=>{var{keyCode:t}=e;switch(t){case 16:this.controlShiftActive=!0;break;case 20:this.controlCapsLockActive=!this.controlCapsLockActive}})),d.a.get("keyup").subscribe((e=>{var{keyCode:t}=e;switch(t){case 16:this.controlShiftActive=!1}this.$emit("keyup",t)}))),this.$refs.input.focus()):(this.focusedSubscriptions.forEach((e=>e.unsubscribe())),this.focusedSubscriptions=[],this.$refs.input.blur())}},destroyed(){e.cancelAnimationFrame(this.refreshFrame),this.focusedSubscriptions.forEach((e=>e.unsubscribe()))},mounted(){this.$refs.input.setSelectionRange(this.value.length,this.value.length),this.refresh(),this.focused&&this.$refs.input.focus()},methods:{focus(){this.setFocus(!0)},blur(){this.setFocus(!1)},resetSelection(){var input=this.$refs.input;this.selectionStart=input.selectionStart=0,this.selectionEnd=input.selectionEnd=0,this.selectionLength=0},refresh(){var input=this.$refs.input;this.selectionStart=input.selectionStart,this.selectionEnd=input.selectionEnd,this.selectionLength=this.selectionEnd-this.selectionStart,this.$emit("refresh")},setFocus(e){this.options.focused=e},onPointerDown(e){var t=d.a.pointerMove.pipe(Object(l.a)(128)).subscribe((e=>{Object(h.d)(e),this.refresh()}));d.a.pointerUp.pipe(Object(r.a)()).subscribe((e=>{Object(h.d)(e),t.unsubscribe()}))},onInput(){this.refresh(),this.$emit("input")},onClick(){this.focused?this.refresh():this.setFocus(!0)},onKeydown(e){this.multiline||13!==e.keyCode?(this.$emit("keydown",e),this.refresh()):(e.preventDefault(),e.stopPropagation(),this.$emit("enter",this.model[this.name]),this.refresh())},onKeyup(e){this.$emit("keyup",e.keyCode),this.refresh()}}}}).call(this,n(8))},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(194),r=new(n(193).a)(o.a)},155:function(e,t,n){var content=n(221);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(6).default)("0665a08e",content,!0,{sourceMap:!1})},191:function(e,t,n){"use strict";var o=n(134).a,r=(n(220),n(7)),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wb-env-atom-input-text",class:e.styleClasses},[n("div",[n("div",{staticClass:"input-text__result"},[e.value.length>0&&e.selectionEnd>0?[e.selectionStart>=0&&e.selectionEnd===e.value.length?[n("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(0,e.selectionStart)))}}),e._v(" "),n("span",{staticClass:"input-text__selected",domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(e.selectionStart,e.selectionEnd+1))||"&nbsp;")}})]:e.selectionStart&&e.selectionStart===e.selectionEnd?[n("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(0,e.selectionStart)))}}),e._v(" "),n("span",{staticClass:"input-text__selected",domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(e.selectionStart,e.selectionStart+1))||"&nbsp;")}}),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(e.selectionStart+1,e.value.length)))}})]:[n("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(0,e.selectionStart)))}}),e._v(" "),n("span",{staticClass:"input-text__selected",domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(e.selectionStart,e.selectionEnd)))}}),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(e.selectionEnd,e.value.length)))}})]]:e._e(),e._v(" "),e.selectionStart||""!==e.value?e.value.length>0&&!e.selectionStart&&e.selectionStart===e.selectionEnd?[n("span",{staticClass:"input-text__selected",domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(0,1)))}}),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.value.slice(1,e.value.length)))}})]:e._e():n("span",{staticClass:"input-text__selected 5"},[e._v(" ")])],2),e._v(" "),n("div",{staticClass:"input-text__input"},[e.multiline?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"input",attrs:{readonly:e.readonly},domProps:{value:e.value},on:{pointerdown:e.onPointerDown,input:[function(t){t.target.composing||(e.value=t.target.value)},e.onInput],click:e.onClick,keydown:e.onKeydown,keyup:e.onKeyup,focus:e.onClick}}):e._e(),e._v(" "),e.multiline?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"input",attrs:{type:"text",readonly:e.readonly},domProps:{value:e.value},on:{pointerdown:e.onPointerDown,input:[function(t){t.target.composing||(e.value=t.target.value)},e.onInput],click:e.onClick,keydown:e.onKeydown,keyup:e.onKeyup,focus:e.onClick}})])])])}),[],!1,null,null,null);t.a=component.exports},219:function(e,t,n){"use strict";(function(e){var o=n(74),r=n(192),l=n(105),c=n(485),d=n(191),h=n(129),f=n(267);function m(e,t,n,o,r,l,c){try{var d=e[l](c),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(o,r)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var l=e.apply(t,n);function c(e){m(l,o,r,c,d,"next",e)}function d(e){m(l,o,r,c,d,"throw",e)}c(void 0)}))}}var v=1;t.a={components:{WbEnvAtomInputText:d.a},props:{core:{type:Object,required:!1,default:()=>h.default},rootElement:{type:HTMLElement,default:()=>null},options:{type:Object,default:()=>({focused:!1})},parentFocused:{type:Boolean,default:()=>!1},showIntroduction:{type:Boolean,default:()=>!1},parentLayout:{type:Object,default:()=>({size:Object(o.e)(0,0)})},delimiterPrefix:{type:String,default:"1.SYS"},readonly:{type:Boolean,default:!1},startCommands:{type:[Array,String],default:null},preRows:{type:[Array],default:()=>[]}},data(){var e=new c.a({core:this.core,consoleInterface:new f.a,onAdd:this.onAdd}),t=new r.a,n=this;return t.add([new l.b({name:["CLS","CLEAR"],action(){n.clearConsole()}})]),{logger:e,inputModel:{value:"",focused:!1},inputHistory:[],currentRow:0,startRow:0,rows:["[CLI ".concat(v,"]")],inputHistoryIndex:-1,lineHeight:18,maxRows:10,delimiterOptions:{value:this.delimiterPrefix,prompt:!1,confirm:!1},executeOptions:{show:!0,logger:e,showCommand:!0,commandBucket:t},activeSleepResolve:null,activeConfirmResolve:null,activePromptResolve:null,triggerRefresh:!1,resizeTimeout:null}},computed:{styleClasses(){return{"js--prompt":this.activePromptResolve,"js--focsued":this.options.focused}},delimiter(){var e=this.delimiterOptions.value,{confirm:t,prompt:n}=this.delimiterOptions;return t?e="(y/n) ?":n?e="?":e&&(e="".concat(e,":&gt")),e&&(e="".concat(e,"&nbsp;")),e},parentLayoutSize(){return this.parentLayout.size}},watch:{parentFocused(e){this.inputModel.focused=e.focused},parentLayoutSize(t){e.clearTimeout(this.resizeTimeout),this.resizeTimeout=e.setTimeout((()=>{this.render()}),200)},activeSleepResolve(){this.setDelimiter({value:""})},activeConfirmResolve(){this.setDelimiter({value:this.delimiterPrefix,confirm:this.activeConfirmResolve})},activePromptResolve(){this.setDelimiter({value:this.delimiterPrefix,prompt:this.activePromptResolve})}},created(){this.rows.unshift(...this.preRows)},destroyed(){v--},mounted(){var e=this;return _((function*(){"console"in e.$parent&&(e.$parent.console=e),v++,e.showIntroduction&&(yield e.createInstruction().then((()=>e.enter('basic "TMP:CONSOLE_INSTRUCTIONS.basic"',{showCommand:!1}))).catch((e=>{throw e}))),e.$nextTick(_((function*(){if(e.startCommands){var t=[].concat(e.startCommands),n=t=>e.enter(t.shift(),{showCommand:!1}).then((()=>t.length>0?n(t):null));yield n(t),e.$emit("startCommandsComplete")}})))}))()},methods:{enter(e,t){var n=this;return _((function*(){n.inputHistoryIndex=-1,n.currentRow=0,n.startRow=0,n.$emit("freeze"),yield n.core.executeCommand(e,Object.assign({},n.executeOptions,t)),n.$emit("unfreeze"),n.render(),n.refresh(!0)}))()},createInstruction(){return this.core.modules.files.fs.createTmpFile("CONSOLE_INSTRUCTIONS.basic",{type:"basic",content:["#basic","CLS",'PRINT "Scroll (Up/Down): <strong>Shift+Up</strong> / <strong>Shift+Down</strong>"','PRINT "Enter <strong>commands</strong> to show all commands."']})},clearConsole(){this.startRow=this.rows.length,this.render()},render(){this.$refs.consoleOutput.innerHTML="",this.maxRows=Math.ceil(this.$el.offsetHeight/this.lineHeight)-2;for(var e=this.rows.length-1,i=0,t=0+this.currentRow,n=e-this.startRow;n>=t;n--){var o=this.rows[e-n],r=document.createElement("li");r.innerHTML=String(o).replace(/[\\]?\\n/,"<br>")+"\n",this.$refs.consoleOutput.appendChild(r);var l=parseInt(r.offsetHeight/this.lineHeight);if(r.setAttribute("data-rows",l),i+=l,n!==t);else for(i-=this.maxRows;i>0&&this.$refs.consoleOutput.childElementCount>1;){var c=this.$refs.consoleOutput.firstElementChild;i-=c.getAttribute("data-rows"),this.$refs.consoleOutput.removeChild(c)}}},refresh(e){this.$nextTick((()=>{e&&(this.triggerRefresh={scroll:!0},this.$emit("refresh",this.triggerRefresh),this.$nextTick((()=>{this.triggerRefresh=null})))}))},moveRows(e){var t=!1;e?this.startRow>0?(this.startRow=0,t=!0):this.currentRow<this.rows.length&&(this.currentRow++,t=!0):this.currentRow>0&&(this.currentRow--,t=!0),t&&this.render()},onAdd(e,t){var n=[];Array.isArray(e)?n.push(...e):n.push(String(e)),this.rows.push(...n),this.render()},setDelimiter(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object.assign(this.delimiterOptions,{value:e,prompt:t,confirm:n})},onClick(){this.inputModel.focused=!0},onInputEnter(e){return this.inputHistory.push(e),this.inputModel.value="",this.enter(e)},onInputKeydown(e){var t=e.keyCode,n=!1;if(!this.$refs.input.controlCapsLockActive&&!this.$refs.input.controlShiftActive||38!==t&&40!==t){switch(t){case 38:this.inputHistoryIndex++,this.inputHistoryIndex=Math.min(this.inputHistoryIndex,this.inputHistory.length-1),n=!0;break;case 40:this.inputHistoryIndex--,this.inputHistoryIndex=Math.max(this.inputHistoryIndex,-1),n=!0}var o;if(n&&this.inputHistory.length>0)o=this.inputHistoryIndex<0?"":this.inputHistory[this.inputHistory.length-1-this.inputHistoryIndex],this.inputModel.value=o;this.refresh()}else e.preventDefault(),this.moveRows(38===t)}}}}).call(this,n(8))},220:function(e,t,n){"use strict";n(155)},221:function(e,t,n){var o=n(5)(!1);o.push([e.i,'\n:root {\n  --color__inputText__selected: #05a;\n  --color__inputText__pointer: #fa5;\n}\n.wb-env-atom-input-text {\n  min-width: 120px;\n  padding-top: 1px;\n& > div {\n    position: relative;\n    min-height: 18px;\n}\n& * {\n    font-family: var(--workbenchFont_topaz_console);\n}\n& .input-text__result {\n    font-size: 0;\n& > span {\n      padding-top: 1px;\n      font-size: initial;\n}\n}\n&:not(.js--selection-empty) {\n& .input-text__selected {\n      display: inline;\n      background: var(--color__inputText__selected);\n      filter: var(--filter__default);\n}\n}\n& .input-text__input {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: visible;\n& textarea,\n    & input[type="text"] {\n      width: 100%;\n      height: 100%;\n      padding: 0;\n      overflow: visible;\n      line-height: 18px;\n      color: black;\n      resize: none;\n      border: 0;\n      outline: none;\n      opacity: 0;\n      appearance: none;\n}\n}\n&.js--multiline {\n& .input-text__result {\n      overflow: visible;\n      white-space: pre;\n}\n& .input-text__input {\n& textarea {\n        white-space: pre;\n}\n}\n}\n\n  /* &.js--full {\n    & .input-text__input {\n      padding-bottom: calc(18px * 2);\n\n      & textarea {\n        width: calc(100% + 30px);\n        height: calc(100% + 18px * 2);\n        padding-right: 30px;\n        overflow-y: scroll;\n      }\n    }\n  } */\n&:not(.js--readonly) {\n&.js--selection-empty {\n& .input-text__selected {\n        position: relative;\n&::before {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          left: 0;\n          display: inline-block;\n          width: 100%;\n          min-width: 8px;\n          content: "";\n          background: var(--color__inputText__pointer);\n          animation-name: editor_cursor_blinking;\n          animation-duration: 1200ms;\n          animation-play-state: paused;\n          animation-timing-function: linear;\n          animation-iteration-count: infinite;\n@nest .js--scaling &, .js--moving & {\n            display: none !important;\n}\n}\n}\n}\n&.js--focused,\n    &.js--focused.js--selection-empty {\n& .input-text__selected {\n&::before {\n          display: inline-block;\n          animation-play-state: running;\n}\n}\n}\n}\n}\n@keyframes editor_cursor_blinking {\n0% {\n    visibility: visible;\n}\n50% {\n    visibility: hidden;\n}\n100% {\n    visibility: hidden;\n}\n}\n',""]),e.exports=o},312:function(e,t,n){var content=n(488);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(6).default)("871a615a",content,!0,{sourceMap:!1})},345:function(e,t,n){"use strict";var o=n(219).a,r=(n(487),n(7)),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wb-env-console",class:e.styleClasses,on:{click:e.onClick}},[n("div",{staticClass:"console__wrapper"},[n("ul",{ref:"consoleOutput",staticClass:"console__output typo-style"}),e._v(" "),n("div",{staticClass:"console__input"},[n("span",{ref:"consoleCommandDelimiter",staticClass:"console__input__prefix",domProps:{innerHTML:e._s(e.delimiter)}}),e._v(" "),n("wb-env-atom-input-text",{ref:"input",staticClass:"console__input__element",attrs:{"root-element":e.rootElement||e.$el,multiline:!1,options:e.options,readonly:e.readonly,model:e.inputModel},on:{enter:e.onInputEnter,keydown:e.onInputKeydown}})],1)])])}),[],!1,null,null,null);t.a=component.exports},485:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n(154),r=n(95),l=n(264);function c(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var d=0;var h="__private_"+d+++"_"+"onAdd";class f extends l.a{constructor(e){var{onAdd:t}=Object.assign({debug:!1,onAdd:null},e);super(e),Object.defineProperty(this,h,{writable:!0,value:void 0}),c(this,h)[h]=t}add(e,t){e instanceof o.a&&(e=e.toColumnify().split(/\n/g)),Object(r.e)(e)&&(e=Object(r.c)(e)),c(this,h)[h](e,t)}}},486:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(83),r=n(92),l=n(138);function c(e,t){return void 0===t&&(t=l.a),function(source){return source.lift(new d(e,t))}}var d=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,source){return source.subscribe(new h(e,this.dueTime,this.scheduler))},e}(),h=function(e){function t(t,n,o){var r=e.call(this,t)||this;return r.dueTime=n,r.scheduler=o,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return o.a(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(f,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(r.a);function f(e){e.debouncedNext()}},487:function(e,t,n){"use strict";n(312)},488:function(e,t,n){var o=n(5)(!1);o.push([e.i,'\n:root {\n  --color__console__text: #fff;\n  --color__console__typo__fieldsetBorder: #fa5;\n  --color__console__typo__line: #fff;\n  --color__console__typo__strong: #fa5;\n  --color__console__typo__strongEm: #fff;\n}\n.wb-env-console {\n  min-height: 100%;\n  padding: 3px;\n  line-height: normal;\n  color: var(--color__console__text);\n\n  /* min-width: 554px; */\n  user-select: none;\n@nest #root > & {\n@media (min-height: 480px) {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 640px;\n      height: 480px;\n      min-height: auto;\n      margin-top: -240px;\n      margin-left: -320px;\n}\n}\n& a {\n    color: currentColor;\n    text-decoration: none;\n&::before {\n      content: "- ";\n}\n&:hover {\n&::before {\n        content: "+ ";\n}\n}\n}\n& .console__input,\n  & .console__output {\n&,\n    & * {\n      font-family: var(--workbenchFont_topaz_console);\n}\n}\n& .console__output {\n    word-break: break-all;\n    white-space: pre-wrap;\n& > * {\n      clear: fix;\n& .console__row__table__row,\n      & .console__row__table__head {\n        white-space: nowrap;\n& > * {\n          position: relative;\n          display: inline-block;\n          vertical-align: top;\n& > * {\n            width: 100%;\n            white-space: normal;\n}\n}\n}\n}\n}\n& .console__input {\n    display: flex;\n\n    /* padding-bottom: calc(var(--global_fontSizePx) - 3px);\n\n    @nest .js--scroll-y & {\n      padding-bottom: 0 !important;\n    } */\n& .console__input__element {\n      flex: 1;\n}\n}\n& .console__input__prefix {\n    padding-top: 1px;\n& span {\n      display: none;\n}\n}\n}\n.typo-style {\n& fieldset {\n    padding: 5px 10px;\n    margin: 10px 0;\n    border: solid var(--color__console__typo__fieldsetBorder) 2px;\n& legend {\n      padding: 0 10px;\n      line-height: 1;\n}\n}\n& hr {\n    display: block;\n    height: 4px;\n    margin: 15px -1px;\n    background: var(--color__console__typo__line);\n    border: solid var(--color__console__typo__line);\n    border: none;\n    border-width: 2px 0 0 0;\n    appearance: none;\n}\n& h2 {\n    font-size: 32px;\n    font-weight: normal;\n    line-height: 1;\n}\n& p {\n    margin: 5px 0;\n    overflow: hidden;\n    line-height: calc(20 / var(--global_fontSizePx));\n}\n& strong,\n  & b {\n    font-weight: normal;\n    color: var(--color__console__typo__strong);\n& em {\n      color: var(--color__console__typo__strongEm);\n}\n}\n\n  /* blinking {\n        animation-name: text-blinking;\n        animation-duration: 2s;\n        animation-iteration-count: infinite;\n      } */\n& pre {\n    overflow: visible;\n}\n& ul.bullets {\n    padding: 0.5em 0;\nli {\n      position: relative;\n      padding-left: 0.75em;\n&::before {\n        position: absolute;\n        top: 0;\n        left: 0;\n        display: block;\n        content: "•";\n}\n}\n}\n}\n',""]),e.exports=o}}]);
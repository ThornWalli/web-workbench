import{W as x}from"./DEO1jlbx.js";import{a as b,N}from"./CDk6Z4eJ.js";import{N as R}from"./BcgNbnw3.js";import{g as k}from"./C1Z8QYso.js";import{_,r as h,i as v,o as B,a5 as z,t as m,v as c,$ as D,a0 as S,x as i,D as w,g,z as y}from"./BhFUgNwc.js";import{u as A}from"./kqk_HcjE.js";import"./C0_snZds.js";import"./CLz-NQAh.js";import"./C5mdboMC.js";import"./BrQUI1fL.js";import"./Ch9TGLTe.js";const E=["width","height"],I={__name:"NoteCanvas",props:{density:{type:Number,default(){return window.devicePixelRatio||1}},notes:{type:Array,default:()=>[[["C#","2m"],["C#2","2m"],["C#2","2m."],["C#","1m"],["C#2","1m"],["C#2","1m."],["C#","2n."],["C#2","2n"],["C#2","2n."],["C#2","4n."]],[["","2m"],["","1m"],["","2n"],["","4n"],["","8n"],["","16n"],["","32n"]],[["C4","2m"],["C4","1m"],["C4","2n"],["C4","4n"],["C4","8n"],["C4","16n"],["C4","32n"]],[["C4","2m."],["C4","1m."],["C4","2n."],["C4","4n."],["C4","8n."],["C4","16n."],["C4","32n."]]]}},emits:["refresh"],setup(o,{emit:t}){const C=t,s=h(null),u=h(null),d=o,l=v(()=>d.notes.flat().map(([e,r])=>new R({note:e,time:r}))),p=v(()=>s.value?l.value:[]);B(()=>{const e=new DOMParser;window.svgNode=u.value=e.parseFromString(b,"image/svg+xml").querySelector("svg"),s.value=new N(u.value),z(async()=>{const r=Array.from(document.querySelectorAll("canvas"));await Promise.all(r.map((a,n)=>f(a,l.value[Number(n)]))),C("refresh")})});const f=async(e,r)=>{const a=e.getContext("2d");a.clearRect(0,0,e.width,e.height);const n=await s.value.render(r,{colors:{primary:"#ffffff",secondary:"#000000",tertiary:"#ff0000"}});e.width=n.canvas.width*d.density,e.height=n.canvas.height*d.density,e.style=`width: ${n.canvas.width}px; height: ${n.canvas.height}px;`;const $=k(n.canvas,e.width);a.drawImage($,0,0)};return(e,r)=>(m(),c("ul",null,[(m(!0),c(D,null,S(p.value,a=>(m(),c("li",{key:a},[i("canvas",{width:w(s).dimension.x,height:w(s).dimension.y},null,8,E)]))),128))]))}},P=_(I,[["__scopeId","data-v-3696044d"]]),W={components:{NoteCanvas:P,WbButton:x},emits:["refresh"],setup(){return{...A()}},data:function(){return{noteRenderer:new N}},mounted(){console.log("DEBUG",{noteRenderer:this.noteRenderer}),this.$nextTick(()=>{this.$emit("refresh")})}},q={class:"wb-disks-extras13-synthesizer-debug-notes"};function F(o,t,C,s,u,d){const l=g("wb-button"),p=g("note-canvas");return m(),c("div",q,[i("fieldset",null,[t[2]||(t[2]=i("legend",null,"Note Cache",-1)),y(l,{label:`Clear Cache (${o.noteRenderer.cache.size} Bitmaps)`,onClick:t[0]||(t[0]=f=>o.noteRenderer.cache.clear())},null,8,["label"])]),i("fieldset",null,[t[3]||(t[3]=i("legend",null,"Notes",-1)),y(p,{onRefresh:t[1]||(t[1]=f=>o.$emit("refresh"))})])])}const Q=_(W,[["render",F],["__scopeId","data-v-99da8877"]]);export{Q as default};

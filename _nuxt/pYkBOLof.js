import{M as s,a as e}from"./G8w6tKzW.js";import{C as a}from"./g1R7VqXM.js";import{m as t,u as o}from"./D1WZfvAb.js";import{T as r,g as i}from"./Bk3HlLVR.js";import{c as m}from"./h2NMwnbH.js";import{u as l,N as c}from"./EG9l7Kw2.js";import{T as n}from"./Bx78nj95.js";import{u as p}from"./Dkhtr-D7.js";import{d as u,a0 as d,r as j,k as v,o as f,a1 as k,W as b,y as h,z as C,C as g,A as T,S as x,ac as y,I as E,X as _,Y as N,P as w,F as R,_ as P}from"./BfpYGSxR.js";import"./B-meQdOw.js";import"./CybH7Zs2.js";import"./BKiSbNd3.js";import"./C98WWl5r.js";import"./jSR9Z_uS.js";import"./czE5BX5a.js";import"./GLWL0ZEA.js";import"./BB6FUOrg.js";import"./BlFo7Aw2.js";import"./BHmTNEz3.js";import"./BSzGBLGV.js";import"./D3MPJlJW.js";import"./D7Us3e3D.js";import"./CrNGlbV0.js";import"./D3xLGof4.js";import"./tbUmQ5LT.js";import"./BfgCdWpr.js";import"./Cy0zoxeo.js";import"./mZmTw9Uu.js";import"./BteAwo4N.js";import"./BVLmgizW.js";import"./Ci-h6nfG.js";const S={class:"wb-disks-extras13-synthesizer-project"},I={class:"tracks"},M={key:0,class:"no-tracks"},$={class:"sheet"},F=P(u({__name:"Project",props:{model:{}},emits:["refresh"],setup(u,{emit:P}){const F=P,O=u,{core:Y}=o(),{tone:Z}=l(),{preserveContextMenu:z,setContextMenu:G}=p();G(m,{model:O.model}),d(()=>O.model,()=>{G(m,{model:O.model,preserveContextMenu:z})},{immediate:!0,deep:!0});const H=j({}),J=v(()=>`timeline-${q.value}`),V=v(()=>O.model[t.SYNTHESIZER_PROJECT]),X=v({get:()=>V.value.tracks,set:s=>{V.value.tracks=s}}),q=v(()=>Number(O.model[t.SYNTHESIZER_BPM])),A=v(()=>({model:O.model,items:[[{text:`Project: ${V.value.name} | Tracks: ${X.value.length}`}]]})),B=v(()=>Y.value.config.observable[a.SCREEN_CONFIG].soundVolume);function getControls(s){const e=s.getDuration();return{items:[[{text:s.name},{spacer:!0},{text:` ${e}`},{label:"Edit",action:async()=>{console.log("Edit track",s),await Z.start(),async function editTrack(s){H.value[s.id]=!0;const{close:e}=await O.model.actions.editTrack(s),a=await e;X.value=X.value.map(s=>s.id===a.id?a:s),H.value[s.id]=!1,k(()=>{F("refresh")})}(new r(s))}},{label:"Remove",action:async()=>{z(!0),await O.model.actions.removeTrack(s),z(!1),F("refresh")}}]]}}return d(()=>B.value,e=>{s.volume.value=i(e)},{immediate:!0}),d(()=>X.value,()=>{k(()=>{F("refresh")})}),d(()=>q.value,s=>{const a=e;a.stop(),a.bpm.value=120,a.seconds=0,a.bpm.value=s,a.start()}),f(()=>{k(()=>{F("refresh")})}),b(()=>{var s;null==(s=O.model.actions)||s.closeTracks()}),j([]),(s,e)=>(C(),h("div",S,[g(c,x(y(A.value)),null,16),T("div",I,[X.value.length<1?(C(),h("div",M,"No tracks availableâ€¦")):E("",!0),(C(!0),h(_,null,N(X.value,s=>(C(),h("div",{key:s.id,class:"track"},[g(c,w({ref_for:!0},getControls(s)),null,16),T("div",$,[(C(),R(n,{key:J.value,track:s,static:H.value[s.id],onRefresh:e[0]||(e[0]=s=>F("refresh"))},null,8,["track","static"]))])]))),128))])]))}}),[["__scopeId","data-v-db43c203"]]);export{F as default};

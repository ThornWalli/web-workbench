(window.webpackJsonp=window.webpackJsonp||[]).push([[9,43],{100:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return h}));var n=e(75);class h extends n.default{onPointerDown(t){var r=t.x,e=t.y,data=[].concat(this._brush.data);return this._app.canvas.addRenderAction(()=>{n.default.drawBrush({color:this._brush.primaryColor,x:r,y:e,data:data,app:this._app})}),{save:!0,render:!0}}}},101:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return d}));var n=e(74),h=e(75),o=e(82);class d extends o.default{constructor(t){super(t),this._proportinalScale=!1}onPointerMove(t){var r=(t.x-this.startEvent.x)/2,e=(t.y-this.startEvent.y)/2;if(this._proportinalScale&&(e=r<0&&e>0||r>0&&e<0?-1*r:r),0!==r&&0!==e)return this._app.canvas.addPassiveRenderAction(()=>{Object(n.ellipse)((t,r,e)=>{var data=[].concat(this._brush.data);h.default.drawBrush({color:e?this._brush.secondaryColor:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})},Math.floor(this.startEvent.x+r),Math.floor(this.startEvent.y+e),r,e,{filled:this.filled})}),{render:!0}}onPointerUp(t){var r=(t.x-this.startEvent.x)/2,e=(t.y-this.startEvent.y)/2;if(this._proportinalScale&&(e=r<0&&e>0||r>0&&e<0?-1*r:r),0!==r&&0!==e)return this._app.canvas.addRenderAction(()=>{Object(n.ellipse)((t,r,e)=>{var data=[].concat(this._brush.data);h.default.drawBrush({color:e?this._brush.secondaryColor:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})},Math.floor(this.startEvent.x+r),Math.floor(this.startEvent.y+e),r,e,{strokeSize:this._brush.data.length,filled:this.filled})}),{save:!0,render:!0}}}},107:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return h}));var n=e(73);class h extends n.b{}},116:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return o}));var n=e(74),h=e(75);class o extends h.default{onPointerDown(t){return d.bind(this)(t)}onPointerMove(t){return d.bind(this)(t)}onPointerUp(){return this.last=null,{save:!0}}}function d(t){var r=(this.last||t).x,e=(this.last||t).y;return Object(n.line)((t,r)=>{var data=[].concat(this._brush.data);this._app.canvas.addRenderAction(()=>{h.default.drawBrush({color:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})})},r,e,t.x,t.y,{}),this.last=t,{render:!0}}},117:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return o}));var n=e(74),h=e(82);class o extends h.default{onPointerDown(t){if(this.selectedAnchor){var r=this.getAnchorByPosition(t.x,t.y);if(!r)return this._app.canvas.addRenderAction(()=>{this.render(!1),this.reset()}),{save:!0,render:!0};this.selectedAnchor=r,this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)})}return{render:!0}}onPointerMove(t,r){if(r.pressed)return this.anchors.length<1&&(this.addAnchor(t.x,t.y),this.selectedAnchor=this.addAnchor(t.x,t.y)),this.selectedAnchor.x=t.x,this.selectedAnchor.y=t.y,this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}}render(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.anchors.length&&(Object(n.line)((t,r)=>{var data=[].concat(this._brush.data);h.default.drawBrush({color:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})},this.anchors[0].x,this.anchors[0].y,this.anchors[1].x,this.anchors[1].y,{}),t&&this.drawAnchors())}}},118:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return c}));var n=e(79),h=e(74),o=e(75),d=e(82);class c extends d.default{constructor(t){super(t),this.status=0,this.locked=!1}refreshHelperOffset(){this.primaryHelper&&(this.primaryHelperOffset=[this.primaryHelper.x-this.primaryAnchor.x,this.primaryHelper.y-this.primaryAnchor.y]),this.secondaryHelper&&(this.secondaryHelperOffset=[this.secondaryHelper.x-this.secondaryAnchor.x,this.secondaryHelper.y-this.secondaryAnchor.y])}onPointerDown(t){if(this.moved||this.reset(),!this.locked){this.locked=!0,1===this.anchors.length&&this.reset();var r=this.getAnchorByPosition(t.x,t.y);if(r&&this.selectedAnchor!==r)this.selectedAnchor=r;else{if(2===this.status&&!r)return f.bind(this)();1===this.status?l.bind(this)():this.selectedAnchor||(this.addAnchor(t.x,t.y),this.selectedAnchor=this.addAnchor(t.x,t.y))}return this._app.canvas.addPassiveRenderAction(()=>{this.render(!0),this.locked=!1}),{render:!0}}}get primaryAnchor(){return this.anchors[0]}get secondaryAnchor(){return this.anchors[1]}get primaryHelper(){return this.anchors[2]}get secondaryHelper(){return this.anchors[3]}onPointerUp(){if(this.status<3&&0===this.status)return this.selectedAnchor=null,this.status++,this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}}onPointerMove(t,r){if(r.pressed&&this.selectedAnchor)return this.moved=!0,this.selectedAnchor.x=t.x,this.selectedAnchor.y=t.y,this.selectedAnchor===this.primaryAnchor&&this.primaryHelper?(this.primaryHelper.x=this.selectedAnchor.x+this.primaryHelperOffset[0],this.primaryHelper.y=this.selectedAnchor.y+this.primaryHelperOffset[1]):this.selectedAnchor===this.secondaryAnchor&&this.secondaryHelper?(this.secondaryHelper.x=this.selectedAnchor.x+this.secondaryHelperOffset[0],this.secondaryHelper.y=this.selectedAnchor.y+this.secondaryHelperOffset[1]):this.selectedAnchor!==this.primaryHelper&&this.selectedAnchor!==this.secondaryHelper||this.refreshHelperOffset(),this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}}addPoints(t){t.forEach(t=>{this.points[Object(n.b)(t[0]-1,0,this._app.canvas.width-1)][Object(n.b)(t[1]-1,0,this._app.canvas.height-1)]=!0})}render(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.status>1?Object(h.curve)((t,r)=>{var data=[].concat(this._brush.data);o.default.drawBrush({color:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})},this.primaryAnchor.x,this.primaryAnchor.y,this.primaryHelper.x,this.primaryHelper.y,this.secondaryHelper.x,this.secondaryHelper.y,this.secondaryAnchor.x,this.secondaryAnchor.y):Object(h.line)((t,r)=>{var data=[].concat(this._brush.data);d.default.drawBrush({color:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})},this.primaryAnchor.x,this.primaryAnchor.y,this.secondaryAnchor.x,this.secondaryAnchor.y,{}),t&&(this.primaryHelper&&Object(h.line)((t,r)=>{var e=this._app.canvas.getColorFromPixel(t,r);0===e.alpha?e=this.anchorBrush.primaryColor:e.invert();var data=[].concat(this.anchorBrush.data);d.default.drawBrush({color:e,data:data,x:t,y:r,app:this._app})},this.primaryAnchor.x,this.primaryAnchor.y,this.primaryHelper.x,this.primaryHelper.y,{}),this.secondaryHelper&&Object(h.line)((t,r)=>{var e=this._app.canvas.getColorFromPixel(t,r);0===e.alpha?e=this.anchorBrush.primaryColor:e.invert();var data=[].concat(this.anchorBrush.data);d.default.drawBrush({color:e,data:data,x:t,y:r,app:this._app})},this.secondaryAnchor.x,this.secondaryAnchor.y,this.secondaryHelper.x,this.secondaryHelper.y,{}),this.drawAnchors())}reset(){d.default.prototype.reset.apply(this,arguments),this.status=0,this.locked=!1}intersect(t,r){for(var e=[[0,0],[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],i=0;i<e.length;i++)if(this.points[t+e[Number(i)][0]][r+e[Number(i)][1]])return!0;return!1}}function l(){var t=v(this.primaryAnchor,this.secondaryAnchor);this.addAnchor(t[0],t[1]),t=v(this.secondaryAnchor,this.primaryAnchor),this.addAnchor(t[0],t[1]),this.refreshHelperOffset(),this._app.canvas.addPassiveRenderAction(()=>{this.render(!0),this.locked=!1}),this.status++}function f(){return this._app.canvas.addRenderAction(()=>{this.render(!1),this.reset()}),{events:!1,save:!0,render:!0}}function v(t,r){var e=Object(h.getLinePoints)(t.x,t.y,r.x,r.y);return e[Math.floor(e.length/4)]}},119:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return h}));var n=e(76);class h extends n.default{fill(t,r,e){for(var n,i,h,o,d,c=[[t,r]],l=0,f=this._app.canvas.getColorFromPixel(t,r,!0),a=[[-1,0],[1,0],[0,-1],[0,1]];c.length;){if(l>2e6)throw new Error("FILL OVERFLOW");for(t=(n=c.pop())[0],r=n[1],this._app.canvas.setPixel(t,r,e,!0),i=0;i<a.length;i++)h=t+a[Number(i)][0],o=r+a[Number(i)][1],h>=0&&h<this._app.canvas.width&&o>=0&&o<this._app.canvas.height&&(d=this._app.canvas.getColorFromPixel(h,o,!0)).is(f)&&!e.is(d)&&c.push([h,o]);l++}}onPointerDown(t){if(!this._filling){this._filling=!0;var r=t.x,e=t.y,n=this._app.primaryColor;return this._app.canvas.addRenderAction(()=>{this.fill(r,e,n),this._filling=!1}),{save:!0,render:!0}}return{events:!1}}}},120:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return h}));var n=e(100);class h extends n.default{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.pointerDownHold=!0,super(t)}}},121:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return d}));var n=e(74),h=e(75),o=e(82);class d extends o.default{onPointerMove(t){var r=t.x-this.startEvent.x,e=t.y-this.startEvent.y;return this._app.canvas.addPassiveRenderAction(()=>{Object(n.rectangle)((t,r,e)=>{var data=[].concat(this._brush.data);h.default.drawBrush({color:e?this._brush.secondaryColor:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})},this.startEvent.x,this.startEvent.y,r,e,{strokeSize:this.filled?0:this._brush.data.length,filled:this.filled})}),{render:!0}}onPointerUp(t){var r=t.x-this.startEvent.x,e=t.y-this.startEvent.y;return this._app.canvas.addRenderAction(()=>{Object(n.rectangle)((t,r,e)=>{var data=[].concat(this._brush.data);h.default.drawBrush({color:e?this._brush.secondaryColor:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})},this.startEvent.x,this.startEvent.y,r,e,{strokeSize:this.filled?0:this._brush.data.length,filled:this.filled})}),{save:!0,render:!0}}}},122:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return o}));var n=e(74),h=e(101);class o extends h.default{constructor(t){super(t),this._proportinalScale=!0,this._func=n.ellipse}}},123:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return d}));var n=e(74),h=e(75),o=e(82);class d extends o.default{constructor(t){super(t),this.status=0}onPointerMove(t,r){if(r.pressed&&this.selectedAnchor)return this.selectedAnchor.x=t.x,this.selectedAnchor.y=t.y,this._app.canvas.addPassiveRenderAction(()=>{this.render(!0)}),{render:!0}}onPointerDown(t){var r=this.getAnchorByPosition(t.x,t.y);switch(this.status){case 1:if(!r)return this.status=2,this._app.canvas.addRenderAction(()=>{this.render(!1),this.reset()}),{save:!0,render:!0};this.selectedAnchor=r;break;default:r&&this.anchors[0]===r?(this.status=1,this.selectedAnchor=r):this.selectedAnchor=r||this.addAnchor(t.x,t.y)}return this._app.canvas.addPassiveRenderAction(()=>{this.render(this.status<2)}),{render:!0}}isClosed(){return this.status>0}render(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(n.polygon)((t,r)=>{var data=[].concat(this._brush.data);h.default.drawBrush({color:this._brush.primaryColor,data:data,x:t,y:r,app:this._app})},this.anchors,this.status>0,{filled:this.filled}),t&&this.drawAnchors()}reset(){o.default.prototype.reset.apply(this,arguments),this.status=0}}},124:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return v}));var n=e(73),h=e(74),o=e(78),d=e(83),c=e(97),l=e(82),f=e(75);class v extends l.default{constructor(t){super(t),this.brushPrimaryColor=new o.default(o.default.COLOR_BLACK),this.brushSecondaryColor=new o.default(o.default.COLOR_WHITE),this.brush=new(Object(d.getBrushByIndex)(0))({app:this.app,size:1,primaryColor:this.brushPrimaryColor,secondaryColor:this.brushSecondaryColor}),this._moving=!1}onPointerMove(t){var r=t.x-this.startEvent.x,e=t.y-this.startEvent.y;return this._moving||(this._moving=!0,this._app.canvas.addPassiveRenderAction(()=>{Object(h.rectangle)((t,r)=>{var data=[].concat(this._brush.data),e=this._app.canvas.getColorFromPixel(t,r);0===e.alpha?e=this.brushPrimaryColor:e.invert(),f.default.drawBrush({color:e,data:data,x:t,y:r,app:this._app})},this.startEvent.x,this.startEvent.y,r,e,{strokeSize:this._brush.data.length,filled:!1}),this._moving=!1})),{render:!0}}onPointerUp(t){this._app.canvas.cleanPassiveRenderActions();var r=Object(n.e)(t),e=Object(n.e)(this.startEvent),h=Object(n.d)(()=>Math.floor(r-e));if(h.x>0&&h.y>0){var o=new c.default(e,r),d=this.app.display,l=Object(n.d)(()=>Math.floor(d.canvasLayout.naturalSize/h*d.zoomFactor)),f=Object(n.d)(()=>o.min+h/2);this.app.display.setZoom(l.x>l.y?l.x:l.y,f)}return{render:!0}}}},125:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return d}));var n=e(84),h=e(107),o=e(76);class d extends o.default{onPointerDown(t){var r=this.app.display,e=2;return r.maxZoomFactor-5<r.zoomFactor&&(e=1),e=n.a.altActive?-e:e,this.app.display.zoom(e,new h.default(t.x,t.y)),{events:!1}}}},126:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return h}));var n=e(76);class h extends n.default{constructor(t){super(t),this.passive=!0}onActive(){this.app.canvas.revertStack()}}},127:function(t,r,e){"use strict";e.r(r),e.d(r,"default",(function(){return h}));var n=e(76);class h extends n.default{constructor(t){super(t),this.passive=!0}onActive(){this.app.canvas.clearStack()}}},180:function(t,r,e){"use strict";e.r(r),e.d(r,"getToolByIndex",(function(){return O}));var n=e(76);e.d(r,"Tool",(function(){return n.default}));var h=e(75);e.d(r,"Brush",(function(){return h.default}));var o=e(100);e.d(r,"DottedFreehand",(function(){return o.default}));var d=e(116);e.d(r,"ContinuousFreehand",(function(){return d.default}));var c=e(117);e.d(r,"StraightLine",(function(){return c.default}));var l=e(118);e.d(r,"Curve",(function(){return l.default}));var f=e(119);e.d(r,"Fill",(function(){return f.default}));var v=e(120);e.d(r,"AirBrush",(function(){return v.default}));var y=e(121);e.d(r,"UnfilledFilledRectangle",(function(){return y.default}));var x=e(122);e.d(r,"UnfilledFilledCircle",(function(){return x.default}));var A=e(101);e.d(r,"UnfilledFilledEllipse",(function(){return A.default}));var _=e(123);e.d(r,"UnfilledFilledPolygon",(function(){return _.default}));var m=e(150);e.d(r,"BrushSelector",(function(){return m.default}));var P=e(124);e.d(r,"Magnifier",(function(){return P.default}));var w=e(125);e.d(r,"Zoom",(function(){return w.default}));var C=e(126);e.d(r,"Undo",(function(){return C.default}));var H=e(127);function O(t){return[o.default,d.default,c.default,l.default,f.default,v.default,y.default,x.default,A.default,_.default,m.default,n.default,n.default,n.default,P.default,w.default,C.default,H.default][Number(t)]}e.d(r,"Clear",(function(){return H.default}))}}]);
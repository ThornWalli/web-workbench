import{c as n,d as r}from"./B-meQdOw.js";import{i as e,a as t}from"./Caivkp23.js";import{O as o}from"./D7Us3e3D.js";import{o as i,i as u}from"./CrNGlbV0.js";import{c as a}from"./tbUmQ5LT.js";function executeSchedule(n,r,e,t,o){void 0===t&&(t=0),void 0===o&&(o=!1);var i=r.schedule(function(){e(),o?n.add(this.schedule(null,t)):this.unsubscribe()},t);if(n.add(i),!o)return i}function map(n,r){return i(function(e,t){var o=0;e.subscribe(a(t,function(e){t.next(n.call(r,e,o++))}))})}var f=Array.isArray;function mapOneOrManyArgs(e){return map(function(t){return function callOrApply(e,t){return f(t)?e.apply(void 0,n([],r(t))):e(t)}(e,t)})}function mergeMap(n,r,t){return void 0===t&&(t=1/0),u(r)?mergeMap(function(t,o){return map(function(n,e){return r(t,n,o,e)})(e(n(t,o)))},t):("number"==typeof r&&(t=r),i(function(r,o){return function mergeInternals(n,r,t,o,i,u,f,c){var s=[],m=0,v=0,p=!1,checkComplete=function(){!p||s.length||m||r.complete()},doInnerSub=function(n){m++;var i=!1;e(t(n,v++)).subscribe(a(r,function(n){r.next(n)},function(){i=!0},void 0,function(){if(i)try{m--;for(var _loop_1=function(){var n=s.shift();f||doInnerSub(n)};s.length&&m<o;)_loop_1();checkComplete()}catch(n){r.error(n)}}))};return n.subscribe(a(r,function(n){return m<o?doInnerSub(n):s.push(n)},function(){p=!0,checkComplete()})),function(){}}(r,o,n,t)}))}var c=["addListener","removeListener"],s=["addEventListener","removeEventListener"],m=["on","off"];function fromEvent(n,i,a,f){if(u(a)&&(f=a,a=void 0),f)return fromEvent(n,i,a).pipe(mapOneOrManyArgs(f));var v=r(function isEventTarget(n){return u(n.addEventListener)&&u(n.removeEventListener)}(n)?s.map(function(r){return function(e){return n[r](i,e,a)}}):function isNodeStyleEventEmitter(n){return u(n.addListener)&&u(n.removeListener)}(n)?c.map(toCommonHandlerRegistry(n,i)):function isJQueryStyleEventEmitter(n){return u(n.on)&&u(n.off)}(n)?m.map(toCommonHandlerRegistry(n,i)):[],2),p=v[0],d=v[1];if(!p&&t(n))return mergeMap(function(n){return fromEvent(n,i,a)})(e(n));if(!p)throw new TypeError("Invalid event target");return new o(function(n){var handler=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return n.next(1<r.length?r:r[0])};return p(handler),function(){return d(handler)}})}function toCommonHandlerRegistry(n,r){return function(e){return function(t){return n[e](r,t)}}}export{map as a,mergeMap as b,executeSchedule as e,fromEvent as f,mapOneOrManyArgs as m};

import{Q as S,l as b,m as f,u as w,a7 as C,a8 as x,ad as k,aa as v,a9 as W,a5 as D,ae as M}from"./index.d9ea3266.js";import{_ as h,f as d,k as g,l as y,q as s,S as L,s as _,I as u}from"./entry.e7611067.js";import"./index.56665add.js";const K={components:{AtomMarkdown:S},props:{...b},emits:[...f],setup(e,o){const t=w(e,o);return t.setContextMenu(p),t},data(){return{content:["# Cloud",`Connect to a Firebase storage.  
`,`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},A={class:"wb-disks-workbench13-cloud-info"};function F(e,o,t,i,n,l){const a=d("atom-markdown");return g(),y("div",A,[s(a,{content:n.content},null,8,["content"])])}const P=h(K,[["render",F],["__scopeId","data-v-6bc1a851"]]);const E={components:{WbForm:C,WbButton:x,WbButtonWrapper:k,WbFormFieldTextbox:v},props:{...b,model:{type:Object,default(){return{id:null,apiKey:null,url:null}}}},emits:[...f,"close"],setup(e,o){const t=L(e,"model"),i=w(e,o);return i.setContextMenu(p,{model:t.value}),i},data(){return{cancelLabel:"Cancel",applyLabel:"Connect",fields:{id:{label:"ID",name:"id",placeholder:"ID…"},apiKey:{label:"Api Key",name:"apiKey",placeholder:"Api Key…"},url:{label:"Url",name:"url",placeholder:"https://…"}}}},computed:{disabledConnect(){return!this.model.id||!this.model.apiKey||!this.model.url}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledConnect||this.$emit("close",this.model)}}},B={class:"wb-module-files-cloud-connect"};function j(e,o,t,i,n,l){const a=d("wb-form-field-textbox"),c=d("wb-button"),r=d("wb-button-wrapper"),m=d("wb-form");return g(),y("div",B,[s(m,{onSubmit:l.onSubmit},{default:_(()=>[s(a,u(n.fields.id,{model:t.model}),null,16,["model"]),s(a,u(n.fields.apiKey,{model:t.model}),null,16,["model"]),s(a,u(n.fields.url,{model:t.model}),null,16,["model"]),s(r,{align:"outer",full:""},{default:_(()=>[s(c,{"style-type":"primary",label:n.applyLabel,type:"submit",disabled:l.disabledConnect},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const O=h(E,[["render",j],["__scopeId","data-v-5dcf6192"]]);const X={components:{WbForm:C,WbButton:x,WbButtonWrapper:k,WbFormFieldTextbox:v,WbFormFieldDropdown:W},props:{...b,items:{type:Array,default(){return[]}}},emits:[...f,"close"],setup(e,o){const t=L(e,"model"),i=w(e,o);return i.setContextMenu(p,{model:t.value}),i},data(){return{model:{email:null,password:null,storage:null},applyLabel:"Login",fields:{email:{type:"email",label:"Email",name:"email",placeholder:"Email…"},password:{type:"password",label:"Password",name:"password",placeholder:"Password…"},storage:{label:"Storage",name:"storage"}}}},computed:{parsedItems(){return[{title:"Select Storage",value:null},...this.items.map(e=>({title:e.name,value:e.id}))]},disabledSubmit(){return!this.model.email||!this.model.password||!this.model.storage}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledSubmit||this.$emit("close",this.model)}}},Y={class:"wb-module-files-cloud-connect"};function G(e,o,t,i,n,l){const a=d("wb-form-field-dropdown"),c=d("wb-form-field-textbox"),r=d("wb-button"),m=d("wb-button-wrapper"),I=d("wb-form");return g(),y("div",Y,[s(I,{onSubmit:l.onSubmit},{default:_(()=>[s(a,u(n.fields.storage,{model:n.model,options:l.parsedItems}),null,16,["model","options"]),s(c,u(n.fields.email,{model:n.model}),null,16,["model"]),s(c,u(n.fields.password,{model:n.model}),null,16,["model"]),s(m,{align:"outer",full:""},{default:_(()=>[s(r,{"style-type":"primary",label:n.applyLabel,type:"submit",disabled:l.disabledSubmit},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const N=h(X,[["render",G],["__scopeId","data-v-9756f724"]]),p=({core:e,model:o})=>[{title:"Cloud",items:[{title:"Connect with…",action:$(e,o)},{title:"Login with…",action:V(e,o)},{separator:!0},{hotKey:"I",keyCode:73,title:"Info",action:T(e)}]}];function T(e){return()=>{e.modules.windows.addWindow({title:"Info",component:P,componentData:{},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"})}}function V(e,o){return()=>{const t=e.modules.windows.addWindow({title:"Login with",component:N,componentData:{items:o.items},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(i=>{t.events.subscribe(async({name:n,value:l})=>{if(n==="close"){if(l){const{email:a,password:c,storage:r}=l;try{await o.actions.login(a,c,r)}catch(m){debugger;alert(m)}}i()}})})}}function $(e,o){return()=>{const t=e.modules.windows.addWindow({title:"Connect with",component:O,componentData:{model:{id:null,apiKey:null,url:null}},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(i=>{t.events.subscribe(async({name:n,value:l})=>{if(n==="close"){if(l){const{id:a,url:c,apiKey:r}=l;await o.actions.connect(a,r,c)}i()}})})}}const q={components:{WbForm:C,WbButton:x,WbButtonWrapper:k,WbItemSelect:D},props:{...b,model:{type:Object,default(){return{id:null,items:[]}}}},emits:[...f],setup(e,o){const t=L(e,"model"),i=w(e,o);return i.setContextMenu(p,{model:t.value}),i},data(){return{disconnectLabel:"Disconnect",loginLabel:"Login",logoutLabel:"Logout",fields:{itemSelect:{title:"Mounted Storages:",name:"id"}}}},computed:{parsedItems(){const e=this.model.items;return e.map(o=>{const t=o.isLogged();return{label:`${o.name} ${t?"LOGGED IN":""}`,value:o.id,isLogged:t,id:o.id}}).concat(Array(Math.max(3-e.length,0)).fill({label:null,disabled:!0}))},contextMenu(){return new M(p,{core:this.core,model:this.model})},disabledDisconnect(){return!this.model.id||this.model.items.length<1},disabledLogout(){return!this.parsedItems.find(e=>e.id===this.model.id&&e.isLogged)||this.model.items.length<1}},methods:{onClickDisconnect(){this.model.actions.disconnect(this.model.id)},onClickLogout(){this.model.actions.logout(this.model.id)}}},Q={class:"wb-disks-workbench13-cloud-connect"};function R(e,o,t,i,n,l){const a=d("wb-item-select"),c=d("wb-button"),r=d("wb-button-wrapper"),m=d("wb-form");return g(),y("div",Q,[s(m,null,{default:_(()=>[s(a,u(n.fields.itemSelect,{items:l.parsedItems,model:t.model}),null,16,["items","model"]),s(r,{align:"outer",full:""},{default:_(()=>[s(c,{"style-type":"secondary",label:n.disconnectLabel,disabled:l.disabledDisconnect,onClick:l.onClickDisconnect},null,8,["label","disabled","onClick"]),s(c,{"style-type":"secondary",label:n.logoutLabel,disabled:l.disabledLogout,onClick:l.onClickLogout},null,8,["label","disabled","onClick"])]),_:1})]),_:1})])}const J=h(q,[["render",R],["__scopeId","data-v-2f148333"]]);export{J as default};

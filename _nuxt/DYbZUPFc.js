import{u as I,M as o}from"./TlYR_Xhg.js";import{A as w}from"./DwAjpAW9.js";import{q as T}from"./Dvjn1ele.js";import{getDefaultDocumentModel as _,PROPERTY as a,FONT_FAMILES as p,FONT_TYPES as C,FONT_SIZES as y,CONFIG_NAMES as O}from"./DdO11QmQ.js";import{_ as D,a6 as S,g as k,t as g,v as F,z as M,I as N}from"./awouqzPR.js";const P={components:{AtomMarkdown:T},props:{model:{type:Object,default(){return{value:_()}}}},setup(t){const n=S(t,"model"),i=I();return i.setContextMenu(A,{model:n.value}),i},data(){return{content:["# Document Editor",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},x={class:"wb-disks-workbench13-document-editor-info"};function b(t,n,i,u,c,d){const l=k("atom-markdown");return g(),F("div",x,[M(l,{content:c.content},null,8,["content"])])}const h=D(P,[["render",b],["__scopeId","data-v-f7201c23"]]),A=({model:t,core:n})=>{const{windows:i}=n.modules;return[{order:0,title:"Document Editor",items:[{title:"New",hotKey:"N",keyCode:78,action:d},{title:"Open…",hotKey:"O",keyCode:79,action:c},{title:"Save",hotKey:"S",keyCode:83,action:l},{title:"Save As…",action:E},{type:o.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:v},{title:"Close",action:u}]},{order:1,title:"Document Settings",items:[{title:"Open maximized",type:o.CHECKBOX,name:a.OPEN_MAXIMIZED,model:t.value},{title:"Output Format",items:[{title:"Markdown",type:o.RADIO,name:a.OUTPUT_TYPE,value:"markdown",model:t.value},{title:"HTML",type:o.RADIO,name:a.OUTPUT_TYPE,value:"html",model:t.value}]},{title:"Font Family",items:Object.keys(p).map(e=>{const s=p[String(e)];return{title:C[String(e)],items:Object.keys(s).map(r=>{const m=s[String(r)];return{title:r,type:o.RADIO,name:a.FONT_FAMILY,value:m,model:t.value}})}})},{title:"Font Size",items:y.map(e=>({title:`${e}px`,type:o.RADIO,name:a.FONT_SIZE,value:e,model:t.value}))}]},{order:2,title:"Preview",type:o.CHECKBOX,name:O.DOCUMENT_EDITOR_SHOW_PREVIEW,model:n.config.observable,action(e){return n.config.set(O.DOCUMENT_EDITOR_SHOW_PREVIEW,e)}}];function u(){return t.actions.close()}async function c(){const e=await n.executeCommand("openFileDialog");if(e)if("content"in e.value)t.fsItem=e.fsItem,t.value=Object.assign(t.value,_(),e.value);else throw new Error("Can't read file content")}function d(){t.actions.reset()}function l(){return f()}function E(){return f(!0)}async function f(e=!1){const s=await w(JSON.stringify(t.value));let r;if(!e&&t.fsItem)return r=await n.executeCommand(`editfile "${t.fsItem.getPath()}" --data="${s}"`),r?n.executeCommand('openDialog "File saved."'):n.executeCommand('openDialog "File could not be saved."');{const m={html:"html",markdown:"md"}[String(t.value[a.OUTPUT_TYPE])];return t.fsItem=N(await n.executeCommand(`saveFileDialog --data="${s}" --extension="${m}"`)),t.fsItem}}function v(){i.addWindow({title:"Info",component:h,componentData:{model:t},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentEditor"})}};export{A as c};

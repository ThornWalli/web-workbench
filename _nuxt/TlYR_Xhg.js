var O=Object.defineProperty;var k=(n,e,s)=>e in n?O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var m=(n,e,s)=>k(n,typeof e!="symbol"?e+"":e,s);import{r as p,ag as g,i as c,Q as A,o as W,a5 as S,X as j,D}from"./awouqzPR.js";const t=[];for(let n=0;n<256;++n)t.push((n+256).toString(16).slice(1));function F(n,e=0){return(t[n[e+0]]+t[n[e+1]]+t[n[e+2]]+t[n[e+3]]+"-"+t[n[e+4]]+t[n[e+5]]+"-"+t[n[e+6]]+t[n[e+7]]+"-"+t[n[e+8]]+t[n[e+9]]+"-"+t[n[e+10]]+t[n[e+11]]+t[n[e+12]]+t[n[e+13]]+t[n[e+14]]+t[n[e+15]]).toLowerCase()}let C;const L=new Uint8Array(16);function P(){if(!C){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");C=crypto.getRandomValues.bind(crypto)}return C(L)}const V=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),R={randomUUID:V};function b(n,e,s){if(R.randomUUID&&!e&&!n)return R.randomUUID();n=n||{};const i=n.random||(n.rng||P)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,F(i)}const f={DEFAULT:0,SEPARATOR:1,SPACER:2,TEXT:3,CHECKBOX:4,RADIO:5,UPLOAD:6};class E{constructor({type:e=f.DEFAULT,model:s,options:i,action:w,command:a,url:x,order:d=-1,title:u=null,text:y=null,items:l=[],name:r=null,value:h=null,hotKey:v,keyCode:U,onInit:o}){m(this,"options",{disabled:!1,checked:!1});this.id=b(),this.type=e,this.model=s,this.options=Object.assign(i||{},this.options,Object.assign({},i)),e===f.RADIO&&(this.options.checked=this.options.checked=this.options.checked?h:!1),this.action=w,this.command=a,this.url=x,this.name=r,this.value=h,this.order=d,this.title=u,this.text=y,this.items=T(l),this.hotKey=v,this.keyCode=U,o&&o(this)}}function T(n){return n.map(e=>e instanceof E?e:new E(e))}class M{constructor(e,s){m(this,"id",b());m(this,"items",[]);e&&(this.items=T(e(s)))}add(e){e instanceof M&&this.items.push(...e.items)}}function K(){const n=p(!1),e=g("core"),s=g("window"),i=g("window:refresh"),w=c(()=>s.value.id),a=c(()=>s.value.options.focused),x=c(()=>s.value.parentWindow),d=p(),u=p(),y=c(()=>s.value.options.embedded),l=p(!1),r=(o=!0)=>{l.value=o},h=(o,I={})=>{u.value=new M(o,{core:e.value,mainWindow:D(s),parentWindow:D(x),preserveContextMenu:r,...I})},v=o=>{u.value&&(o?d.value=e.value.modules.windows.setActiveContextMenu(u.value):!l.value&&e.value.modules.windows.getActiveContextMenu()===d.value&&!y.value&&e.value.modules.windows.setActiveContextMenu(null))};return A(a,o=>v(o)),A(u,o=>{d.value=e.value.modules.windows.setActiveContextMenu(o)}),W(()=>{S(()=>{n.value=!0,v(!0)})}),j(()=>{u.value&&e.value.modules.windows.isContextMenu(d.value)&&e.value.modules.windows.setActiveContextMenu(null)}),{isReady:c(()=>n.value),id:w,parentFocused:a,core:e,window:s,setContextMenu:h,preserveContextMenu:r,contextMenu:u,currentContextMenu:d,refresh:i}}export{M as C,f as M,T as g,K as u,b as v};

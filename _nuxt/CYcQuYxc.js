import{A as k}from"./CD8Wqi-R.js";import{s as M}from"./-XQioQgL.js";import{t as i,v as c,x as r,_ as y,a6 as C,g as p,z as f,a8 as S,y as O,F as u,C as P,Z as b}from"./DhVLdAEy.js";import{u as I,M as v}from"./D9s5NzWA.js";import{getDefaultDocumentModel as g,FONT_FAMILES as _,FONT_TYPES as x,PROPERTY as h,FONT_SIZES as T}from"./C1TbKe3l.js";import{s as z}from"./CxKR0cHV.js";import"./DCzE-LO6.js";import"./C0_snZds.js";import"./CpQI5kI4.js";import"./BeevJImz.js";import"./CMn89ocD.js";import"./CrQvwhUk.js";import"./Bk_zE6I5.js";import"./Ch9TGLTe.js";import"./BhIZyK9R.js";import"./C5mdboMC.js";import"./BuOfD760.js";import"./Cpj98o6Y.js";import"./Bl7v0_lh.js";import"./BRmnW_0a.js";import"./B0ueQ7OP.js";const H={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"14"};function F(n,t){return i(),c("svg",H,t[0]||(t[0]=[r("path",{fill:"#05a",d:"M0 0h12v14H0z"},null,-1),r("path",{fill:"#fff",d:"M0 2v2h1v2h2v2h1v2h2v2h1v2h3V2z"},null,-1)]))}const N={render:F},R={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"18"};function E(n,t){return i(),c("svg",R,t[0]||(t[0]=[r("path",{d:"M6 2h1v2H6zM7 4h1v2H7zM5 0h1v2H5zM4 2h1v2H4zM7 16H4v-4H3v6h5v-6H7zM8 6h1v2H8zM10 10V8H9v2H8v2h3v-2zM2 10V8H1v2H0v2h3v-2zM3 4h1v2H3zM2 6h1v2H2z"},null,-1)]))}const A={render:E},V={components:{AtomMarkdown:k},props:{model:{type:Object,default(){return{value:g()}}}},setup(n){const t=C(n,"model"),s=I();return s.setContextMenu(D,{model:t.value}),s},data(){return{content:["# Document Reader",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},U={class:"wb-disks-workbench13-document-reader-info"};function j(n,t,s,w,l,e){const a=p("atom-markdown");return i(),c("div",U,[f(a,{content:l.content},null,8,["content"])])}const Y=y(V,[["render",j],["__scopeId","data-v-28284ef8"]]),D=({core:n,model:t})=>{const{windows:s}=n.modules;return[{title:"Document Reader",items:[{title:"Openâ€¦",hotKey:"O",keyCode:79,action:w},{type:v.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:l}]},{title:"Font Family",items:Object.keys(_).map(e=>{const a=_[String(e)];return{title:x[String(e)],items:Object.keys(a).map(m=>{const d=a[String(m)];return{title:m,type:v.RADIO,name:h.FONT_FAMILY,value:d,model:t.value}})}})},{title:"Font Size",items:T.map(e=>({title:`${e}px`,type:v.RADIO,name:h.FONT_SIZE,value:e,model:t.value}))}];async function w(){const e=await n.executeCommand("openFileDialog");if(e)if("content"in e.value)t.fsItem=e.fsItem,t.value=Object.assign(t.value,g(),e.value);else throw new Error("Can't read file content")}function l(){s.addWindow({title:"Info",component:Y,componentData:{model:t},options:{scaleX:!1,scaleY:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentReader"})}},W={components:{SvgNoteCorner:N,SvgScrollbarSmallArrow:A,WbMarkdown:k},props:{windowOptions:{type:Object,default(){return{}}},model:{type:Object,default(){return{fsItem:null,value:g()}}}},setup(n){const t=C(n,"model"),s=I();return s.setContextMenu(D,{model:t.value}),s},data(){return{content:[],currentPage:0,clickInterval:null,scrollValue:0}},computed:{style(){const n=this.model.value[h.FONT_FAMILY];return{"--scroll-bar-size":`${M.size}`,"--font-size-markdown":`${this.model.value[h.FONT_SIZE]}`,"--font-markdown-typo-headline-primary":n,"--font-markdown-typo-headline-secondary":n,"--font-markdown-typo-text":n,"--font-markdown-typo-code":n,"--font-markdown-typo-blockquote":n}},pageContent(){return this.content[this.currentPage]},fsItem(){return this.fsItem&&S(this.model.fsItem)}},watch:{currentPage(){this.$refs.scrollContainer.scrollTop=0},model:{deep:!0,handler(){this.refreshContent()}}},mounted(){this.refreshContent()},methods:{refreshContent(){this.fsItem&&(this.windowOptions.title=this.fsItem.name+" - Document Reader");const t=this.model.value.content.split(/\[PAGE\][\n]+/);this.currentPage=0,this.content=t},onPointerDownPrev(){this.currentPage=Math.max(this.currentPage-1,0)},onPointerDownNext(){this.currentPage=Math.min(this.currentPage+1,this.content.length-1)},onPointerDownScrollUp(){this.intervalClick(()=>{this.$refs.scrollContainer.scrollTop=Math.max(this.$refs.scrollContainer.scrollTop-20,0)})},onPointerDownScrollDown(){this.intervalClick(()=>{this.$refs.scrollContainer.scrollTop=Math.min(this.$refs.scrollContainer.scrollTop+20,this.$refs.scrollContainer.scrollHeight)})},onPointerUp(){window.clearInterval(this.clickInterval)},intervalClick(n){window.clearInterval(this.clickInterval),this.clickInterval=z(n,125)},onScroll(n){n.preventDefault(),this.scrollValue=this.$refs.scrollContainer.scrollTop/(this.$refs.scrollContainer.scrollHeight-this.$refs.scrollContainer.offsetHeight)}}},B={class:"content"},Z={class:"pagination"};function L(n,t,s,w,l,e){const a=p("wb-markdown"),m=p("svg-scrollbar-small-arrow"),d=p("svg-note-corner");return i(),c("div",{class:"wb-disks-workbench13-document-reader",style:b(e.style)},[r("div",B,[r("div",{ref:"scrollContainer",class:"content-scroll",onScroll:t[0]||(t[0]=(...o)=>e.onScroll&&e.onScroll(...o))},[f(a,{content:e.pageContent},null,8,["content"])],544)]),r("div",Z,[r("div",{class:"pagination-frame pagination-current",onPointerdown:t[1]||(t[1]=(...o)=>e.onPointerDownPrev&&e.onPointerDownPrev(...o))},[r("span",null,O(l.currentPage+1),1)],32),l.scrollValue>0?(i(),c("div",{key:0,class:"pagination-frame pagination-scroll_up",onPointerdown:t[2]||(t[2]=(...o)=>e.onPointerDownScrollUp&&e.onPointerDownScrollUp(...o)),onPointerup:t[3]||(t[3]=(...o)=>e.onPointerUp&&e.onPointerUp(...o))},[r("i",null,[f(m)])],32)):u("",!0),t[6]||(t[6]=r("div",{class:"pagination-spacer"},null,-1)),l.scrollValue<1?(i(),c("div",{key:1,class:"pagination-frame pagination-scroll-down",onPointerdown:t[4]||(t[4]=(...o)=>e.onPointerDownScrollDown&&e.onPointerDownScrollDown(...o)),onPointerup:t[5]||(t[5]=(...o)=>e.onPointerUp&&e.onPointerUp(...o))},[r("i",null,[f(m)])],32)):u("",!0)]),l.currentPage>0?(i(),P(d,{key:0,class:"corner corner_left",onPointerdown:e.onPointerDownPrev},null,8,["onPointerdown"])):u("",!0),l.currentPage<l.content.length-1?(i(),P(d,{key:1,class:"corner corner-right",onPointerdown:e.onPointerDownNext},null,8,["onPointerdown"])):u("",!0)],4)}const ft=y(W,[["render",L],["__scopeId","data-v-afe7a264"]]);export{ft as default};

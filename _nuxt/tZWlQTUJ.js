import{W as R}from"./C76rCs2v.js";import{W}from"./C33XqYB4.js";import{W as $}from"./DyLFza4E.js";import{W as z}from"./DoAEDT7f.js";import{W as G}from"./B5S5-ypg.js";import{u as H}from"./CpPkMkLR.js";import{u as M}from"./CFct_F1V.js";import{d as F}from"./Q6z_XoCT.js";import{d as U,r as C,k as n,y as j,z as I,C as r,D as _,F as q,I as A,P as k,G as S,O as J}from"./oWuEt9Fj.js";const K={class:"wb-module-files-open"};var L=(t=>(t.FILE="file",t.FOLDER="folder",t.BOTH="both",t))(L||{});const oe=U({__name:"Open",props:{type:{},fsItem:{},model:{}},emits:["close"],setup(t,{emit:w}){var d,p,v,b;const{core:o}=M();if(!((d=o.value)!=null&&d.modules.files))throw new Error("Files module not found");H();const B="file",l=t,m=w,s=C({...l.model,path:((p=l.model)==null?void 0:p.path)||l.fsItem.getPath()}),i={cancel:"Cancel",open:"Open"},O=n(()=>({label:null,placeholder:"Pathâ€¦",modelValue:s.value.path})),g=n(()=>({name:"path",modelValue:s.value.path,"onUpdate:model-value":e=>{s.value.path=e},onSelect:V})),c=C(l.fsItem||((b=(v=o.value)==null?void 0:v.modules.files)==null?void 0:b.fs.root)),f=n(()=>c.value instanceof F),x=n(()=>{const e=l.type||B;return e==="both"||!f.value&&["file"].includes(e)||f.value&&["folder"].includes(e)}),P=n(()=>{var e,u,a;return l.fsItem?l.fsItem:(u=(e=o.value)==null?void 0:e.modules.files)!=null&&u.fs.root?(a=o.value)==null?void 0:a.modules.files.fs.root:null}),V=e=>{c.value=J(e),e instanceof F&&(s.value.path=e.getPath())},D=()=>{m("close")},N=()=>{m("close",s.value.path)};return(e,u)=>(I(),j("div",K,[r(R,{onSubmit:N},{default:_(()=>{var a,h,y;return[r(G,k(O.value,{readonly:""}),null,16),(h=(a=S(o))==null?void 0:a.modules.files)!=null&&h.fileSystem?(I(),q(z,k({key:0},g.value,{"file-system":(y=S(o))==null?void 0:y.modules.files.fileSystem,"fs-item":P.value}),null,16,["file-system","fs-item"])):A("",!0),r($,{align:"outer",full:""},{default:_(()=>[r(W,{"style-type":"secondary",label:i.cancel,onClick:D},null,8,["label"]),r(W,{"style-type":"primary",label:i.open,type:"submit",disabled:!x.value},null,8,["label","disabled"])]),_:1})]}),_:1})]))}});export{L as S,oe as _};

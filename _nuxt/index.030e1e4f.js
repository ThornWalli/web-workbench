var Ol=Object.defineProperty;var Rl=(t,e,n)=>e in t?Ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var g=(t,e,n)=>(Rl(t,typeof e!="symbol"?e+"":e,n),n),ka=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var c=(t,e,n)=>(ka(t,e,"read from private field"),n?n.call(t):e.get(t)),p=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},b=(t,e,n,r)=>(ka(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ae=(t,e,n,r)=>({set _(i){b(t,e,i,n)},get _(){return c(t,e,r)}});import{V as Me,D as z,r as Tt,W as er,X as Dl,Y as Wl,Z as Cl,c as ho,$ as Nl,o as Ll,a0 as Pl,a1 as Ml,_ as j,k as y,l as W,C as Un,v as mo,z as U,s as X,t as Te,B,K as ut,F as Is,O as ln,a2 as fo,m as S,L as jn,x as Js,y as ea,f as R,q as C,H as V,M as At,N as Ot,a3 as Fl,G as pr,a4 as po,a5 as $l,a6 as ta,U as zl,E as A}from"./entry.9f1b584f.js";function K(t){return typeof t=="function"}function Bl(t){return K(t==null?void 0:t.lift)}function cn(t){return function(e){if(Bl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var ks=function(t,e){return ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ks(t,e)};function Xn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ks(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var nn=function(){return nn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nn.apply(this,arguments)};function pb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Vl(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(m){a(m)}}function l(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})}function bo(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Gn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rn(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function Hn(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function gn(t){return this instanceof gn?(this.v=t,this):new gn(t)}function Ul(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(h){r[h]&&(i[h]=function(f){return new Promise(function(w,_){s.push([h,f,w,_])>1||o(h,f)})})}function o(h,f){try{l(r[h](f))}catch(w){m(s[0][3],w)}}function l(h){h.value instanceof gn?Promise.resolve(h.value.v).then(u,d):m(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function m(h,f){h(f),s.shift(),s.length&&o(s[0][0],s[0][1])}}function jl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gn=="function"?Gn(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),i(o,l,a.done,a.value)})}}function i(s,a,o,l){Promise.resolve(l).then(function(u){s({value:u,done:o})},a)}}var go=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Gl(t){return K(t==null?void 0:t.then)}function na(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ds=na(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Ts(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ss=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=Gn(a),l=o.next();!l.done;l=o.next()){var u=l.value;u.remove(this)}}catch(_){e={error:_}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}else a.remove(this);var d=this.initialTeardown;if(K(d))try{d()}catch(_){s=_ instanceof ds?_.errors:[_]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var h=Gn(m),f=h.next();!f.done;f=h.next()){var w=f.value;try{Ta(w)}catch(_){s=s??[],_ instanceof ds?s=Hn(Hn([],rn(s)),rn(_.errors)):s.push(_)}}}catch(_){r={error:_}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(s)throw new ds(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Ta(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Ts(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Ts(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),wo=ss.EMPTY;function _o(t){return t instanceof ss||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function Ta(t){K(t)?t():t.unsubscribe()}var yo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},As={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=As.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,Hn([t,e],rn(n))):setTimeout.apply(void 0,Hn([t,e],rn(n)))},clearTimeout:function(t){var e=As.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function vo(t){As.setTimeout(function(){throw t})}function Aa(){}function Di(t){t()}var ra=function(t){Xn(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,_o(n)&&n.add(r)):r.destination=Kl,r}return e.create=function(n,r,i){return new vr(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(ss),Hl=Function.prototype.bind;function hs(t,e){return Hl.call(t,e)}var Yl=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){ki(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){ki(r)}else ki(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){ki(n)}},t}(),vr=function(t){Xn(e,t);function e(n,r,i){var s=t.call(this)||this,a;if(K(n)||!n)a={next:n??void 0,error:r??void 0,complete:i??void 0};else{var o;s&&yo.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=function(){return s.unsubscribe()},a={next:n.next&&hs(n.next,o),error:n.error&&hs(n.error,o),complete:n.complete&&hs(n.complete,o)}):a=n}return s.destination=new Yl(a),s}return e}(ra);function ki(t){vo(t)}function Xl(t){throw t}var Kl={closed:!0,next:Aa,error:Xl,complete:Aa},ia=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function xo(t){return t}function ql(t){return t.length===0?xo:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var je=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=Ql(e)?e:new vr(e,n,r);return Di(function(){var a=i,o=a.operator,l=a.source;s.add(o?o.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=Oa(n),new n(function(i,s){var a=new vr({next:function(o){try{e(o)}catch(l){s(l),a.unsubscribe()}},error:s,complete:i});r.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[ia]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ql(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=Oa(e),new e(function(r,i){var s;n.subscribe(function(a){return s=a},function(a){return i(a)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function Oa(t){var e;return(e=t??yo.Promise)!==null&&e!==void 0?e:Promise}function Zl(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function Ql(t){return t&&t instanceof ra||Zl(t)&&_o(t)}function Jl(t){return K(t[ia])}function ec(t){return Symbol.asyncIterator&&K(t==null?void 0:t[Symbol.asyncIterator])}function tc(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function nc(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rc=nc();function ic(t){return K(t==null?void 0:t[rc])}function sc(t){return Ul(this,arguments,function(){var n,r,i,s;return bo(this,function(a){switch(a.label){case 0:n=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,gn(n.read())];case 3:return r=a.sent(),i=r.value,s=r.done,s?[4,gn(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,gn(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function ac(t){return K(t==null?void 0:t.getReader)}function gi(t){if(t instanceof je)return t;if(t!=null){if(Jl(t))return oc(t);if(go(t))return lc(t);if(Gl(t))return cc(t);if(ec(t))return Eo(t);if(ic(t))return uc(t);if(ac(t))return dc(t)}throw tc(t)}function oc(t){return new je(function(e){var n=t[ia]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lc(t){return new je(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function cc(t){return new je(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,vo)})}function uc(t){return new je(function(e){var n,r;try{for(var i=Gn(t),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(o){n={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function Eo(t){return new je(function(e){hc(t,e).catch(function(n){return e.error(n)})})}function dc(t){return Eo(sc(t))}function hc(t,e){var n,r,i,s;return Vl(this,void 0,void 0,function(){var a,o;return bo(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=jl(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=l.sent(),i={error:o},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function sn(t,e,n,r,i){return new mc(t,e,n,r,i)}var mc=function(t){Xn(e,t);function e(n,r,i,s,a,o){var l=t.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=o,l._next=r?function(u){try{r(u)}catch(d){n.error(d)}}:t.prototype._next,l._error=s?function(u){try{s(u)}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(ra),So={now:function(){return(So.delegate||Date).now()},delegate:void 0};function fc(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function br(t,e){return cn(function(n,r){var i=0;n.subscribe(sn(r,function(s){r.next(t.call(e,s,i++))}))})}var pc=Array.isArray;function bc(t,e){return pc(e)?t.apply(void 0,Hn([],rn(e))):t(e)}function gc(t){return br(function(e){return bc(t,e)})}function wc(t,e,n,r,i,s,a,o){var l=[],u=0,d=0,m=!1,h=function(){m&&!l.length&&!u&&e.complete()},f=function(_){return u<r?w(_):l.push(_)},w=function(_){s&&e.next(_),u++;var E=!1;gi(n(_,d++)).subscribe(sn(e,function(L){i==null||i(L),s?f(L):e.next(L)},function(){E=!0},void 0,function(){if(E)try{u--;for(var L=function(){var O=l.shift();a?fc(e,a,function(){return w(O)}):w(O)};l.length&&u<r;)L();h()}catch(O){e.error(O)}}))};return t.subscribe(sn(e,f,function(){m=!0,h()})),function(){o==null||o()}}function Io(t,e,n){return n===void 0&&(n=1/0),K(e)?Io(function(r,i){return br(function(s,a){return e(r,s,i,a)})(gi(t(r,i)))},n):(typeof e=="number"&&(n=e),cn(function(r,i){return wc(r,i,t,n)}))}var _c=na(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Fe=function(t){Xn(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Ra(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new _c},e.prototype.next=function(n){var r=this;Di(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=Gn(r.currentObservers),o=a.next();!o.done;o=a.next()){var l=o.value;l.next(n)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;Di(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;Di(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,a=i.isStopped,o=i.observers;return s||a?wo:(this.currentObservers=null,o.push(n),new ss(function(){r.currentObservers=null,Ts(o,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,a=r.isStopped;i?n.error(s):a&&n.complete()},e.prototype.asObservable=function(){var n=new je;return n.source=this,n},e.create=function(n,r){return new Ra(n,r)},e}(je),Ra=function(t){Xn(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:wo},e}(Fe);function yc(t){return cn(function(e,n){var r=!1;e.subscribe(sn(n,function(i){r=!0,n.next(i)},function(){r||n.next(t),n.complete()}))})}var vc=new je(function(t){return t.complete()});function xc(t){return t<=0?function(){return vc}:cn(function(e,n){var r=0;e.subscribe(sn(n,function(i){++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function xr(t,e){return cn(function(n,r){var i=0;n.subscribe(sn(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}var ko=na(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function Ec(t){return t===void 0&&(t=Sc),cn(function(e,n){var r=!1;e.subscribe(sn(n,function(i){r=!0,n.next(i)},function(){return r?n.complete():n.error(t())}))})}function Sc(){return new ko}function Ic(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?xr(function(i,s){return t(i,s,r)}):xo,xc(1),n?yc(e):Ec(function(){return new ko}))}}var kc=function(t){Xn(e,t);function e(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=So);var s=t.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return e.prototype.next=function(n){var r=this,i=r.isStopped,s=r._buffer,a=r._infiniteTimeWindow,o=r._timestampProvider,l=r._windowTime;i||(s.push(n),!a&&s.push(o.now()+l)),this._trimBuffer(),t.prototype.next.call(this,n)},e.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,s=i._infiniteTimeWindow,a=i._buffer,o=a.slice(),l=0;l<o.length&&!n.closed;l+=s?1:2)n.next(o[l]);return this._checkFinalizedStatuses(n),r},e.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,s=n._buffer,a=n._infiniteTimeWindow,o=(a?1:2)*r;if(r<1/0&&o<s.length&&s.splice(0,s.length-o),!a){for(var l=i.now(),u=0,d=1;d<s.length&&s[d]<=l;d+=2)u=d;u&&s.splice(0,u+1)}},e}(Fe);function Lt(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new Fe}:e,r=t.resetOnError,i=r===void 0?!0:r,s=t.resetOnComplete,a=s===void 0?!0:s,o=t.resetOnRefCountZero,l=o===void 0?!0:o;return function(u){var d,m,h,f=0,w=!1,_=!1,E=function(){m==null||m.unsubscribe(),m=void 0},L=function(){E(),d=h=void 0,w=_=!1},O=function(){var P=d;L(),P==null||P.unsubscribe()};return cn(function(P,ne){f++,!_&&!w&&E();var H=h=h??n();ne.add(function(){f--,f===0&&!_&&!w&&(m=ms(O,l))}),H.subscribe(ne),!d&&f>0&&(d=new vr({next:function(oe){return H.next(oe)},error:function(oe){_=!0,E(),m=ms(L,i,oe),H.error(oe)},complete:function(){w=!0,E(),m=ms(L,a),H.complete()}}),gi(P).subscribe(d))})(u)}}function ms(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var i=new vr({next:function(){i.unsubscribe(),t()}});return gi(e.apply(void 0,Hn([],rn(n)))).subscribe(i)}}function as(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function To(t,e){let{x:n,y:r,z:i}=e,{x:s,y:a,z:o,w:l}=t,u=l*n+a*i-o*r,d=l*r+o*n-s*i,m=l*i+s*r-a*n,h=-s*n-a*r-o*i,f=u*l+h*-s+d*-o-m*-a,w=d*l+h*-a+m*-s-u*-o,_=m*l+h*-o+u*-a-d*-s;return new e.constructor(f,w,_)}var Os=Math.PI,fs=Math.PI*2;function wi(t){let e=t%fs;return e<-Os?e+=fs:e>Os&&(e-=fs),e}function Tc(t){return t>-1?t<1?Math.acos(t):0:Os}function Ac(t,[e,n,r]){let[i,s,a]=t;return new t.constructor(new i.constructor(i.x*e.x+s.x*e.y+a.x*e.z,i.y*e.x+s.y*e.y+a.y*e.z,i.z*e.x+s.z*e.y+a.z*e.z),new i.constructor(i.x*n.x+s.x*n.y+a.x*n.z,i.y*n.x+s.y*n.y+a.y*n.z,i.z*n.x+s.z*n.y+a.z*n.z),new i.constructor(i.x*r.x+s.x*r.y+a.x*r.z,i.y*r.x+s.y*r.y+a.y*r.z,i.z*r.x+s.z*r.y+a.z*r.z))}function Oc(t,{x:e,y:n,z:r}){let[i,s,a]=t;return new i.constructor(i.x*e+s.x*n+a.x*r,i.y*e+s.y*n+a.y*r,i.z*e+s.z*n+a.z*r)}function Rc(t,[e,n,r]){return new t.constructor(t.dot(e),t.dot(n),t.dot(r))}function Dt(t){return typeof t=="number"||(t==null?void 0:t.constructor)===Number}var Dc=t=>{try{Kn(t),yi(t,4)}catch(e){console.error("error while hijackDOMPoint"),console.error(e)}},_i=0,sa=1,aa=2,oa=3,Mi=9999999999999,Fi=void 0,Ao=Symbol("vector length"),os=Symbol("get source"),Da=Symbol("checked"),Ne=Fi,gt,Yn,Wc=[0,1,2,6,24,120,720,5760,51840,518400,5702400,68428800,889574400,12454041600,186810624e3],Rs=[],cr=-1,ps=!1,Wa=[];function bs(t,e,n){Ne=t,cr=-1,Yn=1;let r=e(n);if(!Dt(r))throw new Error(`
      your assigned progress did not not return a primitive!
      calc() does not support logical operators (|| && ==) directly

      instead of calc(() => v1 || v2);
      use        calc(() => +v1 || +v2);

      instead of calc(() => v1);
      use        calc(v1);
      `);return r}function $i(t){let e=t[os];return e?e(t).length:t[Ao]||3}function Cc(t,e){return $i(t)>$i(e)?t:e}function Nc(t,e){if(Yn+=1,e===Mi)return Yn;if(e>=$i(t))return 0;let n=t[os];if(n)return 1*n(t)[e];if(e===_i)return 1*t.x;if(e===sa)return 1*t.y;if(e===aa)return 1*t.z;if(e===oa)return 1*t.w}function Ca(t,e,n){let r=t[os];if(r){r(t)[e]=n;return}if(e===_i){t.x=n;return}if(e===sa){t.y=n;return}e===aa&&(t.z=n),e===oa&&(t.w=n)}function Ie(t,e){if(typeof t!="function")throw new Error("no function assigned");if(Ne!==Fi)throw new Error("something wrong, do you use calc() inside calc?");try{let n=typeof e>"u",r=typeof e=="function",i=!r&&!n?e:void 0,s=bs(_i,t,i);if(n&&typeof gt>"u")return s;let a=gt?$i(gt):0;if(a===Mi){if(!t[Da]){let d=bs(Mi,t),m=Wc[Yn];if(Math.abs(d-m)>Number.EPSILON)throw new Error(`
            algebraic multiplication works only in calls with *

            calc(() => v * m);
            calc(() => m * v);
            calc(() => m * m);
            calc(() => m * m * v);

            `);t[Da]=!0}let u=Rs[0];for(let d=1;d<Yn-1;d+=1){let m=Rs[d];if(!u.multiply)throw new Error(`cannot find method multiply() on ${u}`);u=u.multiply(m)}return u}let o=r?e.length:a;if(o||(o=a),o<a)throw new Error("Your assigned result Vector cant use higher space Operands than it has");let l=new Array(o);l[0]=s,i&&Ca(i,Ne,l[0]);for(let u=1;u<o;u+=1){let d=bs(u,t,i);l[u]=d,i&&Ca(i,Ne,d)}return n?new gt.constructor(...l):r?e(...l):i}finally{Ne=Fi,gt=void 0}}function Kn(t,e){let n=t.prototype;n[os]=e;let r=n[Symbol.toPrimitive]||function(i){return i==="string"?this.toString():this.valueOf()};n[Symbol.toPrimitive]=function(i){return Ne===_i&&(gt=gt?Cc(gt,this):this,Rs[Yn-1]=this),Ne===Fi?r.call(this,i):Nc(this,Ne)}}function la(t){return function(...e){if(Ne===_i){if(ps)return t.apply(this,e);try{ps=!0,cr+=1;let n=t.apply(this,e);return Wa[cr]=n,n}finally{ps=!1}}return Ne===sa||Ne===aa||Ne===oa?(cr+=1,Wa[cr]):t.apply(this,e)}}function _e(t,e){let n=t.prototype,r=n[e];n[e]=la(r)}function ls(t,e){let n=t.prototype,r=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(n,e,{get:la(function(){return r.get.call(this)})})}function yi(t,e){let n=t.prototype;Object.defineProperty(n,Ao,{value:e})}function Oo(t){yi(t,Mi)}function cs(t){return la(t)}typeof DOMPoint<"u"&&Dc(DOMPoint);function Lc(t){let e="";return t&&(e=`${t}-`),e}function vi(t,e,n={}){let r=Lc(t);return Object.entries(e).forEach(([i,s])=>{n[`--${r}${i}`]=s}),n}var Ds=0,Ws=1,Pe=Symbol("axes");function Pc(t,e,n,r){let i=Math.atan2(t,e),s=Math.atan2(n,r);return wi(i-s)}function Na(t){return t*t}var $e=class{constructor(t,e){typeof t=="function"?Ie(t,(n,r)=>{this[Pe]=[n,r]}):as(t)?this[Pe]=[...t]:t&&Dt(t.x)?this[Pe]=[t.x||0,t.y||0]:this[Pe]=[t||0,e||0]}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}normalize(){let{length:t}=this;return new this.constructor(this.x/t,this.y/t)}norm(){return this.normalize()}dot(t){return this.x*t.x+this.y*t.y}getRad(){return wi(Math.atan2(this.y,this.x))}angleTo(t){return Pc(this.y,this.x,t.y,t.x)}rotate(t){let e=Math.sin(t),n=Math.cos(t),r=this.x*n-this.y*e,i=this.x*e+this.y*n;return new this.constructor(r,i)}distance(t){return Math.sqrt(Na(this.x-t.x)+Na(this.y-t.y))}dist(t){return this.distance(t)}toArray(){return[this.x,this.y]}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y}toJSON(){return{x:this.x,y:this.y}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,e){return vi(t,this.toJSON(),e)}get lengthSq(){return this.dot(this)}get length(){return Math.sqrt(this.lengthSq)}get lensq(){return this.lengthSq}get len(){return this.length}get x(){return this[Pe][Ds]}set x(t){throw new Error("set x() not implemented")}get y(){return this[Pe][Ws]}set y(t){throw new Error("set y() not implemented")}get z(){throw new Error("get z() not implemented")}set z(t){throw new Error("set z() not implemented")}[Symbol.iterator](){return this[Pe].values()}};Kn($e);yi($e,2);_e($e,"dot");_e($e,"angleTo");_e($e,"distance");_e($e,"toArray");_e($e,"getRad");ls($e,"length");ls($e,"lengthSq");var Ro=class Do extends $e{set x(e){this[Pe][Ds]=e}set y(e){this[Pe][Ws]=e}get x(){return this[Pe][Ds]}get y(){return this[Pe][Ws]}calc(e){return Ie(e,this)}clone(){return new Do(this.x,this.y)}},hn=class extends $e{toPoint(){return new Ro(this.x,this.y)}},Mc=cs((t,e)=>new Ro(t,e)),Wo=(t,e)=>Mc(t,e),Fc=cs((t,e)=>new hn(t,e)),k=(t,e)=>Fc(t,e);k(0,0);k(0,-1);k(-1,0);var mn=0,fn=1,pn=2,q=Symbol("axes");function gs(t){return t*t}var ye=class{constructor(t,e,n){typeof t=="function"?Ie(t,(r,i,s)=>{this[q]=[r,i,s]}):as(t)?this[q]=[...t]:t&&Dt(t.x)?this[q]=[t.x||0,t.y||0,t.z||0]:this[q]=[t||0,e||0,n||0]}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}normalize(){let{length:t}=this;return new this.constructor(this.x/t,this.y/t,this.z/t)}norm(){return this.normalize()}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new this.constructor(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}crossNormalize(t){let e=this.cross(t),{length:n}=e;return e[q][mn]/=n,e[q][fn]/=n,e[q][pn]/=n,e}cn(t){return this.crossNormalize(t)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length)}}angleTo(t){return wi(Tc(this.dot(t)/(this.length*t.length)))}multiply(t){return t.x===void 0?this.multiplyMat3(t):t.w===void 0?this.multiplyVec3(t):To(t,this)}multiplyMat3(t){return Rc(this,t)}multiplyVec3({x:t,y:e,z:n}){return new this.constructor(this.x*t,this.y*e,this.z*n)}distance(t){return Math.sqrt(gs(this.x-t.x)+gs(this.y-t.y)+gs(this.z-t.z))}dist(t){return this.distance(t)}toArray(){return[this.x,this.y,this.z]}swizzle(t){let e=t.split("").map(n=>this[n]);return e.length===2?new hn(e[0],e[1]):new this.constructor(e[0],e[1],e[2])}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}toJSON(){return{x:this.x,y:this.y,z:this.z}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,e){return vi(t,this.toJSON(),e)}get lengthSq(){return this.dot(this)}set lengthSq(t){throw new Error("set lengthSq() not implemented")}get length(){return Math.sqrt(this.lengthSq)}set length(t){throw new Error("set length() not implemented")}get lensq(){return this.lengthSq}set lensq(t){throw new Error("set lensq() not implemented")}get len(){return this.length}set len(t){throw new Error("set len() not implemented")}get x(){return this[q][mn]}set x(t){throw new Error("set x() not implemented")}get y(){return this[q][fn]}set y(t){throw new Error("set y() not implemented")}get z(){return this[q][pn]}set z(t){throw new Error("set z() not implemented")}get xy(){return new hn(this[q][mn],this[q][fn])}set xy(t){throw new Error("set xz() not implemented")}get xz(){return new hn(this[q][mn],this[q][pn])}set xz(t){throw new Error("set xz() not implemented")}get yz(){return new hn(this[q][fn],this[q][pn])}set yz(t){throw new Error("set yz() not implemented")}[Symbol.iterator](){return this[q].values()}};Kn(ye);yi(ye,3);_e(ye,"dot");_e(ye,"cross");_e(ye,"crossNormalize");_e(ye,"toAngles");_e(ye,"angleTo");_e(ye,"rotate");_e(ye,"distance");_e(ye,"toArray");ls(ye,"length");ls(ye,"lengthSq");var $c=class Co extends ye{set x(e){this[q][mn]=e}set y(e){this[q][fn]=e}set z(e){this[q][pn]=e}get x(){return this[q][mn]}get y(){return this[q][fn]}get z(){return this[q][pn]}calc(e){return Ie(e,this)}clone(){return new Co(this.x,this.y,this.z)}},zc=class extends ye{toVector(){return new $c(this.x,this.y,this.z)}clone(){return this}},Bc=cs((t,e,n)=>new zc(t,e,n)),Wt=(t,e,n)=>Bc(t,e,n);Wt(0,0,0);var No=Wt(0,0,-1);Wt(0,0,1);var ca=Wt(-1,0,0);Wt(1,0,0);var Lo=Wt(0,1,0);Wt(0,-1,0);Wt(1,1,1);var nt=Symbol("angle rad"),Po=Math.PI/180,zi=class Mo{constructor(e){e instanceof Mo?this[nt]=e[nt]:this[nt]=wi(e*Po)}valueOf(){return this[nt]}toJSON(){return{angle:this[nt]}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(e,n){return vi(e,this.toJSON(),n)}},Fo=class extends zi{set(t){t instanceof zi?this[nt]=t[nt]:this[nt]=wi((t||0)*Po)}},Vc=class extends zi{toDegree(){return new Fo(this[nt])}};new Vc(0);function Uc(t){return new Fo(t)}function jc(t){return Dt(t)||t instanceof zi}var rt=0,it=1,st=2,at=3,ae=Symbol("axes"),Gc=Symbol("forward cache"),Hc=Symbol("left cache"),Yc=Symbol("up cache"),Xc=Symbol("inverse cache");function Kc([t,e,n,r]){return Math.sqrt(t*t+e*e+n*n+r*r)}function $o(t){let e=Kc(t);t[rt]/=e,t[it]/=e,t[st]/=e,t[at]/=e}function qc(t,e){let n=t.normalize(),r=e.crossNormalize(n),i=n.crossNormalize(r),s=r.x,a=r.y,o=r.z,l=i.x,u=i.y,d=i.z,m=n.x,h=n.y,f=n.z,w=s+u+f,_=new Array(4);if(w>0){let O=Math.sqrt(w+1);return _[at]=O*.5,O=.5/O,_[rt]=(d-h)*O,_[it]=(m-o)*O,_[st]=(a-l)*O,_}if(s>=u&&s>=f){let O=Math.sqrt(1+s-u-f),P=.5/O;return _[rt]=.5*O,_[it]=(a+l)*P,_[st]=(o+m)*P,_[at]=(d-h)*P,_}if(u>f){let O=Math.sqrt(1+u-s-f),P=.5/O;return _[rt]=(l+a)*P,_[it]=.5*O,_[st]=(h+d)*P,_[at]=(m-o)*P,_}let E=Math.sqrt(1+f-s-u),L=.5/E;return _[rt]=(m+o)*L,_[it]=(h+d)*L,_[st]=.5*E,_[at]=(a-l)*L,_}function Zc(t,e){let n=new Array(4),r=e*.5,i=Math.sin(r),s=Math.cos(r);return n[rt]=i*t.x,n[it]=i*t.y,n[st]=i*t.z,n[at]=s,n}function Cs(t,e,n,r){if(Dt(t))return[t,e,n,r];if(as(t))return[...t];if(jc(e))return Zc(t,e);if(t&&e)return qc(t,e)}function zo(t,e,n,r){return t&&Dt(t.w)?Cs(t.x,t.y,t.z,t.w):Cs(t,e,n,r)||[0,0,0,1]}var Er=class{constructor(t,e,n,r){this[ae]=zo(t,e,n,r),$o(this[ae])}set(t,e,n,r){throw new Error("set x() not implemented")}multiply(t,e,n,r){if(Dt(t.w))return this.multiplyQuaternion(t);let i=Cs(t,e,n,r);return i?this.multiplyQuaternion(new this.constructor(i)):this.multiplyVector(t)}multiplyVector(t){return To(this,t)}multiplyQuaternion(t){let e=this.x,n=this.y,r=this.z,i=this.w,s=t.x,a=t.y,o=t.z,l=t.w,u=i*s+e*l+n*o-r*a,d=i*a+n*l+r*s-e*o,m=i*o+r*l+e*a-n*s,h=i*l-e*s-n*a-r*o;return new this.constructor(u,d,m,h)}mul(t,e,n,r){return this.multiply(t,e,n,r)}get inverse(){let{x:t,y:e,z:n,w:r}=this;return this.constructor(t*-1,e*-1,n*-1,r)}get inv(){return this.inverse}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}get left(){return this.multiplyVector(ca)}get dir(){return this.multiplyVector(No)}get up(){return this.multiplyVector(Lo)}get 0(){return this.left}get 1(){return this.dir}get 2(){return this.up}get x(){return this[ae][rt]}set x(t){throw new Error("set x() not implemented")}get y(){return this[ae][it]}set y(t){throw new Error("set y() not implemented")}get z(){return this[ae][st]}set z(t){throw new Error("set z() not implemented")}get w(){return this[ae][at]}set w(t){throw new Error("set w() not implemented")}toJSON(){let{x:t,y:e,z:n,w:r}=this;return{x:t,y:e,z:n,w:r,a1:1-e*e*2-n*n*2,a2:t*e*2-n*r*2,a3:t*n*2+e*r*2,b1:t*e*2+n*r*2,b2:1-t*t*2-n*n*2,b3:e*n*2-t*r*2,c1:t*n*2-e*r*2,c2:e*n*2+t*r*2,c3:1-t*t*2-e*e*2}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,e){return vi(t,this.toJSON(),e)}};Kn(Er);Oo(Er);var Qc=class extends Er{set(t,e,n,r){t instanceof Er?this[ae]=[...t[ae]]:(this[ae]=zo(t,e,n,r),$o(this[ae]))}set x(t){this[ae][rt]=t}set y(t){this[ae][it]=t}set z(t){this[ae][st]=t}set w(t){this[ae][at]=t}get x(){return this[ae][rt]}get y(){return this[ae][it]}get z(){return this[ae][st]}get w(){return this[ae][at]}};function Ti(t,e,n){let r=t[e];return r||(r=n(),t[e]=r),r}var Bo=class extends Er{get left(){return Ti(this,Hc,()=>this.multiplyVector(ca))}get dir(){return Ti(this,Gc,()=>this.multiplyVector(No))}get up(){return Ti(this,Yc,()=>this.multiplyVector(Lo))}get inverse(){return Ti(this,Xc,()=>{let{x:t,y:e,z:n,w:r}=this;return this.constructor(t*-1,e*-1,n*-1,r)})}};new Qc;var Jc=cs((t,e,n,r)=>new Bo(t,e,n,r)),eu=(t,e,n,r)=>Jc(t,e,n,r);new Bo(ca,Uc(90));eu(0,0,0,1);var tu=0,nu=1,ru=2,iu=3,Ge=Symbol("axes"),ua=class{constructor(t,e,n,r){typeof t=="function"?Ie(t,(i,s,a,o)=>{this[Ge]=[i,s,a,o]}):as(t)?this[Ge]=[...t]:t&&Dt(t.x)?this[Ge]=[t.x||0,t.y||0,t.z||0,t.w||0]:this[Ge]=[t||0,e||0,n||0,r||0]}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}toArray(){return[this.x,this.y,this.z,this.w]}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}toJSON(){return{x:this.x,y:this.y,z:this.z,w:this.w}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,e){return vi(t,this.toJSON(),e)}get x(){return this[Ge][tu]}set x(t){throw new Error("set x() not implemented")}get y(){return this[Ge][nu]}set y(t){throw new Error("set y() not implemented")}get z(){return this[Ge][ru]}set z(t){throw new Error("set z() not implemented")}get w(){return this[Ge][iu]}set w(t){throw new Error("set w() not implemented")}[Symbol.iterator](){return this[Ge].values()}};Kn(ua);yi(ua,4);_e(ua,"toArray");var tr=Symbol("data"),Vo=class Uo{constructor(...e){this[tr]=e}get 0(){return this[tr][0]}set 0(e){throw new Error("set [0] not implemented")}get 1(){return this[tr][1]}set 1(e){throw new Error("set [1] not implemented")}get 2(){return this[tr][2]}set 2(e){throw new Error("set [2] not implemented")}multiplyMat(e){return Ac(this,e)}multiplyVec(e){return Oc(this,e)}multiply(e){if(e instanceof Uo)return this.multiplyMat(e);let{x:n,y:r,z:i}=e;if(n===void 0||r===void 0||i===void 0)throw new Error(`multiply only works with mat3 and vec3, not supported ${e}`);return this.multiplyVec(e)}[Symbol.iterator](){return this[tr].values()}};Kn(Vo);Oo(Vo);var su=["addListener","removeListener"],au=["addEventListener","removeEventListener"],ou=["on","off"];function Ns(t,e,n,r){if(K(n)&&(r=n,n=void 0),r)return Ns(t,e,n).pipe(gc(r));var i=rn(uu(t)?au.map(function(o){return function(l){return t[o](e,l,n)}}):lu(t)?su.map(La(t,e)):cu(t)?ou.map(La(t,e)):[],2),s=i[0],a=i[1];if(!s&&go(t))return Io(function(o){return Ns(o,e,n)})(gi(t));if(!s)throw new TypeError("Invalid event target");return new je(function(o){var l=function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return o.next(1<u.length?u:u[0])};return s(l),function(){return a(l)}})}function La(t,e){return function(n){return function(r){return t[n](e,r)}}}function lu(t){return K(t.addListener)&&K(t.removeListener)}function cu(t){return K(t.on)&&K(t.off)}function uu(t){return K(t.addEventListener)&&K(t.removeEventListener)}var Ft,$t,kr;class du{constructor(e){p(this,Ft,[]);p(this,$t,new Map);p(this,kr,void 0);b(this,kr,e)}add(e){e.forEach(n=>{[].concat(n[c(this,kr)]).forEach(r=>{c(this,$t).set(r,n)})}),c(this,Ft).push(...e)}remove(e){e.forEach(n=>{c(this,Ft).splice(c(this,Ft).indexOf(n),1)})}has(e){return c(this,$t).has(e)}get(e){return c(this,$t).get(e)}get items(){return c(this,Ft)}get itemsMapping(){return c(this,$t)}}Ft=new WeakMap,$t=new WeakMap,kr=new WeakMap;class hu extends du{constructor(){super("name")}}const Pt=new hu;function mu(t){return t.toLowerCase()}var fu=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],pu=/[^A-Z0-9]+/gi;function da(t,e){e===void 0&&(e={});for(var n=e.splitRegexp,r=n===void 0?fu:n,i=e.stripRegexp,s=i===void 0?pu:i,a=e.transform,o=a===void 0?mu:a,l=e.delimiter,u=l===void 0?" ":l,d=Pa(Pa(t,r,"$1\0$2"),s,"\0"),m=0,h=d.length;d.charAt(m)==="\0";)m++;for(;d.charAt(h-1)==="\0";)h--;return d.slice(m,h).split("\0").map(o).join(u)}function Pa(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(r,i){return r.replace(i,n)},t)}function jo(t,e){var n=t.charAt(0),r=t.substr(1).toLowerCase();return e>0&&n>="0"&&n<="9"?"_"+n+r:""+n.toUpperCase()+r}function bu(t,e){return e===void 0&&(e={}),da(t,nn({delimiter:"",transform:jo},e))}function gu(t,e){return e===0?t.toLowerCase():jo(t,e)}function bn(t,e){return e===void 0&&(e={}),bu(t,nn({transform:gu},e))}function wu(t){return t.charAt(0).toUpperCase()+t.substr(1)}function _u(t){return wu(t.toLowerCase())}function Go(t,e){return e===void 0&&(e={}),da(t,nn({delimiter:" ",transform:_u},e))}function yu(t,e){return e===void 0&&(e={}),da(t,nn({delimiter:"."},e))}function vu(t,e){return e===void 0&&(e={}),yu(t,nn({delimiter:"-"},e))}var Tr,Ar,yn,Or;class xu{constructor({name:e,description:n,args:r,action:i}){p(this,Tr,void 0);p(this,Ar,void 0);p(this,yn,[]);p(this,Or,void 0);b(this,Tr,[].concat(e)),b(this,Ar,n),b(this,yn,r||c(this,yn)),b(this,Or,i)}action(...e){return c(this,Or).call(this,...e)}get description(){return c(this,Ar)}get name(){return c(this,Tr)}get args(){return c(this,yn)}}Tr=new WeakMap,Ar=new WeakMap,yn=new WeakMap,Or=new WeakMap;function Ho(t){return t.map(e=>new xu(e))}function Eu(t,e){return t.args.reduce((n,r)=>{const i=[].concat(r.name);i.length<1&&(i.push=`argument-${r.index}`);const s=bn(r.name[0]);if("index"in r&&r.index!==void 0&&Number(r.index)in e.args){const a=r.index;let o=e.args[Number(a)];o=o===void 0?!0:o,n[Number(a)]=o,n.unresolved[Number(a)]=e.unresolved.args[Number(a)],n[String(s)]=o,n.unresolved[String(s)]=e.unresolved.args[Number(a)]}return i.forEach(a=>{if(a in e.kwargs){const o=e.kwargs[String(a)];n[String(s)]=o===void 0?!0:o,n.unresolved[String(s)]=e.kwargs[String(a)]===void 0?!0:o}}),n},{unresolved:{}})}var Rr,Dr,Wr,Cr;class v{constructor({name:e,index:n,flag:r,description:i}){p(this,Rr,void 0);p(this,Dr,void 0);p(this,Wr,void 0);p(this,Cr,void 0);b(this,Rr,[].concat(e)),b(this,Dr,n),b(this,Wr,r),b(this,Cr,i)}get name(){return c(this,Rr)}get index(){return c(this,Dr)}get flag(){return c(this,Wr)}get description(){return c(this,Cr)}}Rr=new WeakMap,Dr=new WeakMap,Wr=new WeakMap,Cr=new WeakMap;let Ai;const Su=new Uint8Array(16);function Iu(){if(!Ai&&(Ai=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ai))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ai(Su)}const le=[];for(let t=0;t<256;++t)le.push((t+256).toString(16).slice(1));function ku(t,e=0){return(le[t[e+0]]+le[t[e+1]]+le[t[e+2]]+le[t[e+3]]+"-"+le[t[e+4]]+le[t[e+5]]+"-"+le[t[e+6]]+le[t[e+7]]+"-"+le[t[e+8]]+le[t[e+9]]+"-"+le[t[e+10]]+le[t[e+11]]+le[t[e+12]]+le[t[e+13]]+le[t[e+14]]+le[t[e+15]]).toLowerCase()}const Tu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ma={randomUUID:Tu};function qn(t,e,n){if(Ma.randomUUID&&!e&&!t)return Ma.randomUUID();t=t||{};const r=t.random||(t.rng||Iu)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return ku(r)}const ze={DEFAULT:0,CHECKBOX:1,RADIO:2};class Fa{constructor({type:e=ze.DEFAULT,model:n,options:r,action:i,command:s,url:a,order:o=-1,title:l=null,items:u=[],name:d=null,value:m=null,hotKey:h,keyCode:f,separator:w=!1,onInit:_}){g(this,"options",{disabled:!1,checked:!1});this.id=qn(),this.type=e,this.model=n,this.options=Object.assign(r||{},this.options,Object.assign({},r)),e===ze.RADIO&&(this.options.checked=this.options.checked=this.options.checked?m:!1),this.action=i,this.command=s,this.url=a,this.name=d,this.value=m,this.order=o,this.title=l,this.items=Yo(u),this.hotKey=h,this.keyCode=f,this.separator=w,_&&_(this)}}function Yo(t){return t.map(e=>e instanceof Fa?e:new Fa(e))}class an{constructor(e,n){g(this,"id",qn());g(this,"items",[]);e&&(this.items=Yo(e(n)))}add(e){e instanceof an&&this.items.push(...e.items)}}var Xe,_t,Nr,Ke;class us{constructor({config:e={},commands:n,contextMenu:r=null,core:i}){p(this,Xe,[]);p(this,_t,[]);p(this,Nr,{});p(this,Ke,void 0);b(this,Ke,i),b(this,Nr,e),b(this,Xe,n),b(this,_t,r)}beforeSetup(){const e=c(this,Ke);e.config.setDefaults(c(this,Nr)),typeof c(this,Xe)=="function"&&(b(this,Xe,Ho(c(this,Xe).call(this,{core:e,module:this}))),Pt.add(c(this,Xe))),typeof c(this,_t)=="function"&&(b(this,_t,new an(c(this,_t),{core:e,module:this})),c(this,Ke).modules.windows.contextMenu.addDefaultItems(c(this,_t)))}setup(e){this.log(this.name)}destroy(){c(this,Ke).removeCommands(c(this,Xe))}get core(){return c(this,Ke)}log(e){c(this,Ke).logger.add(e,{namespace:this.constructor.NAME})}get name(){return this.constructor.NAME}}Xe=new WeakMap,_t=new WeakMap,Nr=new WeakMap,Ke=new WeakMap;const Xo="default",ur={default:{title:"Theme Default",colors:["#FFFFFF","#000","#FFAA55","#0055AA"],filter:"invert(100%)"},theme1:{title:"Theme 1",colors:["#000000","#FFFFFF","#4466aa","#919191"],filter:"invert(100%)"},theme2:{title:"Theme 2",colors:["#FFFFFF","#000000","#dd99aa","#8080a0"],filter:"invert(100%)"},theme3:{title:"Theme 3",colors:["#FFFFFF","#000000","#a8a0a0","#406080"],filter:"invert(100%)"},theme4:{title:"Theme 4",colors:["#FFFFFF","#50473f","#a08070","#b0a090"],filter:"invert(100%)"},themeAmber:{title:"Theme Amber",colors:["#FFB000","#805800","#805800","#000000"],filter:"brightness(50%)"},themeGreen:{title:"Theme Green",colors:["#00f900","#008f11","#00Bb00","#000000"],filter:"brightness(50%)"},themeRed:{title:"Theme Red",colors:["#ee0000","#660000","#990000","#330000"],filter:"brightness(50%)"}};function Ko(t){return t=t||["#FFF","#000","#FFAA55","#0055AA"],{boot:{sequence_error:"#000",sequence_ready:t[3],sequence_no_disk:"#fff",sequence_0:"#000",sequence_1:"#ccc",sequence_2:"#fff",sequence_3:t[3]},symbol:{primary:t[0],secondary:t[1],tertiary:t[2],quaternary:t[3]},screen:{background:t[3]},header:{background:t[0],coverBackground:t[0],coverTitle:t[3],title:t[3]},windowHeader:{background:t[0],stripes:t[3],title:t[3],buttonBackground:t[3],buttonPrimary:t[0],buttonSecondary:t[1]},contextMenu:{border:t[3]},contextMenuItem:{background:t[0],label:t[3],indicatorContext:t[3],hotkey:t[3]},contextMenuSeparator:{background:t[3]},window:{text:t[0],background:t[3],border:t[0],borderScaling:t[2],helper__scaleBackground:t[0],helper__scaleIcon:t[3],helper__scaleIconActive:t[1]},storageBar:{background:t[1],border:t[0],sizeHelper:t[2],icon:t[0]},scrollContent:{scrollbarCorner:t[0],scrollbarSpacer:t[0],scrollbarBackground:t[3],scrollbarHelperBackground:t[0],scrollbarHelper:t[3],scrollbarHelperActive:t[1],scrollbarRange:t[0]},symbolWrapperItem:{text:t[0]},button:{label:t[0],primary:{label:t[3],background:t[0],border:t[0],outline:t[3]},secondary:{label:t[0],background:t[3],border:t[0]},dialog:{label:t[3],background:t[0],border:t[2],outline:t[3]}},checkboxGroupItem:{disabled:{icon:t[0],background:t[0]},background:t[3],checkbox:{icon:t[0]},radio:{icon:t[0]}},rangeSlider:{background:t[3],border:t[0],thumbBackground:t[0]},textbox:{text:t[0],background:t[3],border:t[3],outline:t[0],dialog:{text:t[3],background:t[0],border:t[0],outline:t[3]},disabledReadonlyText:t[3],disabledReadonlyBackground:t[0]},textarea:{text:t[0],background:t[3],border:t[3],outline:t[0],resizeBackground:t[3],resizeIcon:t[0]},dropdown:{disabled:{text:t[3],background:t[0]},text:t[0],background:t[3],border:t[3],outline:t[0],scrollbarPrimary:t[0],scrollbarSecondary:t[3],expander:{icon:t[3],border:t[3],background:t[0]}},itemSelect:{border:t[0]},itemSelectItem:{border:t[0],background:t[3],disabledLabelText:t[0],disabledLabelbackground:t[1]},inputText:{selected:t[3],pointer:t[2]},markdown:{typo:{selection:t[1],headlinePrimary:t[0],headlineSecondary:t[2],strong:t[2],strongEm:t[0],link:t[2],linkHover:t[0],del:t[1],line:t[0],blockquoteBackground:t[2],blockquoteText:t[1],codeBackground:t[0],codeText:t[1],codeSelection:t[2]}},dialogContent:{backgroundPrimary:t[0],backgroundSecondary:t[0],text:t[3]},form:{fieldsetBorder:t[2]},console:{text:t[0],typo:{fieldsetBorder:t[2],line:t[0],strong:t[2],strongEm:t[0]}},core:{text:t[0]},workbench13:{calculator:{background:t[1],button:{text:t[0],border:t[0]},result:{border:t[0]}}}}}function qo(t){return{default:t||"invert(100%)"}}class Au{constructor(e,n){g(this,"name","wb13");const{colors:r,filters:i}=Object.assign({colors:{},filters:{}},n);this.name=e||this.name,this.colors=Object.assign(Ko(),r),this.filters=Object.assign(qo(),i)}toCSSVars(){return Object.assign({},Ls(Object.assign({color:this.colors,filter:this.filters})),Ls())}}const Ou="-";function Ls(t,e="",n={}){return typeof t=="object"?(Object.keys(t).map(r=>Ls(t[String(r)],(e?e+Ou:"")+r,n)),n):(n[`--${vu(e)}`]=t,n)}class Ru extends Au{constructor(e,n){const{colors:r,filter:i}=Object.assign({colors:null,filter:null},n);super(e,{colors:Ko(r),filters:qo(i)})}}const bb=2e3,gb={NO_DISK:"no_disk",ERROR:"error",READY:"ready",SEQUENCE_1:0,SEQUENCE_2:1,SEQUENCE_3:2},M={SCREEN_1084_FRAME:"core_screen1084Frame",SCREEN_REAL_LOOK:"core_screenRealLook",SCREEN_SCAN_LINES:"core_screenScanlines",SCREEN_ACTIVE_ANIMATION:"core_screenActiveAnimation",BOOT_WITH_SEQUENCE:"core_bootWithSequence",BOOT_WITH_WEBDOS:"core_bootWithWebDos",THEME:"core_theme",FILE_EXTENSION_ASSIGNMENT:"core_fileExtensionAssignment"},$a={[M.SCREEN_1084_FRAME]:!0,[M.SCREEN_REAL_LOOK]:!0,[M.SCREEN_SCAN_LINES]:!0,[M.SCREEN_ACTIVE_ANIMATION]:!0,[M.BOOT_WITH_SEQUENCE]:!0,[M.BOOT_WITH_WEBDOS]:!0,[M.THEME]:ur[String(Xo)],[M.FILE_EXTENSION_ASSIGNMENT]:[["md","DF0:DocumentReader.app"],["bas","DF1:WebBasic.app"],["basic","DF1:WebBasic.app"]]},Du="web_workbench_CONFIG",wb=new Promise(t=>{/complete|interactive|loaded/.test(document.readyState)?t():document.addEventListener("DOMContentLoaded",t,!1)});var Lr;class Wu{constructor(){p(this,Lr,void 0);window.requestAnimationFrame(()=>{document.documentElement.style.overflowY="scroll",b(this,Lr,window.innerWidth-document.body.offsetWidth),document.documentElement.style.overflowY=null})}get size(){return c(this,Lr)}}Lr=new WeakMap;const _b=new Wu;function Cu(t,e){return t===e?!0:t.parentElement?t.parentElement!==e?Cu(t.parentElement,e):!0:!1}window.requestAnimationFrame(()=>{document.documentElement.style.overflowY="scroll",window.innerWidth-document.body.offsetWidth,document.documentElement.style.overflowY=null});function Wi(t){if(t.touches&&t.touches.length>0){const e=t.touches[0];t.clientX=e.clientX,t.clientY=e.clientY}return"x"in t||(t.x=t.clientX,t.y=t.clientY),t}class G{constructor(e,n){this.name=e,this.value=n}}const Nu=k(0,0);var yt;class Sr{constructor({title:e,sidebarComponent:n,sidebarComponentData:r,component:i,componentData:s,options:a,symbolWrapper:o,wrapper:l,layout:u}){p(this,yt,new Fe);g(this,"id",qn());g(this,"component");g(this,"componentData");g(this,"sidebarComponent");g(this,"sidebarComponentData");g(this,"options",Me({title:"Unnamed",scale:!0,scrollX:!0,scrollY:!0,clampX:!0,clampY:!1,freeze:!1,focused:!1,center:!0,close:!0,overlay:!0,embed:!1,borderless:!1,hideRootHeader:!1}));g(this,"symbolWrapper",null);g(this,"group",null);g(this,"wrapper",null);g(this,"layout",Me({focused:!1,position:k(0,0),size:Nu,scrollOffset:k(0,0)}));this.options.title=e,n&&(this.sidebarComponent=z(n)),r&&(this.sidebarComponentData=z(r)),this.component=z(i),this.componentData={...s,window:this},o&&(this.symbolWrapper=z(o)),l&&(this.wrapper=z(l)),this.options=Object.assign(this.options,a),this.layout=Object.assign(this.layout,u)}ready(){this.options.ready=!0,c(this,yt).next(new G("ready"))}focus(){this.options.focused=!0,c(this,yt).next(new G("focus"))}unfocus(){this.options.focused=!1,c(this,yt).next(new G("unfocus"))}close(e){this.wrapper&&(c(this,yt).next(new G("close",e)),this.wrapper.remove(this.id),this.wrapper=null)}setWrapper(e){this.wrapper=z(e)}setGroup(e){this.group=e}get events(){return c(this,yt)}}yt=new WeakMap;var vn;class Lu{constructor(){p(this,vn,new Map)}get items(){return c(this,vn)}add(e,n){Array.isArray(e)?e.forEach(r=>{this.add(...r)}):c(this,vn).set(e,[].concat(n))}get(...e){const n=e.shift();return c(this,vn).get(n).map(r=>e.reduce((i,s)=>i.replace(/%\d+/,s),r))}}vn=new WeakMap;const N=new Lu;N.add("bad_args","Bad args");N.add("cant_find","Can't find %1");const Pu="/",ws="ROOT",Mu="CLOUD";function Re(t){return typeof t=="object"&&"id"in t?t.id:t.replace(/.*[\\/:]{1,1}([^:\\/]+)$/,"$1")}function Fu(t){return/^[a-zA-Z0-9_-]+:/.test(t)}function ha(...t){return t.reduce((e,n)=>(e.push(...n.replace(/[\\/]+/,"/").replace(/^\//,"").replace(/\/$/,"").split("/")),e),[]).join("/").replace(/\/$/,"")}function $u(t){return t.replace(/(.*)[:/]([^\\/:]+)/,"$1")}function zu(t){return t.replace(/(.*)\/([^\\/]+)/,"$2")}function nr(t){return t.replace(/(.*[\\/:]{1,1})[^:\\/]+$/,"$1")}function Ci(t){return t.length&&/^[\w .\\/:-]+$/.test(t)}function Bu(t){return Ci(t)&&!!(t.includes("/")||t.match(/^([^:]+):.*/))}function Vu(t){return t*1e3}function ma(t){return t.replace(/^(.*)\.[^.]+$/,"$1")}function Ir(t){const e=t.match(/^.*\.([^.]*)$/);return e?e[1]:""}function Zo(t){return t.replace(/[^.a-zA-Z0-9_-]/g,"_")}function Bi(t,e){return e?`${ma(t)}.${e}`:t}function Qo(t,e,n){let r=t;return e.hasItem(Bi(r,n))?(r=`copy_${t}`,e.hasItem(Bi(r,n))?Qo(r,e,n):r):r}function He(t){if(t.getStorageItem()){if(t.getStorageItem().locked)throw N.get("FileSystem_permissionsNeeded");return t}return t}async function we(t,e){return(e||t.getStorageItem())&&(await t.save(),await(e||t.getStorageItem()).save()),t}async function Uu(t,e){const n=await e.remove(t);return Array.isArray(n)?n:[n]}const x={DEFAULT:"default",DIRECTORY:"directory",DIRECTORY_PREFS:"directory_prefs",CLOUD_DISK:"cloud_disk",HARD_DISK:"hard_disk",RAM_DISK:"ram_disk",TMP_DISK:"tmp_disk",DISK_1:"disk_1",DISK_2:"disk_2",DISK_WORKBENCH13:"disk_workbench13",DISK_MARKDOWN:"disk_markdown",DISK_BASIC:"disk_basic",WORK:"work",CONSOLE:"console",SETTINGS:"settings",TRASHCAN:"trashcan",COMPUTER_1:"computer_1",TELEPHONE:"telephone",CURSOR:"cursor",PREFERENCE:"preference",WEB_BASIC:"web_basic",WEB_PAINTING:"web_painting",COLORS:"colors",PRINT_1:"print_1",PRINT_2:"print_2",NOTEPAD:"notepad",BASIC:"basic",IMAGE:"image",NOTE:"note",NOTE_BLANK:"note_blank",LARGE_NOTE:"large_note",LARGE_NOTE_RICH:"large_note_rich",FULLSCREEN:"fullscreen",CALCULATOR:"calculator",CLOCK:"clock",KEYBOARD_QUESTION:"keyboard_question",LARGE_NOTEPAD:"large_notepad",LARGE_NOTEPAD_HELP:"large_notepad_help",RABBIT:"rabbit",MORE:"more",SAY:"say",GITHUB:"github",LAMMPEE:"lammpee",CUBY:"cuby",NUXT:"nuxt",CLOWN:"clown",DISALLOW_1:"disallow_1",COPY_1:"copy_1",COPY_2:"copy_2",DISPLAY_KEYBOARD:"display_keyboard",PALETTE:"palette",SIGN_1:"sign_1",DOCUMENT_EDITOR:"document_editor",DOCUMENT_READER:"document_reader"};function Jo(t){return/^"([^"]*)"$/.test(t)}function ju(t){return Jo(t)?t:(t=Q(t),`"${t}"`)}function za(t){return t.replace(/[ ]*(.+)[ ]+/)}function Q(t){return typeof t!="string"?t:t.replace(/^[ ]*"(.*)"[ ]*$/,"$1").replace(/\\"/g,'"')}function dr(t){return!isNaN(t)}let fa;fa=Promise.resolve({atob:t=>window.decodeURIComponent(window.atob(t)),btoa:t=>window.btoa(window.encodeURIComponent(t))});async function Ps(t){const{atob:e}=await fa;return e(t)}async function Gu(t){const{btoa:e}=await fa;return e(t)}const T={SYMBOL:"symbol",VISIBLE:"visible",POSITION:"position",WINDOW_SYMBOL_REARRANGE:"window_symbol_rearrange",WINDOW_SIZE:"window_size",WINDOW_POSITION:"window_position",WINDOW_SCALE:"window_scale",WINDOW_SCROLL_X:"window_scroll_x",WINDOW_SCROLL_Y:"window_scroll_y",WINDOW_FULL_SIZE:"window_full_size",WEB_URL:"web_url",IGNORE_SYMBOL_REARRANGE:"ignore_symbol_rearrange"},Hu={basic:x.BASIC,bas:x.BASIC,markdown:x.DISK_MARKDOWN,md:x.DISK_MARKDOWN,image:x.IMAGE,img:x.IMAGE};function Yu(t,e=x.NOTE_BLANK){const n=Ir(t).toLowerCase();return Hu[String(n)]||e}var Pr,xn,zt,En,Sn,Be,Bt,In,Ve,Mr;const wr=class{constructor({locked:e=!1,id:n=null,name:r=null,meta:i=[],data:s=null,action:a=null,createdDate:o=Date.now(),editedDate:l=null}){p(this,Pr,void 0);p(this,xn,!1);p(this,zt,null);p(this,En,void 0);p(this,Sn,void 0);p(this,Be,void 0);p(this,Bt,void 0);p(this,In,void 0);p(this,Ve,void 0);p(this,Mr,void 0);if(b(this,Pr,new Fe),b(this,En,o),b(this,Sn,l||o),b(this,xn,e),b(this,Be,n),b(this,Bt,r),b(this,In,new Map([[T.SYMBOL,Yu(n||"",this.constructor.SYMBOL)],[T.VISIBLE,!0]].concat(i||[]))),typeof s=="string")try{s=JSON.parse(s)}catch(u){throw console.log(s),new Error(u)}b(this,Mr,a),this.data=s||{}}async remove(e){const{silent:n}=Object.assign({silent:!1},e);let r;const i=this.isLocked();if(!i)r={type:this.constructor.NAME,id:this.id,name:this.name,path:await this.getPath(),size:this.size,storage:this.getStorageItem()};else if(!n)return N.get("FileSystemItem_itemLocked",await this.getPath());return(n||!i)&&(this.events.next(new G("remove",this)),this.events.unsubscribe(),this.parent.removeItem(this)),r}isLocked(e){return e?!1:this.parent&&this.parent.locked&&this.parent.id!==ws?!0:c(this,xn)}getStorageItem(){return"storage"in this?this:this.parent?this.parent.getStorageItem():null}async copy(){const e=this.constructor;let n=await this.export({encodeData:!1});return n=new e(n),Promise.resolve(n)}rename(e,n){const{name:r=!1,ignore:i=!1}=Object.assign({name:!1,ignore:!1},n);if(!this.isLocked(i)){if(r)return this.name=e,this;{const s=this.id;b(this,Be,Zo(e)),this.parent&&s!==this.id&&this.parent.changeItemId(this,s,this.id)}this.events.next(new G("rename",{name:r,id:e}))}return this}save(){this.events.next(new G("save",this))}get type(){return this.constructor.NAME}async export(e){const{encodeData:n}=Object.assign({encodeData:!0},e),r=new Map(c(this,In));return Array.from(r.keys()).forEach(i=>{r.get(i)instanceof hn&&r.set(i,r.get(i).toJSON())}),{type:this.type,id:c(this,Be),name:c(this,Bt),createdDate:c(this,En),editedDate:c(this,Sn),data:n?await Gu(c(this,Ve)):c(this,Ve),meta:Array.from(r)}}get createdDate(){return c(this,En)}get editedDate(){return c(this,Sn)}get data(){if(typeof c(this,Ve)=="string")try{return JSON.parse(c(this,Ve))}catch{return{data:c(this,Ve)}}return c(this,Ve)}set data(e){typeof e=="object"&&(e=JSON.stringify(e)),b(this,Ve,e)}get action(){return c(this,Mr)}get events(){return c(this,Pr)}get parent(){return c(this,zt)}setId(e){b(this,Be,e)}setParent(e){b(this,zt,e)}get locked(){return c(this,zt)?c(this,zt).locked:c(this,xn)}get id(){return c(this,Be)}get name(){return c(this,Bt)||c(this,Be)}set name(e){b(this,Bt,e)}get extension(){return Ir(c(this,Be))}get meta(){return c(this,In)}get size(){return new Blob([Object.values(this.data)]).size}get maxSize(){return new Blob([Object.values(this.data)]).size}getBase(){return wr.getBaseRecursive({item:this},!1)}getPath(){return wr.getBaseRecursive({item:this})}static getBaseRecursive({item:e,path:n=[]},r=!0){if(r&&n.push(e.id),e.parent)return wr.getBaseRecursive({item:e.parent,path:n});if(n=n.reverse(),n[0]===ws&&n.shift(),n.length>0){let i=n[0];return/\./.test(i)||(i+=":"),`${i}${n.slice(1,n.length).join(Pu)}`}else return ws}};let fe=wr;Pr=new WeakMap,xn=new WeakMap,zt=new WeakMap,En=new WeakMap,Sn=new WeakMap,Be=new WeakMap,Bt=new WeakMap,In=new WeakMap,Ve=new WeakMap,Mr=new WeakMap;N.add([["FileSystemItem_itemLocked",["Item Locked","Item is locked, can't be edit… %1"]]]);const pt={CENTER:0,ORDER_HORIZONTAL:1,ORDER_VERTICAL:2,ORDER_DIAGONAL_LEFT:3,ORDER_DIAGONAL_RIGHT:4,SPLIT_HORIZONTAL:5,SPLIT_VERTICAL:6,FULL:7};var kn,Qs,Tn,Vt,Ut;class Ba{constructor(e,n=[]){p(this,kn,new Fe);p(this,Qs,qn());p(this,Tn,void 0);g(this,"layout",{size:k(0,0),position:k(0,0)});p(this,Vt,new Map);p(this,Ut,new Map);g(this,"models",Tt([]));b(this,Tn,e),n.forEach(r=>this.add(r))}getActiveWindow(){return this.models.value.find(e=>e.options.focused)}setActiveWindow(e){this.models.value.forEach(n=>{n.options.focused=e===n.id,e===n.id&&c(this,kn).next(new G("setActiveWindow",n))})}hasEmbbedWindow(){return!!this.models.value.find(e=>e.options.embed)}isHeaderVsible(){return!this.models.value.find(e=>e.options.embed&&e.options.hideRootHeader)}add(e,n){const{full:r,active:i,group:s}={full:!1,active:!0,group:null,...n};if(e instanceof Sr||(e=new Sr(e)),e.setWrapper(this),r&&(e.layout.size=this.layout.size),s){let a;c(this,Vt).has(s)?(a=c(this,Vt).get(s),a.windows.push(e)):(a={primary:e,windows:[],name:s},c(this,Vt).set(s,a)),e.setGroup(a)}return e.layout.zIndex=this.models.value.length,this.models.value.push(e),c(this,kn).next(new G("add",e)),c(this,Ut).set(e.id,e),i&&this.setActiveWindow(e.id),e}remove(e){typeof e=="string"&&(e=this.get(e)),e.group&&(e.group.primary===e?(e.group.windows.forEach(n=>n.close()),c(this,Vt).delete(e.group.name)):e.group.primary.focus()),this.models.value.splice(this.models.value.indexOf(e),1),c(this,Ut).delete(e.id)}get(e){return c(this,Ut).get(e)}clear(){this.models=Tt([].splice(0,this.models.value.length)),c(this,Ut).clear()}setWindowUpDown(e,n){const r=this.models.value,i=r.indexOf(this.get(e));if(!n&&i+1<r.length||n&&i-1>=0){const s=n?i-1:i+1,a=r[Number(s)].layout.zIndex;r[Number(s)].layout.zIndex=r[Number(i)].layout.zIndex,r[Number(i)].layout.zIndex=a}}centerWindow(e){typeof e=="string"&&(e=this.get(e)),Ms(e,this.layout)}setWindowPositions(e,n=[]){switch(n.length<1&&n.push(...this.models.value),e){case pt.FULL:n.forEach(r=>{Xu(r,this.layout)});break;case pt.CENTER:n.forEach(r=>{Ms(r,this.layout)});break;case pt.ORDER_DIAGONAL_LEFT:case pt.ORDER_DIAGONAL_RIGHT:Ku(n,this.layout,pt.ORDER_DIAGONAL_RIGHT===e);break;case pt.SPLIT_HORIZONTAL:case pt.SPLIT_VERTICAL:qu(n,this.layout,pt.SPLIT_VERTICAL===e);break}}saveSize(e,n){if(this.get(e).symbolWrapper&&this.get(e).symbolWrapper.fsItem){const r=this.get(e).symbolWrapper.fsItem;r.meta.set(T.WINDOW_SIZE,n),c(this,Tn).modules.files.fs.saveItem(r)}}savePosition(e,n){if(this.get(e).symbolWrapper&&this.get(e).symbolWrapper.fsItem){const r=this.get(e).symbolWrapper.fsItem;r.meta.set(T.WINDOW_POSITION,n),c(this,Tn).modules.files.fs.saveItem(r)}}get events(){return c(this,kn)}}kn=new WeakMap,Qs=new WeakMap,Tn=new WeakMap,Vt=new WeakMap,Ut=new WeakMap;function Xu(t,e){t.layout.size=e.size}function Ms(t,e){t.layout.position=k(()=>(e.size-t.layout.size)/2)}function Ku(t,e,n){const r=1/t.length;t.forEach((i,s)=>{Ms(i,e),s=-Math.floor(t.length/2)+s;const a=k(i.layout.position.x+(n?-1:1)*(r*i.layout.size.x)*s,i.layout.position.y+r*i.layout.size.y*s),o=k(()=>e.size-i.layout.size);i.layout.position=k(()=>Math.max(Math.min(a,o),0))})}function qu(t,e,n){let r;const i=t.length;n?(r=k(e.size.x,e.size.y/i),t.forEach((s,a)=>{s.layout.position=k(0,a*r.y),s.layout.size=r})):(r=k(e.size.x/i,e.size.y),t.forEach((s,a)=>{s.layout.position=k(a*r.x,0),s.layout.size=r}))}var vt;class Zu{constructor(){p(this,vt,new Map);g(this,"capsLockActive",!1);g(this,"shiftLeftActive",!1);g(this,"shiftRightActive",!1);g(this,"cmdLeftActive",!1);g(this,"cmdRightActive",!1);g(this,"altLeftActive",!1);g(this,"altRightActive",!1);g(this,"pointerDown",null);g(this,"pointerUp",null);g(this,"pointerMove",null);g(this,"keyDown",null);g(this,"keyUp",null);this.resize=this.get("resize",window).pipe(Lt()),this.pointerDown=this.getPointerDown(),this.pointerUp=this.getPointerUp(),this.pointerMove=this.getPointerMove(),this.keypress=this.get("keypress").pipe(Lt()),this.keydown=this.keyDown=this.get("keydown").pipe(Lt()),this.keyup=this.keyUp=this.get("keyup").pipe(Lt()),this.keyDown.subscribe(({keyCode:e,location:n})=>{switch(e){case 91:this.cmdLeftActive=!0;break;case 93:this.cmdRightActive=!0;break;case 16:n===2?this.shiftRightActive=!0:this.shiftLeftActive=!0;break;case 18:n===2?this.altRightActive=!0:this.altLeftActive=!0;break;case 20:this.capsLockActive=!this.capsLockActive;break}}),this.keyUp.subscribe(({keyCode:e,location:n})=>{switch(e){case 91:this.cmdLeftActive=!1;break;case 93:this.cmdRightActive=!1;break;case 16:n===2?this.shiftRightActive=!1:this.shiftLeftActive=!1;break;case 18:n===2?this.altRightActive=!1:this.altLeftActive=!1;break}})}getPointerDown(e){return this.get("pointerdown",e).pipe(br(n=>Wi(n))).pipe(Lt())}getPointerUp(e){return this.get("pointerup",e).pipe(br(n=>Wi(n))).pipe(Lt())}getPointerMove(e){return this.get("pointermove",e).pipe(br(n=>Wi(n))).pipe(Lt())}get(e,n){n=n||document,c(this,vt).has(n)||c(this,vt).set(n,new Map);const r=c(this,vt).get(n);if(!r.has(e)){const i={passive:!0,capture:!1};r.set(e,Ns(n,e,i))}return r.get(e)}reset(){Array.from(c(this,vt).values).forEach(e=>e.unsubscribe()),c(this,vt).reset()}get cmdActive(){return this.cmdLeftActive||this.cmdRightActive}get altActive(){return this.altLeftActive||this.altRightActive}get shiftActive(){return this.shiftLeftActive||this.shiftRightActive}}vt=new WeakMap;let Va;const _s=Va||(Va=new Zu),Qu={DOCUMENT_EDITOR_SHOW_PREVIEW:"workbench13_DOCUMENT_EDITOR_SHOW_PREVIEW"},yb={[Qu.DOCUMENT_EDITOR_SHOW_PREVIEW]:!0},rr={OUTPUT_TYPE:"type",OPEN_MAXIMIZED:"openMaximized",CONTENT:"content",FONT_FAMILY:"fontFamily",FONT_SIZE:"fontSize"},vb={BuiltIn:"Built-In",Serif:"Serif",SansSerif:"Sans-Serif",Monospace:"Monospace"},hr={BuiltIn:{"Amiga Topaz 13":'"Amiga Topaz 13"',"Amiga Topaz 13 Console":'"Amiga Topaz 13 Console", "Amiga Topaz 13", sans-serif'},Serif:{Georgia:"Georgia, serif","Palatino Linotype":'"Palatino Linotype", "Book Antiqua", Palatino, serif',"Times New Roman":'"Times New Roman", Times, serif'},SansSerif:{Arial:"Arial, Helvetica, sans-serif","Arial Black":'"Arial Black", Gadget, sans-serif',"Comic Sans MS":'"Comic Sans MS", cursive, sans-serif',Impact:"Impact, Charcoal, sans-serif","Lucida Sans Unicode":'"Lucida Sans Unicode", "Lucida Grande", sans-serif',Tahoma:"Tahoma, Geneva, sans-serif","Trebuchet MS":'"Trebuchet MS", Helvetica, sans-serif',Verdana:"Verdana, Geneva, sans-serif"},Monospace:{"Courier New":'"Courier New", Courier, monospace',"Lucida Console":'"Lucida Console", Monaco, monospace'}},xb=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],Ju=hr.BuiltIn["Amiga Topaz 13"],el=16;function Eb(){return{[rr.OPEN_MAXIMIZED]:!1,[rr.OUTPUT_TYPE]:"markdown",[rr.CONTENT]:"",[rr.FONT_FAMILY]:Ju,[rr.FONT_SIZE]:el}}var ed=({onlyFirst:t=!1}={})=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")};const td=ed;var nd=t=>typeof t=="string"?t.replace(td(),""):t,pa={exports:{}},tl={exports:{}};(function(t){var e=function(){function n(l,u,d,m){typeof u=="object"&&(d=u.depth,m=u.prototype,u.filter,u=u.circular);var h=[],f=[],w=typeof er.Buffer<"u";typeof u>"u"&&(u=!0),typeof d>"u"&&(d=1/0);function _(E,L){if(E===null)return null;if(L==0)return E;var O,P;if(typeof E!="object")return E;if(n.__isArray(E))O=[];else if(n.__isRegExp(E))O=new RegExp(E.source,o(E)),E.lastIndex&&(O.lastIndex=E.lastIndex);else if(n.__isDate(E))O=new Date(E.getTime());else{if(w&&er.Buffer.isBuffer(E))return er.Buffer.allocUnsafe?O=er.Buffer.allocUnsafe(E.length):O=new er.Buffer(E.length),E.copy(O),O;typeof m>"u"?(P=Object.getPrototypeOf(E),O=Object.create(P)):(O=Object.create(m),P=m)}if(u){var ne=h.indexOf(E);if(ne!=-1)return f[ne];h.push(E),f.push(O)}for(var H in E){var oe;P&&(oe=Object.getOwnPropertyDescriptor(P,H)),!(oe&&oe.set==null)&&(O[H]=_(E[H],L-1))}return O}return _(l,d)}n.clonePrototype=function(u){if(u===null)return null;var d=function(){};return d.prototype=u,new d};function r(l){return Object.prototype.toString.call(l)}n.__objToStr=r;function i(l){return typeof l=="object"&&r(l)==="[object Date]"}n.__isDate=i;function s(l){return typeof l=="object"&&r(l)==="[object Array]"}n.__isArray=s;function a(l){return typeof l=="object"&&r(l)==="[object RegExp]"}n.__isRegExp=a;function o(l){var u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),u}return n.__getRegExpFlags=o,n}();t.exports&&(t.exports=e)})(tl);var rd=tl.exports,id=rd,sd=function(t,e){return t=t||{},Object.keys(e).forEach(function(n){typeof t[n]>"u"&&(t[n]=id(e[n]))}),t},ad=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],od=sd,ir=ad,nl={nul:0,control:0};pa.exports=function(e){return rl(e,nl)};pa.exports.config=function(t){return t=od(t||{},nl),function(n){return rl(n,t)}};function rl(t,e){if(typeof t!="string")return Ua(t,e);for(var n=0,r=0;r<t.length;r++){var i=Ua(t.charCodeAt(r),e);if(i<0)return-1;n+=i}return n}function Ua(t,e){return t===0?e.nul:t<32||t>=127&&t<160?e.control:ld(t)?0:1+(t>=4352&&(t<=4447||t==9001||t==9002||t>=11904&&t<=42191&&t!=12351||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65135||t>=65280&&t<=65376||t>=65504&&t<=65510||t>=131072&&t<=196605||t>=196608&&t<=262141))}function ld(t){var e=0,n=ir.length-1,r;if(t<ir[0][0]||t>ir[n][1])return!1;for(;n>=e;)if(r=Math.floor((e+n)/2),t>ir[r][1])e=r+1;else if(t<ir[r][0])n=r-1;else return!0;return!1}var cd=pa.exports,ud=nd,dd=cd,il=function(t){return dd(ud(t))},un={},ct=il;function Vi(t,e){return Array.apply(null,{length:e+1}).join(t).slice(0,e)}function hd(t,e,n){t=t??"",t=String(t);var r=e-ct(t);return r<=0?t:t+Vi(n||" ",r)}function md(t,e,n){t=t??"",t=String(t);var r=e-ct(t);if(r<=0)return t;var i=Math.floor(r/2),s=r-i;return Vi(n||" ",i)+t+Vi(n||" ",s)}function fd(t,e,n){t=t??"",t=String(t);var r=e-ct(t);return r<=0?t:Vi(n||" ",r)+t}function pd(t,e){function n(r,i){return r.trim().split(" ").reduce(function(s,a){var o=s[s.length-1];return o&&ct(o.join(" "))+ct(a)<i?s[s.length-1].push(a):s.push([a]),s},[]).map(function(s){return s.join(" ")})}return t.split(`
`).map(function(r){return n(r,e)}).reduce(function(r,i){return r.concat(i)},[])}function bd(t,e,n){t=t.trim();for(var r=[],i=t.split(" "),s="",a=ct(n);s||i.length;){if(s){var o=s;s=""}else var o=i.shift();if(ct(o)>e){for(var l=0,u=0,d=e-a;l<o.length;){var m=ct(o.charAt(l));if(m+u>d)break;u+=m,++l}s=o.slice(l),o=o.slice(0,l),o+=n}r.push(o)}return r.join(" ")}function gd(t,e){if(t=t??"",t=String(t),e==1/0)return t;for(var n=0,r=0;n<t.length;){var i=ct(t.charAt(n));if(i+r>e)break;r+=i,++n}return t.slice(0,n)}un.padRight=hd;un.padCenter=md;un.padLeft=fd;un.splitIntoLines=pd;un.splitLongWords=bd;un.truncateString=gd;var ys=il,Zn=un,wd=Zn.padRight,_d=Zn.padCenter,yd=Zn.padLeft,ja=Zn.splitIntoLines,vd=Zn.splitLongWords,xd=Zn.truncateString,sl=function(e){return e.toUpperCase()},Ed=function(e,n,r){return e},Sd=Object.freeze({maxWidth:1/0,minWidth:0,columnSplitter:" ",truncate:!1,truncateMarker:"…",preserveNewLines:!1,paddingChr:" ",showHeaders:!0,headingTransform:sl,dataTransform:Ed}),Id=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.config||{};delete e.config;var r=e.maxLineWidth||1/0;r==="auto"&&(r=Wl.stdout.columns||1/0),delete e.maxLineWidth,e=Ga({},Sd,e),e.config=e.config||Object.create(null),e.spacing=e.spacing||`
`,e.preserveNewLines=!!e.preserveNewLines,e.showHeaders=!!e.showHeaders,e.columns=e.columns||e.include;var i=e.columns||[];t=Od(t,i),i.length||t.forEach(function(l){for(var u in l)i.indexOf(u)===-1&&i.push(u)});var s=i.reduce(function(l,u){var d=Object.create(e);return l[u]=Ga(d,n[u]),l},Object.create(null));i.forEach(function(l){var u=s[l];u.name=l,u.maxWidth=Math.ceil(u.maxWidth),u.minWidth=Math.ceil(u.minWidth),u.truncate=!!u.truncate,u.align=u.align||"left"}),t=t.map(function(l){var u=Object.create(null);return i.forEach(function(d){u[d]=l[d]!=null?l[d]:"",u[d]=""+u[d],s[d].preserveNewLines?u[d]=u[d].replace(/[^\S\n]/gmi," "):u[d]=u[d].replace(/\s/gmi," ")}),u}),i.forEach(function(l){var u=s[l];t=t.map(function(d,m){var h=Object.create(u);d[l]=u.dataTransform(d[l],h,m);var f=Object.keys(h);if(f.indexOf("name")!==-1){if(u.headingTransform!==sl)return;u.headingTransform=function(w){return w}}return f.forEach(function(w){return u[w]=h[w]}),d})});var a={};e.showHeaders&&(i.forEach(function(l){var u=s[l];if(!u.showHeaders){a[l]="";return}a[l]=u.headingTransform(u.name)}),t.unshift(a)),i.forEach(function(l){var u=s[l];u.width=t.map(function(d){return d[l]}).reduce(function(d,m){return d>=u.maxWidth?d:Math.max(d,Math.min(u.maxWidth,Math.max(u.minWidth,ys(m))))},0)}),i.forEach(function(l){var u=s[l];t=t.map(function(d){return d[l]=vd(d[l],u.width,u.truncateMarker),d})}),i.forEach(function(l){var u=s[l];t=t.map(function(d,m){var h=d[l];if(d[l]=ja(h,u.width),u.truncate&&d[l].length>1){d[l]=ja(h,u.width-ys(u.truncateMarker));var f=d[l][0];Ad(f,u.truncateMarker)||(d[l][0]+=u.truncateMarker),d[l]=d[l].slice(0,1)}return d})}),i.forEach(function(l){var u=s[l];u.width=t.map(function(d){return d[l].reduce(function(m,h){return m>=u.maxWidth?m:Math.max(m,Math.min(u.maxWidth,Math.max(u.minWidth,ys(h))))},0)}).reduce(function(d,m){return d>=u.maxWidth?d:Math.max(d,Math.min(u.maxWidth,Math.max(u.minWidth,m)))},0)});var o=kd(t,s,i,e.paddingChr);return o.reduce(function(l,u){return l.concat(u.reduce(function(d,m){return d.concat(m.join(e.columnSplitter))},[]))},[]).map(function(l){return xd(l,r)}).join(e.spacing)};function kd(t,e,n,r){return t.map(function(i){var s=[],a=0;n.forEach(function(u){a=Math.max(a,i[u].length)});for(var o=function(d){s[d]=s[d]||[],n.forEach(function(m){var h=e[m],f=i[m][d]||"";h.align==="right"?s[d].push(yd(f,h.width,r)):h.align==="center"||h.align==="centre"?s[d].push(_d(f,h.width,r)):s[d].push(wd(f,h.width,r))})},l=0;l<a;l++)o(l);return s})}function Ga(){return Object.assign?Object.assign.apply(Object,arguments):Td.apply(void 0,arguments)}function Td(t,e){if(t==null)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),r=!1,i,s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null){for(var o=Object.keys(Object(a)),l=0,u=o.length;l<u;l++){var d=o[l];try{var m=Object.getOwnPropertyDescriptor(a,d);m!==void 0&&m.enumerable&&(n[d]=a[d])}catch(h){r||(r=!0,i=h)}}if(r)throw i}}return n}function Ad(t,e,n){n=n||t.length,n=n-e.length;var r=t.lastIndexOf(e);return r!==-1&&r===n}function Od(t,e){if(Array.isArray(t))return t;var n=[];for(var r in t){var i={};i[e[0]||"key"]=r,i[e[1]||"value"]=t[r],n.push(i)}return n}const Fs=Dl(Id);var Fr,$r,zr,An;class en{constructor(e){p(this,Fr,0);p(this,$r,!0);p(this,zr,[]);p(this,An,[]);const{showHeader:n,headerPadding:r,columns:i}=Object.assign({showHeader:!0,headerPadding:0,columns:[]},e);b(this,$r,n),b(this,Fr,r),this.addColumn(i)}addColumn(e){Array.isArray(e)?c(this,An).push(...[].concat(e)):c(this,An).push(Object.assign({value:null,align:"left",minWidth:0,maxWidth:0,spacerChar:" "},e))}addRow(e){c(this,zr).push(...[].concat(e))}static createSpacer(e,n,r){if(e.length<n){n=n-e.length;for(let i=0;i<n;i++)e+=r}return e}get columns(){return c(this,An)}get rows(){return c(this,zr)}get showHeader(){return c(this,$r)}get headerPadding(){return c(this,Fr)}toColumnify(){const e=this.columns.map(i=>i.value),n=this.rows.reduce((i,s,a)=>(a<1&&this.showHeader&&this.headerPadding&&i.push(...Array(this.headerPadding).fill("")),i.push(this.columns.reduce((o,l,u)=>(o[l.value]=s[Number(u)],o),{})),i),[]),r=this.columns.reduce((i,s)=>(i[s.value]={},s.align&&(i[s.value].align=s.align),s.minWidth&&(i[s.value].minWidth=s.minWidth),s.maxWidth&&(i[s.value].maxWidth=s.maxWidth),i[s.value].headingTransform=a=>a,i),{});return Fs(n,{showHeaders:this.showHeader,preserveNewLines:!0,config:r,columns:e}).replace(/\xC2/g," ")}}Fr=new WeakMap,$r=new WeakMap,zr=new WeakMap,An=new WeakMap;var Br,Vr,Ur;class Rd{constructor(e){p(this,Br,void 0);p(this,Vr,!1);p(this,Ur,void 0);const{core:n,debug:r,consoleInterface:i}=Object.assign({core:null,debug:!1,consoleInterface:null},e);b(this,Br,n),b(this,Vr,r),b(this,Ur,i)}add(e,n){}get core(){return c(this,Br)}get debug(){return c(this,Vr)}get consoleInterface(){return c(this,Ur)}}Br=new WeakMap,Vr=new WeakMap,Ur=new WeakMap;var jr,Zi,Gr;const Qi=class extends Rd{constructor(n){const{silent:r,color:i}=n=Object.assign({silent:!1,color:!1},n);super(n);p(this,jr,void 0);p(this,Zi,[]);p(this,Gr,!1);b(this,jr,r),b(this,Gr,i)}add(n,r){const{namespace:i,type:s}=Object.assign({namespace:null,type:Qi.TYPE.INFO},r);c(this,Zi).push(n),!c(this,jr)&&s!==Qi.TYPE.DEBUG&&(i?c(this,Gr)?console.log("%c[ %s ]%c[ %s ]","background: #000; color: #008000",s,"background: #000; color: #90ee90",i,n):console.log(`[ ${s.toUpperCase()} ][ ${i} ]`,n):n instanceof en?this.consoleInterface.table(n):this.consoleInterface.log(n))}};let wn=Qi;jr=new WeakMap,Zi=new WeakMap,Gr=new WeakMap,g(wn,"TYPE",{DEBUG:"debug",INFO:"info",OUTPUT:"output"});var On,jt,Hr,qe,lo;let ba=(lo=class{constructor(e){p(this,On,!1);p(this,jt,void 0);p(this,Hr,void 0);p(this,qe,{});e=Object.assign({locked:c(this,On),storage:void 0,name:void 0},e),b(this,On,e.locked),b(this,jt,e.storage),b(this,Hr,e.name)}get locked(){return c(this,On)}get name(){return c(this,Hr)}get storage(){return c(this,jt)}get data(){return c(this,qe)}set data(e){b(this,qe,e)}mount(){return new Promise(e=>{e(this)})}unmount(){return new Promise(e=>{e(this)})}load(){if(!c(this,jt))throw new Error("no storage");return Promise.resolve(c(this,qe))}save(e){if(!c(this,jt))throw new Error("no storage");return b(this,qe,e||c(this,qe)),Promise.resolve(c(this,qe))}},On=new WeakMap,jt=new WeakMap,Hr=new WeakMap,qe=new WeakMap,lo);var Gt;class al{constructor(){p(this,Gt,new Map)}getItem(e){return c(this,Gt).get(e)}setItem(e,n){c(this,Gt).set(e,n)}removeItem(e){c(this,Gt).delete(e)}clear(){c(this,Gt).clear()}}Gt=new WeakMap;class Dd extends ba{constructor(e){e=Object.assign({storage:new al},e),super(e)}}class ol extends ba{mount(){return new Promise(e=>{try{let n;try{if(n=this.storage.getItem(this.name),n){if(n=JSON.parse(n),!n||!(n instanceof Object))throw new Error("json invalid")}else throw new Error("json invalid")}catch{n={}}this.storage.setItem(this.name,JSON.stringify(n)),e(this)}catch(n){throw new Error(n)}})}load(){return new Promise(e=>{if(this.storage)try{this.data=JSON.parse(this.storage.getItem(this.name)),e(this.data)}catch(n){throw new Error(n)}})}save(e){return new Promise(n=>{if(this.storage)try{this.data=e||this.data,this.storage.setItem(this.name,JSON.stringify(this.data)),n(this.data)}catch(r){throw new Error(r)}})}}class Wd extends ol{constructor(e){e=Object.assign({storage:window.localStorage},e),super(e)}}class Cd extends ol{constructor(e){e=Object.assign({storage:window.sessionStorage||new al},e),super(e)}}class ll extends ba{}const ue={NONE:0,AUTO:1,TEMP:3,LOCAL:4,SESSION:5,CLOUD:6};function cl(t){switch(t){case ue.TEMP:return Dd;case ue.LOCAL:return Wd;case ue.SESSION:return Cd;case ue.CLOUD:return ll;default:return Storage}}var Le,Ht,Rn,Yr;class Nd{constructor(e,n){p(this,Le,new Map);p(this,Ht,Me({}));p(this,Rn,void 0);p(this,Yr,void 0);b(this,Rn,new(cl(n||ue.NONE))({name:e})),b(this,Yr,c(this,Rn).load().then(r=>(b(this,Le,new Map(r)),Object.assign(c(this,Ht),Object.fromEntries(c(this,Le))),this)).catch(r=>{throw r}))}setDefaults(e){Object.keys(e).forEach(n=>{this.has(n)||this.set(n,e[String(n)])})}get(e){return c(this,Le).get(e)}has(e){return c(this,Le).has(e)}set(e,n){return typeof e=="object"&&!(e instanceof Map)?Object.keys(e).forEach(r=>{n=e[String(r)],c(this,Le).set(r,n),c(this,Ht)[String(r)]=n}):(c(this,Le).set(e,n),c(this,Ht)[String(e)]=n),c(this,Rn).save(Array.from(c(this,Le)))}get observable(){return c(this,Ht)}get entries(){return c(this,Le)}get ready(){return c(this,Yr)}}Le=new WeakMap,Ht=new WeakMap,Rn=new WeakMap,Yr=new WeakMap;var Xr;class Ld{constructor(e){p(this,Xr,void 0);b(this,Xr,e)}get core(){return c(this,Xr)}ready(){}prompt(e){}log(...e){console.log(...e)}clear(...e){}destroy(){}}Xr=new WeakMap;class Pd extends Ld{prompt(e){const n=["openDialog","--prompt"];return e&&n.push(`--message="${Q(e)}"`),this.core.executeCommand(n.join(" "))}}const Md=`# Project Changelog

## [1.3.25](https://github.com/ThornWalli/web-workbench/compare/v1.3.24...v1.3.25) (2023-08-02)


### Bug Fixes

* **style:** fix wait cursor; update screen ([e3f39f2](https://github.com/ThornWalli/web-workbench/commit/e3f39f242d9cf1022001d4399a5f335be7fde77f))
* **touch-actions:** improve touch actions ([7cc098e](https://github.com/ThornWalli/web-workbench/commit/7cc098e02748f70072422f84e46c7d0377cebca9))

## [1.3.24](https://github.com/ThornWalli/web-workbench/compare/v1.3.23...v1.3.24) (2023-08-01)


### Bug Fixes

* **basic-interpreter:** fix \`commandPrintUsing\` ([51f7564](https://github.com/ThornWalli/web-workbench/commit/51f7564bdb8fddfc410dfd7f1fb560c50b7d42a0))
* **mixin:** remove mixin ([d69bcce](https://github.com/ThornWalli/web-workbench/commit/d69bcceff6beac78f5e61f2f7477313d3418a1bb))
* **styles:** improve style var names ([d54860d](https://github.com/ThornWalli/web-workbench/commit/d54860d869ce6a23799ca6608f496f17e62b2ba6))

## [1.3.23](https://github.com/ThornWalli/web-workbench/compare/v1.3.22...v1.3.23) (2023-07-31)


### Bug Fixes

* **content:** update imprint ([2b3ad13](https://github.com/ThornWalli/web-workbench/commit/2b3ad13ed94ea6f8e5ae0d0b99a32b87b401b682))

## [1.3.22](https://github.com/ThornWalli/web-workbench/compare/v1.3.21...v1.3.22) (2023-07-30)


### Bug Fixes

* **settings:** fix missing style var ([85c839d](https://github.com/ThornWalli/web-workbench/commit/85c839d71cbff71ae6e1b0be4b7d4329c6e78690))

## [1.3.21](https://github.com/ThornWalli/web-workbench/compare/v1.3.20...v1.3.21) (2023-07-30)


### Bug Fixes

* **range-slider:** fix theming ([f1bbb05](https://github.com/ThornWalli/web-workbench/commit/f1bbb053a9c6cd004f94cf10321b39079b7813cf))

## [1.3.20](https://github.com/ThornWalli/web-workbench/compare/v1.3.19...v1.3.20) (2023-07-30)


### Bug Fixes

* **clean:** fix lint warnings ([c1a8518](https://github.com/ThornWalli/web-workbench/commit/c1a85181de773656804325c0b151efe39c2dfd15))
* **nojs:** improve nojs ([665e742](https://github.com/ThornWalli/web-workbench/commit/665e742d3485143fa379206c0a38d67b2866dbef))
* **public:** added public dir ([e41c241](https://github.com/ThornWalli/web-workbench/commit/e41c24180cc88ecdb17571d5aad68d07f3eee3c5))
* **update:** fix favicon ([bacd139](https://github.com/ThornWalli/web-workbench/commit/bacd139a10b20a5aeb51003de3df2a79c1c1f77b))
* **update:** improvements ([63d967d](https://github.com/ThornWalli/web-workbench/commit/63d967d0c9855dcf45716db61d4d804e59918310))
* **update:** update nuxt 3 ([7915791](https://github.com/ThornWalli/web-workbench/commit/79157918a52dcea3a4ec2a9366727ec385a0eac0))

## [1.3.20-beta.4](https://github.com/ThornWalli/web-workbench/compare/v1.3.20-beta.3...v1.3.20-beta.4) (2023-07-30)


### Bug Fixes

* **clean:** fix lint warnings ([c1a8518](https://github.com/ThornWalli/web-workbench/commit/c1a85181de773656804325c0b151efe39c2dfd15))

## [1.3.20-beta.3](https://github.com/ThornWalli/web-workbench/compare/v1.3.20-beta.2...v1.3.20-beta.3) (2023-07-30)


### Bug Fixes

* **nojs:** improve nojs ([665e742](https://github.com/ThornWalli/web-workbench/commit/665e742d3485143fa379206c0a38d67b2866dbef))

## [1.3.20-beta.2](https://github.com/ThornWalli/web-workbench/compare/v1.3.20-beta.1...v1.3.20-beta.2) (2023-07-30)


### Bug Fixes

* **update:** fix favicon ([bacd139](https://github.com/ThornWalli/web-workbench/commit/bacd139a10b20a5aeb51003de3df2a79c1c1f77b))

## [1.3.20-beta.1](https://github.com/ThornWalli/web-workbench/compare/v1.3.19...v1.3.20-beta.1) (2023-07-30)


### Bug Fixes

* **public:** added public dir ([e41c241](https://github.com/ThornWalli/web-workbench/commit/e41c24180cc88ecdb17571d5aad68d07f3eee3c5))
* **update:** improvements ([63d967d](https://github.com/ThornWalli/web-workbench/commit/63d967d0c9855dcf45716db61d4d804e59918310))
* **update:** update nuxt 3 ([7915791](https://github.com/ThornWalli/web-workbench/commit/79157918a52dcea3a4ec2a9366727ec385a0eac0))

## [1.3.19](https://github.com/ThornWalli/web-workbench/compare/v1.3.18...v1.3.19) (2023-07-28)


### Bug Fixes

* **update:** more updates ([6c02598](https://github.com/ThornWalli/web-workbench/commit/6c025981b4e73951da53fc809b14afb54bba965b))
* **update:** update project ([1550039](https://github.com/ThornWalli/web-workbench/commit/15500390ad8164d9be2a854801f6249b1336f688))

## [1.3.18](https://github.com/ThornWalli/web-workbench/compare/v1.3.17...v1.3.18) (2022-06-05)


### Bug Fixes

* **core:** fix font style ([6c33584](https://github.com/ThornWalli/web-workbench/commit/6c33584a88a2e8d2f172339eab36d2c8a0684301))
* **math-parser:** add hex functions ([c0a0e76](https://github.com/ThornWalli/web-workbench/commit/c0a0e76dc51beb25a1e5a95ddcc58b6f7d2f875d))
* **refactor:** improve \`Core.vue\`; improve event subscribes ([167336e](https://github.com/ThornWalli/web-workbench/commit/167336e4354103b48fe2653aac5adcedc83bf215))

## [1.3.18-beta.2](https://github.com/ThornWalli/web-workbench/compare/v1.3.18-beta.1...v1.3.18-beta.2) (2022-06-05)


### Bug Fixes

* **core:** fix font style ([6c33584](https://github.com/ThornWalli/web-workbench/commit/6c33584a88a2e8d2f172339eab36d2c8a0684301))
* **math-parser:** add hex functions ([c0a0e76](https://github.com/ThornWalli/web-workbench/commit/c0a0e76dc51beb25a1e5a95ddcc58b6f7d2f875d))

## [1.3.18-beta.1](https://github.com/ThornWalli/web-workbench/compare/v1.3.17...v1.3.18-beta.1) (2022-06-03)


### Bug Fixes

* **refactor:** improve \`Core.vue\`; improve event subscribes ([167336e](https://github.com/ThornWalli/web-workbench/commit/167336e4354103b48fe2653aac5adcedc83bf215))

## [1.3.17](https://github.com/ThornWalli/web-workbench/compare/v1.3.16...v1.3.17) (2022-05-31)


### Bug Fixes

* **firebase:** update firebase; improve firebaseWrapper tests ([094cc50](https://github.com/ThornWalli/web-workbench/commit/094cc504b2b3904525ea113dd513591eb1246ae5))

## [1.3.16](https://github.com/ThornWalli/web-workbench/compare/v1.3.15...v1.3.16) (2022-05-30)


### Bug Fixes

* **ci:** fix deploy trigger ([9b93f6b](https://github.com/ThornWalli/web-workbench/commit/9b93f6b248fe525c3fd9be35b9c5e7d61854116c))
* **ci:** fix deploy trigger ([3971268](https://github.com/ThornWalli/web-workbench/commit/397126821e1613c989b02f69a1f4a0d2fc995ad9))
* **ci:** fix deploy trigger 1 ([9242e25](https://github.com/ThornWalli/web-workbench/commit/9242e25dcf80073e1ff9f0bd90e2a19dece744d5))
* **ci:** fix missing base path ([af2bc8b](https://github.com/ThornWalli/web-workbench/commit/af2bc8bc8d6d8eaaf2bc037d31fe4628bcc3c6b5))
* **ci:** removed unused ifs & test version env ([a92f7b7](https://github.com/ThornWalli/web-workbench/commit/a92f7b7e7e09c530add416b62c3ffeea2e8f5e05))
* **ci:** test 2 ([4df68a4](https://github.com/ThornWalli/web-workbench/commit/4df68a42f1ce9232407cf8f7daf5313fe444a016))
* **ci:** test 3 ([ab43e14](https://github.com/ThornWalli/web-workbench/commit/ab43e148991f0e85b8cb4c185e23b115217241a3))
* **ci:** test env version ([1c9086c](https://github.com/ThornWalli/web-workbench/commit/1c9086c158d0b25eacff6888168a3f25e9f6e46b))

## [1.3.16-beta.7](https://github.com/ThornWalli/web-workbench/compare/v1.3.16-beta.6...v1.3.16-beta.7) (2022-05-30)


### Bug Fixes

* **ci:** test 2 ([4df68a4](https://github.com/ThornWalli/web-workbench/commit/4df68a42f1ce9232407cf8f7daf5313fe444a016))
* **ci:** test 3 ([ab43e14](https://github.com/ThornWalli/web-workbench/commit/ab43e148991f0e85b8cb4c185e23b115217241a3))

## [1.3.16-beta.6](https://github.com/ThornWalli/web-workbench/compare/v1.3.16-beta.5...v1.3.16-beta.6) (2022-05-30)


### Bug Fixes

* **ci:** test env version ([1c9086c](https://github.com/ThornWalli/web-workbench/commit/1c9086c158d0b25eacff6888168a3f25e9f6e46b))

## [1.3.16-beta.5](https://github.com/ThornWalli/web-workbench/compare/v1.3.16-beta.4...v1.3.16-beta.5) (2022-05-30)


### Bug Fixes

* **ci:** fix missing base path ([af2bc8b](https://github.com/ThornWalli/web-workbench/commit/af2bc8bc8d6d8eaaf2bc037d31fe4628bcc3c6b5))

## [1.3.16-beta.4](https://github.com/ThornWalli/web-workbench/compare/v1.3.16-beta.3...v1.3.16-beta.4) (2022-05-30)


### Bug Fixes

* **ci:** removed unused ifs & test version env ([a92f7b7](https://github.com/ThornWalli/web-workbench/commit/a92f7b7e7e09c530add416b62c3ffeea2e8f5e05))

## [1.3.16-beta.3](https://github.com/ThornWalli/web-workbench/compare/v1.3.16-beta.2...v1.3.16-beta.3) (2022-05-30)


### Bug Fixes

* **ci:** fix deploy trigger 1 ([9242e25](https://github.com/ThornWalli/web-workbench/commit/9242e25dcf80073e1ff9f0bd90e2a19dece744d5))

## [1.3.16-beta.2](https://github.com/ThornWalli/web-workbench/compare/v1.3.16-beta.1...v1.3.16-beta.2) (2022-05-30)


### Bug Fixes

* **ci:** fix deploy trigger ([9b93f6b](https://github.com/ThornWalli/web-workbench/commit/9b93f6b248fe525c3fd9be35b9c5e7d61854116c))

## [1.3.16-beta.1](https://github.com/ThornWalli/web-workbench/compare/v1.3.15...v1.3.16-beta.1) (2022-05-30)


### Bug Fixes

* **ci:** fix deploy trigger ([3971268](https://github.com/ThornWalli/web-workbench/commit/397126821e1613c989b02f69a1f4a0d2fc995ad9))

## [1.3.15](https://github.com/ThornWalli/web-workbench/compare/v1.3.14...v1.3.15) (2022-05-30)


### Bug Fixes

* **ci:** fix deploy trigger ([617dd0e](https://github.com/ThornWalli/web-workbench/commit/617dd0e61f3380ed1f53a725ba602fd38ca0aee4))
* **ci:** fix deploy trigger ([13d4f21](https://github.com/ThornWalli/web-workbench/commit/13d4f2161b4f837774ea8ebbfabb6c5dd52da8a3))
* **ci:** fix deploy trigger ([d5b59e0](https://github.com/ThornWalli/web-workbench/commit/d5b59e0ff2940f70888cdd50f35a34bcb25084bd))
* **components:** added scoped attribute ([d69867d](https://github.com/ThornWalli/web-workbench/commit/d69867dfa9a27236abf624955e04b3b63f402a09))
* **update:** update dependecies… ([d41cebc](https://github.com/ThornWalli/web-workbench/commit/d41cebc43b03c2276d42800fa3098ecdfc559463))

## [1.3.15-beta.4](https://github.com/ThornWalli/web-workbench/compare/v1.3.15-beta.3...v1.3.15-beta.4) (2022-05-30)


### Bug Fixes

* **ci:** fix deploy trigger ([617dd0e](https://github.com/ThornWalli/web-workbench/commit/617dd0e61f3380ed1f53a725ba602fd38ca0aee4))

## [1.3.15-beta.3](https://github.com/ThornWalli/web-workbench/compare/v1.3.15-beta.2...v1.3.15-beta.3) (2022-05-30)


### Bug Fixes

* **ci:** fix deploy trigger ([13d4f21](https://github.com/ThornWalli/web-workbench/commit/13d4f2161b4f837774ea8ebbfabb6c5dd52da8a3))

## [1.3.15-beta.2](https://github.com/ThornWalli/web-workbench/compare/v1.3.15-beta.1...v1.3.15-beta.2) (2022-05-30)


### Bug Fixes

* **ci:** fix deploy trigger ([d5b59e0](https://github.com/ThornWalli/web-workbench/commit/d5b59e0ff2940f70888cdd50f35a34bcb25084bd))

## [1.3.15-beta.1](https://github.com/ThornWalli/web-workbench/compare/v1.3.14...v1.3.15-beta.1) (2022-05-30)


### Bug Fixes

* **components:** added scoped attribute ([d69867d](https://github.com/ThornWalli/web-workbench/commit/d69867dfa9a27236abf624955e04b3b63f402a09))
* **update:** update dependecies… ([d41cebc](https://github.com/ThornWalli/web-workbench/commit/d41cebc43b03c2276d42800fa3098ecdfc559463))

## [1.3.14](https://github.com/ThornWalli/web-workbench/compare/v1.3.13...v1.3.14) (2020-12-18)


### Bug Fixes

* **lint:** fixing ([255f7b6](https://github.com/ThornWalli/web-workbench/commit/255f7b62e8be1777e98b66b3860d40a7f37e33ac))
* **pwa-reports:** fix workbox and renamed reports dir ([1d9ce88](https://github.com/ThornWalli/web-workbench/commit/1d9ce881ddd2ea97792a9f732257510cdb131b3c))

## [1.3.13](https://github.com/ThornWalli/web-workbench/compare/v1.3.12...v1.3.13) (2020-05-29)


### Bug Fixes

* **deps:** update dependency @babel/plugin-proposal-private-methods to v7.10.1 ([03e4e9c](https://github.com/ThornWalli/web-workbench/commit/03e4e9c8b33388e31f1439928599030aaeddc80a))
* **deps:** update dependency firebase to v7.14.6 ([389d9b3](https://github.com/ThornWalli/web-workbench/commit/389d9b3b35e6da6c515b905c82733d8d9ffe5eab))
* **deps:** update dependency snyk to v1.327.0 ([b0d378e](https://github.com/ThornWalli/web-workbench/commit/b0d378e0d877cf3c3a358b9cf0cf3aece025cfd1))
* **deps:** update dependency snyk to v1.328.0 ([64a7b9a](https://github.com/ThornWalli/web-workbench/commit/64a7b9ac87515f29d94dfcb2a121140789be47a2))
* **deps:** update dependency snyk to v1.329.0 ([f41c3a5](https://github.com/ThornWalli/web-workbench/commit/f41c3a5a568874f5f17235133d5d97084119381d))
* **deps:** update dependency snyk to v1.330.0 ([b85857a](https://github.com/ThornWalli/web-workbench/commit/b85857aeb16aa426610b869fc21c81795016c097))
* **deps:** update dependency snyk to v1.330.2 ([773b8b5](https://github.com/ThornWalli/web-workbench/commit/773b8b56c15ff1dab9658c1f17cd4ddd490df15c))
* **deps:** update dependency snyk to v1.330.3 ([a096f1a](https://github.com/ThornWalli/web-workbench/commit/a096f1aabba849694c79f9126e129c76c0eebb48))
* **deps:** update dependency snyk to v1.330.4 ([bf458c4](https://github.com/ThornWalli/web-workbench/commit/bf458c49cb26e5f23f8758fe7b74ea1f5e2e9bd8))
* **deps:** update dependency snyk to v1.331.0 ([65eb49f](https://github.com/ThornWalli/web-workbench/commit/65eb49f8893e9a63affe3f999fa26faa6b133654))
* **deps:** update dependency snyk to v1.332.0 ([9efeea1](https://github.com/ThornWalli/web-workbench/commit/9efeea1076b9df7d6a87290236ec08e6e7024fad))
* **deps:** update dependency snyk to v1.332.1 ([af7532f](https://github.com/ThornWalli/web-workbench/commit/af7532fb12e6af8cb8b0848d4d7ec5b509f309a5))

## [1.3.12](https://github.com/ThornWalli/web-workbench/compare/v1.3.11...v1.3.12) (2020-05-24)


### Bug Fixes

* **deps:** update dependency snyk to v1.325.0 ([487b34a](https://github.com/ThornWalli/web-workbench/commit/487b34a85bd179d4393e86cc7ce3449753dfd499))

## [1.3.11](https://github.com/ThornWalli/web-workbench/compare/v1.3.10...v1.3.11) (2020-05-23)


### Bug Fixes

* **cursor:** fix cursor css vars ([775f45d](https://github.com/ThornWalli/web-workbench/commit/775f45d493f23284575a92ea73d28168acd1e137))
* **deps:** update dependency snyk to v1.324.0 ([63e8e38](https://github.com/ThornWalli/web-workbench/commit/63e8e38662af4f6bef2877d0f04272f7c845e893))

## [1.3.10](https://github.com/ThornWalli/web-workbench/compare/v1.3.9...v1.3.10) (2020-05-22)


### Bug Fixes

* **symbols:** add cuby symbol ([9d5fafd](https://github.com/ThornWalli/web-workbench/commit/9d5fafde29a29ab2112dde4369e6ac60e0dff949))

## [1.3.9](https://github.com/ThornWalli/web-workbench/compare/v1.3.8...v1.3.9) (2020-05-22)


### Bug Fixes

* **deps:** pin dependency requestidlecallback to 0.3.0 ([ab09838](https://github.com/ThornWalli/web-workbench/commit/ab09838f9b20bb353d12a3d3685c6428cb1cde2b))

## [1.3.8](https://github.com/ThornWalli/web-workbench/compare/v1.3.7...v1.3.8) (2020-05-22)


### Bug Fixes

* **deps:** update dependency firebase to v7.14.5 ([ab14486](https://github.com/ThornWalli/web-workbench/commit/ab14486dea95b15f2fc60bd735e667931f6a735a))

## [1.3.7](https://github.com/ThornWalli/web-workbench/compare/v1.3.6...v1.3.7) (2020-05-21)


### Bug Fixes

* **cursor:** optimize cursor ([8b5e649](https://github.com/ThornWalli/web-workbench/commit/8b5e649192c035cca667872517d8fdb704a7a3b2))
* **deps:** update dependency cross-blob to v1.2.3 ([4345980](https://github.com/ThornWalli/web-workbench/commit/43459804f347fdc6ec951ac941a3efec7649276a))
* **deps:** update dependency snyk to v1.323.2 ([885fae6](https://github.com/ThornWalli/web-workbench/commit/885fae627f6fe17cff1422e4da50f5bf389d213b))
* **deps:** update dependency uuid to v8.1.0 ([4a33abe](https://github.com/ThornWalli/web-workbench/commit/4a33abedb51b845d5ae1539427cd5ca2389835ad))
* **others:** fix document editor window sizes ([92e6f47](https://github.com/ThornWalli/web-workbench/commit/92e6f470ed30014d1bc238ea923f59131ba11472))
* **styling:** fix styles ([2122e40](https://github.com/ThornWalli/web-workbench/commit/2122e408063fbcbe76b66118a63aa861a1784e99))

## [1.3.6](https://github.com/ThornWalli/web-workbench/compare/v1.3.5...v1.3.6) (2020-05-20)


### Bug Fixes

* **deps:** update dependency snyk to v1.323.1 ([025bb7f](https://github.com/ThornWalli/web-workbench/commit/025bb7fcfd7822f5990b12a00b2e3eb66aa56343))
* **styling:** remove sub-pixel ([c7abf00](https://github.com/ThornWalli/web-workbench/commit/c7abf00216339977f21d42aa7baf9c428794d9d4))

## [1.3.5](https://github.com/ThornWalli/web-workbench/compare/v1.3.4...v1.3.5) (2020-05-19)


### Bug Fixes

* **optimize:** fix screen position, remove position sub-pixel ([b50b720](https://github.com/ThornWalli/web-workbench/commit/b50b72044321750b123941549f687f843067b419))

## [1.3.4](https://github.com/ThornWalli/web-workbench/compare/v1.3.3...v1.3.4) (2020-05-19)


### Bug Fixes

* **deps:** update dependency snyk to v1.323.0 ([6b09625](https://github.com/ThornWalli/web-workbench/commit/6b096258dd2910024d9981cef1e527e47f380fac))

## [1.3.3](https://github.com/ThornWalli/web-workbench/compare/v1.3.2...v1.3.3) (2020-05-19)


### Bug Fixes

* **deps:** update dependency snyk to v1.322.0 ([b233f87](https://github.com/ThornWalli/web-workbench/commit/b233f8769c718e83fe117a04fe37ecefc065b859))
* **position-color:** fix sub-pixel css var positions with round ([09c7633](https://github.com/ThornWalli/web-workbench/commit/09c7633786d9627bdf020abfc70dc465c314a710))

## [1.3.2](https://github.com/ThornWalli/web-workbench/compare/v1.3.1...v1.3.2) (2020-05-18)


### Bug Fixes

* **others:** pwa, nuxt.config, workflow ([6bc9c3a](https://github.com/ThornWalli/web-workbench/commit/6bc9c3a0a723fc35a1e94b9b784e7ffa1b8ba68b))

## [1.3.1](https://github.com/ThornWalli/web-workbench/compare/v1.3.0...v1.3.1) (2020-05-17)


### Bug Fixes

* **touch:** fix touch-action ([3b44d1c](https://github.com/ThornWalli/web-workbench/commit/3b44d1c5fe0dc9ad8edf9b4ddd76bda1c6958d5b))

# [1.3.0](https://github.com/ThornWalli/web-workbench/compare/v1.2.8...v1.3.0) (2020-05-17)


### Features

* **update:** some updates ([ac3d84c](https://github.com/ThornWalli/web-workbench/commit/ac3d84cb4c0f4b9308c14561694c0a558669c9d1))

## [1.2.8](https://github.com/ThornWalli/web-workbench/compare/v1.2.7...v1.2.8) (2020-05-17)


### Bug Fixes

* **cloud:** add nuxt disk ([b98769f](https://github.com/ThornWalli/web-workbench/commit/b98769fd2b24033ea49cc498a641d7e5174e5b6b))

## [1.2.7](https://github.com/ThornWalli/web-workbench/compare/v1.2.6...v1.2.7) (2020-05-17)


### Bug Fixes

* **windows:** add more options; fix others ([57716d5](https://github.com/ThornWalli/web-workbench/commit/57716d50cda9066275092dd4904c4ab6b09ba97e))

## [1.2.6](https://github.com/ThornWalli/web-workbench/compare/v1.2.5...v1.2.6) (2020-05-17)


### Bug Fixes

* **symbols:** add nuxt symbol ([5e4fedb](https://github.com/ThornWalli/web-workbench/commit/5e4fedb521234e04f8bb1dfc389a8e90308d241f))

## [1.2.5](https://github.com/ThornWalli/web-workbench/compare/v1.2.4...v1.2.5) (2020-05-17)


### Bug Fixes

* **deps:** update dependency @js-basics/vector to v1.48.0 ([f92bf7e](https://github.com/ThornWalli/web-workbench/commit/f92bf7ea52d8b938bcb9cbad9207356d00417764))

## [1.2.4](https://github.com/ThornWalli/web-workbench/compare/v1.2.3...v1.2.4) (2020-05-17)


### Bug Fixes

* **windows:** fix initial position; add center option ([a23bfc3](https://github.com/ThornWalli/web-workbench/commit/a23bfc3d2d058253b8a8d62d908e968609eea5a0))

## [1.2.3](https://github.com/ThornWalli/web-workbench/compare/v1.2.2...v1.2.3) (2020-05-17)


### Bug Fixes

* **file-edit:** add more window properties ([5407d5b](https://github.com/ThornWalli/web-workbench/commit/5407d5b818cce3ce2f9da6ee08d3c383168fd8ae))
* **windows:** update window ([9bda244](https://github.com/ThornWalli/web-workbench/commit/9bda2441e2063c2b9e4763c25a2060728ce7494e))

## [1.2.2](https://github.com/ThornWalli/web-workbench/compare/v1.2.1...v1.2.2) (2020-05-17)


### Bug Fixes

* **pages:** fix page commands ([55a51cc](https://github.com/ThornWalli/web-workbench/commit/55a51cc0db9c42698d2286b57831cd55273532b5))

## [1.2.1](https://github.com/ThornWalli/web-workbench/compare/v1.2.0...v1.2.1) (2020-05-17)


### Bug Fixes

* **fixes:** some fixes ([ef420e4](https://github.com/ThornWalli/web-workbench/commit/ef420e45389ce330aaf20100f28e58bf6319ffd5))
* **scroll-content:** add vars to change size and position ([b9461b2](https://github.com/ThornWalli/web-workbench/commit/b9461b236c5ac1f4e414bc2f2ca8a23f8dbe7f09))
* **window:** add meta window size support ([d7870e1](https://github.com/ThornWalli/web-workbench/commit/d7870e1c1c91e5f6266b67d22d73f940872c50d3))

# [1.2.0](https://github.com/ThornWalli/web-workbench/compare/v1.1.7...v1.2.0) (2020-05-16)


### Bug Fixes

* **components:** optimize ([ffca319](https://github.com/ThornWalli/web-workbench/commit/ffca31951d0701440d6bf965b8fa4b4c304cab4e))
* **markdown:** add bold support ([d87c12c](https://github.com/ThornWalli/web-workbench/commit/d87c12cbd745724a5df75a15903390fb4d31c7da))
* **svg:** update svgs ([dde215f](https://github.com/ThornWalli/web-workbench/commit/dde215fb3540899680225c5e39542e7d5aeda5b7))
* **symbols:** add symbol for document-reader ([f7f1b31](https://github.com/ThornWalli/web-workbench/commit/f7f1b317eb545159401ebc7d90738db4f7cae7ba))


### Features

* **update:** add font-size to document editor/reader ([000fae1](https://github.com/ThornWalli/web-workbench/commit/000fae1b00167944ec57b7af8a273b580a36b8a7))

## [1.1.7](https://github.com/ThornWalli/web-workbench/compare/v1.1.6...v1.1.7) (2020-05-16)


### Bug Fixes

* **deps:** update dependency marked to v1.1.0 ([a2f749c](https://github.com/ThornWalli/web-workbench/commit/a2f749c77408d60f8bbdca024d7005c8c5de464d))

## [1.1.6](https://github.com/ThornWalli/web-workbench/compare/v1.1.5...v1.1.6) (2020-05-16)


### Bug Fixes

* **detection:** fix browser detection force release… ([42efe67](https://github.com/ThornWalli/web-workbench/commit/42efe675c314f1f2383027ef410bf08d00e143fe))

## [1.1.5](https://github.com/ThornWalli/web-workbench/compare/v1.1.4...v1.1.5) (2020-05-16)


### Bug Fixes

* **update:** update document apps and themes ([49ea182](https://github.com/ThornWalli/web-workbench/commit/49ea1821d81cea657b30afd7ea9e0f6f3b56efba))

## [1.1.4](https://github.com/ThornWalli/web-workbench/compare/v1.1.3...v1.1.4) (2020-05-16)


### Bug Fixes

* **pwa:** update caching ([a0c56b1](https://github.com/ThornWalli/web-workbench/commit/a0c56b16b0938f045e8d44e81c8f330b5bca2c60))

## [1.1.3](https://github.com/ThornWalli/web-workbench/compare/v1.1.2...v1.1.3) (2020-05-16)


### Bug Fixes

* **workflow:** fix workflows ([23d0d25](https://github.com/ThornWalli/web-workbench/commit/23d0d25dce4c713d92cea912e62f0ee34acd9324))

## [1.1.2](https://github.com/ThornWalli/web-workbench/compare/v1.1.1...v1.1.2) (2020-05-16)


### Bug Fixes

* **workflow:** split workflow, deploy, release, branch ([15c8daf](https://github.com/ThornWalli/web-workbench/commit/15c8daf337c53493af7a7e61cc181ff86723f39c))

## [1.1.1](https://github.com/ThornWalli/web-workbench/compare/v1.1.0...v1.1.1) (2020-05-16)


### Bug Fixes

* **dom-events:** change mouse/touch-events to pointer-events ([4b302f2](https://github.com/ThornWalli/web-workbench/commit/4b302f244c29a16fe271c9acdf1d88966b3ae314))

# [1.1.0](https://github.com/ThornWalli/web-workbench/compare/v1.0.1...v1.1.0) (2020-05-16)


### Features

* **update:** update file-execution and others ([671643d](https://github.com/ThornWalli/web-workbench/commit/671643df7fb705b6860b96a3a7731d575d21218d))

## [1.0.1](https://github.com/ThornWalli/web-workbench/compare/v1.0.0...v1.0.1) (2020-05-15)


### Bug Fixes

* **pwa:** change pwa version to package version ([403e0fa](https://github.com/ThornWalli/web-workbench/commit/403e0fac609418dc38f369c857a1194cd782a581))

# 1.0.0 (2020-05-15)


### Bug Fixes

* **clean:** clean lint errors ([a7c27f9](https://github.com/ThornWalli/web-workbench/commit/a7c27f9a757217351a68e3037a1ddaed78bd7374))
* **clean:** clean lint errors ([f3a54d6](https://github.com/ThornWalli/web-workbench/commit/f3a54d6ba3773e6db1cb3b1d79337d10a7c32bd4))
* **clean:** clean lint errors ([7c54f93](https://github.com/ThornWalli/web-workbench/commit/7c54f936afd7c08e1a25e16e68dc7723f6d7e327))
* **component:** fix symbolwrapper focus ([3feab0f](https://github.com/ThornWalli/web-workbench/commit/3feab0fef250667f68e575c27fbb94902441117b))
* **config:** fix default settings ([152798c](https://github.com/ThornWalli/web-workbench/commit/152798c354c44f46aa11a50471d415a01a37f1fe))
* **deps:** pin dependencies ([96ff36b](https://github.com/ThornWalli/web-workbench/commit/96ff36b558af0b90da46dfcfb25d0d1c85b7f781))
* **deps:** pin dependency nuxt-font-loader-strategy to 1.1.0 ([bf47c8b](https://github.com/ThornWalli/web-workbench/commit/bf47c8bc70f0f5a6fea4bb7c875c0dd2119d1958))
* **deps:** pin dependency pepjs to 0.5.2 ([72ec767](https://github.com/ThornWalli/web-workbench/commit/72ec767ca3bf35a696447514cf17dc7060d96713))
* **deps:** update dependency @js-basics/vector to v1.47.0 ([c44d7bd](https://github.com/ThornWalli/web-workbench/commit/c44d7bdd2b4d60f64d829df1aba9860b6ad14aae))
* **deps:** update dependency @nuxtjs/eslint-config to v3 ([598fd61](https://github.com/ThornWalli/web-workbench/commit/598fd61935556c59d13599c9220bf3d0e1d791ad))
* **deps:** update dependency firebase to v7.14.3 ([0e6b677](https://github.com/ThornWalli/web-workbench/commit/0e6b677214e986515b94a6e17dcf7fc43212c9c1))
* **deps:** update dependency firebase to v7.14.4 ([8580995](https://github.com/ThornWalli/web-workbench/commit/85809956cc062dde98e65fc0e1d8557da6074537))
* **deps:** update dependency marked to v1 ([e225c76](https://github.com/ThornWalli/web-workbench/commit/e225c76d605031bd6e1f8eb24c3e7887d8ad2675))
* **deps:** update dependency snyk to v1.317.0 ([b1a7cba](https://github.com/ThornWalli/web-workbench/commit/b1a7cba0de993b5573feabacb18a6b2266516ef3))
* **deps:** update dependency snyk to v1.318.0 ([f829cad](https://github.com/ThornWalli/web-workbench/commit/f829cadcca5cc56e195fe07ad198b25759748d8d))
* **deps:** update dependency snyk to v1.319.0 ([abea4f4](https://github.com/ThornWalli/web-workbench/commit/abea4f487ae8743362dad4b64a4a54551bb49171))
* **deps:** update dependency snyk to v1.319.1 ([c81e8b4](https://github.com/ThornWalli/web-workbench/commit/c81e8b45201df5af86d1dc9149b4d5fd638bb47e))
* **deps:** update dependency snyk to v1.319.2 ([a4a36c4](https://github.com/ThornWalli/web-workbench/commit/a4a36c43438b62511783653935863dcc561eb1a5))
* **deps:** update dependency snyk to v1.320.1 ([624fff2](https://github.com/ThornWalli/web-workbench/commit/624fff2ca9bb3715116dbb70e45487592dfe01db))
* **deps:** update dependency snyk to v1.320.2 ([30346f2](https://github.com/ThornWalli/web-workbench/commit/30346f2939ab113697f2f9f085e82c60d578d186))
* **deps:** update dependency snyk to v1.320.3 ([6fa6b71](https://github.com/ThornWalli/web-workbench/commit/6fa6b71691bd35d60c811ffde9d059804dbe2294))
* **deps:** update dependency snyk to v1.320.4 ([f894fc2](https://github.com/ThornWalli/web-workbench/commit/f894fc2bdb31f4c5a333f9f29d5d49d1d7cffc38))
* **deps:** update dependency snyk to v1.321.0 ([bc19424](https://github.com/ThornWalli/web-workbench/commit/bc194243da12bc9685dabf0f8b12ad33ac31c933))
* **deps:** update dependency uuid to v8 ([260d36d](https://github.com/ThornWalli/web-workbench/commit/260d36d34d613693ea20a1a8c4403a787aa0b117))
* **opt:** mobile optimizations & fix basic int ([87dedfb](https://github.com/ThornWalli/web-workbench/commit/87dedfba604a43041385495cdf9ccc79047abef3))
* **screen:** fix screen active content size ([0bc5996](https://github.com/ThornWalli/web-workbench/commit/0bc5996f0f00c7ae9c684578183eda6852594a38))
* **share-sitemap:** fix host url concat ([150210a](https://github.com/ThornWalli/web-workbench/commit/150210a050fe97d25885cbe656fcddf85603b2d3))
* **update:** customizations for lighthouse and firefox ([d7e42c8](https://github.com/ThornWalli/web-workbench/commit/d7e42c84aaa478f453ea536cc1fb008597ee187b))
* **update:** update components ([4c66ccb](https://github.com/ThornWalli/web-workbench/commit/4c66ccb7b61eb52cffaced6a84818f44a7a225a6))
* **window:** fix window-wrapper resize ([c1d15d5](https://github.com/ThornWalli/web-workbench/commit/c1d15d58984bdd176edb9cf5141ab0c276b3d769))
* **window:** fix window-wrapper size ([766284c](https://github.com/ThornWalli/web-workbench/commit/766284c6cc1ac07c5a33ee351f10ab2c40725b98))


### Features

* **actions:** add main.yml ([5150b0f](https://github.com/ThornWalli/web-workbench/commit/5150b0f87642c0232b52a9d57ba06b185f2ccc7d))
* **document:** update Document Reader & Editor ([46ee9ed](https://github.com/ThornWalli/web-workbench/commit/46ee9ed7c773614ec9ef3cb5a1de1e21295af631))
* **initial:** Initial Commit ([54b91dd](https://github.com/ThornWalli/web-workbench/commit/54b91dd060c00b1c56ec30069830b5cfb78f6c49))
* **reader:** add document-reader ([bb4f8ef](https://github.com/ThornWalli/web-workbench/commit/bb4f8ef1d6039dcc0861e57a80a7a1988544be16))
* **screen:** update panel ([8ca506b](https://github.com/ThornWalli/web-workbench/commit/8ca506b3253a441fad255d42c947adc5120bc0c0))
* **screen:** update screen ([7e2736b](https://github.com/ThornWalli/web-workbench/commit/7e2736b76caaa729c36a2463b900fd93cdf82397))
* **screen-svg:** update screen svg ([b885ce6](https://github.com/ThornWalli/web-workbench/commit/b885ce664ebba108975e391d0051ddbb4fc7de4e))
* **screen-svg:** update screen svg ([5a21ea9](https://github.com/ThornWalli/web-workbench/commit/5a21ea9b84ffb640a810c039840b3ca814a6b035))
* **screen-svg:** update screen svg ([21e160d](https://github.com/ThornWalli/web-workbench/commit/21e160d1dbaf3babd53a758112a8885f8857513d))
* **screen-svg:** update screen svg ([9c76d89](https://github.com/ThornWalli/web-workbench/commit/9c76d89e7882a03e8917c624c2761ee39bbea0f8))
* **update:** a lot of code ([fee4c49](https://github.com/ThornWalli/web-workbench/commit/fee4c49fa20919c6c7208caa00639d1a0659ba43))
* **update:** a lot of code ([91c14e0](https://github.com/ThornWalli/web-workbench/commit/91c14e04ef6e60e512e7d9bd0fbbbf795fca4b52))
* **update:** add pages; update svgs ([ec0f2b9](https://github.com/ThornWalli/web-workbench/commit/ec0f2b96dd55d59608f6573d703f857e7fb69d83))
* **update:** update screen ([4a1cf6f](https://github.com/ThornWalli/web-workbench/commit/4a1cf6fb3e5bbb875b9824ac51f0eea5a2c2996e))
* **update:** update screen ([2b5e9a2](https://github.com/ThornWalli/web-workbench/commit/2b5e9a2361da4cf92145bd387ff937a611311e30))
* **update:** update screen animation ([fcc41e8](https://github.com/ThornWalli/web-workbench/commit/fcc41e8b6204a630004ac2901120f00789f0e155))
* **update:** update screen animation ([4ed2806](https://github.com/ThornWalli/web-workbench/commit/4ed2806c9e3b7732701c24f21fe7527ab546096f))
* **update:** update screen animation ([5fd8dac](https://github.com/ThornWalli/web-workbench/commit/5fd8dac895afcd05bfbe4f272697fa718fc16ff1))
* **update:** update screen animations ([a202708](https://github.com/ThornWalli/web-workbench/commit/a2027080556e6a9adce29195e77c3db606de5eec))
* **update:** update screen-panel style ([1988a82](https://github.com/ThornWalli/web-workbench/commit/1988a8224b037ecaf15b3afdd94adc622070e179))
* **update:** update screen-panel style ([8ada21a](https://github.com/ThornWalli/web-workbench/commit/8ada21a4281c0791d1d8c89fda58b594ccbd2d79))
* **update:** update screen-panel style ([6db13ba](https://github.com/ThornWalli/web-workbench/commit/6db13ba8bbab177156bb7a374cecd579f1940f74))
* **update:** update screen-panel style ([25db457](https://github.com/ThornWalli/web-workbench/commit/25db4578e794677227b261839f3d66cd9e2a24a2))
* **update:** update screen; add no-disk ([585f6df](https://github.com/ThornWalli/web-workbench/commit/585f6dfc0a135c9382652c0c83c2ac34ce1c68dd))
* **update:** update symbols, styles, color-settings ([42d85d8](https://github.com/ThornWalli/web-workbench/commit/42d85d8e6fb1000288457a24cdee8016c6e65975))
* **update:** update/add symbols; add theme-color ([589ec6c](https://github.com/ThornWalli/web-workbench/commit/589ec6cc644be298cf45f3302d40c974a298d221))
`;var Kr,qr;class Fd{constructor(e){p(this,Kr,void 0);p(this,qr,[]);b(this,Kr,e)}command(e,n){c(this,qr).push({value:e,targetValue:n})}run(){return Promise.all(c(this,qr).map(({value:e,targetValue:n})=>c(this,Kr).executeCommand(e).then(r=>{const i=r===n;return i||console.warn(`[ ${e} ]; ${r} === ${n}`),{value:e,targetValue:n,result:r,success:i}})))}async start(){const e=await this.run();return[[e.length,"Tests processed"],[e.filter(n=>n.success).length,"Tests success"],[e.filter(n=>!n.success).length,"Tests failed"]]}}Kr=new WeakMap,qr=new WeakMap;function ht(t,e={}){const n=Cl(t),{id:r,parentFocused:i,core:s,window:a}=n,o=Tt(),l=Tt(),u=ho(()=>a.value.options.embedded),d=(w,_={})=>{l.value=new an(w,{core:s.value,..._})},m=Tt(!1),h=(w=!0)=>{m.value=w},f=w=>{l.value&&(w?o.value=s.value.modules.windows.setActiveContextMenu(l.value):!m.value&&s.value.modules.windows.getActiveContextMenu()===o.value&&!u.value&&s.value.modules.windows.setActiveContextMenu(null))};return Nl(i,w=>f(w)),Ll(()=>{Pl(()=>{e.emit("ready"),f(!0)})}),Ml(()=>{l.value&&s.value.modules.windows.isContextMenu(o.value)&&s.value.modules.windows.setActiveContextMenu(null)}),{id:r,parentFocused:i,core:s,window:a,setContextMenu:d,preserveContextMenu:h,contextMenu:l,currentContextMenu:o}}const mt={id:{type:String,default:""},parentFocused:{type:Boolean,default:!1},core:{type:Object,required:!0},window:{type:Object,required:!0}},ft=["ready"];function $d(t,e,n){return"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)}function Ha(t){return t=t.replace(/ /g,""),t.length===7?["0x"+t[1]+t[2]|0,"0x"+t[3]+t[4]|0,"0x"+t[5]+t[6]|0]:["0x"+t[1]+t[1]|0,"0x"+t[2]+t[2]|0,"0x"+t[3]+t[3]|0]}const zd={__name:"Form",emits:["submit"],setup(t,{emit:e}){const n=r=>{r.preventDefault(),e("submit",r)};return(r,i)=>(y(),W("form",{class:"wb-env-molecule-form",onSubmit:n},[Un(r.$slots,"default",{},()=>[mo("Form Content")],!0)],32))}},Qn=j(zd,[["__scopeId","data-v-560fd99a"]]);const Bd={props:{labelTop:{type:Boolean,default:!1},tag:{type:String,default:"div"},label:{type:String,default:"FormField Label"}},computed:{styleClasses(){return{"label-top":this.labelTop}}}},Vd={key:0,class:"label"};function Ud(t,e,n,r,i,s){return y(),U(Is(n.tag),{class:ut(["wb-env-atom-form-field",s.styleClasses])},{default:X(()=>[n.label?(y(),W("span",Vd,[Un(t.$slots,"label",{},()=>[mo(Te(n.label),1)],!0)])):B("",!0),Un(t.$slots,"default",{},void 0,!0)]),_:3},8,["class"])}const Jn=j(Bd,[["render",Ud],["__scopeId","data-v-1965e8a2"]]);const jd={props:{model:{type:[Array,Object],default(){return{value:0}}},min:{type:Number,default(){return 0}},max:{type:Number,default(){return 1}},step:{type:Number,default(){return .1}},name:{type:String,default:"value"},handleSize:{type:Number,default(){return .2}},styleType:{type:String,default:"window"},directionVertical:{type:Boolean,default:!1}},data(){return{positions:{start:k(),move:k(),current:k()}}},computed:{style(){const t={"--value":this.model[this.name]/this.max,"--direction":this.directionVertical?1:0};return t["--size"]=this.handleSize*100+"%",t},styleClasses(){return{"direction-x":!this.directionVertical,"direction-y":this.directionVertical,[`type-${this.styleType}`]:this.styleType}}}},Gd=t=>(Js("data-v-e4419394"),t=t(),ea(),t),Hd=["orient","min","max","step"],Yd=Gd(()=>S("i",null,null,-1));function Xd(t,e,n,r,i,s){return y(),W("div",{class:ut(["wb-env-atom-range-slider",s.styleClasses]),style:jn(s.style)},[ln(S("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.model[n.name]=a),orient:n.directionVertical?"vertical":"horizontal",type:"range",min:n.min,max:n.max,step:n.step},null,8,Hd),[[fo,n.model[n.name]]]),Yd],6)}const Kd=j(jd,[["render",Xd],["__scopeId","data-v-e4419394"]]),qd={components:{WbEnvAtomFormField:Jn,WbEnvAtomRangeSlider:Kd},props:{model:{type:[Array,Object],default(){return{}}},id:{type:String,default:null},name:{type:String,default:null},readonly:{type:Boolean,default:!1},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:null},handleSize:{type:Number,default:null},disabled:{type:Boolean,default:!1},directionVertical:{type:Boolean,default:!1}},computed:{currentModel:{get(){return this.name?this.model[this.name]:this.model.value},set(t){this.name?this.model[this.name]=t:this.model.value=t}},rangeSlider(){return{name:this.name,min:this.min,max:this.max,step:this.step,handleSize:this.handleSize,readonly:this.readonly,disabled:this.disabled,directionVertical:this.directionVertical}}}};function Zd(t,e,n,r,i,s){const a=R("wb-env-atom-range-slider"),o=R("wb-env-atom-form-field");return y(),U(o,V({tag:"div",class:"wb-env-atom-form-range-slider"},t.$attrs),{default:X(()=>[Un(t.$slots,"before"),C(a,V(s.rangeSlider,{model:n.model,"style-type":"form-field"}),null,16,["model"]),Un(t.$slots,"after")]),_:3},16)}const Qd=j(qd,[["render",Zd]]),Jd={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"6"},eh=S("g",{class:"primary"},[S("path",{d:"M0 0h2v2H0zM2 2h2v2H2zM8 0h2v2H8zM4 4h2v2H4zM6 2h2v2H6z"})],-1),th=[eh];function nh(t,e){return y(),W("svg",Jd,th)}const rh={render:nh};const ih={components:{SvgControlTinyArrayDown:rh,WbEnvAtomFormField:Jn},props:{model:{type:Object,default(){return{value:"option-1"}}},label:{type:String,default:"Select Label"},id:{type:String,default:null},name:{type:String,default:null},size:{type:Number,default:null},multiple:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},options:{type:Array,default(){return[{title:"Option 1.",value:"option-1"},{title:"Option 2.",value:"option-2"},{title:"Option 3.",value:"option-3"},{title:"Option 4.",value:"option-4"},{title:"Option 5.",value:"option-5"}]}}},computed:{currentModel:{get(){return this.name?this.model[this.name]:this.model.value},set(t){this.name?this.model[this.name]=t:this.model.value=t}},input(){return{id:this.id,size:this.size>1?this.size:null,multiple:this.multiple,readonly:this.readonly,disabled:this.disabled}}}},sh={class:"wrapper"},ah=["value"],oh={key:0,class:"select-expander"};function lh(t,e,n,r,i,s){const a=R("svg-control-tiny-array-down"),o=R("wb-env-atom-form-field");return y(),U(o,{tag:"label",class:"wb-env-atom-form-field-dropdown",label:n.label},{default:X(()=>[S("div",sh,[ln(S("select",V({"onUpdate:modelValue":e[0]||(e[0]=l=>s.currentModel=l)},s.input),[(y(!0),W(At,null,Ot(n.options,(l,u)=>(y(),W("option",{key:u,value:l.value},Te(l.title),9,ah))),128))],16),[[Fl,s.currentModel]]),!n.disabled&&!n.readonly?(y(),W("span",oh,[C(a)])):B("",!0)])]),_:1},8,["label"])}const ga=j(ih,[["render",lh],["__scopeId","data-v-801eaf8b"]]);const ch={props:{disabled:{type:Boolean,default:!1},accept:{type:String,default:"application/json"},type:{type:String,default(){return"button"}},styleType:{type:String,default(){return"primary"}},id:{type:String,required:!1,default:null},name:{type:String,required:!1,default:null},label:{type:String,required:!1,default:"Primary Button"}},emits:["upload","click"],computed:{upload(){return this.type==="upload"},styleClasses(){return{disabled:this.disabled,upload:this.upload,["type-"+this.styleType]:this.styleType}}},methods:{onInput(t){this.$emit("upload",t.target.files)},onClick(){this.$emit("click")}}},uh={class:"label"},dh=["id","name","accept","disabled"],hh=["type","disabled"],mh={class:"label"};function fh(t,e,n,r,i,s){return s.upload?(y(),W("label",{key:0,class:ut(["wb-env-atom-button",s.styleClasses])},[S("span",uh,Te(n.label),1),S("input",{id:n.id,name:n.name,type:"file",accept:n.accept,disabled:n.disabled,onInput:e[0]||(e[0]=(...a)=>s.onInput&&s.onInput(...a))},null,40,dh)],2)):(y(),W("button",{key:1,type:n.type,class:ut(["wb-env-atom-button",s.styleClasses]),disabled:n.disabled,onClick:e[1]||(e[1]=(...a)=>s.onClick&&s.onClick(...a))},[S("span",mh,Te(n.label),1)],10,hh))}const Ct=j(ch,[["render",fh],["__scopeId","data-v-93551418"]]);const ph={props:{full:{type:Boolean,required:!1,default:!1},align:{type:String,required:!1,validate:t=>["center","left","right","outer"].includes(t),default:"left"},direction:{type:String,required:!1,validate:t=>["horizontal","vertical"].includes(t),default:"horizontal"}},computed:{styleClasses(){return{[`direction-${this.direction}`]:!0,[`align-${this.align}`]:!0,full:this.full}}}};function bh(t,e,n,r,i,s){return y(),W("div",{class:ut(["wb-env-molecule-button-wrapper",s.styleClasses])},[S("div",null,[Un(t.$slots,"default",{},void 0,!0)])],2)}const Nt=j(ph,[["render",bh],["__scopeId","data-v-51d133b7"]]);const gh={components:{WbForm:Qn,WbFormField:Jn,WbFormFieldRangeSlider:Qd,WbFormFieldDropdown:ga,WbButton:Ct,WbButtonWrapper:Nt},props:{...mt},emits:[...ft,"close"],setup(t,e){return ht(t,e)},data(){const t=this.core.config.get(M.THEME)||ur[String(Xo)];return{screenModule:this.core.modules.screen,selectedColor:t.colors[1],colors:Ha(t.colors[1]),saveLabel:"Save",resetLabel:"Reset",model:t,preset:"",fields:{presets:{name:"preset",model:this,label:"Presets",options:[{title:"Select Theme",value:""},...Object.keys(ur).map(e=>({title:ur[String(e)].title,value:e}))]},colorPrimary:{name:"0",type:"color",label:"Primary"},colorSecondary:{name:"1",type:"color",label:"Secondary"},colorTertiary:{name:"2",type:"color",label:"Tertiary"},colorQuaternary:{name:"3",type:"color",label:"Quaternary"},filter:{name:"filter",label:"Filter",options:[{title:"Invert",value:"invert(100%)"},{title:"Brightness",value:"brightness(50%)"}]}}}},watch:{preset(t){const e=ur[String(t)];this.model={name:e.name,colors:e.colors,filter:e.filter},this.selectedColor=this.model.colors[0]},selectedColor(t){this.colors=Ha(t)},colors:{deep:!0,handler(t){this.selectedColor=this.model.colors[this.model.colors.indexOf(this.selectedColor)]=$d(...Object.values(t).map(e=>Number(e)))}}},methods:{onSubmit(t){const e=this.model;this.core.config.set(M.THEME,e),this.core.modules.screen.setTheme(new Ru("custom",e)),this.$emit("close")}}},wh={class:"wb-module-core-color-settings"},_h={class:"col-1"},yh=["value"],vh={class:"col-1 colors"},xh={class:"color-controls"},Eh={class:"color-preview"};function Sh(t,e,n,r,i,s){const a=R("wb-form-field-dropdown"),o=R("wb-form-field"),l=R("wb-form-field-range-slider"),u=R("wb-button"),d=R("wb-button-wrapper"),m=R("wb-form");return y(),W("div",wh,[C(m,{class:"form",onSubmit:s.onSubmit},{default:X(()=>[S("div",null,[S("div",_h,[C(a,pr(po(i.fields.presets)),null,16),C(o,{label:"Colors",class:"color-select"},{default:X(()=>[(y(!0),W(At,null,Ot(i.model.colors,(h,f)=>(y(),W("label",{key:f,style:jn({"--color":h})},[ln(S("input",{"onUpdate:modelValue":e[0]||(e[0]=w=>i.selectedColor=w),type:"radio",name:"color",value:h},null,8,yh),[[$l,i.selectedColor]])],4))),128))]),_:1}),C(a,V(i.fields.filter,{model:i.model}),null,16,["model"])]),S("div",vh,[S("div",xh,[S("div",Eh,[S("i",{style:jn(`background-color: rgb(${i.colors.join(", ")});`)},null,4)]),S("div",null,[S("div",null,[C(l,{"style-type":"color-select",label:"Red",class:"color-slider",model:i.colors,name:"0",max:255,min:0,step:1,"handle-size":.2},{after:X(()=>[S("span",null,Te(i.colors[0].toString(16).toUpperCase()),1)]),_:1},8,["model"])]),S("div",null,[C(l,{"style-type":"color-select",label:"Green",class:"color-slider",model:i.colors,name:"1",max:255,min:0,step:1,"handle-size":.2},{after:X(()=>[S("span",null,Te(i.colors[1].toString(16).toUpperCase()),1)]),_:1},8,["model"])]),S("div",null,[C(l,{"style-type":"color-select",label:"Blue",class:"color-slider",model:i.colors,name:"2",max:255,min:0,step:1,"handle-size":.2},{after:X(()=>[S("span",null,Te(i.colors[2].toString(16).toUpperCase()),1)]),_:1},8,["model"])])])])])]),C(d,{align:"outer",full:""},{default:X(()=>[i.saveLabel?(y(),U(u,{key:0,"style-type":"primary",label:i.saveLabel,type:"submit"},null,8,["label"])):B("",!0)]),_:1})]),_:1},8,["onSubmit"])])}const Ih=j(gh,[["render",Sh],["__scopeId","data-v-f8e195b5"]]),kh={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Th=S("path",{d:"M0 0v16h16V0H0zm14 14H2V2h12v12z",class:"svg-primary"},null,-1),Ah=S("path",{d:"M4 6v4h2v2h2v-2h2V8h2V4h-2v2H8v2H6V6z",class:"svg-secondary"},null,-1),Oh=[Th,Ah];function Rh(t,e){return y(),W("svg",kh,Oh)}const Dh={render:Rh},Wh={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Ch=S("path",{d:"M0 0v16h16V0H0zm14 14H2V2h12v12z",class:"svg-primary"},null,-1),Nh=S("path",{d:"M4 4h8v8H4z",class:"svg-secondary"},null,-1),Lh=[Ch,Nh];function Ph(t,e){return y(),W("svg",Wh,Lh)}const Mh={render:Ph};const Fh={components:{SvgControlInputCheckbox:Dh,SvgControlInputRadio:Mh},props:{label:{type:String,default:"Item Label"},model:{type:Object,default(){return{value:null}}},name:{type:String,default:null},value:{type:[String,Number],default:null},radio:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{currentModel:{get(){return this.name?this.model[this.name]:this.model.value},set(t){this.name?this.model[this.name]=t:this.model.value=t}},styleClasses(){return{radio:this.radio,checkbox:!this.radio}},input(){return{name:this.name,readonly:this.readonly,disabled:this.disabled,type:this.radio?"radio":"checkbox"}}}},$h=["value"],zh={key:2,class:"label"};function Bh(t,e,n,r,i,s){const a=R("svg-control-input-checkbox"),o=R("svg-control-input-radio");return y(),W("label",{class:ut(["wb-env-atom-form-field-checkbox-group-item",s.styleClasses])},[ln(S("input",V({"onUpdate:modelValue":e[0]||(e[0]=l=>s.currentModel=l)},s.input,{value:n.value}),null,16,$h),[[ta,s.currentModel]]),n.radio?B("",!0):(y(),U(a,{key:0})),n.radio?(y(),U(o,{key:1})):B("",!0),n.label?(y(),W("span",zh,Te(n.label),1)):B("",!0)],2)}const Vh=j(Fh,[["render",Bh],["__scopeId","data-v-2c48743d"]]);const Uh={components:{WbEnvAtomFormField:Jn,WbEnvAtomFormFieldCheckboxGroupItem:Vh},props:{label:{type:String,default:"Checkbox Group Title"},name:{type:String,default:"value"},radio:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},read:{type:Boolean,default:!1},model:{type:Object,default(){return{item1:!1,item2:!1}}},items:{type:Array,default(){return[{label:"Item 1",name:"item1"},{label:"Item 2",name:"item2"}]}}}};function jh(t,e,n,r,i,s){const a=R("wb-env-atom-form-field-checkbox-group-item"),o=R("wb-env-atom-form-field");return y(),U(o,{class:"wb-env-atom-form-field-checkbox-group",label:n.label,"label-top":""},{default:X(()=>[S("ul",null,[(y(!0),W(At,null,Ot(n.items,(l,u)=>(y(),W("li",{key:u},[C(a,V({radio:n.radio,name:l.name||n.name,model:n.model,readonly:l.readonly||n.readonly,disabled:l.disabled||n.disabled},l),null,16,["radio","name","model","readonly","disabled"])]))),128))])]),_:1},8,["label"])}const ul=j(Uh,[["render",jh],["__scopeId","data-v-9e05e970"]]),Gh={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Hh=S("path",{d:"M2 14v2h14V2h-2v12",class:"svg-primary"},null,-1),Yh=S("path",{d:"M6 10v2h6V6h-2v4",class:"svg-primary"},null,-1),Xh=[Hh,Yh];function Kh(t,e){return y(),W("svg",Gh,Xh)}const qh={render:Kh};const Zh={components:{SvgControlTextareaResize:qh,WbEnvAtomFormField:Jn},props:{labelTop:{type:Boolean,default:!1},model:{type:Object,default(){return{}}},label:{type:String,default:"Textarea Label"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:"Textarea Placeholder…"},rows:{type:Number,default:null},wrap:{type:Boolean,default:!0},resize:{type:String,validate:t=>["both","horizontal","vertical",null].includes(t),default:"both"},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!1}},computed:{currentModel:{get(){return this.name?this.model[this.name]:this.model.value},set(t){this.name?this.model[this.name]=t:this.model.value=t}},styleClasses(){return{resize:this.resize,[`resize-${this.resize}`]:this.resize}},input(){return{id:this.id,name:this.name,placeholder:this.placeholder,rows:this.rows,wrap:this.wrap?"on":"off",resize:this.resize,readonly:this.readonly,disabled:this.disabled,autocomplete:this.autocomplete?"on":"off"}}}},Qh={class:"wrapper"},Jh={class:"helper resize"};function em(t,e,n,r,i,s){const a=R("svg-control-textarea-resize"),o=R("wb-env-atom-form-field");return y(),U(o,{tag:"label",class:ut(["wb-env-atom-form-field-textarea",s.styleClasses]),label:n.label,"label-top":n.labelTop},{default:X(()=>[S("span",Qh,[S("span",null,[ln(S("textarea",V({"onUpdate:modelValue":e[0]||(e[0]=l=>s.currentModel=l)},s.input),null,16),[[fo,s.currentModel]]),S("span",Jh,[C(a)])])])]),_:1},8,["label","class","label-top"])}const tm=j(Zh,[["render",em],["__scopeId","data-v-6b6f2a1f"]]);const nm={components:{WbForm:Qn,WbButton:Ct,WbButtonWrapper:Nt,WbFormFieldCheckboxGroup:ul,WbFormFieldTextarea:tm},props:{...mt},emits:[...ft,"close"],setup(t,e){return ht(t,e)},data(){return{saveLabel:"Save",model:{[M.SCREEN_1084_FRAME]:this.core.config.get(M.SCREEN_1084_FRAME)||!1,[M.SCREEN_REAL_LOOK]:this.core.config.get(M.SCREEN_REAL_LOOK)||!1,[M.SCREEN_SCAN_LINES]:this.core.config.get(M.SCREEN_SCAN_LINES)||!1,[M.SCREEN_ACTIVE_ANIMATION]:this.core.config.get(M.SCREEN_ACTIVE_ANIMATION)||!1,[M.BOOT_WITH_SEQUENCE]:this.core.config.get(M.BOOT_WITH_SEQUENCE)||!1,[M.BOOT_WITH_WEBDOS]:this.core.config.get(M.BOOT_WITH_WEBDOS)||!1,[M.FILE_EXTENSION_ASSIGNMENT]:(this.core.config.get(M.FILE_EXTENSION_ASSIGNMENT)||[]).map(e=>e.join(" ")).join(`
`)}}},computed:{fileTypeAssignment(){return{model:this.model,name:M.FILE_EXTENSION_ASSIGNMENT,label:"File Extension assignment to Application",placeholder:"e.g. md openPreview…"}},generalSettings(){return{model:this.model,label:null,items:[]}},screenSettings(){return{model:this.model,label:"Screen - Settings",items:[{label:"Use 1084 Frame with 640x480",name:M.SCREEN_1084_FRAME},{label:"Screen with Real-Look",name:M.SCREEN_REAL_LOOK},{label:"Screen with Scan-Lines",name:M.SCREEN_SCAN_LINES},{label:"Screen with On/Off Animation",name:M.SCREEN_ACTIVE_ANIMATION}]}},bootSettings(){return{model:this.model,label:"BOOT - Settings",items:[{label:"Boot with Sequence?",name:M.BOOT_WITH_SEQUENCE},{label:"Boot with WebDos?",name:M.BOOT_WITH_WEBDOS}]}}},methods:{onSubmit(){this.model[String(M.FILE_EXTENSION_ASSIGNMENT)]=this.model[String(M.FILE_EXTENSION_ASSIGNMENT)].split(`
`).map(t=>t.match(/^([^ ]+) +(.*)$/).slice(1,3)),this.core.config.set(this.model),this.$emit("close")}}},rm={class:"wb-module-core-settings"},im={class:"cols"},sm={class:"col-2"},am={class:"col-2"};function om(t,e,n,r,i,s){const a=R("wb-form-field-checkbox-group"),o=R("wb-form-field-textarea"),l=R("wb-button"),u=R("wb-button-wrapper"),d=R("wb-form");return y(),W("div",rm,[C(d,{onSubmit:s.onSubmit},{default:X(()=>[S("div",im,[S("div",sm,[s.generalSettings.items.length>0?(y(),U(a,pr(V({key:0},s.generalSettings)),null,16)):B("",!0),s.screenSettings.items.length>0?(y(),U(a,pr(V({key:1},s.screenSettings)),null,16)):B("",!0),s.bootSettings.items.length>0?(y(),U(a,pr(V({key:2},s.bootSettings)),null,16)):B("",!0)]),S("div",am,[C(o,V(s.fileTypeAssignment,{"label-top":"",rows:10,resize:null}),null,16)])]),C(u,{align:"outer",full:""},{default:X(()=>[i.saveLabel?(y(),U(l,{key:0,"style-type":"primary",label:i.saveLabel,type:"submit"},null,8,["label"])):B("",!0)]),_:1})]),_:1},8,["onSubmit"])])}const lm=j(nm,[["render",om],["__scopeId","data-v-07c7d1b9"]]),cm=({core:t})=>[{name:["execute"],description:"Execute file.",args:[new v({index:0,name:"path",description:"Path to the file"})],async action({path:e}){const n=new Map(t.config.get(M.FILE_EXTENSION_ASSIGNMENT));if(!e)throw N.get("bad_args");let r;if(n.has(Ir(e))?r=await t.modules.files.fs.get(n.get(Ir(e))):(r=await t.modules.files.fs.get(e),e=null),typeof r.action=="function")return r.action(t,e);if("type"in r.data){const i=[`openPreview "${r.getPath()}"`];return r.data.openMaximized&&i.push("-maximized"),t.executeCommand(i.join(" "))}}},{name:["openColorSettings"],action(){t.modules.windows.addWindow({title:"Color Settings",component:Ih,componentData:{},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}})}},{name:["openSettings"],action(){t.modules.windows.addWindow({title:"Settings",component:lm,componentData:{},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}})}},{name:["echo","print"],args:[new v({name:["newline","n"],flag:!0})],async action({newline:e},n){const r=i=>Q(i).replace(/\\"/g,'"').replace(/\\n/g,`
`);if(e)n.message(n.commandArgs.map(i=>r(i)));else{let i=await n.core.executeCommand(n.commandValue);typeof i=="object"&&(i=JSON.stringify(i)),n.message(`${Q(r(i))}`)}}},{name:"commands",action(e,n){const r=new en({headerPadding:1});return r.addColumn([{value:"Command(s)",align:"left",maxWidth:20},{value:"Description/Arguments",align:"left",maxWidth:60}]),r.addRow(Pt.items.reduce((i,s)=>{const a=s.args||[],o=[];s.description&&(o.push(s.description),o.push("")),a.length&&(o.push("Arguments:"),o.push(""));const{flagNames:l,kwargNames:u}=a.reduce((m,h)=>{const f=h.name.join(", ");return h.flag?m.flagNames.push({name:`-${f}`,description:h.description}):m.kwargNames.push({name:`--${f}`,description:h.description}),m},{flagNames:[],kwargNames:[]}),d={paddingChr:"Â",showHeaders:!1,config:{name:{minWidth:15},description:{minWidth:10,maxWidth:30}}};return o.push(Fs(l,Object.assign({},d))),l.length>0&&u.length>0&&o.push(""),o.push(Fs(u,Object.assign({},d))),i.push([s.name.join(", "),o.join(`
`)]),i},[])),n.message(["Commands:",r]),Promise.resolve()}},{name:["CLS","CLEAR"],action(){t.consoleInterface.clear()}},{name:["prompt","input","PROMPT","INPUT"],args:[new v({index:0,name:"text",description:"Text from prompt."}),new v({index:1,name:"variable",description:"Variable"})],action:({text:e,variable:n,unresolved:r},i)=>(r.text&&!r.variable?(n=r.text,e=null):n=r.variable,t.consoleInterface.prompt(e).then(s=>(dr(s)&&(s=Number(s)),n&&t.modules.parser.memory.set(n,s),s)))},{name:["confirm","CONFIRM"],args:[new v({index:0,name:"text",description:"Text from confirm."})],action({text:e}){return t.consoleInterface.confirm(e)}},{name:["selfCheck"],async action(e,n){const r=new en;r.addColumn([{value:"Count",align:"left",minWidth:8},{value:"Description",align:"left",minWidth:15}]),r.addRow(await um(t)),n.message(["Command Tests:",r])}}];function um(t){const e=new Fd(t);return e.command('"foo" +"bar"','"foobar"'),e.command("(-3+-6)+1",-3+-6+1),e.command("(-3-+6)+1",-3-6+1),e.command("(-3*-6)+1",-3*-6+1),e.command("(-3/-6)+1",-3/-6+1),e.command("(-3+6)+1",-3+6+1),e.command("(-3-6)+1",-3-6+1),e.command("(-3*6) + 1",-3*6+1),e.command("(-3/6)+1",-3/6+1),e.command("INT(PI)",3),e.command("(POW(2,2)+1)",5),e.command('ASC("D")',68),e.command("CHR$(68)",'"D"'),e.command('LEN("ABC")',3),e.command('"a" + "b"','"ab"'),e.command("STRING$(3,0)",'"000"'),e.command("SQRT(2,2)",Math.sqrt(2,2)),e.command("128 >> (256 + 5)",128>>256+5),e.command("-2+4+SQRT(2,2)",-2+4+Math.sqrt(2,2)),e.command("-2- 2 * 2",-2-2*2),e.command("(1+1)",1+1),e.command("2*2",2*2),e.command("1+2+3+(POW(2,2)+1)+5*8-(50/2)",1+2+3+(2**2+1)+5*8-50/2),e.start()}const dm=`# Impressum

## Angaben gemäß § 5 TMG

Thorn-Welf Walli  
Karolinenstraße 29 Haus 3  
20357 Hamburg

## Kontakt

E-Mail: [lammpee@gmail.com](mailto:lammpee@gmail.com)

## Haftung für Inhalte

Als Diensteanbieter sind wir gemäß § 7 Abs.1 TMG für eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach §§ 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder nach Umständen zu forschen, die auf eine rechtswidrige Tätigkeit hinweisen.

Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt. Eine diesbezügliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung möglich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.

## Haftung für Links

Unser Angebot enthält Links zu externen Webseiten Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb können wir für diese fremden Inhalte auch keine Gewähr übernehmen. Für die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf mögliche Rechtsverstöße überprüft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nichterkennbar.

Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.

## Urheberrecht

Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten unterliegen dem deutschen Urheberrecht. Die Vervielfältigung, Bearbeitung, Verbreitung und jede Art der Verwertung außerhalb der Grenzen des Urheberrechtes bedürfen der schriftlichen Zustimmung des jeweiligen Autors bzw. Erstellers. Downloads und Kopien dieser Seite sind nur für den privaten, nicht kommerziellen Gebrauch gestattet.

Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden, werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte Dritter als solche gekennzeichnet. Sollten Sie trotzdem auf eine Urheberrechtsverletzung aufmerksam werden, bitten wir um einen entsprechenden Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Inhalte umgehend entfernen.

Quelle: [eRecht24](https://www.e-recht24.de)
`,hm=`# Datenschutzerklärung

## Datenschutz

Die Betreiber dieser Seiten nehmen den Schutz Ihrer persönlichen Daten sehr ernst. Wir behandeln Ihre personenbezogenen Daten vertraulich und entsprechend der gesetzlichen Datenschutzvorschriften sowie dieser Datenschutzerklärung.

Die Nutzung unserer Webseite ist in der Regel ohne Angabe personenbezogener Daten möglich. Soweit auf unseren Seiten personenbezogene Daten (beispielsweise Name, Anschrift oder E-Mail-Adressen) erhoben werden, erfolgt dies, soweit möglich, stets auf freiwilliger Basis. Diese Daten werden ohne Ihre ausdrückliche Zustimmung nicht an Dritte weitergegeben.

Wir weisen darauf hin, dass die Datenübertragung im Internet (z.B. bei der Kommunikation per E-Mail) Sicherheitslücken aufweisen kann. Ein lückenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht möglich.

## Cookies

Die Internetseiten verwenden teilweise so genannte Cookies. Cookies richten auf Ihrem Rechner keinen Schaden an und enthalten keine Viren. Cookies dienen dazu, unser Angebot nutzerfreundlicher, effektiver und sicherer zu machen. Cookies sind kleine Textdateien, die auf Ihrem Rechner abgelegt werden und die Ihr Browser speichert.

Die meisten der von uns verwendeten Cookies sind so genannte „Session-Cookies“. Sie werden nach Ende Ihres Besuchs automatisch gelöscht. Andere Cookies bleiben auf Ihrem Endgerät gespeichert, bis Sie diese löschen. Diese Cookies ermöglichen es uns, Ihren Browser beim nächsten Besuch wiederzuerkennen.

Sie können Ihren Browser so einstellen, dass Sie über das Setzen von Cookies informiert werden und Cookies nur im Einzelfall erlauben, die Annahme von Cookies für bestimmte Fälle oder generell ausschließen sowie das automatische Löschen der Cookies beim Schließen des Browser aktivieren. Bei der Deaktivierung von Cookies kann die Funktionalität dieser Website eingeschränkt sein.

## Kontaktformular

Wenn Sie uns per Kontaktformular Anfragen zukommen lassen, werden Ihre Angaben aus dem Anfrageformular inklusive der von Ihnen dort angegebenen Kontaktdaten zwecks Bearbeitung der Anfrage und für den Fall von Anschlussfragen bei uns gespeichert. Diese Daten geben wir nicht ohne Ihre Einwilligung weiter.

## Google Analytics

Diese Website nutzt Funktionen des Webanalysedienstes Google Analytics. Anbieter ist die Google Inc., 1600 Amphitheatre Parkway Mountain View, CA 94043, USA.

Google Analytics verwendet so genannte "Cookies". Das sind Textdateien, die auf Ihrem Computer gespeichert werden und die eine Analyse der Benutzung der Website durch Sie ermöglichen. Die durch den Cookie erzeugten Informationen über Ihre Benutzung dieser Website werden in der Regel an einen Server von Google in den USA übertragen und dort gespeichert.

**Browser Plugin**

Sie können die Speicherung der Cookies durch eine entsprechende Einstellung Ihrer Browser-Software verhindern; wir weisen Sie jedoch darauf hin, dass Sie in diesem Fall gegebenenfalls nicht sämtliche Funktionen dieser Website vollumfänglich werden nutzen können. Sie können darüber hinaus die Erfassung der durch den Cookie erzeugten und auf Ihre Nutzung der Website bezogenen Daten (inkl. Ihrer IP-Adresse) an Google sowie die Verarbeitung dieser Daten durch Google verhindern, indem Sie das unter dem folgenden Link verfügbare Browser-Plugin herunterladen und installieren: [https://tools.google.com/dlpage/gaoptout?hl=de](https://tools.google.com/dlpage/gaoptout?hl=de)

**Widerspruch gegen Datenerfassung**

Sie können die Erfassung Ihrer Daten durch Google Analytics verhindern, indem Sie auf folgenden Link klicken. Es wird ein Opt-Out-Cookie gesetzt, der die Erfassung Ihrer Daten bei zukünftigen Besuchen dieser Website verhindert: [Google Analytics deaktivieren](javascript:gaOptout();)

Mehr Informationen zum Umgang mit Nutzerdaten bei Google Analytics finden Sie in der Datenschutzerklärung von Google: [https://support.google.com/analytics/answer/6004245?hl=de](https://support.google.com/analytics/answer/6004245?hl=de)

## SSL- Verschlüsselung

Diese Seite nutzt aus Gründen der Sicherheit und zum Schutz der Übertragung vertraulicher Inhalte, wie zum Beispiel der Anfragen, die Sie an uns als Seitenbetreiber senden, eine SSL-Verschlüsselung. Eine verschlüsselte Verbindung erkennen Sie daran, dass die Adresszeile des Browsers von "http://" auf "https://" wechselt und an dem Schloss-Symbol in Ihrer Browserzeile.

Wenn die SSL Verschlüsselung aktiviert ist, können die Daten, die Sie an uns übermitteln, nicht von Dritten mitgelesen werden.

## Widerspruch Werbe-Mails

Der Nutzung von im Rahmen der Impressumspflicht veröffentlichten Kontaktdaten zur Übersendung von nicht ausdrücklich angeforderter Werbung und Informationsmaterialien wird hiermit widersprochen. Die Betreiber der Seiten behalten sich ausdrücklich rechtliche Schritte im Falle der unverlangten Zusendung von Werbeinformationen, etwa durch Spam-E-Mails, vor.

Quelle: [https://www.e-recht24.de](https://www.e-recht24.de)`,{version:mm}=zl().public;var Ji,Zr,Qr,Jr,Yt,ei,ti,ni;const _r=class{constructor(){p(this,Ji,new Fe);p(this,Zr,new Fe);p(this,Qr,!1);p(this,Jr,new kc(0));p(this,Yt,{});p(this,ei,new Pd(this));p(this,ti,new wn({core:this,debug:!1,consoleInterface:c(this,ei)}));g(this,"executionCounter",Tt(0));p(this,ni,new Nd(Du,ue.SESSION,$a));this.log(`${_r.NAME}; ${_r.VERSION}`)}get version(){return _r.VERSION}addExecution(){return this.executionCounter.value++,()=>{this.executionCounter.value--}}get events(){return c(this,Ji)}async setup(){if(c(this,Qr))return console.warn("Setup is complete!"),this;b(this,Qr,!0),Pt.add(Ho(cm({core:this}))),await c(this,ni).ready,this.config.setDefaults($a);const e=Object.values(c(this,Yt));return await Promise.all(e.map(n=>Promise.resolve(n.beforeSetup()))),await Promise.all(e.map(n=>Promise.resolve(n.setup()))),this.createContent(),c(this,Jr).next(this),this}destroy(){Pt.clear()}createContent(){const e=this.modules.files.fs,n=[{id:"Imprint.md",name:"Imprint",content:dm,position:{x:0,y:390},fontFamily:hr.Monospace["Courier New"],fontSize:14},{id:"Disclaimer.md",name:"Disclaimer",content:hm,position:{x:80,y:390},fontFamily:hr.Monospace["Courier New"],fontSize:14},{id:"Changelog.md",name:"Changelog",content:Md,position:{x:0,y:305},fontFamily:hr.Monospace["Courier New"],fontSize:14}];Promise.all(n.map(({id:r,name:i,content:s,position:a,fontFamily:o,fontSize:l})=>e.createRootFile(r,i,{openMaximized:!0,type:"markdown",content:s,fontFamily:o||hr.SansSerif.Arial,fontSize:l||el},{meta:[[T.POSITION,a],[T.IGNORE_SYMBOL_REARRANGE,!0],[T.SYMBOL,x.LARGE_NOTE_RICH]]}))).catch(r=>{throw new Error(r)})}addModule(e,n){const r=new e(Object.assign({core:this},n));c(this,Yt)[bn(r.constructor.NAME)]=r}async removeModule(e){await e.destroy(),delete c(this,Yt)[e.constructor.NAME]}executeCommands(e){if(e.length>0){const n=e.shift();return this.executeCommand(n).then(()=>this.executeCommands(e))}}async executeCommand(e,n){typeof e=="string"&&(e=e.replace(/(.*[^\\])\n(\S*)/gm,"$1\\n$2")),n=Object.assign({show:!1,commandBucket:Pt,core:this,logger:this.logger},n);const r=[];n.message&&r.push(...r.concat(n.message));const i=n.show;n.message=a=>{i&&r.push(...[].concat(a))};let s;try{if(e){const a=await this.modules.parser.parseCommand(e);n.commandBucket.has(a.command)?s=await Ya(e,a,n.commandBucket,n):Pt.has(a.command)?s=await Ya(e,a,Pt,n):this.modules.parser.isMathValue(e)?s=await this.modules.parser.parseMath(e):/^\w+$/.test(e)&&console.warn(`can\\'t use variable or method "${e}"`)}}catch(a){let o=a;Array.isArray(a)&&(o=new Error(a[a.length-1])),c(this,Zr).next(o)}return s!==void 0&&s!=="undefined"&&typeof s=="string"&&n.show&&r.length<1&&r.push(s),r.forEach(a=>n.logger.add(a,{type:wn.TYPE.OUTPUT})),s}log(e){c(this,ti).add(e,{namespace:"Core"})}get consoleInterface(){return c(this,ei)}get errorObserver(){return c(this,Zr)}get ready(){return c(this,Jr)}get config(){return c(this,ni)}get logger(){return c(this,ti)}get modules(){return c(this,Yt)}};let mr=_r;Ji=new WeakMap,Zr=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,Yt=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni=new WeakMap,g(mr,"VERSION",mm||"0.0.0"),g(mr,"NAME","web-workbench");async function Ya(t,e,n,r){const i=n.get(e.command),s=r.show,a=await i.action(Eu(i,e),Object.assign({command:e.command,commandValue:e.commandValue,commandArgs:e.args},r));return s&&r.showCommand&&r.logger.add("> "+t,{type:wn.TYPE.OUTPUT}),a}function Ib(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","\n":`&nbsp;
`," ":"&nbsp;"};return t.replace(/[&<>"'\n ]/g,function(n){return e[String(n)]})}function $s(t,e,n,r=" "){if(t.length<e)for(let i=t.length;i<=e-1;i++)n?t=r+t:t=t+r;return t}function fr(t){return t>2e3?(t=parseInt(t/1e3),t>1e3?(t=parseInt(t/1e3),t>1e3?(t=parseInt(t/1e3),`${t}g`):`${t}m`):`${t}k`):`${t}b`}function zs(t,e){const n=new Date(e),r=[[/y/g,`${n.getFullYear()}`.slice(2)],[/Y/g,n.getFullYear()],[/dd/g,Xa(n.getDate())],[/d/g,n.getDate()],[/DD/g,Xa(n.getDate())],[/D/g,sr(n.getDate())],[/mm/g,Ka(n.getMonth(),!0)],[/m/g,n.getMonth()+1],[/MM/g,Ka(n.getMonth()+1,!1)],[/M/g,sr(n.getMonth()+1)],[/h/g,n.getHours()],[/H/g,sr(n.getHours())],[/i/g,n.getMinutes()],[/I/g,sr(n.getMinutes())],[/s/g,n.getSeconds()],[/S/g,sr(n.getSeconds())]];return r.forEach((i,s)=>{t=t.replace(i[0],`%${s}%`)}),r.forEach((i,s)=>{t=t.replace(`%${s}%`,i[1])}),t}const fm=[["Sunday","Sun"],["Monday","Mon"],["Tuesday","Tue"],["Wednesday","Wed"],["Thursday","Thu"],["Friday","Fri"],["Saturday","Sat"]];function Xa(t,e){return fm[String(t)]}const pm=[["Januar","Jan"],["February","Feb"],["March","Mar"],["April","Apr"],["May"],["June"],["July"],["August","Aug"],["September","Sept"],["October","Oct"],["November","Nov"],["December","Dec"]];function Ka(t,e){return t=pm[t-1],t.length>1?e?t[1]:t[0]:t}function sr(t){return t=String(t),t.length<2?`0${t}`:t}function dl(t,e){return e<=0?"":e>String(t).length?t:String(t).substring(0,e)}function bm(t,e){if(e<=0)return"";if(e>String(t).length)return t;{const n=String(t).length;return String(t).substring(n,n-e)}}function qa(t,e=" "){return Array(parseInt(t)).fill(e).join("")}const De=class{static parse(e,n=[],r=0){let i=e;const s=_m();let a=!1,o=0;for(;e.length>=o;){const l=e[Number(o-1)],u=e[Number(o+1)],d=e[Number(o)];if(d==="("&&s.clamp!==!1&&s.clamp++,/(^[$]{6}\d+\$)/.test(e.slice(o,e.length))&&!bt(s)){const[m]=e.slice(o,e.length).match(/(^[$]{6}\d+\$)/);o+=m.length-1}else if(/(^[$]{3}\d+)/.test(e.slice(o,e.length))&&!bt(s)){const[m]=e.slice(o,e.length).match(/(^[$]{3}\d+)/);s.startRecord=o,o+=m.length,s.stopRecord=o}else d==="-"&&(u==="-"||De.REGEX_CHAR_WORD_NON_DIGIT.test(u))&&!bt(s)?(s.parameter=!0,s.startRecord=o):d==="("&&!bt(s)?(s.clamp=0,s.startRecord=o):De.REGEX_NUMERIC.test(d)&&!bt(s)?(s.numeric=!0,s.startRecord=o):De.REGEX_CHAR_WORD_NON_DIGIT.test(d)&&!bt(s)?(s.char=!0,s.startRecord=o):d==='"'&&!bt(s)?(s.doubleQuote=!0,s.startRecord=o):d==="'"&&!bt(s)?(s.singleQuote=!0,s.startRecord=o):s.startRecord!==!1&&(s.parameter?(d==="="||!De.REGEX_CHAR_WORD_NON_DIGIT.test(u))&&(d==="="?(s.parameter=!1,s.char=!1,s.startOverride=s.startRecord):u!=="="&&!De.REGEX_CHAR_WORD_NON_DIGIT.test(u)&&u!=="-"&&(s.stopRecord=o+1)):s.clamp!==!1?d===")"&&(s.clamp===0?s.stopRecord=o+1:s.clamp--):s.numeric?De.REGEX_NUMERIC.test(l)&&!De.REGEX_NUMERIC.test(d)&&(s.stopRecord=o):s.char?De.REGEX_CHAR_WORD_NON_DIGIT.test(l)&&!(De.REGEX_CHAR_WORD_NON_DIGIT.test(d)&&!/[$%]/.test(d))&&(/[ ]*\(/.test(e.slice(o,e.length))?(s.char=!1,s.clamp=0):s.stopRecord=o+1):s.doubleQuote?l!=="\\"&&d==='"'&&(s.stopRecord=o+1):s.singleQuote&&l!=="\\"&&d==="'"&&(s.stopRecord=o+1));if(!s.stopRecord&&o+1>e.length&&(s.stopRecord=o+1,a=!0),s.stopRecord&&s.startRecord===!1&&o+1!==e.length)a=!0;else if(s.stopRecord){let m=s.startRecord;s.startOverride!==void 0&&(m=s.startOverride),i=i.slice(0,m)+wm(n,i.slice(m,s.stopRecord))+i.slice(s.stopRecord,i.length),De.DEBUG&&console.log("result",i),a||(this.parse(i,n,r),a=!0)}if(a)break;o++}return n.length>0?n.filter(l=>l.length>0):[e]}};let wt=De;g(wt,"REGEX_CHAR_WORD_NON_DIGIT",/^[^\d\W$%]|[.].$/),g(wt,"REGEX_NUMERIC",/^[\d+\-*\\/.<>]$/),g(wt,"DEBUG",!1);function gm(t){return`$$$$$$${t}$`}function wm(t,e){return t.push(e),gm(t.length-1)}function bt(t){return t.singleQuote||t.doubleQuote||t.clamp!==!1||t.char||t.numeric||t.parameter}function _m(){return{dollarCount:0,startRecord:!1,stopRecord:!1,char:!1,numeric:!1,singleQuote:!1,doubleQuote:!1,clamp:!1,parameter:!1}}var ri;const pe=class{constructor(e){p(this,ri,void 0);b(this,ri,e)}async parse(e){const n=e;let r=e;const i=e.match(pe.REGEX_COMMAND_REPLACE);i&&(r=i[1],e=i[2]);const s=e;let a=[],o={},l;if(r!==e){const u=this.parseParameter(e);l=u.unresolved,a=await Promise.all(u.args),o=u.kwargs,await Promise.all(Object.keys(o).map(d=>o[String(d)].then(m=>o[String(d)]=m)))}return{origin:n,unresolved:l,args:a,kwargs:o,command:r,commandValue:s}}parseParameter(e){return wt.parse(e).reduce((r,i)=>{if(pe.REGEX_PARAM_KWARG.test(i)){const[,s,a]=i.match(pe.REGEX_PARAM_KWARG);r.kwargs[bn(String(s))]=this.parseValue(a),r.unresolved.kwargs[bn(String(s))]=za(a)}else pe.REGEX_PARAM_ARG.test(i)?(r.kwargs[bn(String(i.replace(pe.REGEX_PARAM_ARG,"$1")))]=Promise.resolve(!0),r.unresolved.kwargs[bn(String(i.replace(pe.REGEX_PARAM_ARG,"$1")))]=Promise.resolve(!0)):(r.args.push(this.parseValue(i)),r.unresolved.args.push(za(i)));return r},{unresolved:{kwargs:{},args:[]},kwargs:{},args:[]})}parseValue(e){return/.*(true|false).*/.test(e)?Promise.resolve(e.replace(/.*(true|false).*/,"$1")==="true"):/^".*"$/.test(e)?Promise.resolve(Q(e)):/^\d+$/.test(e)?Promise.resolve(Number(e)):typeof e=="string"&&/ *([a-zA-Z_-]+) */.test(e)?c(this,ri).parse(e.replace(/ *([a-zA-Z_-]+) */,"$1")):Promise.resolve(e)}static extractStrings(e,n=" "){let r=!1,i;const s=[];let a=!1;for(let l=e.length-1;l>=0;l--){const u=e[Number(l)],d=e[l-1];!a&&u==='"'&&d!=="\\"?r?(r=!1,s.push(e.slice(l,i+1))):(a=!1,r=!0,i=l):(!r&&a||a)&&u==="'"&&d!=="\\"&&(r?(a=!1,r=!1,s.push(e.slice(l,i+1))):(a=!0,r=!0,i=l))}if(r)throw new Error("can't extract values; "+e);return{result:s.reduce((l,u,d)=>l.replace(u,pe.resolveKey(d)),e),values:s}}static extractValues(e,n=" "){let r=!1,i;const s=[];let a=!1;for(let l=e.length-1;l>=0;l--){const u=e[Number(l)],d=e[l-1];!a&&u==='"'&&d!=="\\"?r?(r=!1,s.push(e.slice(l,i+1))):(a=!1,r=!0,i=l):(!r&&a||a)&&u==="'"&&d!=="\\"&&(r?(a=!1,r=!1,s.push(e.slice(l,i+1))):(a=!0,r=!0,i=l))}if(r)throw new Error("can't extract values; "+e);return s.forEach((l,u)=>{e=e.replace(l,pe.resolveKey(u))}),{params:e.split(n).filter(l=>l),values:s}}static resolveKey(e){return`$$$$$$${e}`}static resolveValues({params:e,values:n}){return e.map(r=>pe.resolveValue(r,n))}static valueUnresolved(e){return pe.REGEX_VALUE_RESOLVE.test(e)}static resolveValue(e,n){if(pe.valueUnresolved(e)){if(e=e.match(/[$]{3}(\d+)/g).reduce((r,i)=>r.replace(i,n[Number(i.replace(pe.REGEX_VALUE_RESOLVE,"$1"))]),e),/[\w]+[$%]?[ ]*\(/.test(e))return e;if(typeof e=="string"){if(e==="undefined")return;if(vm(e))return e;if(ym(e))return Number(e);if(!e.startsWith('"'))return ju(e)}}return e}};let Z=pe;ri=new WeakMap,g(Z,"REGEX_VALUE_RESOLVE",/[$]{3}(\d+)/),g(Z,"REGEX_COMMAND_REPLACE",/^([a-zA-Z]+[a-zA-Z0-9_]+) (.*)$/),g(Z,"REGEX_PARAM_KWARG",/^[-]{0,2}([\\-\w]+)=(.*)$/),g(Z,"REGEX_PARAM_ARG",/^[-]{1,2}([\\-\w]+)$/);function ym(t){return!isNaN(t)}function vm(t){return!isNaN(parseInt(t))}var ii,Dn,Wn,Cn;class hl{constructor(e,n,r,i){p(this,ii,void 0);p(this,Dn,void 0);p(this,Wn,!1);p(this,Cn,!1);b(this,ii,e),b(this,Dn,n),b(this,Wn,r||c(this,Wn)),b(this,Cn,i||c(this,Cn))}get name(){return c(this,ii)}get value(){return c(this,Dn)}set value(e){this.readonly||b(this,Dn,e)}get global(){return c(this,Wn)}get readonly(){return c(this,Cn)}}ii=new WeakMap,Dn=new WeakMap,Wn=new WeakMap,Cn=new WeakMap;class xm extends hl{constructor(e,n,r){super(e,n,r,!0)}execute(e){return this.value.apply(this,e)}}class Za extends hl{}var ce,xt,be;class wa{constructor(){p(this,ce,new Map);p(this,xt,new Map);p(this,be,[])}reset(){this.resetPrefixStack(),c(this,ce).clear(),c(this,xt).clear()}resetPrefixStack(){b(this,be,[])}get prefixStack(){return c(this,be)}get currentPrefixStack(){return c(this,be)[c(this,be).length-1]}has(e){return e=e.replace(/(.*[^ ])[ ]+$/,"$1"),e=e.replace(/[$%]$/,""),(!c(this,ce).get(e)||c(this,ce).get(e)&&!c(this,ce).get(e).global)&&(e=this.prepareName(e)),c(this,ce).has(e)}add(e,n,r=!1,i=!1){e=e.replace(/(.*[^ ])[ ]+$/,"$1"),/\$$/.test(e)?n===void 0&&(n=""):/\\%$/.test(e)&&n===void 0&&(n=0),e=e.replace(/[$%]$/,""),e=this.prepareName(e),this.has(e)||c(this,ce).set(e,new Za(e,n,r,i))}get(e){e=e.replace(/(.*[^ ])[ ]+$/,"$1");const n=e;e=e.replace(/[$%]$/,""),(!c(this,ce).get(e)||c(this,ce).get(e)&&!c(this,ce).get(e).global)&&(e=this.prepareName(e));let r=c(this,ce).get(e);return r?(r=r.value,/\$$/.test(n)?r=String(r):/\\%$/.test(n)||/^\d+$/.test(r)?r=parseInt(r):/^[\d.]+$/.test(r)&&(r=parseFloat(r)),r):null}set(e,n,r=!1,i=!1){if(e=e.replace(/(.*[^ ])[ ]+$/,"$1"),typeof n!="object"&&(/[$]$/.test(e)?n===void 0?n="":n=String(n):/[%]$/.test(e)&&(n===void 0?n=0:n=parseInt(n))),e=e.replace(/[$%]$/,""),e=this.prepareName(e),this.has(e)){const s=c(this,ce).get(e);s instanceof Za&&s&&(s.value=n)}else this.add(e,n,r,i)}addSub(e,n){e=this.prepareName(e,!1),this.has(e)||c(this,xt).set(e,new xm(e,n))}executeSub(e,n,r=!1){return e=this.prepareName(e,!1),c(this,be).push({name:`${parseInt(Math.random()*1e4)}`,global:r}),c(this,xt).get(e).execute(n).then(i=>(c(this,ce).forEach(s=>{RegExp(`[$]{3}${c(this,be)[c(this,be).length-1].name}$`).test(s.name)&&c(this,ce).delete(s.name)}),c(this,be).pop(),i))}hasSub(e){return e=this.prepareName(e,!1),c(this,xt).has(e)}prepareName(e,n=!0){return typeof e=="string"&&(e=e.replace(/ /g,"")),n&&c(this,be).length&&!/[$]{3}/.test(e)&&(e=`${e}$$$${c(this,be)[c(this,be).length-1].name}`),e}get dims(){return c(this,ce)}get subs(){return c(this,xt)}}ce=new WeakMap,xt=new WeakMap,be=new WeakMap;var Xt,si,re,ve,Ze,ai,oi,xe,li,Kt,Qe,ge,Et,ie,se,co;let Em=(co=class{constructor(e,n,r,i=null,s=null){p(this,Xt,void 0);p(this,si,void 0);p(this,re,void 0);p(this,ve,void 0);p(this,Ze,void 0);p(this,ai,9999999999);p(this,oi,0);p(this,xe,null);p(this,li,[]);p(this,Kt,0);p(this,Qe,[]);p(this,ge,-1);p(this,Et,[]);p(this,ie,[]);p(this,se,-1);b(this,Ze,e),b(this,ve,n),b(this,re,r||new wa),b(this,Xt,i),b(this,si,s)}get memory(){return c(this,re)}get lines(){return c(this,Ze)}parse(e){e=e||[].concat(c(this,Ze));const n=e.shift().trim();return new Promise(r=>{if(c(this,xe)&&n!=="END SUB"){c(this,xe).lines.push(n),r();return}if(c(this,ai)>0&&c(this,oi)>c(this,ai))throw new Error("BASIC INTERPRETER OVERFLOW");if(Ae(this,oi)._++,c(this,se)>=0){if(c(this,ie).forEach(i=>{c(this,ie)[c(this,se)].count===0&&i.count===0&&i.lines.push(n)}),n==="WEND"||/NEXT /.test(n))return c(this,ie)[c(this,se)].condition().then(async i=>{if(c(this,ie)[c(this,se)].tmpLines=c(this,ie)[c(this,se)].tmpLines||e,i){const s=c(this,ie)[c(this,se)].lines;return c(this,ie)[c(this,se)].count++,"step"in c(this,ie)[c(this,se)]&&await c(this,ie)[c(this,se)].step(),s.length>0?this.parse([].concat(s)):(c(this,ie)[c(this,se)]=!1,Ae(this,se)._--,c(this,ie).pop(),null)}else return c(this,ie)[c(this,se)]=!1,Ae(this,se)._--,c(this,ie).pop(),null}).then(r);r()}else r()}).then(()=>{if(!c(this,xe)&&c(this,ge)>=-1&&(c(this,Et)[c(this,ge)]!==void 0&&c(this,Qe)[c(this,ge)]===void 0&&c(this,Qe).push(!c(this,Et)[c(this,ge)]),n==="ELSE"&&c(this,Kt)<1&&(c(this,Qe)[c(this,ge)]=!c(this,Qe)[c(this,ge)])),c(this,Qe)[c(this,ge)])/^IF (\((.*)\)|(.*)) THEN$/.test(n)&&Ae(this,Kt)._++;else return this.parseLine(n,e);return null}).then(()=>(c(this,ge)>-1&&(n==="ENDIF"||n==="END IF")&&(c(this,Kt)<1?(Ae(this,ge)._--,c(this,Et).pop(),c(this,Qe).pop()):Ae(this,Kt)._--),e.length?this.parse(e):c(this,li)))}parseLine(e,n){return new Promise((r,i)=>{if(e=(e||"").replace(/^[ \t]+/g,""),/^ *[#/]+/.test(e)){r();return}if(/^SUB (.*) STATIC$/.test(e)){const s=e.match(/^SUB (.*) STATIC$/);return this.commandSubStatic(s[1]).then(r)}else{if(e==="END SUB")return this.commandEndSub().then(r);if(c(this,xe)){r();return}}if(/^IF (\((.*)\)|(.*)) THEN$/.test(e)){const s=e.match(/^IF (\((.*)\)|(.*)) THEN$/),a=s[3]||s[2];return this.commandIfThen(a).then(r)}else if(e==="ELSE"||e==="ENDIF"||e==="END IF"){r();return}if(/^WHILE (.*)$/.test(e)){const s=e.match(/^WHILE (.*)$/);return this.commandWhile(s[1]).then(r)}else if(e==="WEND"){r();return}if(/^FOR (.*)$/.test(e)){const s=e.match(/^FOR (.*)$/);return this.commandFor(s[1]).then(r)}else if(e.startsWith("NEXT ")){r();return}if(/^([\w\d]+):$/.test(e)){r();return}if(/^GOTO +([\w\d]+)$/.test(e)){const s=e.match(/^GOTO +([\w\d]+)$/);this.commandGoto(n,s[1])}if(/^DIM( SHARED)? +(.*)$/.test(e)){const s=e.match(/^DIM( SHARED)? +(.*)$/);return this.commandDimShared(s[2],!!s[1]).then(r)}if(/^LET +([\w,$%]+)(\((.*)\))? *= *(.*)$/.test(e)){const s=e.match(/^LET +([\w,$%]+)(\((.*)\))? *= *(.*)$/);return this.commandLet(s[1],s[4],s[3]).then(()=>r())}if(/^READ +([\w, $%]+)$/.test(e)){const s=e.match(/^READ +([\w, $%]+)$/);return this.commandRead(s[1]).then(r)}if(/^END[ ]*$/.test(e))return this.commandEnd().then(r);if(/^(PAUSE|SLEEP) +(.+)/.test(e)){const a=e.match(/^(PAUSE|SLEEP) +(.+)/)[2];return this.commandPause(a).then(r)}if(/^CALL *(.*)/.test(e)){const s=e.match(/^CALL *(.*)/);return this.commandCall(s[1],n).then(r)}if(/^EXECUTE *(FILE|EVAL) *(.*)/.test(e)){const s=e.match(/^EXECUTE *(FILE|EVAL) *(.*)/);return this.commandExecute(s[1],s[2]).then(r).catch(i)}if(/^PRINT +USING +(.*);(.*)$/.test(e)){const s=e.match(/^PRINT +USING +(.*);(.*)$/);return this.commandPrintUsing(s[1],s[2]).then(r)}if(/^PRINT +(.*)$/.test(e)){const s=e.match(/^PRINT +(.*)$/);return this.commandPrint(s[1]).then(r)}if(/^DATA +(.*)$/.test(e)){const s=e.match(/^DATA +(.*)$/);return this.commandDataVar(s[1]).then(r)}c(this,ve)?c(this,ve).call(this,e,{show:!0}).then(s=>{s&&c(this,li).push(s)}).then(r).catch(i):r()})}async setReadStack(e,n){let r=await this.parseValue(n,!0);return Oi(r)&&(r=parseFloat(r)),c(this,re).set(e,r,!0)}async addDataStack(e){let n=await this.parseValue(e,!0);return Oi(n)&&(n=parseFloat(n)),c(this,Xt).push(n)}async setStack({name:e,value:n,index:r,global:i}){let s=await this.parseValue(n,!0);return Oi(s)&&(s=parseFloat(s)),r!==void 0?(r=await this.parseValue(r,!0),c(this,re).get(e)[r-1]=s):c(this,re).set(e,s,i)}async setGotoMarkStack(e,n){c(this,si).set(e,await this.parseValue(n,!0))}parseValue(e,n=!0,r=!1){if(e===void 0)return Promise.resolve(e);if(Jo(e))return Promise.resolve(e);if(Array.isArray(e))return Promise.resolve(e);if(typeof e=="boolean"||/^ *(true|false|TRUE|FALSE) *$/.test(e))return typeof e!="boolean"&&(e=e.toLowerCase()==="true"),Promise.resolve(e);if(/^ *@"((.|\n)*)" *$/.test(e))return Promise.resolve(e.replace(/^ *@"((.|\n)*)" *$/,'"$1"'));if(/^ *"((\\"|[^"])*)" *$/.test(e))return Promise.resolve(e.replace(/^ *"((\\"|[^"])*)" *$/,'"$1"'));if(/^ *[\d]+ *$/.test(e))return Promise.resolve(parseFloat(e));if(/^ *([\\-]?[\d.]+(e[-+]?\d+)?) *$/.test(e))return Promise.resolve(parseFloat(e));if(e&&/^[^"]?(.*)[^"]? *$/.test(e.replace(/ /g,""))){if(e=e.replace(/^ */g,""),c(this,re).has(e.replace(/ /g,"")))return e=e.replace(/ /g,""),this.parseValue(c(this,re).get(e),!0);if(r)throw new Error("test");return c(this,ve).call(this,e,{message:n?void 0:e}).then(i=>i)}return Promise.resolve(null)}async executeCondition(e,n,r){return e=await this.parseValue(e,!0),r=await this.parseValue(r,!0),/^[=]?==$/.test(n)?e===r:n==="<>"?e!==r:/^([<>][=]|[<>])?$/.test(n)?Sm(e,n,r):/^!=[=]?$/.test(n)?e!==r:null}commandIfThen(e){const n=e.match(/([^<>]*) *(<>|<=|>=|<|>|[=!]{2,3}) *([^<>].*)/);return n?this.executeCondition(n[1],n[2],n[3]).then(r=>(c(this,Et).push(r),Ae(this,ge)._++,r)):this.parseValue(e[1],!0).then(r=>(c(this,Et).push("value"in r?r.value:r),Ae(this,ge)._++,r))}commandWhile(e){const n=e.match(/([^<>]*) *(<>|<=|>=|<|>|[=!]{2,3}) *([^<>].*)/);return n?this.executeCondition(n[1],n[2],n[3]).then(r=>{if(r)return c(this,ie).push({count:0,lines:[],condition:()=>this.executeCondition(n[1],n[2],n[3])}),Ae(this,se)._++,r}):Promise.resolve()}async commandFor(e){const n=e.match(/(.*) *= *(.*) +TO +(.*) +STEP[ ](.*)/)||e.match(/(.*) *= *(.*) +TO +(.*)/);if(n){const r=await this.parseValue(n[2],!0),i=await this.parseValue(n[3],!0);c(this,re).set(n[1],r),Ae(this,se)._++;const s=async(a=!0)=>{let o=1;return n[4]&&(o=await this.parseValue(n[4],!0)),a&&c(this,re).set(n[1],c(this,re).get(n[1])+o),o};return c(this,ie).push({step:s,count:0,lines:[],condition:async()=>{const a=await s(!1);return a===0?!1:this.executeCondition(`(${n[1]}  )`,a<0?">":"<",i)}})}}commandSubStatic(e){const n=e.match(/^([\w,$%]+)(\((.*)\))?$/),r=n[1],i=Z.resolveValues(Z.extractValues(n[3]||"",","));return b(this,xe,{name:r,lines:[],args:i}),Promise.resolve()}commandEndSub(){if(c(this,xe)){const e=c(this,xe).lines,n=c(this,xe).args;c(this,re).addSub(c(this,xe).name,async(...r)=>{(await Promise.all(n.map((s,a)=>this.parseValue(r[Number(a)]).then(o=>({arg:s,value:o}))))).forEach(({arg:s,value:a})=>{c(this,re).add(s,a)}),await this.parse([].concat(e))}),b(this,xe,null)}else throw new Error("has no active SUB");return Promise.resolve()}commandGoto(e,n){return e.splice(0,e.length),this.parse(c(this,Ze).slice(c(this,Ze).indexOf(`${n}:`),c(this,Ze).length))}commandDimShared(e,n){return Z.resolveValues(Z.extractValues(e,",")).reduce((i,s)=>(s=s.match(/^([\w, $%]+)?(\((.*)\))?$/),c(this,re).has(s[1])||(s[3]&&(i=i.then(()=>this.parseValue(s[3],!0))),i=i.then(a=>this.setStack({name:s[1],value:a?Array(a):void 0,global:n}))),i),Promise.resolve())}commandLet(e,n,r){if(c(this,re).has(e))return this.setStack({name:e,value:n,index:r});throw new Error(`Variable ${e} not defined`)}async commandPrintUsing(e,n){const r=await this.parseValue(e,!0);try{n=await Promise.all(Z.resolveValues(Z.extractValues(n.trim(),",")).map(s=>this.parseValue(s,!0,!0)))}catch{n=[await this.parseValue(n,!0)]}const i=n.reduce((s,a)=>{const o=r.match(/((#+)(\.(#+))?)/);return a=String(a),/[\d.]+/.test(a)&&(a=a.split(/\./),o[4]&&a.length>1?a[1]=dl($s(String(a[1]),o[4].length,!1,"0"),o[4].length):a.splice(1,1),a[0]=$s(String(a[0]),o[2].length,!0," "),a=a.join(".")),s.replace(/(#+(\.#+)?)/,Q(a))},r);return c(this,ve).call(this,null,{message:`"${Q(i)}"`})}commandDataVar(e){if(c(this,Xt).length===0)return Promise.all(e.split(",").map(n=>this.addDataStack(n)));throw new Error("DATA has already been declared")}async commandPrint(e){if(/^((".*"|[^"]*);([^;]*))$/.test(e)){const n=e.match(/(.*);(.*)$/),r=await this.parseValue(n[1],!0);let i=await Promise.all(Z.resolveValues(Z.extractValues(n[2]," ")).reduce((s,a)=>(s.push(this.parseValue(a,!0)),s),[]));return i=i.map(s=>`${Q(r)}${Q(s)}`).join(" "),c(this,ve).call(this,null,{message:`"${i}"`})}else{let n=await this.parseValue(e);return n=await Promise.all(Z.resolveValues(Z.extractValues(String(n)," ")).map(r=>this.parseValue(r,!0))),n=n.map(r=>Q(r)),n=n.join(""),c(this,ve).call(this,null,{message:Oi(n)?n:`"${n}"`})}}commandEnd(){return Promise.resolve()}async commandPause(e){const n=await this.parseValue(e);return new Promise(r=>window.setTimeout(()=>{r()},n))}commandRead(e){const n=e.split(",");return Promise.all(n.map(r=>{const i=c(this,Xt).shift();return this.setReadStack(r,i),Promise.resolve()}))}commandCall(e,n){const i=e.match(/([^(]+)\(.*\)/)[1];if(c(this,re).hasSub(i))return this.parseLine(e,n);throw new Error(`SUB ${i} NOT FOUND`)}async commandExecute(e,n){if(!c(this,ve))throw new Error("No callback available for readfile");console.log("READFILE",e,n);let r;switch(e){case"FILE":try{r=await c(this,ve).call(this,`READFILE ${n}`,{show:!1})}catch(i){throw new Error(i)}if(console.log("READFILE",r),r!==void 0)try{return c(this,ve).call(this,r.value,{show:!0})}catch(i){throw new Error(i)}else throw new Error("File Content is empty");case"EVAL":try{return this.parseValue(n,{show:!0})}catch(i){throw new Error(i)}}}},Xt=new WeakMap,si=new WeakMap,re=new WeakMap,ve=new WeakMap,Ze=new WeakMap,ai=new WeakMap,oi=new WeakMap,xe=new WeakMap,li=new WeakMap,Kt=new WeakMap,Qe=new WeakMap,ge=new WeakMap,Et=new WeakMap,ie=new WeakMap,se=new WeakMap,co);function Sm(t,e,n){switch(e.match(/^([<>][=]|[<>])$/)[1]){case"<":return parseFloat(t)<parseFloat(n);case">":return parseFloat(t)>parseFloat(n);case"<=":return parseFloat(t)<=parseFloat(n);case">=":return parseFloat(t)>=parseFloat(n);default:return null}}function Oi(t){return!isNaN(parseFloat(t))&&isFinite(t)}var Nn,es,ts,Ln;class Im{constructor(e,n){p(this,Nn,new Map);p(this,es,new Map);p(this,ts,[]);p(this,Ln,void 0);b(this,Ln,n),b(this,Nn,e)}get callback(){return c(this,Ln)}get memory(){return c(this,Nn)}async parse(e,n,r){if(e.length===0)return;e.length>1&&await this.readData(e);const i=[];return new Em(e,async(a,o)=>{o=Object.assign({},o,r);const l=await(n||c(this,Ln))(a,o);return o.show&&typeof l=="string"&&l!=="undefined"&&i.push(l),l},c(this,Nn),c(this,ts),c(this,es)).parse().then(()=>i)}readData(e){let n=e.find(r=>/^[ ]*DATA[ +]/.test(r));return n?(n=e.splice(e.indexOf(n),1),this.parse(n)):Promise.resolve()}}Nn=new WeakMap,es=new WeakMap,ts=new WeakMap,Ln=new WeakMap;function Oe(...t){if(t.includes(void 0))throw new Error("invalid arguments")}let Bs,Vs,Us,js,Gs,Hs,Ys,ml;try{Bs=/([^\w$%]?)\(([^\\(\\)]+)\)/,Vs=/^\((.*)\)$/,Us=new RegExp("[^\\d$\\-\\w]?(?<a>([+-]?[\\w.]+e\\+\\d+)|([+-]?[\\w$%.]+)|(^[+-]?[\\w$%.]+)|([\\w$%.]+)|([$]{3}\\d+))[ ]*(?<operator>[\\^*%\\/]|MOD|XOR|AND|OR|<<|>>|>>>)[ ]*(?<b>([-]?[\\w.]+e\\+\\d+)|([-]?[\\w$%.]+)|(^[+-]?[\\w$%.]+)|([\\w$%.]+)|([$]{3}\\d+))"),js=/([+-]?[\w.]+e\+\d+|[+-]?[\w$%.]+|[$]{3}\d+)[ ]*([+-])[ ]*([+-]?[\w.]+e\+\d+|[+-]?[\w$%.]+|[$]{3}\d+)/,Gs=/([\w]+[a-zA-Z0-9_.]+[$%]?)[ ]*\(([^\\(\\)]*)\)/,Hs=/^([\w]+[a-zA-Z0-9_.]+[$%]?)[ ]*\(([^\\(\\)]*)\)/,Ys=/^([\w]+[a-zA-Z0-9_.]?[$%]?)/,ml=/^([+-]?[\d.]+e\+\d+|[+-]?[\d.])+($|$)/}catch{}var te;class km{constructor(e){p(this,te,void 0);this.createMemory(e)}createMemory(e){b(this,te,e||new wa),c(this,te).addSub("RND",()=>Promise.resolve(Math.random())),c(this,te).addSub("PI",()=>Promise.resolve(Math.PI)),c(this,te).addSub("POW",(n,r)=>(Oe(n,r),Promise.resolve(n**(r||2)))),c(this,te).addSub("SQRT",(n,r)=>(Oe(n,r),Promise.resolve(Math.sqrt(n,r||2)))),c(this,te).addSub("INT",n=>(Oe(n),this.parse(Q(n)).then(r=>parseInt(r)))),c(this,te).addSub("SPC",n=>(Oe(n),Promise.resolve(`"${qa(n)}"`))),c(this,te).addSub("LEN",n=>(Oe(n),Promise.resolve(Q(String(n)).length))),c(this,te).addSub("ASC",n=>(Oe(n),Promise.resolve(Q(n).charCodeAt(0)))),c(this,te).addSub("CHR$",n=>(Oe(n),Promise.resolve(String.fromCharCode(n)))),c(this,te).addSub("LEFT$",(n,r)=>(Oe(n,r),Promise.resolve(`"${dl(Q(n),parseInt(r))}"`))),c(this,te).addSub("RIGHT$",(n,r)=>(Oe(n,r),Promise.resolve(`"${bm(Q(n),parseInt(r))}"`))),c(this,te).addSub("STRING$",(n,r)=>(Oe(n,r),Promise.resolve(`"${qa(Q(n),Q(r))}"`))),c(this,te).addSub("TIME%",()=>Promise.resolve(Date.now())),c(this,te).addSub("HEX_ENC$",n=>(Oe(n),n=Number(Q(n)).toString(16),Promise.resolve(n))),c(this,te).addSub("HEX_DEC$",n=>(Oe(n),n=parseInt(Q(n),16),Promise.resolve(n)))}parse(e){return new Am(this).parse(e)}validInput(e){return/[/*\-+^()]?/.test(e)}get memory(){return c(this,te)}}te=new WeakMap;const Tm=5e3;var he,Je,ci;class Am{constructor(e){p(this,he,void 0);p(this,Je,[]);p(this,ci,0);b(this,he,e)}get parser(){return c(this,he)}get parsedValues(){return c(this,Je)}async parse(e){if(c(this,ci)>Tm)throw new Error(`Can't parse ${e}`);Ae(this,ci)._++;const{result:n,values:r}=Z.extractStrings(String(e));let i=wt.parse(n);b(this,Je,c(this,Je).concat(r)),i=i.map(o=>/^MOD|XOR|AND|OR$/.test(o)?` ${o} `:o);let s=i.join("");dr(s)&&(s=Number(s));const a=s;return s=await this.action(s),s!==a&&!/^".*"$/.test(s)?this.parse(s):this.$v(s)}async action(e){if(Vs.test(e)){const[n,r]=e.match(Vs);e=e.replace(n,r)}if(Gs.test(e)){const[n,r,i,s]=e.match(Gs),a=r||s;let o=wt.parse(i||"");const l=i.includes(",")&&o.join("")!==i;if(l&&(o=i.split(",")),o=await Promise.all(o.map(u=>this.parse(u))),o=l?o:[await this.parse(o.join(""))],c(this,he).memory.has(a))return e.replace(n,c(this,he).memory.get(a)[Number(o[0])-1]);if(c(this,he).memory.hasSub(a))return e.replace(n,this.cacheValue(await c(this,he).memory.executeSub(a,o)))}if(Bs.test(e)){const[n,r,i]=e.match(Bs);return e.replace(n,r+await this.parse(i))}return Us.test(e)?this.operation(e,Us):js.test(e)?this.operation(e,js):this.$v(e)}async operation(e,n){const r=e.match(n);let i,s,a;const o=r[0];"groups"in r&&r.groups?(i=r.groups.a,s=r.groups.b,a=r.groups.operator):(i=r[1],a=r[2],s=r[3]);let l=e,u=await this.parse(i);dr(u)||(u=Q(u));let d=await this.parse(s);switch(dr(d)||(d=Q(d)),a){case"+":l=u+d;break;case"-":l=u-d;break;case"*":l=u*d;break;case"/":l=u/d;break;case">":l=u>d;break;case"<":l=u<d;break;case"^":l=u^d;break;case"%":l=u%d;break;case"MOD":l=u%d;break;case"AND":l=u&d;break;case"OR":l=u|d;break;case"XOR":l=u^d;break;case"<<":l=u<<d;break;case">>":l=u>>d;break;case">>>":l=u>>>d;break}return dr(l)||(l=`"${l}"`),e.replace(o,o.replace(RegExp(`[${i}]{${String(i).length}}[ ]*[${a}]{${String(a).length}}[ ]*[${s}]{${String(s).length}}`),"")+this.cacheValue(l))}$v(e){if(Z.valueUnresolved(e))return e=Z.resolveValue(e,c(this,Je)),Promise.resolve(e);if(typeof e=="string"&&(e=e.replace(/^[ ]*([^ ].*[^ ])[ ]*$/,"$1")),ml.test(e))return Promise.resolve(Number(e));if(Hs.test(String(e))){const[,n,r]=e.match(Hs);if(c(this,he).memory.hasSub(n))return c(this,he).memory.executeSub(n,Z.resolveValues(Z.extractValues(r,",")));throw new Error(`can't find sub "${n}" in memory`)}else if(Ys.test(String(e))){const n=e.replace(Ys,"$1");if(c(this,he).memory.hasSub(n))return c(this,he).memory.executeSub(n);if(c(this,he).memory.has(n))return Promise.resolve(c(this,he).memory.get(n))}return Promise.resolve(e)}cacheValue(e){return c(this,Je).push(e),Z.resolveKey(c(this,Je).length-1)}}he=new WeakMap,Je=new WeakMap,ci=new WeakMap;const Om=["CLS","READ max","DIM fib%(max)","LET fib(1) = 1","LET fib(2) = 2","FOR i=3 TO max","LET fib(i) = fib(i - 2) + fib(i -1)","NEXT i","FOR i=1 TO max","PRINT fib(i)","NEXT i","DATA 10","END"],Rm=["CLS","DIM w%,h%,a%","LET w%=12","LET h%=4","LET a%=w%*h%",'PRINT "With the width " + w%','PRINT " and the height " + h%','PRINT " you have the area " + a%'],Dm=["CLS","DIM r,a","LET r=5","READ pi","LET a=r*r*pi",'PRINT USING "With the radius ##.##"; r','PRINT USING "we have the area ##.##"; a',"DATA 3.14","END"],Wm=["GuessTheNumber","CLS","READ max%","DIM number%, guess%, guesses%",'PRINT "The number is between 1-1000."',"LET number% = INT(RND * max%) + 1","LET guess% = 1","LET guesses% = 0","WHILE guess%<>number%",'PRINT "Guess the number"',"INPUT guess%","IF (guess%<>number%) THEN","IF (guess%>number%) THEN",'PRINT "Your guess was too high"',"ELSE",'PRINT "Your guess was too low"',"ENDIF","ENDIF","LET guesses% = guesses% + 1","WEND",'PRINT USING "You found the number in # tries"; guesses%',"DATA 1000","END"],Cm=["DIM result",'PRINT "Calculate the factorial of"',"INPUT n","LET result = 1","FOR i = n TO 1 STEP -1","LET result = result * i","NEXT i",'PRINT USING "#! = #"; n, result',"END"],Nm=["CLS","DIM stars$",'PRINT "Enter the height of the pyramid"',"INPUT height",'LET stars$ = ""',"FOR i = 1 TO height",'LET stars$ = ""',"FOR j = 1 TO (i+i-1)",'LET stars$ = stars$ + "*"',"NEXT j","PRINT SPC(height - i) + stars","NEXT i","END"],Lm=['PRINT "Step 1"','PRINT "Step 2"','PRINT "Step 3"',"GOTO ignore",'PRINT "Step 4"',"ignore:",'PRINT "Step 5"'],Pm=["DIM A, B","LET A = 2000",'LET B = "Hello World"','PRINT USING "A: #"; A','PRINT USING "B: #"; B'],Mm=["DIM A, B","LET A = 1","LET B = 2","IF A == B THEN",'PRINT "true"',"ELSE",'PRINT "false"',"END","IF (A < B) THEN",'PRINT "true"',"END"],Fm=["DIM i%","FOR i% = 1 TO 5",'PRINT USING "For Number #"; i%',"NEXT i%"],$m=["DIM i%","LET i%=0","WHILE i% < 5",'PRINT USING "While Number #"; i%',"LET i% = i% + 1","WEND"],zm=["DIM duration","LET duration = 2500",'PRINT USING "Start with Pause #ms"; duration',"PAUSE duration",'PRINT "End Pause"','PRINT USING "Start with Sleep #ms"; duration',"PAUSE duration",'PRINT "End Sleep"'],Bm={Fibonacci:Om,Area:Rm,Circle:Dm,"Your Name":["CLS",'PRINT "What is your name?"',"INPUT n$",'PRINT "What is your shoe size?"',"INPUT size",'PRINT "Hello "; n$','PRINT USING "your shoe size is ##.##"; size',"END"],GuessTheNumber:Wm,Factorial:Cm,Pyramid:Nm,"Bubble Sort":["CLS","READ max","DIM SHARED numbers(max)","SUB CreateList(max) STATIC","FOR i=1 TO max","LET numbers(i) = INT(RND * 100)","NEXT i","END SUB","SUB PrintList(max) STATIC","FOR i=1 TO max","PRINT numbers(i)","NEXT i","END SUB","SUB SwapValues(i%, j%) STATIC","LET numbers(i%) = numbers(i%) XOR numbers(j%)","LET numbers(j%) = numbers(i%) XOR numbers(j%)","LET numbers(i%) = numbers(i%) XOR numbers(j%)","END SUB","SUB Sort(max) STATIC","FOR i%=1 TO (max - 1)","FOR j%=i% TO max","IF numbers(i%)>numbers(j%) THEN","CALL SwapValues(i%, j%)","END IF","NEXT j%","NEXT i%","END SUB","CreateList(max)","Sort(max)","PrintList(max)","DATA 10","END"],Goto:Lm,Vars:Pm,If:Mm,For:Fm,"For Step":["CLS","FOR i% = 0 TO 6 STEP 2",'PRINT "For Step Number #"; i%',"NEXT i%"],While:$m,Pause:zm},Vm=({module:t,core:e})=>{const{fileSystem:n}=e.modules.files;return[{name:["basic"],args:[new v({index:0,name:"path",description:"Path to basic script"})],async action({path:r},i){if(!r)throw N.get("bad_args");const s=await n.get(r);if("type"in s.data&&s.data.type==="basic"&&Array.isArray(s.data.content))return t.parseBasic(s.data.content,null,{logger:i.logger});throw new TypeError(`Can't read file ${r}`)}},{name:["basicExamples"],args:[new v({index:0,name:"name",description:"Name from example"})],action({name:r}){return t.parseBasic(Bm[String(r)])}}]};var Pn,Mn,Fn,ns;class fl extends us{constructor({core:n}){super({commands:(...r)=>[...Vm(...r)],core:n});p(this,Pn,void 0);p(this,Mn,new wa);p(this,Fn,new km(c(this,Mn)));p(this,ns,new Z(c(this,Fn)));b(this,Pn,new Im(c(this,Mn),n.executeCommand.bind(n)))}get memory(){return c(this,Mn)}parse(...n){return c(this,Pn).parse(...n)}parseBasic(...n){return c(this,Pn).parse(...n)}parseCommand(...n){return c(this,ns).parse(...n)}parseMath(...n){return c(this,Fn).parse(...n)}isMathValue(...n){return c(this,Fn).validInput(...n)}}Pn=new WeakMap,Mn=new WeakMap,Fn=new WeakMap,ns=new WeakMap,g(fl,"NAME","Parser");var me,qt;const rs=class extends fe{constructor(n){n=Object.assign({},n);super(n);p(this,me,new Map);p(this,qt,Vu(1));this.addItems(n.items||c(this,me)),b(this,qt,n.maxSize||c(this,qt))}async export(...n){const r=await fe.prototype.export.apply(this,...n);return delete r.data,r.items=await Promise.all(Array.from(c(this,me).values()).map(i=>i.export())),r}async addItems(n,r=!1){return n instanceof Map&&(n=Array.from(n.values())),n=await Promise.all(n.map(async i=>(typeof i.data=="string"&&(i.data=await Ps(i.data)),i))),n=this.parseItems(n),Promise.all(n.map(i=>this.addItem(i,r)))}static normalizeItemData(n){return"info"in n&&(n.meta=[n.info],delete n.info),"items"in n&&(n.items instanceof Map||(n.items=new Map(n.items.map(r=>[r.id,r])))),"extension"in n&&(n.id+="."+n.extension,delete n.extension),"createTime"in n&&(n.createdDate=n.createTime,delete n.createTime),"editTime"in n&&(n.editedDate=n.editTime,delete n.editTime),"icon"in n&&delete n.icon,n}parseItems(n){return n.map(r=>{r=rs.normalizeItemData(r);let i;return r.type?i=vs(r.type):r.items?i=vs("Directory"):i=vs(),new i(r)})}async addItem(n,r=!1){const i=n.parent;if(!r&&this.hasItem(n.id))throw new Error(`File ${n.id} exists`);if(i&&await i.removeItem(n),r){const s=Ir(n.id),a=ma(n.id);n.setId(Bi(Qo(a,this,s),s))}return c(this,me).set(n.id,n),n.setParent(this),n.events.next(new G("move",{item:n,lastParent:i})),this.events.next(new G("addItem",n)),n}removeItem(n){return n.setParent(null),c(this,me).delete(n.id),this.events.next(new G("removeItem",n)),Promise.resolve()}async remove(n){const{recursive:r}=Object.assign({recursive:!1},n);if(r){let i=await this.getItems();return i=await Promise.all(Array.from(i.values()).map(s=>s.remove(n))),i=i.reduce((s,a)=>s.concat(a),[]),i.push(await fe.prototype.remove.apply(this,[n])),i}else{if((await this.getItems()).size>0)throw new Error(N.get("FileSystemItem_itemContainerNotEmpty",await this.getPath()));return[await fe.prototype.remove.apply(this,arguments)]}}changeItemId(n,r,i){c(this,me).delete(r),c(this,me).set(i,n),this.parent&&console.log("changeItemId by parent",r,i,c(this.parent,me))}getItems(){return Promise.resolve(c(this,me))}getItem(n){return c(this,me).get(n)}hasItem(n){return c(this,me).has(n)}get items(){return c(this,me)}get size(){return Array.from(c(this,me).values()).reduce(function(n,r){return r instanceof rs||(n+=r.size),n},0)}get maxSize(){return n(this);function n(r){return r.parent&&c(r,qt)?n(r.parent):c(r,qt)}}};let Y=rs;me=new WeakMap,qt=new WeakMap;N.add([["FileSystemItem_itemContainerNotEmpty",["ItemWrapp Not Empty","ItemContainer not empty… %1"]]]);class _a extends Y{constructor(e){e=Object.assign({},e,{locked:!0,id:"ROOT"}),super(e)}}g(_a,"NAME","Root");var Ss,et;let dt=(Ss=class extends Y{constructor(n){n=Object.assign({storage:null},n,{locked:!0});super(n);p(this,et,void 0);b(this,et,n.storage)}get storage(){return c(this,et)}get locked(){return c(this,et).locked}mount(...n){return c(this,et).mount(...n)}unmount(...n){return c(this,et).unmount(...n)}async save(){return c(this,et).save(await this.export())}},et=new WeakMap,g(Ss,"NAME","Storage"),Ss);class Ui extends dt{constructor(...e){super(...e),this.meta.set(T.VISIBLE,!1)}}g(Ui,"NAME","TmpDisk"),g(Ui,"SYMBOL",x.TMP_DISK);class ji extends dt{}g(ji,"NAME","RamDisk"),g(ji,"SYMBOL",x.RAM_DISK);class ya extends Y{}g(ya,"NAME","FloppyDisk");class Gi extends dt{}g(Gi,"NAME","HardDisk"),g(Gi,"SYMBOL",x.HARD_DISK);class Hi extends dt{isLogged(){return this.storage.storage.isLogged()}}g(Hi,"NAME","CloudDisk"),g(Hi,"SYMBOL",x.CLOUD_DISK);class Rt extends Y{constructor(...e){super(...e),[T.WINDOW_SCALE,T.WINDOW_SCROLL_X,T.WINDOW_SCROLL_Y].forEach(n=>{this.meta.has(n,!0)||this.meta.set(n,!0)})}}g(Rt,"NAME","Directory"),g(Rt,"SYMBOL",x.DIRECTORY);class Ce extends Y{}g(Ce,"NAME","Trashcan"),g(Ce,"SYMBOL",x.TRASHCAN);class xi extends fe{}g(xi,"NAME","File");var $n;class va extends fe{constructor(n){n=Object.assign({refPath:null},n);super(n);p(this,$n,void 0);b(this,$n,n.refPath)}get refPath(){return c(this,$n)}set refPath(n){b(this,$n,n)}}$n=new WeakMap,g(va,"NAME","Link");var ui,Ue,Ee,di,zn;const We=class{constructor(e){p(this,ui,void 0);p(this,Ue,void 0);p(this,Ee,void 0);p(this,di,new Map);p(this,zn,new Fe);b(this,ui,e),this.setup()}get root(){return c(this,Ue)}setup(){b(this,Ue,new _a),b(this,Ee,c(this,Ue));const e=[this.addStorage(We.RAM_DISK_TITLE,ue.SESSION,{id:We.RAM_DISK_NAME}),this.addStorage(We.HARD_DISK_NAME,ue.LOCAL,{trashcan:!0}),this.addStorage(We.TMP_DISK_TITLE,ue.TEMP,{id:We.TMP_DISK_NAME,trashcan:!1})];return Promise.all(e).catch(n=>{throw n})}createTmpFile(e,n,r,i){return this.createRootFile(`TMP:${e}`,n,r,i)}createRootFile(e,n,r,i){typeof n=="object"&&(r=n,n=null);const s=`${e}`;return this.makefile(s,n,r,Object.assign({},i,{override:!0}))}async get(e,n){if(e instanceof fe)return e;if(Ci(e))try{return await this.parsePath(e)}catch(r){if(n)return new fe({name:Re(e)});throw r}else throw N.get("FileSystem_pathInvalid",Re(e),nr(e))}async parsePath(e){let n=e,r=c(this,Ee);const i=e.match(/^([^:\\/]+):(.*)$/);if(i?(r=c(this,Ue).getItem(i[1]),n=i[2]):n[0]==="/"?(n=n.slice(1),r=c(this,Ee).getStorageItem()):n==="ROOT"&&(r=c(this,Ue),n=""),n&&n.length>0&&(r=Xs(n.split("/"),r)),r)return r;throw N.get("FileSystem_pathInvalid",e,await c(this,Ee).getBase())}async addFloppyDisk(e){typeof e=="function"&&(e=e());const n=await e;return this.addStorage(n)}async removeFloppyDisk(e){await e.remove(!0)}async addStorage(e,n=ue.NONE,r){r=Object.assign({id:null},r);let i;typeof n=="function"&&(i=n,n=ue.CLOUD);const s={id:this.getFreeSlot(We.PREFIX.FLOPPY_DISK),itemClass:ya};let a={};if(typeof e=="object"){const o=e;s.name=o.name,s.items=o.items,s.meta=Array.from(new Map([[T.SYMBOL,x.DISK_1]].concat(o.meta||[])))}else{switch(n){case ue.SESSION:s.id=We.PREFIX.RAM,s.itemClass=ji;break;case ue.TEMP:s.id=We.PREFIX.TMP,s.itemClass=Ui;break;case ue.LOCAL:s.id=this.getFreeSlot(We.PREFIX.HARD_DISK),s.itemClass=Gi;break;case ue.CLOUD:s.id=this.getFreeSlot(We.PREFIX.CLOUD_DISK),s.itemClass=Hi;break}s.id=r.id||s.id,i=await this.registerStorage(s.id,i||n).mount(r);const o=await i.load();a=Y.normalizeItemData(o),s.storage=i,ue.NONE!==n&&(s.name=a.name||e)}return(s.meta=s.meta||[]).push(...a.meta||[]),this.addDisk(Object.assign(a,s),r)}removeStorage(e){return e.unmount().then(()=>(c(this,zn).next(new G("removeStorage",{itemStorage:e})),e))}registerStorage(e,n){let r;typeof n=="function"?r=n:r=cl(n);const i=`${c(this,ui)}_${e}`,s=new r({id:e,name:i});return c(this,di).set(i,s),s}connect(e,n){return this.addStorage(Mu,e,n).then(r=>r).catch(r=>{throw r})}async disconnect(e){return e=await this.removeStorage(e),e.remove({silent:!0,recursive:!0}),e}addDisk({id:e,name:n,meta:r,items:i,itemClass:s,storage:a},o){o=Object.assign({trashcan:!1},o),o.trashcan&&(!i||i&&!i.has(Ce.NAME))&&(i=i||new Map,i.set(Ce.NAME,{type:Ce.NAME,id:Ce.NAME,name:Ce.NAME}));const l=s;if(!l)throw new Error("ItemClass is empty!");const u=new l({id:e,name:n,meta:r,items:i,storage:a});return c(this,Ue).addItem(u),c(this,zn).next(new G("addDisk",{id:e,item:u})),u}get currentItem(){return c(this,Ee)}get events(){return c(this,zn)}get storages(){return c(this,di)}getFreeSlot(e){let n=0;for(;c(this,Ue).hasItem(`${e}${n}`);)n++;return`${e}${n}`}async exist(e){try{return!!await this.get(e)}catch{return!1}}async changeDirectory(e){const n=await this.get(e);return b(this,Ee,n),this.events.next(new G("changeDirectory",n)),n}async makedir(e,n,r){const{ignore:i}=Object.assign({ignore:!1,override:!1},r);let s;e&&Bu(e)&&e!==n?s=await this.get(nr(e)):s=c(this,Ee);const a=new Rt({id:Re(e),name:n||"",createdDate:Date.now()});if(await He(s),i||!s.getItem(a.id))s.addItem(a,i),this.events.next(new G("writeItem",a));else throw N.get("FileSystem_fileExist",a.id);return await we(s),a}async makefile(e,n,r,i){const{override:s,meta:a}=Object.assign({override:!1,meta:[]},i),o=new xi({id:Re(e),name:n,data:r,meta:a,createdDate:Date.now()});if(!Ci(e))throw N.get("FileSystem_invalidPath",e);let l=$u(e);const u=zu(e);l===u&&(l=".");let d;if(Fu(l)?d=await this.get(l):c(this,Ee).id!=="ROOT"?d=await this.get(ha(await c(this,Ee).getPath(),l)):d=await this.get(l),d.hasItem(u))if(s)await d.getItem(u).remove(),d.addItem(o);else throw N.get("FileSystem_fileExist",o.id);else d.addItem(o),this.events.next(new G("writeItem",o));return await we(d),o}async editfile(e,n){const r=await this.get(e).then(He);return await He(r),r.data=n,we(r)}async editfileMeta(e,n,r){const i=await this.get(e);return Array.isArray(n)?n.map(s=>({name:s[0],value:s[1]})):i.meta.set(n,r),we(i)}async saveItem(e){const n=await this.get(e);return we(n)}async makelink(e,n=null){const r=await this.get(e);await He(r);const i=c(this,Ee),s=new va({id:ma(r.id)+".ref",name:`${n||r.name}`,refPath:await r.getPath(),createdDate:Date.now()});return await i.addItem(s),await we(r),s}async editlink(e,n){const r=await this.get(e);await He(r);const i=await this.get(n);return r.refPath=await i.getPath(),we(r)}async rename(e,n,{name:r=!1,removeName:i=!1}){let s;if(e instanceof fe)s=e;else if(Ci(e)||typeof e=="string")s=await this.get(e);else throw N.get("FileSystem_pathInvalid",nr(e),e);return await He(s),i&&(r=!0,n=null),await s.rename(n,{ignore:!0,name:r}),we(s)}async copy(e,n,r){const{ignore:i}=Object.assign({ignore:!1},r);let s,a,o;if(e instanceof fe?(a=e,s=e.id):(a=await this.get(e),s=Re(e)),n instanceof fe)n instanceof Y||(n=n.parent),o=n;else{s=Re(n);const u=await this.get(n,!0);if(u instanceof Y?s=Re(e):u.parent?o=u.parent:o=await this.get(nr(n)),!(o instanceof Y))throw new TypeError("no ItemContainer")}await He(a);const l=await a.copy();if(i||!o.getItem(s))l.rename(s),o.addItem(l,i),this.events.next(new G("copyItem",l));else throw N.get("FileSystem_fileExist",s);return we(l)}async move(e,n,{override:r=!1}){let i,s,a;if(e instanceof fe)s=e,i=e.id;else{if(s=await this.get(e),s instanceof dt)throw N.get("FileSystem_cantMoveStorage",s.displayName);i=Re(e)}if(n instanceof fe)n instanceof Y||(n=n.parent),a=n;else{if(i=Re(n),a=await this.get(n),a instanceof Y)i=Re(e);else return this.get(nr(n));if(!(a instanceof Y))throw new TypeError("no ItemContainer")}let o;if(await He(s),r||!await a.getItem(i))o=s.getStorageItem(),await s.rename(i),await a.addItem(s,r),this.events.next(new G("moveItem",s));else throw N.get("FileSystem_fileExist",s.id,i);return await we(s),o?o.save().then(()=>s):s}async remove(e,n,r){const{ignore:i}=Object.assign({ignore:!1},r),s=await this.get(e);await He(s);try{const a=await Uu(n,s);return a[a.length-1].storage&&await a[a.length-1].storage.save(),a}catch(a){if(!i)throw new Error(a)}}};let Ye=We;ui=new WeakMap,Ue=new WeakMap,Ee=new WeakMap,di=new WeakMap,zn=new WeakMap,g(Ye,"PREFIX",{FLOPPY_DISK:"DF",TMP:"TMP",RAM:"RAM",HARD_DISK:"HD",CLOUD_DISK:"CD"}),g(Ye,"TMP_DISK_NAME","TMP"),g(Ye,"TMP_DISK_TITLE","TMP DISK"),g(Ye,"RAM_DISK_NAME","RAM"),g(Ye,"RAM_DISK_TITLE","RAM DISK"),g(Ye,"HARD_DISK_NAME","HARD DISK");function Xs(t,e){const n=t.shift();if(n===void 0)return e;if(n===".."){if(e.parent)return e.parent}else if(n==="."||n==="")return Xs(t,e);if(e){const r=e.getItem(n);return t.length>0&&r instanceof Y?Xs(t,r):r}}const Um=[Rt,Ce,dt,Ui,ji,Gi,ya,Hi,va,xi].reduce((t,e)=>(t[e.NAME]=e,t),{});function vs(t){return Um[String(t)]||xi}N.add([["FileSystem_invalidPath",["Invalid File",'Invalid path "%1"']],["FileSystem_invalidFile",["Invalid File",'Invalid file… "%1"']],["FileSystem_fileExist",["File Ready",'File already exists… "%1"']],["FileSystem_pathInvalid",["Path Invalid",'Path invalid… "%1"; base: "%2"']],["FileSystem_itemInvalid",["Item Invalid",'Item id invalid… "%1" from "%2"']],["FileSystem_cantMoveStorage",["Can't Move",`Can't move Storage "%1"`]],["FileSystem_permissionsNeeded",["Permissions needed","Permissions needed"]]]);const xs={WEB_BASIC_SHOW_PREVIEW:"extras13_web_basic_show_preview",WEB_PAINTING_DISPLAY_BACKGROUND:"extras13_web_painting_display_background",WEB_PAINTING_DISPLAY_FOREGROUND:"extras13_web_painting_display_foreground"},Ab={[xs.WEB_BASIC_SHOW_PREVIEW]:!0,[xs.WEB_PAINTING_DISPLAY_BACKGROUND]:"#CCCCCC",[xs.WEB_PAINTING_DISPLAY_FOREGROUND]:"#FFFFFF"},Ni={HAS_WINDOW_OUTPUT:"has_window_output",CONTENT:"content",OUTPUT_TYPE:"type"};function Ob(){return{[Ni.HAS_WINDOW_OUTPUT]:!1,[Ni.CONTENT]:"",[Ni.OUTPUT_TYPE]:"basic"}}const jm={props:{label:{type:String,default:"Item Label"},model:{type:Object,default(){return{value:null}}},name:{type:String,default:null},value:{type:[String,Number],default:null},multiple:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{currentModel:{get(){return this.name?this.model[this.name]:this.model.value},set(t){this.name?this.model[this.name]=t:this.model.value=t}},input(){return{name:this.name,readonly:this.readonly,disabled:this.disabled,type:this.multiple?"checkbox":"radio"}}}},Gm={class:"wb-env-atom-form-field-item-select-item"},Hm=["value"],Ym=["innerHTML"];function Xm(t,e,n,r,i,s){return y(),W("label",Gm,[ln(S("input",V({"onUpdate:modelValue":e[0]||(e[0]=a=>s.currentModel=a)},s.input,{value:n.value}),null,16,Hm),[[ta,s.currentModel]]),S("span",{class:"label",innerHTML:n.label||" "},null,8,Ym)])}const Km=j(jm,[["render",Xm],["__scopeId","data-v-6f76d05d"]]);const qm={components:{WbEnvAtomFormFieldFieldItemSelectItem:Km},props:{title:{type:String,default:"Item Select Title"},multiple:{type:Boolean,default:!1},name:{type:String,default:"value"},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},model:{type:Object,default(){return{value:{}}}},items:{type:Array,required:!1,default(){return[{label:"Item 1",value:"item-1"},{label:"Item 2",value:"item-2"}]}}}},Zm={class:"wb-env-atom-form-field-item-select"},Qm={key:0,class:"title"};function Jm(t,e,n,r,i,s){const a=R("wb-env-atom-form-field-field-item-select-item");return y(),W("div",Zm,[n.title?(y(),W("div",Qm,Te(n.title),1)):B("",!0),S("ul",null,[(y(!0),W(At,null,Ot(n.items,(o,l)=>(y(),W("li",{key:l},[C(a,V(o,{name:o.name||n.name,model:n.model,multiple:n.multiple,readonly:o.readonly||n.readonly,disabled:o.disabled||n.disabled}),null,16,["name","model","multiple","readonly","disabled"])]))),128))])])}const ef=j(qm,[["render",Jm],["__scopeId","data-v-c017a51c"]]);const tf={components:{WbButton:Ct,WbButtonWrapper:Nt,WbItemSelect:ef},props:{fileSystem:{type:Object,default(){return null}},fsItem:{type:Object,default(){return null}},name:{type:String,default(){return"fsItem"}},model:{type:Object,default(){return{fsItem:null}}},backLabel:{type:String,default(){return"../"}},upLabel:{type:String,default(){return"Up"}},downLabel:{type:String,default(){return"Down"}},maxVisibleItems:{type:Number,default(){return 5}}},emits:["select","refresh"],data(){return{currentFsItem:this.fsItem||z(this.fileSystem.root),fsItems:[],currentIndex:0}},computed:{disableds(){return{back:!this.currentFsItem.parent,up:this.currentIndex-1<0,down:this.currentIndex+1>this.fsItems.length-this.maxVisibleItems}},currentPath(){return this.model[this.name]},items(){const t=this.fsItems.slice(this.currentIndex,this.currentIndex+this.maxVisibleItems).map(e=>({label:e.id,value:e.getPath()})).concat(Array(Math.max(this.maxVisibleItems-this.fsItems.length,0)).fill({label:"&nbsp;",disabled:!0}));return this.fsItems.length<1&&(t[Math.floor(t.length/2)]={label:"Empty",disabled:!0}),t}},watch:{async currentPath(){this.currentFsItem=z(await this.fileSystem.get(this.model[this.name])),this.currentFsItem instanceof Y&&(this.fsItems=Array.from((await this.currentFsItem.getItems()).values()).map(z),this.currentIndex=0),this.$emit("select",this.currentFsItem)}},async mounted(){this.fsItems=Array.from((await this.currentFsItem.getItems()).values()).map(z),this.$nextTick(()=>{this.$emit("refresh",{reset:!0,resize:!1,scroll:!1})})},methods:{onClicBack(){this.currentFsItem instanceof Y?this.model[this.name]=this.currentFsItem.parent.getPath():this.model[this.name]=this.currentFsItem.parent.parent.getPath()},onClickUp(){this.currentIndex=Math.max(this.currentIndex-1,0)},onClickDown(){this.currentIndex=Math.min(this.currentIndex+1,this.fsItems.length-this.maxVisibleItems)}}},nf={class:"wb-module-files-atoms-file-select"};function rf(t,e,n,r,i,s){const a=R("wb-item-select"),o=R("wb-button"),l=R("wb-button-wrapper");return y(),W("div",nf,[S("div",null,[C(a,{title:null,items:s.items,name:n.name,model:n.model},null,8,["items","name","model"])]),S("div",null,[C(l,{align:"outer",full:"",direction:"vertical"},{default:X(()=>[C(o,{"style-type":"secondary",label:n.backLabel,disabled:s.disableds.back,onClick:s.onClicBack},null,8,["label","disabled","onClick"]),C(o,{"style-type":"secondary",label:n.upLabel,disabled:s.disableds.up,onClick:s.onClickUp},null,8,["label","disabled","onClick"]),n.downLabel?(y(),U(o,{key:0,"style-type":"secondary",label:n.downLabel,disabled:s.disableds.down,onClick:s.onClickDown},null,8,["label","disabled","onClick"])):B("",!0)]),_:1})])])}const pl=j(tf,[["render",rf],["__scopeId","data-v-78b3680c"]]);const sf={components:{WbEnvAtomFormField:Jn},props:{model:{type:[Array,Object],default(){return{}}},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:"Placeholder"},pattern:{type:String,default:null},readonly:{type:Boolean,default:!1},min:{type:Number,default:null},max:{type:Number,default:null},disabled:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!1}},computed:{currentModel:{get(){return this.name?this.model[this.name]:this.model.value},set(t){this.name?this.model[this.name]=t:this.model.value=t}},styleClasses(){return{["type-"+this.type]:!0}},input(){return{name:this.name,type:this.type,placeholder:this.placeholder,pattern:this.pattern,min:this.min,max:this.max,readonly:this.readonly,disabled:this.disabled,autocomplete:this.autocomplete?"on":"off"}}}};function af(t,e,n,r,i,s){const a=R("wb-env-atom-form-field");return y(),U(a,V({tag:"div",class:"wb-env-atom-form-textbox"},t.$attrs,{class:s.styleClasses}),{default:X(()=>[ln(S("input",V({ref:"input","onUpdate:modelValue":e[0]||(e[0]=o=>s.currentModel=o)},s.input),null,16),[[ta,s.currentModel]])]),_:1},16,["class"])}const Ei=j(sf,[["render",af],["__scopeId","data-v-3ea2af39"]]);const of={components:{WbForm:Qn,WbButton:Ct,WbButtonWrapper:Nt,WbFormFieldTextbox:Ei,WbFileSelect:pl},props:{...mt,fsItem:{type:Object,default(){return null}},id:{type:String,default(){return null}},model:{type:Object,default(){return Me({path:null,filename:null,file:null})}}},emits:[...ft,"close"],setup(t,e){return ht(t,e)},data(){return{filesModule:z(this.core.modules.files),cancelLabel:"Cancel",saveLabel:"Save",fields:{path:{name:"path",label:null,placeholder:"Path…"},filesSelect:{title:null,name:"item"},filename:{name:"filename",label:null,placeholder:"Filename…"}},currentFsItem:this.fsItem||z(this.core.modules.files.fs.root)}},computed:{fileSelectFsItem(){return this.fsItem||z(this.core.modules.files.fs.root)},isLocked(){return this.currentFsItem?this.currentFsItem.locked:!1},saveDisabled(){return!this.model.filename}},mounted(){this.id&&(this.model.filename=this.id)},methods:{onSelect(t){this.currentFsItem=t,t instanceof Y?this.model.path=t.getPath():(this.model.path=t.getBase(),this.model.filename=t.id)},onClickCancel(){this.$emit("close")},onSubmit(t){const e=ha(this.model.path,this.model.filename);this.$emit("close",e)}}},lf={class:"wb-module-files-save"};function cf(t,e,n,r,i,s){const a=R("wb-form-field-textbox"),o=R("wb-file-select"),l=R("wb-button"),u=R("wb-button-wrapper"),d=R("wb-form");return y(),W("div",lf,[C(d,{onSubmit:s.onSubmit},{default:X(()=>[C(a,V(i.fields.path,{model:n.model,readonly:""}),null,16,["model"]),C(o,{"file-system":i.filesModule.fileSystem,"fs-item":s.fileSelectFsItem,model:n.model,name:"file",onSelect:s.onSelect},null,8,["file-system","fs-item","model","onSelect"]),C(a,V(i.fields.filename,{model:n.model}),null,16,["model"]),C(u,{align:"outer",full:""},{default:X(()=>[i.cancelLabel?(y(),U(l,{key:0,"style-type":"secondary",label:i.cancelLabel,onClick:s.onClickCancel},null,8,["label","onClick"])):B("",!0),i.saveLabel?(y(),U(l,{key:1,"style-type":"primary",label:i.saveLabel,type:"submit",disabled:s.isLocked||s.saveDisabled},null,8,["label","disabled"])):B("",!0)]),_:1})]),_:1},8,["onSubmit"])])}const uf=j(of,[["render",cf],["__scopeId","data-v-6b8596fc"]]);const df={components:{WbForm:Qn,WbButton:Ct,WbButtonWrapper:Nt,WbFormFieldTextbox:Ei,WbFileSelect:pl},props:{...mt,fsItem:{type:Object,default(){return null}},model:{type:Object,default(){return Me({path:null})}}},emits:[...ft,"close"],setup(t,e){return ht(t,e)},data(){return{filesModule:z(this.core.modules.files),cancelLabel:"Cancel",openLabel:"Open",fields:{path:{name:"path",label:null,placeholder:"Path…"},fileSelect:{name:"path"},filename:{name:"filename",label:null,placeholder:"Filename…"}},currentFsItem:this.fsItem||z(this.core.modules.files.fs.root)}},computed:{isItemContainer(){return this.currentFsItem instanceof Y},fileSelectFsItem(){return this.fsItem||z(this.core.modules.files.fs.root)}},methods:{onSelect(t){this.currentFsItem=z(t),t instanceof Y&&(this.model.path=t.getPath())},onClickCancel(){this.$emit("close")},onSubmit(t){this.$emit("close",this.model.path)}}},hf={class:"wb-module-files-open"};function mf(t,e,n,r,i,s){const a=R("wb-form-field-textbox"),o=R("wb-file-select"),l=R("wb-button"),u=R("wb-button-wrapper"),d=R("wb-form");return y(),W("div",hf,[C(d,{onSubmit:s.onSubmit},{default:X(()=>[C(a,V(i.fields.path,{model:n.model,readonly:""}),null,16,["model"]),C(o,V(i.fields.fileSelect,{"file-system":i.filesModule.fileSystem,"fs-item":s.fileSelectFsItem,model:n.model,onSelect:s.onSelect}),null,16,["file-system","fs-item","model","onSelect"]),C(u,{align:"outer",full:""},{default:X(()=>[i.cancelLabel?(y(),U(l,{key:0,"style-type":"secondary",label:i.cancelLabel,onClick:s.onClickCancel},null,8,["label","onClick"])):B("",!0),i.openLabel?(y(),U(l,{key:1,"style-type":"primary",label:i.openLabel,type:"submit",disabled:s.isItemContainer},null,8,["label","disabled"])):B("",!0)]),_:1})]),_:1},8,["onSubmit"])])}const ff=j(df,[["render",mf],["__scopeId","data-v-21e65483"]]);var pf=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Qa=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ks=(t,e,n)=>(pf(t,e,"access private method"),n);function xa(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var dn=xa();function bl(t){dn=t}var gl=/[&<>"']/,bf=new RegExp(gl.source,"g"),wl=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,gf=new RegExp(wl.source,"g"),wf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ja=t=>wf[t];function de(t,e){if(e){if(gl.test(t))return t.replace(bf,Ja)}else if(wl.test(t))return t.replace(gf,Ja);return t}var _f=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function _l(t){return t.replace(_f,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}var yf=/(^|[^\[])\^/g;function $(t,e){t=typeof t=="string"?t:t.source,e=e||"";const n={replace:(r,i)=>(i=typeof i=="object"&&"source"in i?i.source:i,i=i.replace(yf,"$1"),t=t.replace(r,i),n),getRegex:()=>new RegExp(t,e)};return n}var vf=/[^\w:]/g,xf=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function eo(t,e,n){if(t){let r;try{r=decodeURIComponent(_l(n)).replace(vf,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!xf.test(n)&&(n=kf(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var Ri={},Ef=/^[^:]+:\/*[^/]*$/,Sf=/^([^:]+:)[\s\S]*$/,If=/^([^:]+:\/*[^/]*)[\s\S]*$/;function kf(t,e){Ri[" "+t]||(Ef.test(t)?Ri[" "+t]=t+"/":Ri[" "+t]=Li(t,"/",!0)),t=Ri[" "+t];const n=t.indexOf(":")===-1;return e.substring(0,2)==="//"?n?e:t.replace(Sf,"$1")+e:e.charAt(0)==="/"?n?e:t.replace(If,"$1")+e:t+e}var Yi={exec:()=>null};function to(t,e){const n=t.replace(/\|/g,(s,a,o)=>{let l=!1,u=a;for(;--u>=0&&o[u]==="\\";)l=!l;return l?"|":" |"}),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function Li(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r;){const s=t.charAt(r-i-1);if(s===e&&!n)i++;else if(s!==e&&n)i++;else break}return t.slice(0,r-i)}function Tf(t,e){if(t.indexOf(e[1])===-1)return-1;const n=t.length;let r=0,i=0;for(;i<n;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return-1}function Af(t,e){!t||t.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(t.sanitize||t.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(t.highlight||t.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),t.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),t.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),t.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),t.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(t.headerIds||t.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function no(t,e,n,r){const i=e.href,s=e.title?de(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const o={type:"link",raw:n,href:i,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,o}return{type:"image",raw:n,href:i,title:s,text:de(a)}}function Of(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const r=n[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[a]=s;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}var Xi=class{constructor(t){this.options=t||dn}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Li(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=Of(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(/#$/.test(n)){const r=Li(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const n=e[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(n);return this.lexer.state.top=r,{type:"blockquote",raw:e[0],tokens:i,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n,r,i,s,a,o,l,u,d,m,h,f,w=e[1].trim();const _=w.length>1,E={type:"list",raw:"",ordered:_,start:_?+w.slice(0,-1):"",loose:!1,items:[]};w=_?`\\d{1,9}\\${w.slice(-1)}`:`\\${w}`,this.options.pedantic&&(w=_?w:"[*+-]");const L=new RegExp(`^( {0,3}${w})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(f=!1,!(!(e=L.exec(t))||this.rules.block.hr.test(t)));){if(n=e[0],t=t.substring(n.length),u=e[2].split(`
`,1)[0].replace(/^\t+/,P=>" ".repeat(3*P.length)),d=t.split(`
`,1)[0],this.options.pedantic?(s=2,h=u.trimLeft()):(s=e[2].search(/[^ ]/),s=s>4?1:s,h=u.slice(s),s+=e[1].length),o=!1,!u&&/^ *$/.test(d)&&(n+=d+`
`,t=t.substring(d.length+1),f=!0),!f){const P=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),ne=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),H=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),oe=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;t&&(m=t.split(`
`,1)[0],d=m,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(H.test(d)||oe.test(d)||P.test(d)||ne.test(t)));){if(d.search(/[^ ]/)>=s||!d.trim())h+=`
`+d.slice(s);else{if(o||u.search(/[^ ]/)>=4||H.test(u)||oe.test(u)||ne.test(u))break;h+=`
`+d}!o&&!d.trim()&&(o=!0),n+=m+`
`,t=t.substring(m.length+1),u=d.slice(s)}}E.loose||(l?E.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(h),r&&(i=r[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),E.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:h}),E.raw+=n}E.items[E.items.length-1].raw=n.trimRight(),E.items[E.items.length-1].text=h.trimRight(),E.raw=E.raw.trimRight();const O=E.items.length;for(a=0;a<O;a++)if(this.lexer.state.top=!1,E.items[a].tokens=this.lexer.blockTokens(E.items[a].text,[]),!E.loose){const P=E.items[a].tokens.filter(H=>H.type==="space"),ne=P.length>0&&P.some(H=>/\n.*\n/.test(H.raw));E.loose=ne}if(E.loose)for(a=0;a<O;a++)E.items[a].loose=!0;return E}}html(t){const e=this.rules.block.html.exec(t);if(e){const n={type:"html",block:!0,raw:e[0],pre:!this.options.sanitizer&&(e[1]==="pre"||e[1]==="script"||e[1]==="style"),text:e[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(e[0]):de(e[0]),i=n;i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return n}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:i}}}table(t){const e=this.rules.block.table.exec(t);if(e){const n={type:"table",header:to(e[1]).map(r=>({text:r})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=e[0];let r=n.align.length,i,s,a,o;for(i=0;i<r;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(r=n.rows.length,i=0;i<r;i++)n.rows[i]=to(n.rows[i],n.header.length).map(l=>({text:l}));for(r=n.header.length,s=0;s<r;s++)n.header[s].tokens=this.lexer.inline(n.header[s].text);for(r=n.rows.length,s=0;s<r;s++)for(o=n.rows[s],a=0;a<o.length;a++)o[a].tokens=this.lexer.inline(o[a].text);return n}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:de(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):de(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const s=Li(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=Tf(e[2],"()");if(s>-1){const o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),no(e,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:i&&i.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let r=(n[2]||n[1]).replace(/\s+/g," ");if(r=e[r.toLowerCase()],!r){const i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return no(n,r,n[0],this.lexer)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrong.lDelim.exec(t);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=r[0].length-1;let a,o,l=s,u=0;const d=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,e=e.slice(-1*t.length+s);(r=d.exec(e))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(o=a.length,r[3]||r[4]){l+=o;continue}else if((r[5]||r[6])&&s%3&&!((s+o)%3)){u+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+u);const m=t.slice(0,s+r.index+o+1);if(Math.min(s,o)%2){const f=m.slice(1,-1);return{type:"em",raw:m,text:f,tokens:this.lexer.inlineTokens(f)}}const h=m.slice(2,-2);return{type:"strong",raw:m,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(/\n/g," ");const r=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return r&&i&&(n=n.substring(1,n.length-1)),n=de(n,!0),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){const n=this.rules.inline.autolink.exec(t);if(n){let r,i;return n[2]==="@"?(r=de(this.options.mangle?e(n[1]):n[1]),i="mailto:"+r):(r=de(n[1]),i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(t,e){let n;if(n=this.rules.inline.url.exec(t)){let r,i;if(n[2]==="@")r=de(this.options.mangle?e(n[0]):n[0]),i="mailto:"+r;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(s!==n[0]);r=de(n[0]),n[1]==="www."?i="http://"+n[0]:i=n[0]}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t,e){const n=this.rules.inline.text.exec(t);if(n){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):de(n[0]):n[0]:r=de(this.options.smartypants?e(n[0]):n[0]),{type:"text",raw:n[0],text:r}}}},D={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Yi,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};D._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;D._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;D.def=$(D.def).replace("label",D._label).replace("title",D._title).getRegex();D.bullet=/(?:[*+-]|\d{1,9}[.)])/;D.listItemStart=$(/^( *)(bull) */).replace("bull",D.bullet).getRegex();D.list=$(D.list).replace(/bull/g,D.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+D.def.source+")").getRegex();D._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";D._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;D.html=$(D.html,"i").replace("comment",D._comment).replace("tag",D._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();D.lheading=$(D.lheading).replace(/bull/g,D.bullet).getRegex();D.paragraph=$(D._paragraph).replace("hr",D.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",D._tag).getRegex();D.blockquote=$(D.blockquote).replace("paragraph",D.paragraph).getRegex();D.normal={...D};D.gfm={...D.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};D.gfm.table=$(D.gfm.table).replace("hr",D.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",D._tag).getRegex();D.gfm.paragraph=$(D._paragraph).replace("hr",D.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",D.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",D._tag).getRegex();D.pedantic={...D.normal,html:$(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",D._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Yi,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:$(D.normal._paragraph).replace("hr",D.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",D.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};var I={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Yi,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Yi,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};I._punctuation="\\p{P}$+<=>`^|~";I.punctuation=$(I.punctuation,"u").replace(/punctuation/g,I._punctuation).getRegex();I.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;I.anyPunctuation=/\\[punct]/g;I._escapes=/\\([punct])/g;I._comment=$(D._comment).replace("(?:-->|$)","-->").getRegex();I.emStrong.lDelim=$(I.emStrong.lDelim,"u").replace(/punct/g,I._punctuation).getRegex();I.emStrong.rDelimAst=$(I.emStrong.rDelimAst,"gu").replace(/punct/g,I._punctuation).getRegex();I.emStrong.rDelimUnd=$(I.emStrong.rDelimUnd,"gu").replace(/punct/g,I._punctuation).getRegex();I.anyPunctuation=$(I.anyPunctuation,"gu").replace(/punct/g,I._punctuation).getRegex();I._escapes=$(I._escapes,"gu").replace(/punct/g,I._punctuation).getRegex();I._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;I._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;I.autolink=$(I.autolink).replace("scheme",I._scheme).replace("email",I._email).getRegex();I._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;I.tag=$(I.tag).replace("comment",I._comment).replace("attribute",I._attribute).getRegex();I._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;I._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;I._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;I.link=$(I.link).replace("label",I._label).replace("href",I._href).replace("title",I._title).getRegex();I.reflink=$(I.reflink).replace("label",I._label).replace("ref",D._label).getRegex();I.nolink=$(I.nolink).replace("ref",D._label).getRegex();I.reflinkSearch=$(I.reflinkSearch,"g").replace("reflink",I.reflink).replace("nolink",I.nolink).getRegex();I.normal={...I};I.pedantic={...I.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:$(/^!?\[(label)\]\((.*?)\)/).replace("label",I._label).getRegex(),reflink:$(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",I._label).getRegex()};I.gfm={...I.normal,escape:$(I.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};I.gfm.url=$(I.gfm.url,"i").replace("email",I.gfm._extended_email).getRegex();I.breaks={...I.gfm,br:$(I.br).replace("{2,}","*").getRegex(),text:$(I.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function Rf(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function ro(t){let e="",n,r;const i=t.length;for(n=0;n<i;n++)r=t.charCodeAt(n),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}var ot=class{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||dn,this.options.tokenizer=this.options.tokenizer||new Xi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:D.normal,inline:I.normal};this.options.pedantic?(e.block=D.pedantic,e.inline=I.pedantic):this.options.gfm&&(e.block=D.gfm,this.options.breaks?e.inline=I.breaks:e.inline=I.gfm),this.tokenizer.rules=e}static get rules(){return{block:D,inline:I}}static lex(t,e){return new ot(e).lex(t)}static lexInline(t,e){return new ot(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let e;for(;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,o,l)=>o+"    ".repeat(l.length));let n,r,i,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(n=a.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))){if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length),n.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(i=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const o=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},o),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(i=t.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){r=e[e.length-1],s&&r.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n),s=i.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n,r,i,s=t,a,o,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(o||(l=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(n=u.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))){if(n=this.tokenizer.escape(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.tag(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(n=this.tokenizer.link(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(n.raw.length),r=e[e.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(n=this.tokenizer.emStrong(t,s,l)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.codespan(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.br(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.del(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.autolink(t,ro)){t=t.substring(n.raw.length),e.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(t,ro))){t=t.substring(n.raw.length),e.push(n);continue}if(i=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=t.slice(1);let m;this.options.extensions.startInline.forEach(h=>{m=h.call({lexer:this},d),typeof m=="number"&&m>=0&&(u=Math.min(u,m))}),u<1/0&&u>=0&&(i=t.substring(0,u+1))}if(n=this.tokenizer.inlineText(i,Rf)){t=t.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(l=n.raw.slice(-1)),o=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return e}},Ki=class{constructor(t){this.options=t||dn}code(t,e,n){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const i=this.options.highlight(t,r);i!=null&&i!==t&&(n=!0,t=i)}return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+de(r)+'">'+(n?t:de(t,!0))+`</code></pre>
`:"<pre><code>"+(n?t:de(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,e){return t}heading(t,e,n,r){if(this.options.headerIds){const i=this.options.headerPrefix+r.slug(n);return`<h${e} id="${i}">${t}</h${e}>
`}return`<h${e}>${t}</h${e}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,e,n){const r=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+r+i+`>
`+t+"</"+r+`>
`}listitem(t,e,n){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){const n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,n){if(t=eo(this.options.sanitize,this.options.baseUrl,t),t===null)return n;let r='<a href="'+t+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){if(t=eo(this.options.sanitize,this.options.baseUrl,t),t===null)return n;let r=`<img src="${t}" alt="${n}"`;return e&&(r+=` title="${e}"`),r+=this.options.xhtml?"/>":">",r}text(t){return t}},Ea=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}},Sa=class{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let n=t,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[t];do r++,n=t+"-"+r;while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=r,this.seen[n]=0),n}slug(t,e={}){const n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)}},lt=class{constructor(t){this.options=t||dn,this.options.renderer=this.options.renderer||new Ki,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ea,this.slugger=new Sa}static parse(t,e){return new lt(e).parse(t)}static parseInline(t,e){return new lt(e).parseInline(t)}parse(t,e=!0){let n="",r,i,s,a,o,l,u,d,m,h,f,w,_,E,L,O,P,ne,H;const oe=t.length;for(r=0;r<oe;r++){if(h=t[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(H=this.options.extensions.renderers[h.type].call({parser:this},h),H!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){n+=H||"";continue}switch(h.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(h.tokens),h.depth,_l(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(h.text,h.lang,!!h.escaped);continue}case"table":{for(d="",u="",a=h.header.length,i=0;i<a;i++)u+=this.renderer.tablecell(this.parseInline(h.header[i].tokens),{header:!0,align:h.align[i]});for(d+=this.renderer.tablerow(u),m="",a=h.rows.length,i=0;i<a;i++){for(l=h.rows[i],u="",o=l.length,s=0;s<o;s++)u+=this.renderer.tablecell(this.parseInline(l[s].tokens),{header:!1,align:h.align[s]});m+=this.renderer.tablerow(u)}n+=this.renderer.table(d,m);continue}case"blockquote":{m=this.parse(h.tokens),n+=this.renderer.blockquote(m);continue}case"list":{for(f=h.ordered,w=h.start,_=h.loose,a=h.items.length,m="",i=0;i<a;i++)L=h.items[i],O=L.checked,P=L.task,E="",L.task&&(ne=this.renderer.checkbox(!!O),_?L.tokens.length>0&&L.tokens[0].type==="paragraph"?(L.tokens[0].text=ne+" "+L.tokens[0].text,L.tokens[0].tokens&&L.tokens[0].tokens.length>0&&L.tokens[0].tokens[0].type==="text"&&(L.tokens[0].tokens[0].text=ne+" "+L.tokens[0].tokens[0].text)):L.tokens.unshift({type:"text",text:ne}):E+=ne),E+=this.parse(L.tokens,_),m+=this.renderer.listitem(E,P,!!O);n+=this.renderer.list(m,f,w);continue}case"html":{n+=this.renderer.html(h.text,h.block);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(m=h.tokens?this.parseInline(h.tokens):h.text;r+1<oe&&t[r+1].type==="text";)h=t[++r],m+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);n+=e?this.renderer.paragraph(m):m;continue}default:{const Ii='Token with "'+h.type+'" type was not found.';if(this.options.silent)return console.error(Ii),"";throw new Error(Ii)}}}return n}parseInline(t,e){e=e||this.renderer;let n="",r,i,s;const a=t.length;for(r=0;r<a;r++){if(i=t[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]&&(s=this.options.extensions.renderers[i.type].call({parser:this},i),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))){n+=s||"";continue}switch(i.type){case"escape":{n+=e.text(i.text);break}case"html":{n+=e.html(i.text);break}case"link":{n+=e.link(i.href,i.title,this.parseInline(i.tokens,e));break}case"image":{n+=e.image(i.href,i.title,i.text);break}case"strong":{n+=e.strong(this.parseInline(i.tokens,e));break}case"em":{n+=e.em(this.parseInline(i.tokens,e));break}case"codespan":{n+=e.codespan(i.text);break}case"br":{n+=e.br();break}case"del":{n+=e.del(this.parseInline(i.tokens,e));break}case"text":{n+=e.text(i.text);break}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}},gr=class{constructor(t){this.options=t||dn}preprocess(t){return t}postprocess(t){return t}};gr.passThroughHooks=new Set(["preprocess","postprocess"]);var Pi,qs,Ia,yl,Df=class{constructor(...t){Qa(this,Pi),Qa(this,Ia),this.defaults=xa(),this.options=this.setOptions,this.parse=Ks(this,Pi,qs).call(this,ot.lex,lt.parse),this.parseInline=Ks(this,Pi,qs).call(this,ot.lexInline,lt.parseInline),this.Parser=lt,this.parser=lt.parse,this.Renderer=Ki,this.TextRenderer=Ea,this.Lexer=ot,this.lexer=ot.lex,this.Tokenizer=Xi,this.Slugger=Sa,this.Hooks=gr,this.use(...t)}walkTokens(t,e){let n=[];for(const r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{for(const i of r.header)n=n.concat(this.walkTokens(i.tokens,e));for(const i of r.rows)for(const s of i)n=n.concat(this.walkTokens(s.tokens,e));break}case"list":{n=n.concat(this.walkTokens(r.items,e));break}default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[r.type]?this.defaults.extensions.childTokens[r.type].forEach(i=>{n=n.concat(this.walkTokens(r[i],e))}):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,e)))}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=e.renderers[i.name];s?e.renderers[i.name]=function(...a){let o=i.renderer.apply(this,a);return o===!1&&(o=s.apply(this,a)),o}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),n.renderer){const i=this.defaults.renderer||new Ki(this.defaults);for(const s in n.renderer){const a=i[s];i[s]=(...o)=>{let l=n.renderer[s].apply(i,o);return l===!1&&(l=a.apply(i,o)),l}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new Xi(this.defaults);for(const s in n.tokenizer){const a=i[s];i[s]=(...o)=>{let l=n.tokenizer[s].apply(i,o);return l===!1&&(l=a.apply(i,o)),l}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new gr;for(const s in n.hooks){const a=i[s];gr.passThroughHooks.has(s)?i[s]=o=>{if(this.defaults.async)return Promise.resolve(n.hooks[s].call(i,o)).then(u=>a.call(i,u));const l=n.hooks[s].call(i,o);return a.call(i,l)}:i[s]=(...o)=>{let l=n.hooks[s].apply(i,o);return l===!1&&(l=a.apply(i,o)),l}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens;r.walkTokens=function(s){let a=[];return a.push(n.walkTokens.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}};Pi=new WeakSet;qs=function(t,e){return(n,r,i)=>{typeof r=="function"&&(i=r,r=null);const s={...r},a={...this.defaults,...s},o=Ks(this,Ia,yl).call(this,!!a.silent,!!a.async,i);if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(Af(a,i),a.hooks&&(a.hooks.options=a),i){const l=a.highlight;let u;try{a.hooks&&(n=a.hooks.preprocess(n)),u=t(n,a)}catch(h){return o(h)}const d=h=>{let f;if(!h)try{a.walkTokens&&this.walkTokens(u,a.walkTokens),f=e(u,a),a.hooks&&(f=a.hooks.postprocess(f))}catch(w){h=w}return a.highlight=l,h?o(h):i(null,f)};if(!l||l.length<3||(delete a.highlight,!u.length))return d();let m=0;this.walkTokens(u,h=>{h.type==="code"&&(m++,setTimeout(()=>{l(h.text,h.lang,(f,w)=>{if(f)return d(f);w!=null&&w!==h.text&&(h.text=w,h.escaped=!0),m--,m===0&&d()})},0))}),m===0&&d();return}if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(l=>t(l,a)).then(l=>a.walkTokens?Promise.all(this.walkTokens(l,a.walkTokens)).then(()=>l):l).then(l=>e(l,a)).then(l=>a.hooks?a.hooks.postprocess(l):l).catch(o);try{a.hooks&&(n=a.hooks.preprocess(n));const l=t(n,a);a.walkTokens&&this.walkTokens(l,a.walkTokens);let u=e(l,a);return a.hooks&&(u=a.hooks.postprocess(u)),u}catch(l){return o(l)}}};Ia=new WeakSet;yl=function(t,e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+de(r.message+"",!0)+"</pre>";if(e)return Promise.resolve(i);if(n){n(null,i);return}return i}if(e)return Promise.reject(r);if(n){n(r);return}throw r}};var on=new Df;function F(t,e,n){return on.parse(t,e,n)}F.options=F.setOptions=function(t){return on.setOptions(t),F.defaults=on.defaults,bl(F.defaults),F};F.getDefaults=xa;F.defaults=dn;F.use=function(...t){return on.use(...t),F.defaults=on.defaults,bl(F.defaults),F};F.walkTokens=function(t,e){return on.walkTokens(t,e)};F.parseInline=on.parseInline;F.Parser=lt;F.parser=lt.parse;F.Renderer=Ki;F.TextRenderer=Ea;F.Lexer=ot;F.lexer=ot.lex;F.Tokenizer=Xi;F.Slugger=Sa;F.Hooks=gr;F.parse=F;F.options;F.setOptions;F.use;F.walkTokens;F.parseInline;lt.parse;ot.lex;const Wf=["innerHTML"],Cf={__name:"Markdown",props:{content:{type:String,required:!1,default:"# Headline  <p>Hello World</p>"},fontFamily:{type:String,required:!1,default:null}},setup(t){const e=t;F.use({mangle:!1});const n=ho(()=>F(e.content));return(r,i)=>(y(),W("div",{class:"wb-env-atom-markdown",innerHTML:n.value},null,8,Wf))}},vl=j(Cf,[["__scopeId","data-v-9d25c83d"]]);const Nf={components:{WbMarkdown:vl},props:{...mt,type:{type:String,default:null},content:{type:[String,Array],default:null}},emits:[...ft],setup(t,e){return ht(t,e)},data(){return{lines:[]}},mounted(){this.type==="basic"&&window.requestAnimationFrame(()=>{this.lines=[],this.core.modules.parser.parseBasic(this.content,async(t,e)=>{const n=await this.core.executeCommand(t,e);return e.message&&this.lines.push(Q(e.message)),n})})}},Lf={class:"wb-module-files-preview"},Pf={key:0,class:"basic"},Mf=["innerHTML"],Ff=["src"];function $f(t,e,n,r,i,s){const a=R("wb-markdown");return y(),W("div",Lf,[n.type==="basic"?(y(),W("ul",Pf,[(y(!0),W(At,null,Ot(i.lines,(o,l)=>(y(),W("li",{key:l},Te(o),1))),128))])):B("",!0),n.type==="markdown"?(y(),U(a,{key:1,content:n.content},null,8,["content"])):B("",!0),n.type==="html"?(y(),W("div",{key:2,innerHTML:n.content},null,8,Mf)):B("",!0),n.type==="image"?(y(),W("img",{key:3,src:n.content},null,8,Ff)):B("",!0)])}const zf=j(Nf,[["render",$f],["__scopeId","data-v-9dd8ed37"]]);async function Bf(t,e,n){const r=await t.executeCommand(`exist "${e}"`);let i=!1;r&&(i=await t.executeCommand('openDialog "File exist, overwrite?" --confirm'));const s=[`makefile "${e}"`];return n&&s.push(`--data="${n}"`),i?s.push("--override"):s.push("--ignore"),t.executeCommand(s.join(" "))}async function Vf(t,e){const n=await t.modules.files.fs.get(e),r=await t.executeCommand(`readfile "${e}"`);return{fsItem:n,value:r}}const Uf=({module:t,core:e})=>{const n=e.modules.windows,{fileSystem:r}=t;return[{name:"openPreview",args:[new v({index:0,name:"path",description:"Path to the file"}),new v({name:"maximized",description:"If set, window is maximized."})],async action({path:i,maximized:s}){const a=await r.get(i),{type:o,content:l,openMaximized:u}=a.data;o==="basic"&&!a.data[Ni.HAS_WINDOW_OUTPUT]?await e.modules.parser.parseBasic(l,async(d,m)=>await e.executeCommand(d,m)):n.addWindow({title:a.name,component:zf,componentData:{type:o,content:l},options:{scale:!0,scrollX:!0,scrollY:!0},layout:{size:k(420,360)}},{full:u||s||!1})}},{name:"saveFileDialog",args:[new v({index:0,name:"data",description:"File Content"}),new v({index:1,name:"id",description:"File Id"}),new v({index:2,name:"extension",description:"File Extension"})],action({data:i,id:s,extension:a}){const o=n.addWindow({title:"Save File",component:uf,componentData:{fsItem:z(r.root),id:s},options:{scale:!1,scrollX:!1,scrollY:!1}});return new Promise(l=>{o.events.pipe(xr(({name:u})=>u==="close")).subscribe(async({name:u,value:d})=>{if(d){const m=Bi(d,a);d=await Bf(e,m,i)}l(d)})})}},{name:"openFileDialog",args:[],action({data:i}){const s=n.addWindow({title:"Open File",component:ff,componentData:{fsItem:z(r.root)},options:{scale:!1,scrollX:!1,scrollY:!1}});return new Promise(a=>{s.events.pipe(xr(({name:o})=>o==="close")).subscribe(({name:o,value:l})=>{l&&(l=Vf(e,l)),a(l)})})}},{name:"fileinfo",description:"Get info from File or Directory",args:[new v({index:0,name:"path",description:"Path to the file"}),new v({index:1,name:"name",description:"Name from the Info"}),new v({index:2,name:["list","ls"],flag:!0,description:"List all Infos"})],async action({path:i,name:s,list:a},o){const l=await r.itemMeta(i,s,a);if(Array.isArray(l)){const u=new en;u.addColumn({value:"Name",align:"left",minWidth:20}),u.addColumn({value:"Value",align:"left",minWidth:20}),u.addRow(l.map(d=>{let m=d.value;return Array.isArray(m)&&(m=m.join(" ")),[d.name,m]})),o.message([u])}return l}},{name:["info","i"],args:[new v({index:0,name:"path",description:"Path to the file"})],async action({path:i},s){let a=r.root;i&&(a=await r.get(i)),a instanceof Y||(a=a.parent);let o=await a.getItems();const l=new en;l.addColumn([{value:"Unit",align:"left",minWidth:8},{value:"Size",align:"right",minWidth:6},{value:"Used",align:"right",minWidth:6},{value:"Free",align:"right",minWidth:6},{value:"Full",minWidth:4},{value:"Errs",align:"center",minWidth:4},{value:"Status",align:"center",minWidth:10},{value:"Name",align:"right",minWidth:14}]),o=Array.from(o.values()).filter(d=>d instanceof dt),l.addRow(o.map(d=>{let m=0;return(d.size>0||d.maxSize>0)&&(m=parseInt(d.size/d.maxSize*100)),[`${d.id}:`,fr(d.maxSize),fr(d.size),fr(d.maxSize-d.size),`${m}%`,"0",d.locked?"Read":"Read/Write",`${d.name||""}`]}));const u=["","Mounted disks:",l,"","Volumes available:"];o.forEach(d=>{u.push(`${d.name}: [Mounted]`)}),u.push(""),s.message(u)}},{name:["list","ls"],args:[new v({index:0,name:"path",description:"Path to the file"}),new v({name:"dir-size",flag:!0,description:"Show Directory Size."})],async action({path:i,dirSize:s},a){let o=r.currentItem;i&&(o=await r.get(i));const l=Array.from((await o.getItems()).values()),u=new en;u.addColumn({value:"Name",align:"left",minWidth:13}),u.addColumn({value:"Size",align:"right",minWidth:8}),u.addColumn({value:"Access",align:"center",minWidth:12}),u.addColumn({value:"Date / Time",align:"center",minWidth:18}),u.addRow(l.reduce((h,f)=>{let w;f instanceof Y&&!s?w="DIR":w=$s(fr(f.size),8,!0,"0");const _=f.isLocked()?"Read":"Read/Write";return h.push([`${f.id}:`,w,_,f.createdDate?zs("D-mm-y H:I:S",f.createdDate):""]),h},[]));const d=l.reduce((h,f)=>(f instanceof Rt&&h++,h),0),m=l.reduce((h,f)=>(h+=f.size,h),0);return a.message([u,`${l.length} files - ${d} directories - ${m} blocks used`]),Promise.resolve()}}]};const jf={components:{WbForm:Qn,WbButton:Ct,WbButtonWrapper:Nt,WbFormFieldTextbox:Ei,WbFormFieldDropdown:ga,WbFormFieldCheckboxGroup:ul},props:{...mt,fsItem:{type:Object,default(){return null}},model:{type:Object,default(){return{actions:{save(){}},id:null,name:null,symbol:null,visible:!1}}}},emits:[...ft,"close"],setup(t,e){return ht(t,e)},data(){const t=this.fsItem.locked;return{cancelLabel:"Cancel",saveLabel:"Save",fields:{id:{disabled:t,label:"Id",name:"id"},name:{disabled:t,label:"Name",name:"name"},checkboxes:{disabled:t,label:"Others",name:null,items:[{label:"Symbol Visible",name:T.VISIBLE},{label:"Ignore Symbol Rearrange ",name:T.IGNORE_SYMBOL_REARRANGE}]},windowSettings:{disabled:t,label:"Window Settings",name:null,items:[{label:"Has Scale ?",name:T.WINDOW_SCALE},{label:"Has Scroll-X ?",name:T.WINDOW_SCROLL_X},{label:"Has Scroll-Y ?",name:T.WINDOW_SCROLL_Y},{label:"Is Full-Size ?",name:T.WINDOW_FULL_SIZE},{label:"Sort Symbols (Directory)",name:T.WINDOW_SYMBOL_REARRANGE}]},symbol:{disabled:t,label:"Symbol",name:"symbol",options:Object.keys(x).map(e=>({title:Go(e),value:x[String(e)]}))}}}},methods:{onClickCancel(){this.$emit("close")},async onSubmit(){this.locked||await this.model.actions.save(this.model,this.fsItem),this.$emit("close")}}},Gf={class:"wb-module-files-edit"},Hf={class:"cols"},Yf={class:"col-2"},Xf={class:"col-2"};function Kf(t,e,n,r,i,s){const a=R("wb-form-field-textbox"),o=R("wb-form-field-dropdown"),l=R("wb-form-field-checkbox-group"),u=R("wb-button"),d=R("wb-button-wrapper"),m=R("wb-form");return y(),W("div",Gf,[C(m,{class:"form",onSubmit:s.onSubmit},{default:X(()=>[S("div",null,[C(a,V(i.fields.id,{model:n.model}),null,16,["model"]),C(a,V(i.fields.name,{model:n.model}),null,16,["model"]),C(o,V(i.fields.symbol,{model:n.model}),null,16,["model"]),S("div",Hf,[S("div",Yf,[C(l,V(i.fields.checkboxes,{model:n.model}),null,16,["model"])]),S("div",Xf,[C(l,V(i.fields.windowSettings,{model:n.model}),null,16,["model"])])])]),C(d,{align:"outer",full:""},{default:X(()=>[i.cancelLabel?(y(),U(u,{key:0,"style-type":"secondary",label:i.cancelLabel,onClick:s.onClickCancel},null,8,["label","onClick"])):B("",!0),i.saveLabel?(y(),U(u,{key:1,"style-type":"primary",label:i.saveLabel,type:"submit"},null,8,["label"])):B("",!0)]),_:1})]),_:1},8,["onSubmit"])])}const qf=j(jf,[["render",Kf],["__scopeId","data-v-8ef074d7"]]);const Zf={components:{WbForm:Qn,WbButton:Ct,WbButtonWrapper:Nt,WbFormFieldTextbox:Ei,WbFormFieldDropdown:ga},props:{...mt,fsItem:{type:Object,default(){return null}},model:{type:Object,default(){return{actions:{save:()=>{}},name:null,url:null,symbol:null}}}},emits:[...ft,"close"],setup(t,e){return ht(t,e)},data(){const t=(this.fsItem||{}).locked;return{cancelLabel:"Cancel",saveLabel:"Save",fields:{name:{disabled:t,placeholder:"Name",label:"Name",name:"name"},url:{disabled:t,placeholder:"http://…",label:"Url",name:"url"},symbol:{disabled:t,label:"Symbol",name:"symbol",options:Object.keys(x).map(e=>({title:Go(e),value:x[String(e)]}))}}}},computed:{disabledSave(){return!this.model.name||!this.model.url||!this.model.symbol}},methods:{onClickCancel(){this.$emit("close")},async onSubmit(){await this.model.actions.save(this.model,this.fsItem)&&this.$emit("close")}}},Qf={class:"wb-module-files-web-link"};function Jf(t,e,n,r,i,s){const a=R("wb-form-field-textbox"),o=R("wb-form-field-dropdown"),l=R("wb-button"),u=R("wb-button-wrapper"),d=R("wb-form");return y(),W("div",Qf,[C(d,{onSubmit:s.onSubmit},{default:X(()=>[C(a,V(i.fields.name,{model:n.model}),null,16,["model"]),C(a,V(i.fields.url,{model:n.model,type:"url"}),null,16,["model"]),C(o,V(i.fields.symbol,{model:n.model}),null,16,["model"]),C(u,{align:"outer",full:""},{default:X(()=>[i.cancelLabel?(y(),U(l,{key:0,"style-type":"secondary",label:i.cancelLabel,onClick:s.onClickCancel},null,8,["label","onClick"])):B("",!0),i.saveLabel?(y(),U(l,{key:1,"style-type":"primary",label:i.saveLabel,type:"submit",disabled:s.disabledSave},null,8,["label","disabled"])):B("",!0)]),_:1})]),_:1},8,["onSubmit"])])}const io=j(Zf,[["render",Jf],["__scopeId","data-v-e9d86d64"]]);const ep={components:{},props:{...mt,fsItem:{type:Object,default(){return null}}},emits:[...ft],setup(t,e){return ht(t,e)},computed:{meta(){return Array.from(this.fsItem.meta).map(([t,e])=>({title:t,value:e}))},items(){return[{title:"Id",value:this.fsItem.id},{title:"Name",value:this.fsItem.name},{title:"Type",value:this.fsItem.constructor.NAME},{title:"Path",value:this.fsItem.getPath()},{title:"Size",value:fr(this.fsItem.size)},{title:"Locked",value:this.fsItem.locked?"Yes":"No"},{title:"Created Date",value:`<nobr>${zs("H:I:S D.M.Y",this.fsItem.createdDate)}</nobr>`},{title:"Modified Date",value:`<nobr>${zs("H:I:S D.M.Y",this.fsItem.editedDate)}</nobr>`}]}}},tp=t=>(Js("data-v-0dd44750"),t=t(),ea(),t),np={class:"wb-module-files-info"},rp=["innerHTML"],ip=tp(()=>S("legend",null,"Meta:",-1)),sp=["innerHTML"];function ap(t,e,n,r,i,s){return y(),W("div",np,[S("table",null,[(y(!0),W(At,null,Ot(s.items,({title:a,value:o},l)=>(y(),W("tr",{key:l},[S("td",null,Te(a)+":",1),S("td",{innerHTML:o},null,8,rp)]))),128))]),S("fieldset",null,[ip,S("table",null,[(y(!0),W(At,null,Ot(s.meta,({title:a,value:o},l)=>(y(),W("tr",{key:l},[S("td",null,Te(a)+":",1),S("td",{innerHTML:o},null,8,sp)]))),128))])])])}const op=j(ep,[["render",ap],["__scopeId","data-v-0dd44750"]]),lp=({core:t})=>{const{windows:e,symbols:n}=t.modules,r=Me({open:{disabled:!1},edit:{disabled:!1},duplicate:{disabled:!1},container:{disabled:!1},emptyTrashcan:{disabled:!1},discard:{disabled:!1},info:{disabled:!1},webLink:{disabled:!1},webLinkNew:{disabled:!1},webLinkEdit:{disabled:!1}});function i(){const m=n.getSelectedItems(),h=n.getPrimaryWrapper();r.info.disabled=m.length<1,r.open.disabled=m.length<1,r.edit.disabled=m.length<1||m.find(f=>f.locked||f instanceof Ce),r.duplicate.disabled=m.length<1||m.find(({fsItem:f})=>f.locked||f instanceof Ce||f instanceof dt),r.container.disabled=!r.open.disabled||h&&h.fsItem&&(h.fsItem instanceof _a||h.fsItem.locked)||!h,r.webLinkEdit.disabled=m.length<1||m.find(f=>!f.fsItem.meta.get(T.WEB_URL)),r.webLinkNew.disabled=r.container.disabled,r.webLink.disabled=r.webLinkNew.disabled&&r.webLinkEdit.disabled,r.emptyTrashcan.disabled=m.length<1||m.find(f=>!(f.fsItem instanceof Ce)),r.discard.disabled=m.length<1||m.find(({fsItem:f})=>f.locked||f instanceof Ce||f instanceof dt)}return n.events.subscribe(()=>i()),i(),[{order:1,title:"File",items:[{title:"Open",options:r.open,action:s},{title:"Edit",options:r.edit,action:u},{separator:!0},{title:"Web Link",options:r.webLink,items:[{title:"New",options:r.webLinkNew,action:o},{title:"Edit",options:r.webLinkEdit,action:l}]},{separator:!0},{title:"Duplicate",options:r.duplicate,action(){const m=n.getSelectedItems();return Promise.all(m.filter(h=>h.fsItem).map(async({fsItem:h})=>{const f=await h.getPath();return t.executeCommand(`copy "${f}" "${f}" -ignore`)}))}},{title:"Make Dir",options:r.container,async action(){const m=n.getPrimaryWrapper().fsItem,h=ha(await m.getPath(),"Directory");return console.log(`makedir "${h}" -ignore`),t.executeCommand(`makedir "${h}" -ignore`)}},{separator:!0},{title:"Discard",options:r.discard,action(){const m=n.getSelectedItems();return Promise.all(m.filter(h=>h.fsItem).map(async({fsItem:h})=>{const f=await h.getPath();return t.executeCommand(`remove "${f}" -r`)}))}},{title:"Empty Trashcan",options:r.emptyTrashcan,action(){const m=n.getSelectedItems();return Promise.all(m.filter(h=>h.fsItem).map(async({fsItem:h})=>Promise.all(Array.from((await h.getItems()).values()).map(async f=>{const w=await f.getPath();return t.executeCommand(`remove "${w}" -r -ignore`)}))))}},{separator:!0},{title:"Info",options:r.info,action(){n.getSelectedItems().filter(h=>h.fsItem).forEach(h=>{e.addWindow({title:`Info File ${h.fsItem.name}`,component:op,componentData:{fsItem:z(h.fsItem)},options:{scale:!0,prompt:!1,scrollX:!1,scrollY:!0}})})}}]}];function s(){n.getSelectedItems().filter(h=>h.fsItem).forEach(h=>{if(h.command){const f={showCommand:!1,show:!0};return t.executeCommand(h.command,f)}})}async function a({name:m,url:h,symbol:f},w){if(w||(w=await t.executeCommand(`saveFileDialog --id="${Zo(m)}"`)),w){const _=t.addExecution();try{const E=w.getPath();await t.executeCommand(`rename "${E}" "${m}" -n`),await t.executeCommand(`editfilemeta "${E}" "${T.WEB_URL}" "${h}"`),await t.executeCommand(`editfilemeta "${E}" "${T.SYMBOL}" "${f}"`)}catch(E){throw _(),new Error(E)}return _(),!0}return!1}function o(){const m=e.addWindow({title:"Make Link",component:io,componentData:{model:{actions:{save:a},name:null,url:null,symbol:null}},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}});return new Promise(h=>{m.events.pipe(xr(({name:f})=>f==="close")).subscribe(h)})}function l(){n.getSelectedItems().filter(h=>h.fsItem).forEach(h=>{const f=h.fsItem;e.addWindow({title:"Edit Link",component:io,componentData:{fsItem:f,model:{actions:{save:a},name:f.name,url:f.meta.get(T.WEB_URL),symbol:f.meta.get(T.SYMBOL)}},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}})})}function u(){n.getSelectedItems().filter(h=>h.fsItem).forEach(h=>{const f=h.fsItem,w=Me({actions:{save:d},id:f.id,name:f.name});[T.SYMBOL,T.VISIBLE,T.IGNORE_SYMBOL_REARRANGE,T.WINDOW_SCALE,T.WINDOW_SCROLL_X,T.WINDOW_SCROLL_Y,T.WINDOW_FULL_SIZE,T.WINDOW_SYMBOL_REARRANGE].forEach(_=>{w[String(_)]=f.meta.has(_)?f.meta.get(_):!1}),e.addWindow({title:`Edit File ${f.name}`,component:qf,componentData:{fsItem:z(f),model:w},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}})})}async function d(m,h){const{id:f,name:w}=m,_=h.getPath();if(!f)throw new Error("Id is emoty!");let E;const L=t.addExecution();try{await Promise.all([T.SYMBOL,T.VISIBLE,T.IGNORE_SYMBOL_REARRANGE,T.WINDOW_SCALE,T.WINDOW_SCROLL_X,T.WINDOW_SCROLL_Y,T.WINDOW_FULL_SIZE,T.WINDOW_SYMBOL_REARRANGE].map(O=>{let P=m[String(O)];return typeof P=="string"&&(P=`"${P}"`),t.executeCommand(`editfilemeta "${_}" "${O}" ${P}`)})),w&&f!==w?await t.executeCommand(`rename "${_}" "${w}" -n`):E=t.executeCommand(`rename "${_}" "${f}" -rn`),E=t.executeCommand(`rename "${_}" "${f}"`)}catch(O){throw L(),new Error(O)}return L(),E}},cp=({module:t})=>{const{fileSystem:e}=t,n=t.core;return[{name:["mountDisk"],description:"Mount Disk",args:[new v({index:0,name:"id",description:"Disk ID"})],async action({id:r},i){const s=n.addExecution(),{getDisk:a}=await await A(()=>import("./index.38481fe4.js"),["./index.38481fe4.js","./entry.9f1b584f.js"],import.meta.url),o=await a(r),l=await e.addFloppyDisk(o({core:n}));i.message(`Mount Disk <b>${l.name}</b> <b>(${l.id})</b> successful!`),s()}},{name:["changeDirectory","cd"],description:"cd %path%",args:[new v({index:0,name:"path",description:"Directory path"})],async action({path:r}){if(!r)throw N.get("bad_args");try{await e.changeDirectory(r)}catch{throw N.get("cant_find",r)}}},{name:["exist"],description:"Check if file exists.",args:[new v({index:0,name:"path",description:"Filename"})],async action({path:r},i){if(!r)throw N.get("bad_args");const s=Re(r),a=await e.exist(r);return a?i.message(`File ${s} exists`):i.message(`File ${s} does not exist`),a}},{name:["makedir","mkdir"],args:[new v({index:0,name:"path",description:"Filename"}),new v({index:1,name:"name",description:"Name"}),new v({name:"ignore",flag:!0,description:"Ignore file exist."})],async action({path:r,name:i,ignore:s},a){if(!r)throw N.get("bad_args");const o=await e.makedir(r,i||Re(r),{ignore:s});return a.message(`Directory "${o.name}" created`),o}},{name:["remove","rm"],args:[new v({index:0,name:"path",description:"Filename"}),new v({name:["recursive","r"],flag:!0,description:"Remove Directory Items and Directories."}),new v({name:["ignore"],flag:!0,description:"Ignore the specified file is deleted."})],async action({path:r,recursive:i,ignore:s},a){if(!r)throw N.get("bad_args");const o=await e.remove(r,i,{ignore:s});return[].concat(o).map(l=>{const u=l.type===Rt.NAME?"Directory":"File";return a.message(`Removed ${u}: ${l.name}`),l})}},{name:["readfile","getfile"],description:"Get file content",args:[new v({index:0,name:"path",description:"Filename"})],async action({path:r},i){if(!r)throw N.get("bad_args");return(await e.get(r)).data}},{name:["makefile","mkfile"],description:"Creates a file with the specified attributes.",args:[new v({index:0,name:"path",description:"Filename"}),new v({index:1,name:"name",description:"Name"}),new v({index:3,name:"data",description:"Data"}),new v({name:"override",flag:!0,description:"Deletes existing file and recreates."})],async action({path:r,name:i,data:s,override:a=!1,encode:o},l){if(!r)throw N.get("bad_args");typeof s=="string"&&(s=await Ps(s));const u=await e.makefile(r,i,s,{override:a});return l.message(`File "${u.name}" created`),u}},{name:["editfile"],description:"Edits file with specified attributes.",args:[new v({index:0,name:"path",description:"Filename"}),new v({index:1,name:"data",description:"Data"})],async action({path:r,data:i},s){if(!r)throw N.get("bad_args");typeof i=="string"&&(i=await Ps(i));const a=await e.editfile(r,i);return s.message(`File "${a.name}" edited`),a}},{name:["editfilemeta"],description:"Edits file with specified attributes.",args:[new v({index:0,name:"path",description:"Filename"}),new v({index:1,name:"name",description:"Name"}),new v({index:2,name:"value",description:"Value"})],async action({path:r,name:i,value:s},a){if(!r)throw N.get("bad_args");const o=await e.editfileMeta(r,i,s);return a.message(`File  "${o.name}" Meta edited`),o}},{name:["makelink","mklink"],description:"Creates a link to the specified path.",args:[new v({index:0,name:"ref",description:"Reference path with id (example.ext)."}),new v({index:1,name:"name",description:"Displayed Name"}),new v({index:2,name:"dest",description:"Destination directory."})],async action({ref:r,name:i,dest:s},a){if(!r)throw N.get("bad_args");s=s||".";const o=await e.get(r),l=await e.makelink(o,i);return await e.get(s)!==e.currentItem&&await e.move(l,s,{ignore:!0}),a.message(`Created link "${i}" with "${await o.getPath()}"`),l}},{name:["editlink"],description:"",args:[new v({index:0,name:"path",description:"Reference filepath with id (example.ext)."}),new v({index:1,name:"ref",description:"Destination directory."})],async action({path:r,ref:i},s){if(!(r&&i))throw N.get("bad_args");const a=await e.get(i),o=await e.editlink(r,a);return s.message(`Edited link "${name}" with "${await a.getPath()}"`),o}},{name:"rename",description:"Renamed a file",args:[new v({index:0,name:"path",description:"Filepath with id (example.ext)."}),new v({index:1,name:"value",description:"Value for id or displayed name."}),new v({name:["name","n"],flag:!0,description:"When set, changes the display name."}),new v({name:["removeName","rn"],flag:!0,description:"When set, removes the display name."})],async action({path:r,value:i,name:s,removeName:a},o){if(!a&&(!r||!i))throw N.get("bad_args");const l=await e.get(r),u=s?l.name:l.id;return await e.rename(r,i,{name:s,removeName:a}),o.message(`Renamed from "${u}" to "${i}"`),l}},{name:["cp","copy"],args:[new v({index:0,name:"from",description:"Source Filepath with id (example.ext)."}),new v({index:1,name:"dest",description:"Destination Filepath with id (example.ext)."}),new v({name:["ignore","i"],flag:!0,description:"When sets, creates a new file if exists."})],async action({from:r,dest:i,ignore:s},a){let o=i;if(!o&&s&&(o=r),!o||!r)throw N.get("bad_args");const l=await e.copy(r,o,{ignore:s});return a.message(`Copied from "${r}" to "${o}"`),l}},{name:["mv","move"],description:"move %from% %to%",args:[new v({index:0,name:"from",description:"From path"}),new v({index:1,name:"to",description:"To path"}),new v({index:2,name:"item-position",description:"Sets the position in the Icon view. (x,y)"})],async action({from:r,to:i,itemPosition:s},a){if(!i||!r)throw N.get("bad_args");const o=new Map;s&&o.set("itemPosition",[0,0].map((d,m)=>{const h=s.split(",");return parseInt(h[Number(m)]||0)}));const l=await e.move(r,i,{meta:o});let u;return l instanceof Rt?u="Directory":u="File",a.message(`${u} moved ${l.name}`),l}},{name:["executeFile"],description:"Execute file.",args:[new v({index:0,name:"path",description:"Path to the file"})],async action({path:r},i){if(!r)throw N.get("bad_args");const s=await e.get(r);if(typeof s.action=="function")return s.action(n);throw N.get("cant_find_action",r)}}]};N.add("cant_find_action","Can't find action %1");var hi,uo;const up=new(uo=class{constructor(){p(this,hi,void 0)}get(){return c(this,hi)||b(this,hi,(()=>this.getImports())())}getImports(){return Promise.all([A(()=>import("./index.esm.a85619bb.js"),["./index.esm.a85619bb.js","./index.esm2017.621a7581.js","./entry.9f1b584f.js"],import.meta.url),A(()=>import("./index.esm.6bbf4390.js"),["./index.esm.6bbf4390.js","./index.esm2017.621a7581.js","./entry.9f1b584f.js"],import.meta.url),A(()=>import("./index.esm.d8330a8c.js"),["./index.esm.d8330a8c.js","./entry.9f1b584f.js","./index.esm2017.621a7581.js"],import.meta.url)]).then(([e,n,r])=>({app:e.default||e,auth:n.default||n,database:r.default||r}))}},hi=new WeakMap,uo),Es=new Map;var Se,J,mi;class dp{constructor(){p(this,Se,void 0);p(this,J,void 0);p(this,mi,void 0)}get name(){return c(this,J).name}async connect(e,{apiKey:n,url:r}){if(b(this,Se,await up.get()),b(this,mi,c(this,Se).app),c(this,J))Es.has(e)&&b(this,J,Es.get(e));else{const i=c(this,Se).app.initializeApp({apiKey:n,databaseURL:r},e);Es.set(i.name,i),b(this,J,i)}return c(this,J)}async disconnect(){if(!c(this,J))throw N.get("FirebaseWrapper_noApp");ar(this),await this.logout(),await c(this,Se).app.deleteApp(c(this,J)),b(this,J,null)}get app(){return c(this,J)}get firebase(){return c(this,mi)}get locked(){return!!c(this,J)&&!this.isLogged()}get currentUser(){const{getAuth:e}=c(this,Se).auth;return e(c(this,J)).currentUser}isLogged(){return!!c(this,J)&&!!this.currentUser}login(e,n){const{getAuth:r,signInWithEmailAndPassword:i}=c(this,Se).auth,s=r(c(this,J));return ar(this),i(s,e,n)}logout(){if(c(this,J)){const{getAuth:e,signOut:n}=c(this,Se).auth,r=e(c(this,J));return n(r)}else throw N.get("FirebaseWrapper_notConnected")}remove(e){ar(this);const{remove:n,ref:r,getDatabase:i}=c(this,Se).database,s=i(c(this,J)),a=r(s,e);return n(a)}get(e){ar(this);const{ref:n,onValue:r,getDatabase:i}=c(this,Se).database,s=i(c(this,J)),a=n(s,e);return new Promise(o=>{r(a,l=>o(l.val()))})}async set(e,n){ar(this);const{ref:r,set:i,getDatabase:s}=c(this,Se).database,a=s(c(this,J)),o=r(a,e);return await i(o,n),n}}Se=new WeakMap,J=new WeakMap,mi=new WeakMap;function ar(t){if(!t.app)throw N.get("FirebaseWrapper_notConnected")}N.add([["FirebaseWrapper_notConnected",["Not connected","Not connected"]],["FirebaseWrapper_noApp",["No app available","No app available"]],["FirebaseWrapper_hasApp",["App already available",'App "%1" already available']]]);class hp extends ll{constructor(e){e=Object.assign({storage:new dp},e),super(e)}mount(e){return e.onDisconnect=()=>{this.unmount()},this.storage.connect(e.id,e).then(()=>this)}unmount(){return this.storage.disconnect().then(()=>this)}async load(){try{let e=await this.storage.get(this.name);return!e&&(e={},!this.storage.locked)?this.storage.set(this.name,e).then(n=>n):(this.data=e,e)}catch(e){throw new Error(e)}}save(e){return e=xl(e),this.data=e||this.data,this.storage.set(this.name,e).then((n,r)=>this.data)}get locked(){return this.storage.locked}}function xl(t){return Object.keys(t).reduce((e,n)=>{const r=e[String(n)];return r&&typeof r=="object"&&xl(r),(r==null||r==="")&&delete e[String(n)],e},t)}const or=new Map,mp=({module:t,core:e})=>{const{fileSystem:n}=t;return[{name:"cloudList",args:[new v({name:"json",flag:!0,description:"Get JSON Export"})],action({json:r},i){const s=Array.from(or.values());if(r)return Promise.resolve(s);{const a=new en;return a.addColumn({value:"Storage (Id)",align:"left",minWidth:15}),a.addColumn({value:"Name",align:"left",minWidth:15}),a.addColumn({value:"Logged In",align:"center",minWidth:9}),a.addRow(s.reduce((o,l)=>(o.push([l.id,l.name,l.storage.storage.isLogged()?"yes":"no"]),o),[])),i.message([a]),Promise.resolve()}}},{name:"cloudMount",args:[new v({index:0,name:"id",flag:!0,description:"Id from Storage."}),new v({index:1,name:"apiKey",description:"Firebase Api-Key."}),new v({index:2,name:"url",description:"Firebase Database-Url."})],async action({id:r,apiKey:i,url:s},a){if(!i||!s)throw N.get("bad_args");const o=e.addExecution(),l=await n.connect(hp,{id:r,apiKey:i,url:s});return or.set(l.id,l),a.message(`Mount <b>${l.name}</b> <b>(${l.id})</b> successful!`),o(),l}},{name:"cloudUnmount",args:[new v({index:0,name:"id",flag:!0,description:"Id from Storage."})],async action({id:r},i){if(!r)throw N.get("bad_args");const s=e.addExecution();try{const a=or.get(r);await n.disconnect(a),or.delete(a.id),i.message(`Unmount "${a.name}" successful!`),s()}catch(a){throw s(),new Error(a)}}},{name:"cloudAuth",args:[new v({name:"login",flag:!0,description:"Storage Login"}),new v({name:"logout",flag:!0,description:"Logout from Storage."}),new v({name:"email",description:"Email for Login."}),new v({name:"password",description:"Password for Login."}),new v({name:"storage",description:"Specifies which drive is logged on."})],async action({email:r,password:i,storage:s,login:a,logout:o},l){const u=s;if(!u)throw N.get("bad_args");const d=e.addExecution(),m=or.get(u);let h;if(m)try{if(a){if(!r||!i)throw N.get("bad_args");h=await m.storage.storage.login(r,i),l.message(`Login with ${m.id} (${m.id}) successful!`)}else o&&(h=await m.storage.storage.logout(),l.message(`Logout from ${m.id} (${m.id}) successful!`))}catch(f){switch(d(),f.code){case"auth/user-not-found":case"auth/wrong-password":return f}throw new Error(f)}else throw new Error(`${u} is not mounted.`);return d(),h}}]},so=new Ye("web_workbench_FS");class El extends us{constructor({core:e}){super({commands:(...n)=>[...Uf(...n),...cp(...n),...mp(...n)],contextMenu:lp,core:e})}get fileSystem(){return so}get fs(){return so}}g(El,"NAME","Files");var fi;class fp{constructor(e){g(this,"defaultItems",new an);g(this,"activeItems");p(this,fi,null);b(this,fi,e),this.activeItems=this.defaultItems}addDefaultItems(e){this.defaultItems.add(e)}getActiveItems(){return this.activeItems}setActiveItems(e){return this.activeItems=e||this.defaultItems}get core(){return c(this,fi)}}fi=new WeakMap;const pp={components:{AtomMarkdown:vl},props:{...mt},emits:[...ft],setup(t,e){return ht(t,e)},data(){return{content:`# Web-Workbench 1.3
<nobr>Created by Thorn-Welf Walli</nobr><br>Email: lammpee@gmail.com<br>Homepage: [lammpee.de](https://lammpee.de)<br><br>Version: ${this.core.version}`}}},bp={class:"wb-module-core-info"};function gp(t,e,n,r,i,s){const a=R("atom-markdown");return y(),W("div",bp,[C(a,{content:i.content},null,8,["content"])])}const wp=j(pp,[["render",gp],["__scopeId","data-v-759d7e7b"]]),_p=({core:t})=>{const{windows:e}=t.modules;return[{order:0,title:"Web-Workbench",items:[{title:"Settings",action(){return t.executeCommand("openSettings")}},{separator:!0},{hotKey:"I",keyCode:73,title:"Info",action(){e.addWindow({title:"Info",component:wp,componentData:{},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}})}},{separator:!0},{title:"Imprint",action(){return t.executeCommand('execute "Imprint.md"')}},{title:"Disclaimer",action(){return t.executeCommand('execute "Disclaimer.md"')}}]}]},lr={CENTER:0,ORDER_HORIZONTAL:1,ORDER_VERTICAL:2,ORDER_DIAGONAL_LEFT:3,ORDER_DIAGONAL_RIGHT:4,SPLIT_HORIZONTAL:5,SPLIT_VERTICAL:6},qi={SHOW_STORAGE_SPACE:"windowsShowStorageSpace"},yp={[qi.SHOW_STORAGE_SPACE]:!0},vp=({core:t})=>[{order:10,title:"Window",items:[{type:ze.CHECKBOX,title:"Show Disk Space",model:t.config.observable,name:qi.SHOW_STORAGE_SPACE,action(e){return t.config.set(qi.SHOW_STORAGE_SPACE,e)}},{separator:!0},{title:"Order",items:[{title:"Center",action(){t.modules.windows.contentWrapper.setWindowPositions(lr.CENTER)}},{separator:!0},{title:"Diagonal (Left to right)",action(){t.modules.windows.contentWrapper.setWindowPositions(lr.ORDER_DIAGONAL_RIGHT)}},{title:"Diagonal (Right to left)",action(){t.modules.windows.contentWrapper.setWindowPositions(lr.ORDER_DIAGONAL_LEFT)}},{separator:!0},{title:"Split (Horizontal)",action(){t.modules.windows.contentWrapper.setWindowPositions(lr.SPLIT_HORIZONTAL)}},{title:"Split (Vertical)",action(){t.modules.windows.contentWrapper.setWindowPositions(lr.SPLIT_VERTICAL)}}]}]}],xp={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10",viewBox:"0.5 50.5 6 10"},Ep=S("path",{fill:"#020203",d:"M.5 50.5h6v2h-4v2h2v2h-2v4h-2z"},null,-1),Sp=[Ep];function Ip(t,e){return y(),W("svg",xp,Sp)}const kp={render:Ip},Tp={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"},Ap=S("path",{d:"M0 10h6V8H2V6h2V4H2V2h4V0H0z"},null,-1),Op=[Ap];function Rp(t,e){return y(),W("svg",Tp,Op)}const Dp={render:Rp};const Wp={components:{SvgStorageBarFull:kp,SvgStorageBarEmpty:Dp},props:{visible:{type:Boolean,default:!0},value:{type:Number,default:.8}},computed:{style(){return{"--bar-height":Math.min(this.value,1)}}}},Cp=t=>(Js("data-v-11422e3b"),t=t(),ea(),t),Np={class:"icon full"},Lp=Cp(()=>S("span",{class:"size"},[S("span",{class:"helper"})],-1)),Pp={class:"icon empty"};function Mp(t,e,n,r,i,s){const a=R("svg-storage-bar-full"),o=R("svg-storage-bar-empty");return n.visible?(y(),W("div",{key:0,class:"wb-env-atom-storage-bar",style:jn(s.style)},[S("div",null,[S("div",Np,[C(a)]),Lp,S("div",Pp,[C(o)])])],4)):B("",!0)}const Fp=j(Wp,[["render",Mp],["__scopeId","data-v-11422e3b"]]),ke={NAME:0,TYPE:1,CREATED_DATE:2,EDITED_DATE:3},Mt={ASCENDING:0,DESCENDING:1},ee={SHOW_INVISIBLE_SYMBOLS:"symbolWrapper_showInvisibleItems",ORDER_TYPE:"symbolWrapper_iconsOrderType",ORDER_DIRECTION:"symbolWrapper_iconsOrderDirection"},$p={[ee.SHOW_INVISIBLE_SYMBOLS]:!1,[ee.ORDER_TYPE]:ke.NAME,[ee.ORDER_DIRECTION]:Mt.ASCENDING};class ao{constructor({fsItem:e=null,command:n,model:r,layout:i}){g(this,"type",null);g(this,"id",qn());g(this,"layout",Me({position:k(0,0),size:k(0,0)}));g(this,"ignoreRearrange",!1);g(this,"model",Me({title:"Item Title",symbol:x.DEFAULT,used:!1,visible:!0}));if(this.command=n,this.model=Object.assign(this.model,r),this.layout=Object.assign(this.layout,i),this.fsItem=e,this.fsItem){const s=this.fsItem;this.type=zp(s),this.setProperties(s),this.fsItem.events.subscribe(({name:a,value:o})=>{a!=="addItem"&&a!=="removeItem"&&this.setProperties(e)})}}setProperties(e){if(this.model.title=e.name,this.layout.position=k(e.meta.get(T.POSITION)||k(0,0)),this.model.visible=!!e.meta.get(T.VISIBLE),this.model.symbol=e.meta.get(T.SYMBOL),this.model.url=e.meta.get(T.WEB_URL),this.model.ignoreRearrange=e.meta.get(T.IGNORE_SYMBOL_REARRANGE),e instanceof Y){const n=[`openDirectory "${e.getPath()}"`];e.meta.get(T.WINDOW_SYMBOL_REARRANGE)&&n.push("-sort-symbols");const r=k(e.meta.get(T.WINDOW_POSITION)||k(0,0));r.length>0&&n.push(`--window-position="${k(r).toArray().join(",")}"`);const i=k(e.meta.get(T.WINDOW_SIZE)||k(0,0));i.length>0&&n.push(`--window-size="${k(i).toArray().join(",")}"`),e.meta.has(T.WINDOW_SCALE)&&n.push(`--window-scale=${e.meta.get(T.WINDOW_SCALE)}`),e.meta.has(T.WINDOW_SCROLL_X)&&n.push(`--window-scroll-x=${e.meta.get(T.WINDOW_SCROLL_X)}`),e.meta.has(T.WINDOW_SCROLL_Y)&&n.push(`--window-scroll-y=${e.meta.get(T.WINDOW_SCROLL_Y)}`),e.meta.has(T.WINDOW_FULL_SIZE)&&n.push(`--window-full-size=${e.meta.get(T.WINDOW_FULL_SIZE)}`),this.command=n.join(" ")}else this.model.url||(this.command=`execute "${e.getPath()}"`)}}function oo(t){return t.map(e=>e instanceof ao?e:new ao(e))}function zp(t){return t instanceof Y?"container":t.meta.get(T.WEB_URL)?"link":"default"}var St,is,It,pi;class tn{constructor(e,n=[],r=!1){p(this,St,new Fe);p(this,is,qn());p(this,It,void 0);g(this,"items",Tt([]));g(this,"selectedItems",Tt([]));p(this,pi,!1);g(this,"layout",Me({size:k(0,0),position:k(0,0)}));g(this,"size",k(0,0));g(this,"parentSize",k(0,0));b(this,pi,r||!1),b(this,It,e),this.items.value=oo(n||[])}get(e){return this.items.value.find(n=>n.id===e)}has(e){return!!this.items.value.find(n=>n.id===e)}add(...e){const n=oo(e);this.items.value.push(...n.map(z)),c(this,St).next(new G("add",{wrapper:this,items:n}))}remove(e){typeof e!="object"&&(e=this.get(e)),this.unselectItem(e.id),this.items.value.splice(this.items.value.indexOf(e),1),c(this,St).next(new G("remove",{wrapper:this,item:e}))}setup(){return Promise.resolve()}moveItem(e,n){const r=this.get(e);return n.add(r),this.remove(r),Promise.resolve()}moveItemToItem(){return Promise.resolve()}savePosition(e,n){return Promise.resolve()}isSelectedItem(e){return this.selectedItems.value.includes(e)}selectItem(e){this.isSelectedItem(e)||(this.selectedItems.value.push(e),c(this,St).next(new G("selectItem",{wrapper:this,id:e})))}unselectItem(e){this.isSelectedItem(e)&&(this.selectedItems.value=this.selectedItems.value.filter(n=>n!==e),c(this,St).next(new G("unselectItem",{wrapper:this,id:e})))}clearSelectedItems(){[].concat(this.selectedItems.value).forEach(e=>this.unselectItem(e))}get root(){return c(this,pi)}get events(){return c(this,St)}get id(){return c(this,is)}get core(){return c(this,It)}rearrangeIcons(e){e=Object.assign({orderType:c(this,It).config.get(ee.ORDER_TYPE),orderDirection:c(this,It).config.get(ee.ORDER_DIRECTION),onlyVisible:!c(this,It).config.get(ee.SHOW_INVISIBLE_SYMBOLS),root:!1,margin:10},e);let n=this.items.value;switch(e.root&&(e.orderType=ke.NAME,e.orderDirection=Mt.DESCENDING),e.onlyVisible&&(n=n.filter(o=>o.model.visible)),n=n.filter(o=>!o.model.ignoreRearrange),e.orderType){case ke.TYPE:n=n.sort((o,l)=>o.type.localeCompare(l.type));break;case ke.CREATED_DATE:n=n.sort((o,l)=>o.createDate===l.createDate?0:o.createDate>l.createDate?1:-1);break;case ke.EDITED_DATE:n=n.sort((o,l)=>o.editedDate===l.editedDate?0:o.editedDate>l.editedDate?1:-1);break;default:n=n.sort((o,l)=>o.model.title.localeCompare(o.model.title))}switch(e.orderDirection){case Mt.ASCENDING:n.reverse();break}const r=e.margin;let i,s=r;const a=Wo(0,0);return e.root?i=this.size.x:i=r,n.forEach(o=>{e.root?(o.layout.position=k(i-o.layout.size.x,s),o.layout.size.x>a.x&&(a.x=o.layout.size.x),s+o.layout.size.y<this.parentSize.y?s+=o.layout.size.y+r:(i-=a.x+r,s=r)):(o.layout.size.y>a.y&&(a.y=o.layout.size.y),o.layout.position=k(i,s),i+o.layout.size.x<this.parentSize.x||(i=r,s+=a.y+r,o.layout.position=k(i,s)),i+=o.layout.size.x+r)}),Promise.all(n.map(({id:o,layout:l})=>this.savePosition(o,l.position)))}}St=new WeakMap,is=new WeakMap,It=new WeakMap,pi=new WeakMap;var Zt;const yr=class extends tn{constructor(){super(...arguments);p(this,Zt,void 0);g(this,"usedMemory",0)}async setup(n){b(this,Zt,n);const r=Array.from((await n.getItems()).values());await Promise.all(r.map(async i=>this.add(await yr.fsItemToSymbol(i)))),n.events.subscribe(this.onEventItem.bind(this))}get fsItem(){return c(this,Zt)}async moveItemToItem(n,r){if(n.locked)throw new Error("Items are locked!");if(r.locked)throw new Error("Destination is locked!");n.meta.set(T.POSITION,k(0,0)),await this.core.modules.files.fs.saveItem(n),await this.core.modules.files.fs.move(n,r,{override:!0})}async moveItem(n,r){const i=this.get(n);if(i.fsItem instanceof xi||i.fsItem instanceof Rt)try{return await this.moveItemToItem(i.fsItem,r.fsItem),!0}catch(s){return console.warn(s),!1}return Promise.resolve(!1)}savePosition(n,r){const i=this.get(n);i.fsItem.meta.set(T.POSITION,r),this.core.modules.files.fs.saveItem(i.fsItem)}hasFsItem(n){return this.items.value.find(r=>r.fsItem.id===n.id)}async onEventItem({name:n,value:r}){let i;switch(n){case"addItem":i=await yr.fsItemToSymbol(r),this.hasFsItem(r)||this.add(i);break;case"removeItem":this.remove(this.items.value.find(s=>s.fsItem===r));break}this.usedMemory=c(this,Zt).size/c(this,Zt).maxSize}static getItemsFromItem(n){return Promise.all(Array.from(n.items.values()).map(yr.fsItemToSymbol))}static async fsItemToSymbol(n){const r=await n.getPath(),i={fsItem:n,model:{title:n.name}};return typeof n.action=="function"&&(i.command=`executeFile "${r}"`),n.meta.has(T.WEB_URL)&&(i.url=n.meta.get(T.WEB_URL)),i}};let Zs=yr;Zt=new WeakMap;const Bp={xmlns:"http://www.w3.org/2000/svg",width:"31",height:"30",class:"wb_symbol_disk_1"},Vp=S("path",{d:"M0 0h25v2h2v2h2v2h2v24H0z",class:"svg-secondary"},null,-1),Up=S("path",{fill:"#FFF",d:"M2 2v26h27V6h-2V4h-2V2",class:"svg-primary"},null,-1),jp=S("path",{fill:"#FA5",d:"M7 2h13v10H7z",class:"svg-tertiary"},null,-1),Gp=S("path",{d:"M11 2h5v8h-5z",class:"svg-secondary"},null,-1),Hp=[Vp,Up,jp,Gp];function Sl(t,e){return y(),W("svg",Bp,Hp)}const Il={render:Sl},Yp=Object.freeze(Object.defineProperty({__proto__:null,default:Il,render:Sl},Symbol.toStringTag,{value:"Module"}));const Xp={props:{parentLayout:{type:Object,default(){return null}},clampGlobal:{type:Boolean,default:!1},container:{type:Boolean,default(){return!1}},command:{type:String,default:null},id:{type:String,default:null},model:{type:Object,default(){return{title:"Item Title",url:null,symbol:Il,used:!1,visible:!0}}},layout:{type:Object,default(){return{position:k(0,0),size:k(50,50)}}},scrollOffset:{type:Object,default(){return k(0,0)}},wrapper:{type:Object,default(){return z(new tn)}}},emits:["click"],setup(t){return{wrapperItems:t.wrapper.items,wrapperSelectedItems:t.wrapper.selectedItems}},data(){return{globalPosition:null,moving:!1,positions:{start:null,move:null},subscriptions:[],parentEl:null,screenModul:_n.modules.screen}},computed:{linkTag(){return this.model.url?"a":"span"},linkBind(){return this.model.url?{href:this.model.url,target:this.model.url?"_blank":null,title:this.model.title}:{}},contentLayout(){return this.screenModul.contentLayout},selected(){return this.wrapperSelectedItems.includes(this.id)},styleClasses(){return{moving:this.moving,selected:this.selected,"symbol-used":this.model.used}},symbolsModule(){return _n.modules.symbols}},watch:{model:{deep:!0,handler(){this.onRefresh()}}},mounted(){this.parentEl=this.$el.parentElement,this.onRefresh()},unmounted(){this.subscriptions.forEach(t=>t.unsubscribe()),this.wrapper.unselectItem(this.id)},methods:{onRefresh(){this.layout.size=k(200,200),this.$nextTick(()=>{this.layout.size=k(this.$el.children[0].offsetWidth,this.$el.children[0].offsetHeight)})},getRootBounds(){const{width:t,height:e,left:n,top:r}=this.parentEl.getBoundingClientRect();return{position:k(n,r),size:k(t,e)}},onPointerDown(t){Wi(t);const e=this.id;if(!(this.model.url&&this.selected)&&(t.preventDefault(),!this.model.used)){if(this.command&&this.selected){const n={showCommand:!1,show:!0};return this.wrapper.unselectItem(e),this.model.used=!0,_n.executeCommand(this.command,n).then(()=>this.model.used=!1)}_s.shiftActive?this.wrapper.isSelectedItem(e)?this.wrapper.unselectItem(e):this.wrapper.selectItem(e):(this.symbolsModule.getSelectedItems().length>0&&this.symbolsModule.clearSelectedItems(),this.wrapper.selectItem(e)),this.startMove(k(t)),this.$emit("click",this)}},onPointerUp(){const t=this.symbolsModule.getSelectedItems().filter(n=>n.id!==this.id),e=this.wrapper.get(this.id);t.length>0&&e.fsItem instanceof Y&&t.forEach(n=>this.wrapper.moveItemToItem(n.fsItem,e.fsItem))},startMove(t){const e=this.getRootBounds();this.positions.lastPosition=k(this.layout.position),this.positions.scrollOffset=k(this.scrollOffset),this.positions.start=t,this.positions.offset=k(()=>this.positions.start-this.layout.position),this.setPosition(t,e,!0),this.moving=!0;let n=t;const r=_s.pointerMove.subscribe(i=>{console.log("MOVE"),n=k(i),this.setPosition(k(i),e,!0)});this.subscriptions.push(_s.pointerUp.pipe(Ic()).subscribe(i=>{if(console.log("UP"),r.unsubscribe(),this.symbolsModule.getSecondaryWrapper().id!==this.wrapper.id)return this.wrapper.moveItem(this.id,this.symbolsModule.getSecondaryWrapper()).then(s=>(s||(this.layout.position=k(this.positions.lastPosition)),this.globalPosition=null,this.moving=!1,s));if(this.moving=!1,this.setPosition(n,e),!this.layout.position.equals(Ie(()=>this.positions.start-this.positions.offset)))return this.wrapper.savePosition(this.id,this.layout.position)}))},setPosition(t,e,n=!1){const r={min:k(0,0),max:Ie(()=>e.size-this.layout.size)};this.positions.move=Ie(()=>t-this.positions.start);let i=Ie(()=>Math.round(this.positions.start+this.positions.move-this.positions.offset));n?(r.min=e.position,r.max=Ie(()=>r.max+this.contentLayout.position),i=Ie(()=>Math.round(i+r.min)),this.clampGlobal?this.globalPosition=k(()=>Math.max(Math.min(i,this.contentLayout.position+this.wrapper.size-this.layout.size),r.min)):this.globalPosition=i):(this.wrapper.root?this.layout.position=Ie(()=>Math.max(Math.min(i,this.wrapper.size-this.layout.size),0)):this.layout.position=Ie(()=>Math.max(i,0)),this.globalPosition=null)}}},Kp=["data-id"],qp=["textContent"];function Zp(t,e,n,r,i,s){return y(),W("figure",{"data-id":n.id,class:ut(["wb-env-atom-symbol-wrapper-item",s.styleClasses]),style:jn([n.layout.size.toCSSVars("item-size"),(i.globalPosition||n.layout.position).toCSSVars("item-position")]),"touch-action":"none",onPointerdown:e[0]||(e[0]=(...a)=>s.onPointerDown&&s.onPointerDown(...a)),onPointerup:e[1]||(e[1]=(...a)=>s.onPointerUp&&s.onPointerUp(...a))},[(y(),U(Is(s.linkTag),pr(po(s.linkBind)),{default:X(()=>[S("i",null,[(y(),U(Is(s.symbolsModule.symbols.get(n.model.symbol))))]),S("figcaption",{textContent:Te(n.model.title)},null,8,qp)]),_:1},16))],46,Kp)}const Qp=j(Xp,[["render",Zp],["__scopeId","data-v-ff93c90f"]]);const Jp={components:{WbEnvAtomSymbolWrapperItem:Qp},props:{parentLayout:{type:Object,default(){return{size:k(window.innerWidth,window.innerHeight)}}},parentScrollable:{type:Boolean,default:!0},parentFocused:{type:Boolean,default:!1},clampSymbols:{type:Boolean,default:!1},wrapper:{type:tn,default(){return z(new tn(_n,[{layout:{position:k(100,0)},model:{title:"Item 1",symbol:x.DIRECTORY}},{layout:{position:k(0,0)},model:{title:"Item 2",symbol:x.DEFAULT}},{layout:{position:k(0,0)},model:{title:"Item 3",symbol:x.DEFAULT}}]))}}},emits:["ready","refresh"],setup(t){return{wrapperItems:t.wrapper.items,wrapperSelectedItems:t.wrapper.selectedItems}},data(){const t=_n;return{core:z(t),webWorkbenchConfig:z(t.config.observable),symbolsModule:z(t.modules.symbols),selectedItems:[],layout:{size:k(0,0),position:k(0,0)}}},computed:{styleClasses(){return{"parent-scrollable":this.parentScrollable,active:(this.core.modules.symbols.primaryWrapper||{}).id===this.wrapper.id}},scrollOffset(){return this.parentLayout&&"scrollOffset"in this.parentLayout?this.parentLayout.scrollOffset:k(0,0)},style(){const t=[this.scrollOffset.toCSSVars("symbol-wrapper-scroll-offset")];return this.parentScrollable?t.push(this.size.toCSSVars("symbol-wrapper-size")):t.push(this.layout.size.toCSSVars("symbol-wrapper-size")),t},size(){return this.visibleItems.map(t=>({item:t,index:this.wrapperSelectedItems.indexOf(t.id)+1})).sort((t,e)=>t.index>e.index?1:t.index<e.index?-1:0).reduce((t,{item:e})=>{const n=e.layout.position.x+e.layout.size.x,r=e.layout.position.y+e.layout.size.y;return t.x=t.x<n?n:t.x,t.y=t.y<r?r:t.y,t},Wo(0,0))},showInvisibleItems(){return this.webWorkbenchConfig[ee.SHOW_INVISIBLE_SYMBOLS]},visibleItems(){return this.wrapperItems.filter(this.isItemVisible)},parentLayoutSize(){return(this.parentLayout||{}).size}},watch:{parentFocused(t){this.setFocused(t)},wrapper(){this.onResize()},parentLayoutSize(t){this.onResize()},size(){this.$nextTick(()=>{this.$emit("refresh",{scroll:!0})})}},mounted(){this.$nextTick(()=>{this.onResize(),this.setFocused(this.parentFocused),this.$emit("ready")})},unmounted(){this.core.modules.symbols.getPrimaryWrapper()&&this.core.modules.symbols.getPrimaryWrapper().id===this.wrapper.id&&this.core.modules.symbols.setPrimaryWrapper(null),this.core.modules.symbols.getSecondaryWrapper()&&this.core.modules.symbols.getSecondaryWrapper().id===this.wrapper.id&&this.core.modules.symbols.setSecondaryWrapper(null)},methods:{setFocused(t){t?this.symbolsModule.setPrimaryWrapper(this.wrapper):this.symbolsModule.getPrimaryWrapper()&&this.symbolsModule.getPrimaryWrapper().id===this.wrapper.id&&this.symbolsModule.setPrimaryWrapper(null)},onResize(){const{width:t,height:e,left:n,top:r}=this.$el.getBoundingClientRect();this.wrapper.layout=this.layout={position:k(n,r),size:k(t,e)},this.wrapper.size=k(this.$el.offsetWidth,this.$el.offsetHeight),this.wrapper.parentSize=this.parentLayout.size},isItemVisible(t){return this.showInvisibleItems||!this.showInvisibleItems&&t.model.visible},onPointerMove(){this.core.modules.symbols.setSecondaryWrapper(this.wrapper)},onPointerDown(t){(t.target===this.$refs.helper||t.target===this.$refs.items)&&this.wrapper.clearSelectedItems()}}},eb={ref:"helper",class:"helper"},tb={ref:"items",class:"items"};function nb(t,e,n,r,i,s){const a=R("wb-env-atom-symbol-wrapper-item");return y(),W("div",{class:ut(["wb-env-symbol-wrapper",s.styleClasses]),style:jn(s.style),onPointerdown:e[0]||(e[0]=(...o)=>s.onPointerDown&&s.onPointerDown(...o)),onPointermove:e[1]||(e[1]=(...o)=>s.onPointerMove&&s.onPointerMove(...o))},[S("div",eb,null,512),S("div",tb,[(y(!0),W(At,null,Ot(s.visibleItems,(o,l)=>(y(),U(a,V({key:l,"clamp-global":n.clampSymbols},o,{wrapper:n.wrapper,"parent-layout":i.layout,"scroll-offset":s.scrollOffset}),null,16,["clamp-global","wrapper","parent-layout","scroll-offset"]))),128))],512)],38)}const rb=j(Jp,[["render",nb],["__scopeId","data-v-cadd14a2"]]);const ib={components:{WbButton:Ct,WbFormFieldTextbox:Ei,WbButtonWrapper:Nt},props:{message:{type:String,default(){return"Dialog Message"}},confirm:{type:Boolean,default:!1},prompt:{type:Boolean,default:!1},password:{type:Boolean,default:!1},apply:{type:Function,default(){return null}},abort:{type:Function,default(){return null}},applyLabel:{type:String,default(){return"Continue"}},abortLabel:{type:String,default(){return"Cancel"}},yesLabel:{type:String,default(){return"Yes"}},noLabel:{type:String,default(){return"No"}}},emits:["apply","abort"],data(){return{inputModel:{value:""}}},computed:{formattedMessage(){return this.message.replace(/\\n|\n/g,"<br>")}},methods:{onClickApply(){const t=this.inputModel.value||!0;typeof this.apply=="function"?this.apply(t):this.$emit("apply",t)},onClickAbort(){typeof this.abort=="function"?this.abort():this.$emit("abort")}}},sb={class:"wb-env-molecule-dialog-content"},ab=["innerHTML"],ob={key:1,class:"input"};function lb(t,e,n,r,i,s){const a=R("wb-form-field-textbox"),o=R("wb-button"),l=R("wb-button-wrapper");return y(),W("div",sb,[S("div",null,[n.message?(y(),W("p",{key:0,innerHTML:s.formattedMessage},null,8,ab)):B("",!0),n.prompt?(y(),W("div",ob,[C(a,{ref:"dialogInput",model:i.inputModel,placeholder:null,type:n.password?"password":"text",label:null},null,8,["model","type"])])):B("",!0),C(l,{align:n.abortLabel?"outer":"center",class:"buttons"},{default:X(()=>[n.applyLabel||n.confirm&&n.yesLabel?(y(),U(o,{key:0,"style-type":"dialog",label:n.confirm?n.yesLabel:n.applyLabel,onClick:s.onClickApply},null,8,["label","onClick"])):B("",!0),n.abortLabel||n.confirm&&n.noLabel?(y(),U(o,{key:1,"style-type":"dialog",label:n.confirm?n.noLabel:n.abortLabel,onClick:s.onClickAbort},null,8,["label","onClick"])):B("",!0)]),_:1},8,["align"])])])}const kl=j(ib,[["render",lb],["__scopeId","data-v-bfd95096"]]),Db=Object.freeze(Object.defineProperty({__proto__:null,default:kl},Symbol.toStringTag,{value:"Module"})),cb=({module:t,core:e})=>{const{files:n,windows:r,symbols:i}=e.modules,s=n.fs;return[{name:["openDirectory","openDir"],description:"Opens the specified directory.",args:[new v({index:0,name:"path",description:"Path to the directory."}),new v({name:"sortSymbols",description:"Sort Symbols",flag:!0}),new v({name:"windowSize",description:"Window Size"}),new v({name:"windowPosition",description:"Window Position"}),new v({name:"windowScale",description:"Window Scale"}),new v({name:"windowScrollX",description:"Window Scroll-X"}),new v({name:"windowScrollY",description:"Window Scroll-Y"}),new v({name:"windowFullSize",description:"Window Full-Size"})],async action({path:a,sortSymbols:o,windowSize:l,windowPosition:u,windowScale:d,windowScrollX:m,windowScrollY:h,windowFullSize:f}){if(!a)throw N.get("bad_args");const w=await s.get(a),_=await i.addFileSystemWrapper(w),E=i.symbolWrappers.get(_),L={value:w.size/w.maxSize,visible:e.config.observable[qi.SHOW_STORAGE_SPACE]},O=r.addWindow({title:w.name,layout:{size:k(...(l||"400,200").split(",").map(H=>Number(H))),position:k(...(u||"0,0").split(",").map(H=>Number(H)))},symbolWrapper:E,sidebarComponent:Fp,sidebarComponentData:L,component:rb,componentData:{wrapper:E,parentScrollable:m||h},options:{scale:d!==void 0?d:!0,scrollX:m!==void 0?m:!0,scrollY:h!==void 0?h:!0,center:!u}},{active:!0,full:f}),P=()=>{L.value=w.size/w.maxSize},ne=[E.events.subscribe(P)];return new Promise(H=>{O.events.subscribe(({name:oe})=>{oe==="ready"&&o?E.rearrangeIcons():oe==="close"?(ne.forEach(Ii=>Ii.unsubscribe()),i.removeWrapper(_),H()):P()})})}},{name:["openDialog"],description:"Open a Dialog.",args:[new v({index:0,name:["message"],description:"Message from Dialog."}),new v({index:1,name:["title"],description:"Title from Dialog."}),new v({name:["apply"],description:"Title from apply button."}),new v({name:["abort"],description:"Title from abort button."}),new v({name:["confirm"],flag:!0,description:"Defines the confirm dialog"}),new v({name:["prompt"],flag:!0,description:"Defines the prompt dialog"}),new v({name:["secret"],flag:!1,description:"Input is illegible."})],action:({title:a=null,message:o=null,apply:l=null,abort:u=null,confirm:d=!1,prompt:m=!1,secret:h=!1},f)=>{let w;const _=O=>{w(O)},E=()=>{w(!1)},L=t.addWindow(new Sr({title:a,component:kl,componentData:{title:a,message:o,secret:h,confirm:d,prompt:m,applyLabel:l||"Continue",abortLabel:u,apply:_,abort:E},options:{scale:!1,scrollX:!1,scrollY:!1,close:!1}}));return L.events.pipe(xr(({name:O})=>O==="close")).subscribe(()=>{E()}),new Promise(O=>{w=O}).then(O=>(L.close(),O))}}]};var Bn;class Tl extends us{constructor(n){const{core:r}=Object.assign({core:null},n);super({config:yp,commands:cb,core:r});p(this,Bn,new Map);g(this,"contentWrapper");g(this,"globalWrapper");g(this,"contextMenu",Me(new fp(this)));this.contentWrapper=this.getWrapper(this.addWrapper(new Ba(r))),this.globalWrapper=this.getWrapper(this.addWrapper(new Ba(r)))}addWindow(n,r){return n instanceof Sr||(n=new Sr(n)),n.componentData&&(n.componentData.core=z(this.core)),r=Object.assign({global:!1},r),r.global?n=this.globalWrapper.add(n,r):n=this.contentWrapper.add(n,r),n}getWrapper(n){return c(this,Bn).get(n)}addWrapper(n){return c(this,Bn).set(n.id,n),n.id}removeWrapper(n){typeof n!="string"&&(n=n.id),c(this,Bn).delete(n)}isContextMenu(n){return n.id===this.getActiveContextMenu().id}setup(){this.contextMenu.addDefaultItems(new an(_p,{core:this.core})),this.contextMenu.addDefaultItems(new an(vp,{core:this.core}))}clear(){this.contentWrapper.clear(),this.globalWrapper.clear()}getActiveContextMenu(){return this.contextMenu.getActiveItems()}setActiveContextMenu(n){return this.contextMenu.setActiveItems(n)}}Bn=new WeakMap,g(Tl,"NAME","Windows");const ub={[x.DEFAULT]:()=>A(()=>import("./default.3c683fe6.js"),["./default.3c683fe6.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DIRECTORY]:()=>A(()=>import("./directory.b05b1ab4.js"),["./directory.b05b1ab4.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DIRECTORY_PREFS]:()=>A(()=>import("./directory_prefs.3147e140.js"),["./directory_prefs.3147e140.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.CLOUD_DISK]:()=>A(()=>import("./cloud_disk.94502ae7.js"),["./cloud_disk.94502ae7.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.HARD_DISK]:()=>A(()=>import("./hard_disk.428be9ba.js"),["./hard_disk.428be9ba.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.RAM_DISK]:()=>A(()=>import("./ram_disk.69d1f888.js"),["./ram_disk.69d1f888.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.TMP_DISK]:()=>A(()=>import("./tmp_disk.69d1f888.js"),["./tmp_disk.69d1f888.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DISK_1]:()=>A(()=>Promise.resolve().then(()=>Yp),void 0,import.meta.url).then(t=>t.default),[x.DISK_2]:()=>A(()=>import("./disk_2.17c6672d.js"),["./disk_2.17c6672d.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DISK_WORKBENCH13]:()=>A(()=>import("./disk_workbench13.bdff4ef3.js"),["./disk_workbench13.bdff4ef3.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DISK_MARKDOWN]:()=>A(()=>import("./disk_markdown.174c1fdf.js"),["./disk_markdown.174c1fdf.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DISK_BASIC]:()=>A(()=>import("./disk_basic.42987839.js"),["./disk_basic.42987839.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.WORK]:()=>A(()=>import("./work.ef15de74.js"),["./work.ef15de74.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.CONSOLE]:()=>A(()=>import("./console.66c67a39.js"),["./console.66c67a39.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.SETTINGS]:()=>A(()=>import("./settings.58502a87.js"),["./settings.58502a87.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.TRASHCAN]:()=>A(()=>import("./trashcan.7706b01a.js"),["./trashcan.7706b01a.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.COMPUTER_1]:()=>A(()=>import("./computer_1.65b3d579.js"),["./computer_1.65b3d579.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.TELEPHONE]:()=>A(()=>import("./telephone.bf15e23a.js"),["./telephone.bf15e23a.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.CURSOR]:()=>A(()=>import("./cursor.c8fc1e99.js"),["./cursor.c8fc1e99.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.PREFERENCE]:()=>A(()=>import("./preference.667baea1.js"),["./preference.667baea1.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.WEB_BASIC]:()=>A(()=>import("./web_basic.de4c9cf2.js"),["./web_basic.de4c9cf2.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.WEB_PAINTING]:()=>A(()=>import("./web_painting.de6321cc.js"),["./web_painting.de6321cc.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.COLORS]:()=>A(()=>import("./colors.f3a3ccfb.js"),["./colors.f3a3ccfb.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.PRINT_1]:()=>A(()=>import("./print_1.94b0bb3d.js"),["./print_1.94b0bb3d.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.PRINT_2]:()=>A(()=>import("./print_2.9ad06c90.js"),["./print_2.9ad06c90.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.NOTEPAD]:()=>A(()=>import("./notepad.15f66bab.js"),["./notepad.15f66bab.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.BASIC]:()=>A(()=>import("./basic.aec7ad7d.js"),["./basic.aec7ad7d.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.IMAGE]:()=>A(()=>import("./image.a7cb51ff.js"),["./image.a7cb51ff.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.NOTE]:()=>A(()=>import("./note.6a640e4e.js"),["./note.6a640e4e.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.NOTE_BLANK]:()=>A(()=>import("./note_blank.1432be5f.js"),["./note_blank.1432be5f.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.LARGE_NOTE]:()=>A(()=>import("./large_note.8a9c879a.js"),["./large_note.8a9c879a.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.LARGE_NOTE_RICH]:()=>A(()=>import("./large_note_rich.7abfe87d.js"),["./large_note_rich.7abfe87d.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.FULLSCREEN]:()=>A(()=>import("./fullscreen.943e1375.js"),["./fullscreen.943e1375.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.CALCULATOR]:()=>A(()=>import("./calculator.3fad4fbe.js"),["./calculator.3fad4fbe.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.CLOCK]:()=>A(()=>import("./clock.4510867e.js"),["./clock.4510867e.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.KEYBOARD_QUESTION]:()=>A(()=>import("./keyboard_question.1eb15200.js"),["./keyboard_question.1eb15200.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.LARGE_NOTEPAD]:()=>A(()=>import("./large_notepad.47aa4384.js"),["./large_notepad.47aa4384.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.LARGE_NOTEPAD_HELP]:()=>A(()=>import("./large_notepad_help.28210bb4.js"),["./large_notepad_help.28210bb4.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.RABBIT]:()=>A(()=>import("./rabbit.f5925fa6.js"),["./rabbit.f5925fa6.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.MORE]:()=>A(()=>import("./more.f4f72763.js"),["./more.f4f72763.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.SAY]:()=>A(()=>import("./say.bb41278c.js"),["./say.bb41278c.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.GITHUB]:()=>A(()=>import("./github.c833f950.js"),["./github.c833f950.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.LAMMPEE]:()=>A(()=>import("./lammpee.925d8185.js"),["./lammpee.925d8185.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.CUBY]:()=>A(()=>import("./cuby.1390a6b0.js"),["./cuby.1390a6b0.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.NUXT]:()=>A(()=>import("./nuxt.c1685d32.js"),["./nuxt.c1685d32.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.CLOWN]:()=>A(()=>import("./clown.958b9f3b.js"),["./clown.958b9f3b.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DISALLOW_1]:()=>A(()=>import("./disallow_1.5e1a77a5.js"),["./disallow_1.5e1a77a5.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.COPY_1]:()=>A(()=>import("./copy_1.910ad127.js"),["./copy_1.910ad127.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.COPY_2]:()=>A(()=>import("./copy_2.80eb5166.js"),["./copy_2.80eb5166.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DISPLAY_KEYBOARD]:()=>A(()=>import("./display_keyboard.ff5be898.js"),["./display_keyboard.ff5be898.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.PALETTE]:()=>A(()=>import("./palette.53f932d5.js"),["./palette.53f932d5.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.SIGN_1]:()=>A(()=>import("./sign_1.8b882e5f.js"),["./sign_1.8b882e5f.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DOCUMENT_EDITOR]:()=>A(()=>import("./document_editor.d9794d7c.js"),["./document_editor.d9794d7c.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default),[x.DOCUMENT_READER]:()=>A(()=>import("./document_reader.c63cf5c9.js"),["./document_reader.c63cf5c9.js","./entry.9f1b584f.js"],import.meta.url).then(t=>t.default)},db=({module:t,core:e})=>[{order:11,title:"Symbol",items:[{type:ze.CHECKBOX,title:"Show Invisible Symbols",model:e.config.observable,name:ee.SHOW_INVISIBLE_SYMBOLS,action(n){return e.config.set(ee.SHOW_INVISIBLE_SYMBOLS,n)}},{title:"Rearrange Symbols",hotKey:"R",keyCode:82,action(){const n=t.getDefaultWrapper(),r=t.getPrimaryWrapper();return r.id!==n.id?(r.rearrangeIcons(),we(r.fsItem)):(n.rearrangeIcons({root:!0}),we(n.fsItem))}},{title:"Order Type",items:[{model:e.config.observable,type:ze.RADIO,name:ee.ORDER_TYPE,value:ke.NAME,title:"Name",action(){return e.config.set(ee.ORDER_TYPE,ke.NAME)}},{model:e.config.observable,type:ze.RADIO,name:ee.ORDER_TYPE,value:ke.TYPE,title:"Type",action(){return e.config.set(ee.ORDER_TYPE,ke.TYPE)}},{model:e.config.observable,type:ze.RADIO,name:ee.ORDER_TYPE,value:ke.CREATED_DATE,title:"Created Date",action(){return e.config.set(ee.ORDER_TYPE,ke.CREATED_DATE)}},{model:e.config.observable,type:ze.RADIO,name:ee.ORDER_TYPE,value:ke.EDITED_DATE,title:"Edited Date",action(){return e.config.set(ee.ORDER_TYPE,ke.EDITED_DATE)}}]},{title:"Order Direction",items:[{model:e.config.observable,type:ze.RADIO,name:ee.ORDER_DIRECTION,value:Mt.ASCENDING,title:"Ascending",action(){return e.config.set(ee.ORDER_DIRECTION,Mt.ASCENDING)}},{model:e.config.observable,type:ze.RADIO,name:ee.ORDER_DIRECTION,value:Mt.DESCENDING,title:"Descending",action(){return e.config.set(ee.ORDER_DIRECTION,Mt.DESCENDING)}}]}]}],hb=({module:t,core:e})=>[{name:["rearrangeIcons"],description:"Rearrange Icons",args:[new v({name:"id",description:"Wraper id"}),new v({name:"root",description:"Use root wrapper",flag:!0})],action({id:n,root:r}){const i=t.getDefaultWrapper(),s=t.getPrimaryWrapper();if(r)return i.rearrangeIcons({root:!0}),we(i.fsItem);{let a=s;return n&&(a=t.get(n)),a.rearrangeIcons(),we(a.fsItem)}}}];var kt,Qt,tt,Vn,Jt,bi;class Al extends us{constructor(n){const{core:r}=Object.assign({core:null},n);super({config:$p,commands:hb,contextMenu:db,core:r});p(this,kt,new Fe);p(this,Qt,new Map);p(this,tt,new Map);p(this,Vn,{});g(this,"hasSelectedItems",!1);p(this,Jt,void 0);p(this,bi,void 0);g(this,"activeWrapper");g(this,"defaultWrapper");g(this,"primaryWrapper");g(this,"secondaryWrapper")}addWrapper(n){return n=z(n),c(this,tt).set(n.id,n),c(this,Vn)[n.id]=n,n.events.subscribe(this.onEventWrapper.bind(this)),n.id}onEventWrapper({name:n,value:r}){const{wrapper:i}=r;(n==="selectItem"||n==="unselectItem")&&(this.hasSelectedItems=i.selectedItems.value.length>0,c(this,kt).next(new G("hasSelectedItems",this.hasSelectedItems)))}removeWrapper(n){typeof n!="string"&&(n=n.id),c(this,tt).delete(n),delete c(this,Vn)[String(n)]}getActiveWrapper(n){const r=this.core.modules.windows.contentWrapper.getActiveWindow();return r&&r.symbolWrapper?r.symbolWrapper:n?null:this.activeWrapper}getSelectedItems(){return Array.from(c(this,tt).values()).reduce((n,r)=>(n.push(...r.selectedItems.value.map(i=>r.get(i))),n),[])}clearSelectedItems(){return Array.from(c(this,tt).values()).forEach(n=>{n.clearSelectedItems()})}async addFileSystemWrapper(n,r){const i=new Zs(this.core,null,r);return await i.setup(n),this.addWrapper(i)}async setup(){await this.loadCoreSymbols(),this.setDefaultWrapper(await this.addFileSystemWrapper(this.core.modules.files.fs.root,!0))}loadCoreSymbols(){return Promise.all(Object.values(x).map(async n=>c(this,Qt).set(n,await ub[String(n)]())))}get(n){return c(this,tt).get(n)}setDefaultWrapper(n){b(this,bi,n),this.primaryWrapper=this.secondaryWrapper=this.activeWrapper=this.defaultWrapper=this.symbolWrappers.get(n)}getDefaultWrapper(){return this.defaultWrapper}getPrimaryWrapper(){return this.primaryWrapper||this.defaultWrapper}getSecondaryWrapper(){return this.secondaryWrapper||this.defaultWrapper}setPrimaryWrapper(n){n instanceof tn&&(n=n.id),this.primaryWrapper=this.symbolWrappers.get(n),c(this,kt).next(new G("setPrimaryWrapper",this.getPrimaryWrapper()))}setSecondaryWrapper(n){n instanceof tn&&(n=n.id),this.secondaryWrapper=this.symbolWrappers.get(n),c(this,kt).next(new G("setSecondaryWrapper",this.secondaryWrapper))}setActiveWrapper(n){n instanceof tn&&(n=n.id);let r=this.symbolWrappers.get(c(this,Jt));return n!==c(this,Jt)&&(b(this,Jt,n),this.activeWrapper=this.symbolWrappers.get(c(this,Jt)),r=this.activeWrapper||this.symbolWrappers.get(c(this,bi)),c(this,kt).next(new G("setActiveWrapper",r))),r}addSymbol(n,r){c(this,Qt).set(n,r)}removeSymbol(n){c(this,Qt).delete(n)}get wrappersObservable(){return c(this,Vn)}get events(){return c(this,kt)}get symbols(){return c(this,Qt)}get symbolWrappers(){return c(this,tt)}}kt=new WeakMap,Qt=new WeakMap,tt=new WeakMap,Vn=new WeakMap,Jt=new WeakMap,bi=new WeakMap,g(Al,"NAME","Symbols");const Si=new mr;Si.addModule(fl);Si.addModule(El);Si.addModule(Tl);Si.addModule(Al);const _n=Si,Wb=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"}));export{gi as $,v as A,gb as B,M as C,Xo as D,cn as E,sn as F,Ib as G,zc as H,Rd as I,Xn as J,Hn as K,rn as L,us as M,Ie as N,Ts as O,ur as P,So as Q,kc as R,ss as S,Au as T,pb as U,T as V,Ba as W,x as X,K as Y,je as Z,hn as _,Ru as a,Ro as a0,qn as a1,Fe as a2,G as a3,Ni as a4,Ab as a5,Ob as a6,xs as a7,yb as a8,hr as a9,el as aa,Eb as ab,Qu as ac,Ju as ad,Qd as ae,ef as af,ul as ag,Qn as ah,Ct as ai,ga as aj,Ei as ak,tm as al,vl as am,Gu as an,Nt as ao,an as ap,rr as aq,vb as ar,xb as as,Db as at,Wb as au,_s as b,Yo as c,wb as d,ze as e,Ic as f,k as g,Wo as h,xr as i,Cu as j,ft as k,rb as l,pt as m,bb as n,Dh as o,mt as p,en as q,Jo as r,_b as s,Wi as t,ht as u,Q as v,_n as w,Ld as x,hu as y,xu as z};

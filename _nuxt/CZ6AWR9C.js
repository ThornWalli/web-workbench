import{i as M}from"./CpIyErmU.js";import{c as H}from"./DFUqPPC1.js";import{u as W}from"./CpPkMkLR.js";import{d as D,r as v,k as F,o as B,W as N,y as X,z as Y,A as C,B as q,_ as $}from"./oWuEt9Fj.js";import"./CFct_F1V.js";import"./fnd6_Gtj.js";import"./B2exwp0w.js";function R(r,f,l,s){r.beginPath(),r.arc(0,0,f-l,0,2*Math.PI,!1),r.fillStyle=s[0],r.fill()}function U(r,f,l){let s;for(s=0;s<60;s++){r.rotate(-Math.PI/2),r.beginPath();const t=0-f+12,h=6;r.moveTo(0,t),r.lineTo(0,t-h),r.rotate(Math.PI/3/5),r.lineWidth=2,r.strokeStyle=l[1],r.stroke()}for(r.rotate(-(Math.PI/3/5)*60),s=0;s<16;s++){r.rotate(-Math.PI/2),r.beginPath();const t=0-f+15,h=6,i=10;r.moveTo(0,t),r.lineTo(0+h/2,t-i/2),r.lineTo(0,t-i),r.lineTo(0-h/2,t-i/2),r.lineTo(0,t),r.rotate(Math.PI/3),r.fillStyle=l[1],r.fill()}r.rotate(-Math.PI/3*16)}function V(r,f,l,s,t){const h=f.getHours()*(Math.PI*2/12)+Math.PI*2/12*f.getMinutes()/60,i=f.getMinutes()*(Math.PI*2/60),p=f.getSeconds()*(Math.PI*2/60);l.rotate(h),l.drawImage(r[0],-s.x,-s.y,t.x,t.y),l.rotate(-h),l.rotate(i),l.drawImage(r[1],-s.x,-s.y,t.x,t.y),l.rotate(-i),l.rotate(p),l.drawImage(r[2],-s.x,-s.y,t.x,t.y),l.rotate(-p)}function j(r,f,l,s){const h=r/2-5,i=M(()=>h+5);return[(e,n)=>{e.translate(i.x,i.y);const u=3,o=[.5,.34],a=0,d=0;e.beginPath(),e.moveTo(a,d),e.lineTo(a-u,d-n.width/2*o[1]),e.lineTo(a,d-n.width/2*o[0]),e.lineTo(a+u,d-n.width/2*o[1]),e.lineTo(a,d),e.strokeStyle=s[1],e.fillStyle=s[1],e.stroke(),e.fill()},(e,n)=>{e.translate(i.x,i.y);const u=4,o=[.7,.54],a=0,d=0;e.beginPath(),e.moveTo(a,d),e.lineTo(a-u,d-n.width/2*o[1]),e.lineTo(a,d-n.width/2*o[0]),e.lineTo(a+u,d-n.width/2*o[1]),e.lineTo(a,d),e.strokeStyle=s[1],e.fillStyle=s[1],e.stroke(),e.fill()},(e,n)=>{e.translate(i.x,i.y);const u=0,o=.74,a=0,d=0;e.beginPath(),e.moveTo(a,d),e.lineTo(a+u,d-n.width/2*o),e.lineTo(a,d),e.strokeStyle=s[2],e.stroke()},e=>{e.translate(i.x,i.y),R(e,h,l,s)},e=>{e.translate(i.x,i.y),U(e,h,s)}].map(e=>{const n=document.createElement("canvas");n.width=r,n.height=f;const u=n.getContext("2d");return u&&(u.imageSmoothingEnabled=!1,e(u,n)),n})}const G={class:"period"},J=D({__name:"Clock",props:{model:{}},setup(r){const{setContextMenu:f}=W();f(H,{model:r.model});const s=v(null),t=v(null),h=v(["#888888","#000000","#FFAA55"]),i=v([]),p=v(!1);let e;const n=F(()=>p.value?"PM":"AM");B(()=>{if(s.value&&t.value){const o=t.value;o.width=s.value.offsetWidth,o.height=s.value.offsetHeight,i.value=j(o.width,o.height,2,h.value);const a=o.getContext("2d",{willReadFrequently:!0});if(a)u(o,a);else throw new Error("Failed to get canvas context")}}),N(()=>{window.clearInterval(e)});function u(o,a){const A=o.width/2-5,m=M(()=>A+5),g=M(o.width,o.height);a.imageSmoothingEnabled=!1,a.setTransform(1,0,0,1,0,0),a.translate(m.x,m.y),a.scale(1,1.015),a.beginPath(),a.arc(0,0,A,0,2*Math.PI,!1),a.fillStyle=h.value[1],a.fill(),a.scale(1,.985);const T=i.value,S=b=>{window.requestAnimationFrame(()=>{a.drawImage(T[3],-m.x,-m.y,g.x,g.y),a.drawImage(T[4],-m.x,-m.y,g.x,g.y),a.strokeStyle=h.value[1],a.setTransform(1,0,0,1,0,0);const _=new Date;p.value=_.getHours()>12,a.translate(m.x,m.y),V(T,_,a,m,g);const c=a.getImageData(0,0,g.x,g.y),y=c.data;for(let w=0;w<y.length;w+=4){const I=y[Number(w)],P=y[w+1],k=y[w+2];if(!(I===255&&P===170&&k===85)){const E=.2126*I+.7152*P+.0722*k>=50?255:0;.2126*I+.7152*P+.0722*k>=50&&(y[Number(w)]=y[w+1]=y[w+2]=E)}}a.putImageData(c,0,0),b&&b()})};S(()=>{e=window.setInterval(S,1e3)})}return(o,a)=>(Y(),X("div",{ref_key:"rootEl",ref:s,class:"wb-disks-workbench13-clock"},[C("canvas",{ref_key:"canvasEl",ref:t},null,512),C("span",G,q(n.value),1)],512))}}),ee=$(J,[["__scopeId","data-v-809b7edb"]]);export{ee as default};

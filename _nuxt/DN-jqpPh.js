import{A as g}from"./6eJTTtAr.js";import{u as f,M as m}from"./DTkXt2G9.js";import{b as E,c as T}from"./Bk_zE6I5.js";import{A as y}from"./CnOcH4tQ.js";import{_ as d,g as _,t as h,v,z as w,a6 as W}from"./CkfhtkTx.js";import{c,d as p,g as S}from"./99H3OJSh.js";import"./ByK3Uynw.js";import"./C0_snZds.js";import"./Ch9TGLTe.js";import"./CMn89ocD.js";import"./BeevJImz.js";import"./C5mdboMC.js";import"./Cpj98o6Y.js";import"./C9JuMnSF.js";import"./k2TOapvB.js";import"./CHe85edd.js";import"./-XQioQgL.js";import"./DCzE-LO6.js";import"./CpQI5kI4.js";import"./CrQvwhUk.js";import"./DptxkuMs.js";import"./BRT6S-89.js";import"./ZA9ggWey.js";import"./DxOVdChq.js";import"./BhIZyK9R.js";import"./soO44h-s.js";import"./pmrCP7Iu.js";import"./DOQRJiqD.js";import"./PS8j2qfJ.js";const N={components:{AtomMarkdown:y},setup(){return f()},data(){return{content:["# WebBasic",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},$={class:"wb-disks-extras13-web-basic-info"};function k(e,t,s,u,l,r){const i=_("atom-markdown");return h(),v("div",$,[w(i,{content:l.content},null,8,["content"])])}const B=d(N,[["render",k],["__scopeId","data-v-7c9e05f6"]]),P=({model:e,core:t})=>{const{windows:s}=t.modules;return[{order:0,title:"Editor",items:[{title:"New",hotKey:"N",keyCode:78,action:u},{title:"Open…",hotKey:"O",keyCode:79,action:C},{title:"Save",hotKey:"S",keyCode:83,action:l},{title:"Save As…",action:r},{type:m.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:O},{title:"Close",action:I}]},{order:1,title:"Document Settings",items:[{title:"Has Window Output",type:m.CHECKBOX,name:c.HAS_WINDOW_OUTPUT,model:e.value}]},{order:1,title:"Run",hotKey:"R",keyCode:82,action:x},{order:2,title:"Preview",type:m.CHECKBOX,name:p.WEB_BASIC_SHOW_PREVIEW,model:t.config.observable,action(o){return t.config.set(p.WEB_BASIC_SHOW_PREVIEW,o)}}];function u(){e.actions.reset()}function l(){return i()}function r(){return i(!0)}async function i(o=!1){let n=Object.assign({},e.value,{content:e.value.content.split(/\n/g)});n=await E(JSON.stringify(n));let a;return!o&&e.fsItem?(a=await t.executeCommand(`editfile "${e.fsItem.getPath()}" --data="${n}"`),a?t.executeCommand('openDialog "File saved."'):t.executeCommand('openDialog "File could not be saved."')):(e.fsItem=await t.executeCommand(`saveFileDialog --data="${n}" --extension="bs"`),e.fsItem)}async function C(){const o=await t.executeCommand("openFileDialog");if(o)if(c.CONTENT in o.value){const n=Object.assign({},o.value,{[c.CONTENT]:[].concat(o.value[c.CONTENT]).join(`
`)});e.fsItem=o.fsItem,e.openValue=n}else throw new Error("Can't read file content")}async function x(){const o=[];await t.modules.parser.parseBasic(e.value[c.CONTENT].split(/\n/),async(n,a)=>{const b=await t.executeCommand(n,a);return a.message&&o.push(a.message),b}),e.output=o.map(n=>T(n))}function I(){return e.actions.close()}function O(){s.addWindow({title:"Info",component:B,componentData:{model:e},options:{scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"extras13WebBasic"})}},R={components:{AtomInputText:g},props:{parentLayout:{type:Object,default(){return{value:S(),fsItem:null,openValue:null}}},model:{type:Object,default:null}},emits:["refresh"],setup(e){const t=W(e,"model"),s=f();return s.setContextMenu(P,{model:t.value}),s.preserveContextMenu(),{...s}},computed:{openValue(){return this.model.openValue},inputTextOptions(){return{focused:this.parentFocused}},showPreview(){return this.core.config.observable[p.WEB_BASIC_SHOW_PREVIEW]}},watch:{"model.value"(){this.refresh()},openValue(e){e&&(this.model.value=e,this.$nextTick(()=>{this.$refs.input.resetSelection(),this.$emit("refresh",{scroll:!0})}))},showPreview(e){this.model.actions.togglePreview(e)}},mounted(){this.showPreview&&this.$nextTick(()=>{this.model.actions.togglePreview()})},methods:{onRefreshInputText(){this.refresh()},refresh(){this.$nextTick(()=>{this.$emit("refresh",{scroll:!0})})}}},A={class:"wb-disks-extras13-web-basic"};function V(e,t,s,u,l,r){const i=_("atom-input-text");return h(),v("div",A,[w(i,{ref:"input",name:"content",options:r.inputTextOptions,model:s.model.value,onRefresh:r.onRefreshInputText},null,8,["options","model","onRefresh"])])}const fe=d(R,[["render",V],["__scopeId","data-v-1059f0e9"]]);export{fe as default};

import{W as w}from"./BPnw8H1C.js";import{W as c}from"./D9PjJnFw.js";import{W as x}from"./DpGpKT4E.js";import{W as B}from"./DJBUgBH1.js";import{W as f}from"./CPrp_Jrr.js";import{p as I,q as V,d as D}from"./B3Wmi0DA.js";import{u as L}from"./ClLpnmyR.js";import{d as M,r as d,O as n,k as o,o as z,y as E,z as R,C as a,D as p,P as v,G as U,S as $,ac as q,_ as G}from"./BkRx7U8b.js";import"./CJbvcseS.js";import"./eRs2tlcG.js";import"./OlYXjGCK.js";import"./CtlMGvom.js";import"./D4lI5vpz.js";import"./D4b9WN8K.js";import"./Wv4Ty0OG.js";import"./BTMT_sH9.js";const J={class:"wb-module-files-save"},N=M({__name:"Save",props:{fsItem:{},id:{},model:{}},emits:["close"],setup(h,{emit:b}){const{core:s}=L();if(!s.value?.modules.files)throw new Error("Files module not found");const t=h,i=b,l=d({path:"",filename:"",file:null,...t.model}),u=s.value?.modules.files&&n(s.value?.modules.files),m={cancel:"Cancel",save:"Save"},_=o(()=>({hideLabel:!0,label:"Path",placeholder:"Path…",modelValue:l.value.path})),y=o(()=>({hideLabel:!0,label:"Filename",placeholder:"Filename…",modelValue:l.value.filename,"onUpdate:model-value":e=>{l.value.filename=e}})),F=o(()=>({name:"path",modelValue:l.value.path,"onUpdate:model-value":e=>{l.value.path=e},onSelect:k})),r=d(t.fsItem||n(u.fs.root)),W=o(()=>t.fsItem?t.fsItem:s.value?.modules.files?.fs.root?s.value?.modules.files.fs.root:null),S=o(()=>r.value?r.value.locked:!1),C=o(()=>!l.value.filename),k=e=>{r.value=n(e),e instanceof D?l.value.path=e.getPath():e.name&&(l.value.filename=e.name)};z(()=>{t.id&&(l.value.filename=t.id)});const P=()=>{i("close")},g=()=>{const e=I(V(l.value.path),l.value.filename);i("close",e)};return(e,O)=>(R(),E("div",J,[a(w,{onSubmit:g},{default:p(()=>[a(f,v(_.value,{readonly:""}),null,16),a(B,v(F.value,{"file-system":U(u).fileSystem,"fs-item":W.value}),null,16,["file-system","fs-item"]),a(f,$(q(y.value)),null,16),a(x,{align:"outer",full:""},{default:p(()=>[a(c,{"style-type":"secondary",label:m.cancel,onClick:P},null,8,["label"]),a(c,{"style-type":"primary",label:m.save,type:"submit",disabled:S.value||C.value},null,8,["label","disabled"])]),_:1})]),_:1})]))}}),ne=G(N,[["__scopeId","data-v-f53a8acd"]]);export{ne as default};

import{i as l,I as lt,o as Ne}from"./CpIyErmU.js";import{C as it,S as ct,B as je,W as vt}from"./DjL2hHZW.js";import{d as U}from"./On0xenC3.js";import{T as ut}from"./CHpeLE9u.js";import{y,z as u,M as Oe,A as n,d as se,r as p,k as h,o as ke,W as Me,X as $e,Y as Ye,Z as me,$ as we,F as oe,R as Le,_ as ae,O as Ce,B as Be,C as N,G as _,a0 as re,a1 as ne,I,J as be,a2 as ht,D as Ve,a3 as pt,a4 as dt,a5 as ft,V as de,P as Ee,a6 as mt,a7 as wt,N as yt,x as gt,H as zt,a8 as bt}from"./BUU1NkbK.js";import{C as We,P as St}from"./BflcHXSR.js";import{S as Se}from"./6C4StZv5.js";import{g as Mt,M as qe,s as De,n as Ge,c as Ct,i as xt}from"./CZZPvNTk.js";import{B as fe,C as pe}from"./BJmh0rUk.js";import{u as Je,C as Xe,N as Vt,W as Et}from"./DcvgOCRL.js";import{W as kt}from"./DPAxcMSI.js";import{I as Ht,W as rt,a as At}from"./BGsde7CB.js";import{C as _t}from"./CxKYomUj.js";import{f as xe}from"./DI3A0fxi.js";import{f as Ke}from"./DNvW6rqi.js";import Pt from"./BI_CrqLS.js";import{u as Tt}from"./Xupdrwif.js";import{u as Wt}from"./9Qh4xLxt.js";import{l as Lt,c as Ot,t as Bt}from"./ol2dnVJx.js";import{f as Ft}from"./CNlRQWZy.js";import"./BnQx2YJv.js";import"./RAasLaaH.js";import"./D4lI5vpz.js";import"./DdQrQ7-5.js";import"./Br_8hjjw.js";import"./Bu9-HbQ4.js";import"./9V19AFUE.js";import"./Cpj98o6Y.js";import"./B2exwp0w.js";import"./djI3_XgP.js";import"./Ce6njBYG.js";import"./BE-N3i2n.js";import"./6jpuwjT2.js";import"./7MFW2ODw.js";import"./C2mHCgxP.js";import"./DikOiBfP.js";import"./D1A-NVwd.js";import"./BlhZwPhK.js";import"./DLyaWjaL.js";import"./BCPdcavz.js";import"./DG6QdPnO.js";import"./BWR5uye1.js";import"./CV0dHcg-.js";const It="data:image/svg+xml,%3csvg%20class='wb_cursor_pointer'%20xmlns='http://www.w3.org/2000/svg'%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%3e%3cpath%20d='M0%2012h2v2h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2h-2V0H0z'%20/%3e%3cpath%20fill='%23f00'%20d='M2%202v10h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z'%20/%3e%3cpath%20fill='%23fff'%20d='M2%202v2h8v2H8v2h2v2h2v2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z'%20/%3e%3c/svg%3e";function Qe(s){const{x:e,y:r,width:v,height:d}=s.getBoundingClientRect();return{size:l(v,d),position:l(e,r)}}const Rt={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 900 815"};function Nt(s,e){return u(),y("svg",Rt,e[0]||(e[0]=[Oe('<path d="M887 5H13c-4.4 0-8 3.6-8 8v764c0 4.4 3.6 8 8 8h874c4.4 0 8-3.6 8-8V13c0-4.4-3.6-8-8-8m-97 633s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#aea59f;"></path><path d="M25 25v690h850V25zm765 613s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#928c7f;"></path><path d="M35 35v670h830V35zm755 603s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#837c72;"></path><path d="M813 72H87c-4.4 0-8 3.6-8 8v580c0 4.4 3.6 8 8 8h726c4.4 0 8-3.6 8-8V80c0-4.4-3.6-8-8-8m-23 566s-170 15-340 15-340-15-340-15-10-134-10-268 10-268 10-268 170-15 340-15 340 15 340 15 10 134 10 268-10 268-10 268" style="fill:#615a52;"></path><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="opacity:.1;fill:#fff;"></path><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="opacity:.2;"></path><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="opacity:.1;"></path><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="opacity:.1;fill:#fff;"></path><linearGradient id="a" x1="670.572" x2="964.642" y1="283.613" y2="610.211" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="fill:url(#a);"></path><linearGradient id="b" x1="284.95" x2="615.999" y1="924.997" y2="557.329" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="fill:url(#b);"></path><linearGradient id="c" x1="-66.233" x2="229.922" y1="297.922" y2="594.078" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="fill:url(#c);"></path><linearGradient id="d" x1="265.69" x2="634.31" y1="334.62" y2="-34" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="fill:url(#d);"></path><linearGradient id="e" x1="284.95" x2="615.999" y1="924.997" y2="557.329" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M110 102s170-15 340-15 340 15 340 15l28.6-27.7c-1.5-1.4-3.4-2.3-5.6-2.3H87c-2.2 0-4.2.9-5.6 2.3z" style="fill:url(#e);"></path><linearGradient id="f" x1="670.572" x2="964.642" y1="283.613" y2="610.211" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M818.6 74.3 790 102s10 134 10 268-10 268-10 268l28.6 27.7c1.5-1.5 2.4-3.5 2.4-5.7V80c0-2.2-.9-4.2-2.4-5.7" style="fill:url(#f);"></path><linearGradient id="g" x1="265.69" x2="634.31" y1="334.62" y2="-34" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#000;stop-opacity:.4;"></stop><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop></linearGradient><path d="M790 638s-170 15-340 15-340-15-340-15l-28.6 27.7c1.4 1.4 3.4 2.3 5.6 2.3h726c2.2 0 4.2-.9 5.6-2.3z" style="fill:url(#g);"></path><linearGradient id="h" x1="-66.233" x2="229.922" y1="297.922" y2="594.078" gradientTransform="matrix(1 0 0 -1 0 816)" gradientUnits="userSpaceOnUse"><stop offset=".5" style="stop-color:#000;stop-opacity:0;"></stop><stop offset="1" style="stop-color:#000;stop-opacity:.4;"></stop></linearGradient><path d="M81.4 665.7 110 638s-10-134-10-268 10-268 10-268L81.4 74.3C79.9 75.8 79 77.8 79 80v580c0 2.2.9 4.2 2.4 5.7" style="fill:url(#h);"></path><path d="M70 785h760v25H70z" style="fill:#9d958a;"></path><path d="M887 5c4.4 0 8 3.6 8 8v764c0 4.4-3.6 8-8 8H13c-4.4 0-8-3.6-8-8V13c0-4.4 3.6-8 8-8zm0-5H13C5.8 0 0 5.8 0 13v764c0 7.2 5.8 13 13 13h874c7.2 0 13-5.8 13-13V13c0-7.2-5.8-13-13-13" style="fill:#7e776e;"></path><path d="M70 790h760v5H70z" style="opacity:.3;"></path><path d="M25 25h850v2H25zM33 33h834v2H33zM25 27h2v686h-2zM873 27h2v686h-2zM25 713h850v2H25zM33 705h834v2H33zM33 35h2v670h-2zM865 35h2v670h-2zM835 790h-5v20H70v-20H40v5h25v20h770v-20h25v-5zM343 715h2v70h-2z" style="opacity:.2;"></path><path d="M345 715h406v70H345zM753 715h66v70h-66z" style="opacity:.3;"></path><path d="M345 715v70h406v-70zm403 67H348v-64h400z" style="opacity:.1;"></path><path d="M343 713v74h410v-74zm408 72H345v-70h406z" style="fill:#757066;"></path><path d="M753 715v70h66v-70zm63 67h-60v-64h60z" style="opacity:.1;"></path><path d="M751 715h2v70h-2zM819 715h2v70h-2zM753 785h68v2h-68z" style="fill:#757066;"></path><path d="M751 713v74h70v-74zm68 72h-66v-70h66z" style="fill:#757066;"></path><path d="M25.3 738.9h133.6v31.2H25.3z" style="opacity:.2;fill:#fff;"></path><path d="M68.8 743.1c-.3.3-.6.6-.9.8h3.3l.2-.8zm15.7 0c-1.1 0-2.2.3-3.1.8h6.1c-.9-.5-1.9-.8-3-.8m17 0c-1.3 0-2.5.3-3.5.8h7.2c-1-.5-2.2-.8-3.7-.8m19.7.1-.6.7h4.2l.1-.7zM66.5 745c-.5.4-1 .8-1.5 1.1h5.8l.2-1.1zm13.3 0c-.1 0-.1.1 0 0-.4.4-.7.7-1 1.1h10.9c-.2-.4-.5-.7-.8-1l-.1-.1zm16.5 0c-.3.3-.7.7-.9 1.1h11.9c-.2-.4-.5-.8-.8-1.1zm23.4 0-1 1.1h5.6l.3-1.1zm-56.6 2.3c-.7.4-1.4.7-2.2 1.1h9.4l.2-1.1zm14.8 0c-.2.4-.4.7-.6 1.1h4.5c.1-.2.3-.5.4-.6.1-.2.3-.3.4-.5zm7.8 0q.15 0 0 0c.3.3.4.7.5 1.1h4.2c-.1-.4-.2-.8-.3-1.1zm9.2 0c-.1.4-.2.7-.3 1.1h4.1c.1-.4.3-.7.6-1l.1-.1zm8.3 0c.3.3.4.7.5 1.1h4.2c0-.4-.1-.8-.2-1.1zm14.6 0-1 1.1h7.1l.2-1.1zm-58 2.2-.3 1.1h5c.3-.2.7-.4 1-.6l-.1.6h4.4l.3-1.1zm17 0c-.2.3-.3.7-.4 1.1h4.5c.1-.4.3-.8.5-1.1zm9.6 0v.3c0 .2-.1.6-.1.8h4.4c0-.4 0-.8-.1-1.1zm8.2 0c0 .4.1.8.2 1.1h4c-.1-.3-.2-.7-.2-1.1zm9.2 0c-.1.4-.3.8-.6 1.1h4.2c.2-.4.3-.7.3-1.1zm12.1 0-.9 1.1h4.2l.2-.3-.1.3h4.1l.2-1.1zm-56.5 2.2-.2 1c.9-.2 1.9-.5 3-1zm5.8 0-.2 1.1h4.3l.3-1.1zm10.7 0c-.1.4-.2.7-.3 1.1h4.5c.1-.4.2-.8.3-1.1zm10.3 0c0 .4-.1.7-.2 1.1h4.5c0-.4.1-.7.1-1.1zm9.1 0c.3.4.6.8 1 1.1h9c.5-.3 1-.7 1.4-1.1h-5.1c-.3.1-.5.1-.8.1-.2 0-.4-.1-.6-.1zm18.7 0-1 1.1h4.2l1-1.1zm5.1 0-.3 1.1h4.1l.3-1.1zM64.7 754l-.2 1.1h4.4l.2-1.1zm10.7 0c-.1.4-.1.7-.2 1.1h4.5c.1-.4.1-.7.2-1.1zm10.5 0c-.1.4-.1.7-.2 1.1h4.5c.1-.4.2-.7.2-1.1zm9.6 0c-.5.3-1.1.7-1.5 1.1h11.7c-.3-.4-.7-.8-1.1-1.1zm16.6 0-1 1.1h4.2l1-1.1zm6.5 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.2 1.1h4.4l.2-1.1zm10.7 0c0 .4-.1.7-.1 1.1h4.4c0-.4.1-.7.1-1.1zm10.5 0c-.1.4-.2.8-.3 1.1h4.5c.1-.4.3-.7.3-1.1zm7.8 0c-.2.4-.4.7-.6 1.1h4.5c.1-.3.3-.6.5-.8l.3-.3zm8.9 0c.2.3.4.7.4 1.1h4.2c-.1-.4-.2-.8-.3-1.1zm8.1 0-.9 1.1h4.2l1-1.1zm8 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.3 1.1h4.4l.3-1.1zm11 0c0 .4 0 .8.1 1.1h4.2v-.3c0-.2.1-.5.1-.8zm10 0c-.1.4-.3.8-.4 1.1h4.5c.2-.4.3-.7.4-1.1zm7.6 0c-.1.4-.1.7-.1 1.1h4.3c0-.4.1-.8.1-1.1zm10.1 0c0 .4 0 .8-.1 1.1h4.3c.1-.4.1-.7.1-1.1zm6.5 0-.3 1.1h15.6l.3-1.1zm-45.7 2.2-.3 1.1h4.4l.3-1.1zm11.8 0c.1.4.2.8.3 1.1h4.4l-.1-.1c-.2-.3-.3-.6-.4-1zm8.7 0c-.1.2-.3.5-.4.6l-.5.5h4.8c.2-.3.4-.7.6-1.1zm8.5 0c0 .4.1.8.2 1.1h4.7c-.3-.3-.4-.7-.5-1.1zm9.6 0c-.1.1-.1.2-.2.3-.2.3-.3.6-.6.8h4.9c.2-.4.3-.7.4-1.1zm6.6 0-.1.3h8.8l-.1.8h4.1l.1-.8h2.7l.1-.3zm-45.7 2.3-.2 1.1H67l.2-1.1zm13.1 0c.2.4.5.8.8 1.1H86l.1-.1c.3-.3.6-.7.9-1zm17.1 0c.2.4.4.8.8 1.1h10.4c.4-.3.7-.7 1-1l.1-.1zm23.8 0-.2 1.1h4.1l.2-1.1zm-54.4 2.2-.1.4h4.4l.1-.4zm15.6 0c.9.5 1.9.8 3.1.8 1.1 0 2.2-.3 3.1-.8zm17.3 0c1 .5 2.2.8 3.5.8 1.4 0 2.7-.3 3.8-.8zm21 0-.1.4h4.1l.1-.4z" style="fill:#2c5aa0;"></path><path d="M790 102S620 87 450 87s-340 15-340 15-10 134-10 268 10 268 10 268 170 15 340 15 340-15 340-15 10-134 10-268-10-268-10-268z" style="fill:none;stroke:#333;stroke-width:1.5px;stroke-miterlimit:10;"></path>',37)]))}const Dt={render:Nt},Ut={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer"};function $t(s,e){return u(),y("svg",Ut,e[0]||(e[0]=[n("path",{d:"M0 12h2v2h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2h-2V0H0z"},null,-1),n("path",{fill:"red",d:"M2 2v10h4v-2h2v2h2v2h2v2h2v2h2v2h2v-2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z"},null,-1),n("path",{fill:"#fff",d:"M2 2v2h8v2H8v2h2v2h2v2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h2V2z"},null,-1)]))}const Yt={render:$t},Gt={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"26",class:"wb_cursor_pointer_mooncity"};function Jt(s,e){return u(),y("svg",Gt,e[0]||(e[0]=[n("path",{fill:"#0666cc",d:"M2 2h2v2H2zm2 2h2v2H4zm2 2h2v2H6zm2 2h2v2H8zm6 6v-2h-2v-2h-2v4h2zm-6 0h2v4H8zm2 4h2v4h-2zm0 6h2v2h-2zm2-2h2v2h-2z"},null,-1),n("path",{fill:"#0688cc",d:"M8 18h2v4H8zm2-4v-4H8V8H6V6H4V4H2v12h4v2h2v-4zm0 8h2v2h-2z"},null,-1),n("path",{fill:"#0accff",d:"M2 16V0H0v20h2v-2h4v-2zm4 2h2v4H6zm2 4h2v4H8z"},null,-1)]))}const jt={render:Jt},qt={xmlns:"http://www.w3.org/2000/svg",width:"34",height:"48",class:"wb_cursor_wait"};function Xt(s,e){return u(),y("svg",qt,e[0]||(e[0]=[n("path",{d:"M32 20v-4h-2v-4h-2v-2h-2V6h-2V4h-2V2h-2v2h-2V2h-2V0h-4v2h-2v2H6v2H4v2H2v6H0v2h2v4h2v2H2v2h2v2h2v2h2v2h4v2h-2v2H8v2h2v2h2v2h4v4h2v2h2v2h2v-2h2v-2h2v-2h-2v-2h-2v-4h2v-2h-2v-2h4v-2h2v-2h2v-2h2v-4h2v-2z"},null,-1),n("path",{fill:"red",d:"M30 20v-4h-2v-4h-2v-2h-2V6h-2V4h-2v2h-2V4h-2V2h-4v2h-2v2H6v2H4v6H2v2h2v4h2v2H4v2h2v2h2v2h4v2h4v2h-4v2h-2v2h2v2h4v-2h2v2h2v-2h2v-2h-4v-2h4v-2h4v-2h2v-2h2v-4h2v-2zm-8 20h-4v4h2v2h2v-2h2v-2h-2z"},null,-1),n("path",{fill:"#fff",d:"M18 18v2h4v2h-2v2h-2v2h8v-2h-4v-2h2v-2h2v-2zM8 10v2h4v2h-2v2H8v2h8v-2h-4v-2h2v-2h2v-2z"},null,-1)]))}const Kt={render:Xt},Qt={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer_crosshair"};function Zt(s,e){return u(),y("svg",Qt,e[0]||(e[0]=[n("path",{d:"M10 0h2v8h-2zM10 14h2v8h-2zM0 10h8v2H0zM14 10h8v2h-8z"},null,-1)]))}const eo={render:Zt},to={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",class:"wb_cursor_pointer_crosshair"};function oo(s,e){return u(),y("svg",to,e[0]||(e[0]=[n("path",{d:"M10 10h1v1h-1z",class:"crosshair-center"},null,-1)]))}const no={render:oo},ro=["data-index"],so=se({__name:"Cursor",props:{parentLayout:{type:Object,default(){return{position:l(5,5)}}},cursor:{type:Object,default(){return new St}},offset:{type:lt,default(){return l(0,0)}}},setup(s){const e=s,r=p(l(0,0)),v=new Se;let d;const o=h(()=>({[We.POINTER_1]:[Yt],[We.POINTER_MOONCITY]:[jt],[We.WAIT]:[Kt],[We.CROSSHAIR]:[eo,no]})[e.cursor.name]),g=h(()=>Object.assign(e.cursor.toCSSVars(),{"--position-x":`${r.value.x}px`,"--position-y":`${r.value.y}px`})),C=h(()=>({[`cursor-${e.cursor.name}`]:e.cursor.name}));ke(()=>{v.add(U.pointerMove.subscribe(P))}),Me(()=>{v.unsubscribe()});const P=i=>{window.cancelAnimationFrame(d),d=window.requestAnimationFrame(()=>{const b=e.offset;r.value=l(()=>Math.round(Math.min(Math.max(l(i.x,i.y)-e.parentLayout.position-b,0),e.parentLayout.size)))})};return(i,b)=>(u(!0),y($e,null,Ye(o.value,(t,c)=>(u(),y("i",{key:c,"data-index":c,class:we(["wb-env-element-cursor",C.value]),style:me(g.value)},[(u(),oe(Le(t)))],14,ro))),128))}}),ao=ae(so,[["__scopeId","data-v-b027e06b"]]);function lo(s,e=0,r=1){return Math.min(Math.max(s,e),r)}function io(s){return Math.atan2(s.y,s.x)+Math.PI}function co(s){const e=window.getComputedStyle(s).transform,r=new DOMMatrix(e);return Math.atan2(r.b,r.a)}function vo(s,e){const r=Math.cos(e)*s.x-Math.sin(e)*s.y,v=Math.sin(e)*s.x+Math.cos(e)*s.y;return l(r,v)}function Ue(s,e,r,v,d){if(s===0||s===1)return s;const o=(v-r)/2+r,g=e(o);return Math.abs(g-s)<d?o:g>s?Ue(s,e,r,o,d):Ue(s,e,o,v,d)}function uo(s,e){const r=new Array(e+1).fill(void 0);return v=>{const d=Math.round(v*e);let o=r[Number(d)];return o===void 0&&(o=s(d/e),r[Number(d)]=o),o}}function ho(s=po,e=0,r=1,v=1e-5){return uo(o=>Ue(o,s,e,r,v),Math.round(1/v))}function po(s){return s}const fo={class:"handle-wrapper"},mo=se({__name:"RadialSlider",props:{styleType:{type:String,default:null},name:{type:String,default:"value"},modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},easing:{type:Function,default(s){return s}},circumference:{type:Number,default(){return Math.PI*2}}},emits:["update:model-value"],setup(s,{emit:e}){const r=s,v=e,d=p(null),o=p(!1);let g=new Se;const C=p(ho(r.easing)),P=p(0),i=p(0),b=h(()=>({"transition-active":o.value,[`type-${r.styleType}`]:r.styleType})),t=h(()=>({"--rad":k.value*2*Math.PI*c.value})),c=h(()=>f.value/(Math.PI*2)),f=h(()=>r.circumference/2),k=h(()=>C.value(Math.max(r.modelValue,0)/r.max));Me(()=>{O()});const O=()=>{g.unsubscribe(),g=new Se,o.value=!1},$=M=>{g.add(U.pointerMove.subscribe(j.bind(this))),g.add(U.pointerUp.subscribe(q.bind(this))),o.value=!0,P.value=R(M),i.value=r.modelValue/r.max},R=M=>{if(d.value){const V=co(d.value),L=Mt(M,d.value.getBoundingClientRect()),B=vo(L,-V-Math.PI-f.value),X=io(B)-Math.PI;return(lo(X/f.value,-1,1)+1)/2}return 0},j=M=>{let V=R(M);const L=V-P.value;V=Math.min(Math.max(i.value+L,0),1);let B;Math.abs(k.value-V)<.5?B=r.easing(V)*r.max:B=Math.round(k.value)*r.max,v("update:model-value",B)},q=()=>{O()};return(M,V)=>(u(),y("div",{ref_key:"rootEl",ref:d,class:we(["wb-element-radial-slider",b.value]),"touch-action":"none",style:me(t.value)},[n("div",fo,[n("div",{class:"handle",onPointerdown:$},null,32),V[0]||(V[0]=n("div",{class:"indicator"},null,-1))])],6))}}),wo=ae(mo,[["__scopeId","data-v-48d6333b"]]),yo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 105 80"};function go(s,e){return u(),y("svg",yo,e[0]||(e[0]=[n("path",{d:"M45 11c15.24 0 30.17.93 37.63 1.48C83.18 18.43 84 29.06 84 40c0 10.93-.82 21.56-1.37 27.52C75.16 68.07 60.24 69 45 69c-15.14 0-29.97-.92-37.48-1.47C6.96 59.88 6 45.75 6 40s.96-19.88 1.52-27.53C15.03 11.92 29.86 11 45 11m0-6C22.98 5 1.91 6.89 1.91 6.89S0 31.64 0 40s1.91 33.11 1.91 33.11S22.98 75 45 75s43.09-1.89 43.09-1.89S90 57.03 90 40 88.09 6.89 88.09 6.89 67.02 5 45 5"},null,-1),n("path",{d:"M70 22.9c11.11 0 22 .53 28.08.88.42 3.92.92 9.98.92 16.22 0 6.22-.51 12.29-.92 16.22-6.07.36-16.96.88-28.08.88-11.02 0-21.83-.52-27.94-.87C41.62 51.17 41 43.33 41 40s.62-11.17 1.06-16.23c6.1-.35 16.91-.87 27.94-.87m0-5.4c-17.13 0-33.51 1.22-33.51 1.22S35 34.63 35 40s1.49 21.28 1.49 21.28S52.87 62.5 70 62.5s33.51-1.22 33.51-1.22S105 50.94 105 40s-1.49-21.28-1.49-21.28S87.13 17.5 70 17.5"},null,-1)]))}const zo={render:go},bo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function So(s,e){return u(),y("svg",bo,e[0]||(e[0]=[n("path",{d:"M50 31c10.48 0 19 8.52 19 19s-8.52 19-19 19-19-8.52-19-19 8.52-19 19-19m0-6c-13.81 0-25 11.19-25 25s11.19 25 25 25 25-11.19 25-25-11.19-25-25-25M50 100c-1.66 0-3-1.34-3-3V83c0-1.66 1.34-3 3-3s3 1.34 3 3v14c0 1.66-1.34 3-3 3M50 20c-1.66 0-3-1.34-3-3V3c0-1.66 1.34-3 3-3s3 1.34 3 3v14c0 1.66-1.34 3-3 3M85.36 85.36a3 3 0 0 1-4.24 0l-9.9-9.9a3 3 0 0 1 0-4.24 3 3 0 0 1 4.24 0l9.9 9.9c1.17 1.16 1.17 3.06 0 4.24M28.79 28.79a3 3 0 0 1-4.24 0l-9.9-9.9a3 3 0 0 1 0-4.24 3 3 0 0 1 4.24 0l9.9 9.9a3 3 0 0 1 0 4.24M14.64 85.36a3 3 0 0 1 0-4.24l9.9-9.9a3 3 0 0 1 4.24 0 3 3 0 0 1 0 4.24l-9.9 9.9c-1.16 1.17-3.06 1.17-4.24 0M71.21 28.79a3 3 0 0 1 0-4.24l9.9-9.9a3 3 0 0 1 4.24 0 3 3 0 0 1 0 4.24l-9.9 9.9a3 3 0 0 1-4.24 0M100 50c0 1.66-1.34 3-3 3H83c-1.66 0-3-1.34-3-3s1.34-3 3-3h14c1.66 0 3 1.34 3 3M20 50c0 1.66-1.34 3-3 3H3c-1.66 0-3-1.34-3-3s1.34-3 3-3h14c1.66 0 3 1.34 3 3"},null,-1)]))}const Mo={render:So},Co={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function xo(s,e){return u(),y("svg",Co,e[0]||(e[0]=[n("path",{d:"M50 6c24.26 0 44 19.74 44 44S74.26 94 50 94 6 74.26 6 50 25.74 6 50 6m0-6C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),n("path",{d:"M50 0v100c27.61 0 50-22.39 50-50S77.61 0 50 0"},null,-1)]))}const Vo={render:xo},Eo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function ko(s,e){return u(),y("svg",Eo,e[0]||(e[0]=[n("path",{fill:"none",d:"M62 54v20c5.52 0 10-4.48 10-10s-4.48-10-10-10"},null,-1),n("path",{d:"M50 6c24.26 0 44 19.74 44 44S74.26 94 50 94 6 74.26 6 50 25.74 6 50 6m0-6C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),n("circle",{cx:"30",cy:"64",r:"10"},null,-1),n("path",{d:"M43 24c0 4.48 2.94 8.27 7 9.54V14.46c-4.06 1.27-7 5.06-7 9.54M50 0v14.46c.95-.3 1.95-.46 3-.46 5.52 0 10 4.48 10 10s-4.48 10-10 10c-1.05 0-2.05-.16-3-.46V100c27.61 0 50-22.39 50-50S77.61 0 50 0m25 68c-5.52 0-10-4.48-10-10s4.48-10 10-10 10 4.48 10 10-4.48 10-10 10"},null,-1)]))}const Ho={render:ko},Ao={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 80"};function _o(s,e){return u(),y("svg",Ao,e[0]||(e[0]=[n("path",{d:"M50 11c15.24 0 30.17.93 37.63 1.48C88.18 18.43 89 29.06 89 40c0 10.93-.82 21.56-1.37 27.52C80.16 68.07 65.24 69 50 69c-15.14 0-29.97-.92-37.48-1.47C11.96 59.88 11 45.75 11 40s.96-19.88 1.52-27.53C20.03 11.92 34.86 11 50 11m0-6C27.98 5 6.91 6.89 6.91 6.89S5 31.64 5 40s1.91 33.11 1.91 33.11S27.98 75 50 75s43.09-1.89 43.09-1.89S95 57.03 95 40 93.09 6.89 93.09 6.89 72.02 5 50 5"},null,-1),n("path",{d:"M49 69V10h16L54 69z"},null,-1)]))}const Po={render:_o},To={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function Wo(s,e){return u(),y("svg",To,e[0]||(e[0]=[n("path",{d:"M94 34.71V69H25.42zm6-9.71L0 75h100z"},null,-1)]))}const Lo={render:Wo},Oo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"};function Bo(s,e){return u(),y("svg",Oo,e[0]||(e[0]=[n("path",{d:"M7.5 3.5v4",style:{stroke:"#000","stroke-linecap":"round","stroke-miterlimit":"10"}},null,-1),n("path",{d:"M7.5-.5v16M-.5 7.5h16M1.84 1.84l11.32 11.32M1.84 13.16 13.16 1.84",style:{fill:"none",stroke:"#faf100","stroke-miterlimit":"10"}},null,-1)]))}const Fo={render:Bo},Io={class:"wb-env-screen-panel"},Ro=["disabled"],No={class:"label"},Do=["aria-label","onPointerdown"],Uo={class:"knob"},$o=["aria-label","onPointerdown"],Yo=se({__name:"Panel",props:{modelValue:{type:Object,default(){return{}}}},emits:["update:model-value"],setup(s,{emit:e}){const r=s,v=e,d=p(1),o=h(()=>[{name:"horizontalCentering",svg:Ce(zo),label:"H. Centering",min:0,max:1,step:.01},{name:"brightness",svg:Ce(Mo),label:"Brightness",min:0,max:1,step:.01},{name:"contrast",svg:Ce(Vo),label:"Contrast",min:0,max:1,step:.01},{name:"color",svg:Ce(Ho),label:"Color",min:0,max:1,step:.01},{name:"sharpness",svg:Ce(Po),label:"Sharpness",min:0,max:1,step:.01},{name:"soundVolume",svg:Ce(Lo),label:"Volume",min:0,max:1,step:.01}]);function g(b,t){v("update:model-value",{...r.modelValue,[b]:t})}let C;function P(b,t,c){b.preventDefault(),window.clearInterval(C),C=setInterval(()=>{const f=t.step*d.value;c?g(t.name,Math.min(Number(r.modelValue[t.name])+f,t.max)):g(t.name,Math.max(Number(r.modelValue[t.name])-f,t.min)),d.value=Math.min(d.value+1,10)},125)}function i(b){b.preventDefault(),window.clearInterval(C),d.value=1}return(b,t)=>(u(),y("div",Io,[(u(!0),y($e,null,Ye(o.value,(c,f)=>(u(),y("figure",{key:f,class:"control",disabled:c.disabled},[(u(),oe(Le(c.svg))),n("figcaption",No,Be(c.label),1),n("div",null,[n("button",{"aria-label":`Decrease ${c.label}`,onPointerdown:k=>P(k,c,!1),onPointerup:i},null,40,Do),n("div",Uo,[n("i",{style:me({"--value":s.modelValue[c.name]})},[n("div",null,[N(_(Fo)),t[0]||(t[0]=n("span",null,null,-1))])],4),N(wo,{"model-value":s.modelValue[c.name],"style-type":"screen-panel-control-knob",min:0,max:1,"onUpdate:modelValue":k=>g(c.name,k)},null,8,["model-value","onUpdate:modelValue"])]),n("button",{"aria-label":`Increase ${c.label}`,onPointerdown:k=>P(k,c,!0),onPointerup:i},null,40,$o)])],8,Ro))),128))]))}}),Go=ae(Yo,[["__scopeId","data-v-9eb8c4b4"]]),Jo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function jo(s,e){return u(),y("svg",Jo,e[0]||(e[0]=[n("path",{d:"M50 8c23.16 0 42 18.84 42 42S73.16 92 50 92 8 73.16 8 50 26.84 8 50 8m0-8C22.39 0 0 22.39 0 50s22.39 50 50 50 50-22.39 50-50S77.61 0 50 0"},null,-1),n("path",{d:"M50 77c-2.21 0-4-1.79-4-4V27c0-2.21 1.79-4 4-4s4 1.79 4 4v46c0 2.21-1.79 4-4 4"},null,-1)]))}const qo={render:jo},Xo=["aria-label"],Ko=se({__name:"PowerButton",props:{active:{type:Boolean,default:!1},label:{type:String,default:"Power"}},emits:["click"],setup(s,{emit:e}){const r=s,v=e,d=p(!1),o=p(0),g=h(()=>({active:r.active,broken:d.value}));Me(()=>{window.clearTimeout(C)});let C;function P(t){d.value||(o.value>=10?d.value=!0:(b(t),o.value++),window.clearTimeout(C),C=window.setTimeout(()=>{o.value=0},500))}function i(t){b(t)}function b(t){v("click",t)}return(t,c)=>(u(),y("div",{class:we(["wb-env-screen-power-button",g.value]),"aria-label":s.active?"Turn Off":"Turn On"},[n("div",{class:"background"},[c[0]||(c[0]=n("i",{class:"light"},null,-1)),n("button",{onClick:i})]),n("button",{class:"foreground",onClick:P},[c[1]||(c[1]=n("i",{class:"light"},null,-1)),n("span",null,Be(s.label),1),N(_(qo))])],10,Xo))}}),Qo=ae(Ko,[["__scopeId","data-v-9d2d3534"]]),Zo={class:"content"},en={key:0,class:"scanlines"},tn={key:0,class:"frame"},on={class:"panel"},nn=se({__name:"Screen",props:{core:{type:Object,default(){return null}},theme:{type:Object,default(){return null}},cursor:{type:[it,null],default:null},hasScanLines:{type:Boolean,default:!1},hasRealLook:{type:Boolean,default:!1},bootSequence:{type:[String,Number],default:fe.SEQUENCE_3},frameActive:{type:Boolean,default:!0},hasActiveAnimation:{type:Boolean,default:!0},modelValue:{type:Object,default(){return{contrast:0,brightness:0,color:0,sharpness:-1,horizontalCentering:0,soundVolume:1}}}},emits:["update:model-value","toggleScreenActive"],setup(s,{expose:e,emit:r}){const v=s,d=r,o=p(null),g=p(null),C=p(null),P=p(null),i=p(!1),b=p(!1),t=p({name:"",duration:0,resolve:null}),c=p(!1),f=p(),k=p(),O=h(()=>{var A;const H=((A=k.value)==null?void 0:A.size)||l(0,0);return l(()=>H*l(v.modelValue.horizontalCentering-.5,0))}),$=h(()=>v.cursor?v.cursor.current:null),R=h(()=>v.theme.colors.screen.background),j=h(()=>({animate:c.value,"active-animation":v.hasActiveAnimation,"frame-active":v.frameActive,"screen-active":b.value,"real-look":v.hasRealLook,"open-panel":i.value,["boot-sequence-"+v.bootSequence]:!0})),q=h(()=>({"--turn-duration":t.value.duration+"ms","--horizontal-centering":v.modelValue.horizontalCentering-.5})),M=h(()=>({"backdrop-filter":[`contrast(${v.modelValue.contrast*2*100}%)`,`brightness(${v.modelValue.brightness*2*100}%)`,`saturate(${v.modelValue.color*2*100}%)`,`blur(${v.modelValue.sharpness*20/(window.devicePixelRatio||1)}px)`].join(" ")})),V=h(()=>{if(f.value){const H=l(()=>Math.round(f.value||l(0,0)));return{"--wrapper-position-x":H.x+"px","--wrapper-position-y":H.y+"px"}}return{}});re(()=>b.value,H=>{d("toggleScreenActive",H)}),re(()=>v.frameActive,()=>{ne(()=>{Y()})}),re(()=>R.value,H=>{var A;document.querySelector('[name="theme-color"]')&&((A=document.querySelector('[name="theme-color"]'))==null||A.setAttribute("content",H))}),re(()=>v.bootSequence,H=>{var ie;let A;typeof H=="number"&&H<4?A=getComputedStyle(document.documentElement).getPropertyValue("--color-boot-sequence-"+H):A=getComputedStyle(document.documentElement).getPropertyValue("--color-background"),document.querySelector('[name="theme-color"]')&&((ie=document.querySelector('[name="theme-color"]'))==null||ie.setAttribute("content",A))});const L=new Se;ke(()=>{L.add(U.resize.subscribe(Y)),Y()}),Me(()=>{L.unsubscribe()});function B(){t.value.resolve&&t.value.resolve()}function X(){t.value.resolve&&t.value.resolve()}function Y(){g.value&&C.value&&(f.value=l(()=>(l(window.innerWidth,window.innerHeight)-Qe(g.value).size)/2),ne(()=>{k.value=Qe(C.value)}))}function K(H=4e3){return c.value?Promise.resolve(!1):(v.hasActiveAnimation||(H=0),t.value.duration=H,c.value=!0,new Promise(A=>{t.value.resolve=A,ne(()=>b.value=!0)}).then(()=>(c.value=!1,!0)).catch(A=>{throw A}))}function ue(H=550){return c.value?Promise.resolve(!1):(v.hasActiveAnimation||(H=0),t.value.duration=H,c.value=!0,new Promise(A=>{t.value.resolve=A,ne(()=>b.value=!1)}).then(()=>(c.value=!1,!0)).catch(A=>{throw A}))}function E(H=!i.value){i.value=H}function le(){E()}function m(){b.value?ue():K()}return e({turnOn:K,turnOff:ue,togglePanel:E}),(H,A)=>(u(),y("div",{ref_key:"rootEl",ref:o,class:we(["wb-env-screen",j.value]),style:me(q.value)},[n("div",{ref_key:"wrapperEl",ref:g,class:"wrapper",style:me(V.value)},[n("div",{ref_key:"containerEl",ref:C,class:"container"},[N(ht,{name:"animation-turn",onAfterEnter:B,onAfterLeave:X},{default:Ve(()=>[pt(n("div",{ref_key:"backgroundEl",ref:P,class:"background"},[n("div",Zo,[be(H.$slots,"default",{},void 0,!0)]),s.hasScanLines&&b.value?(u(),y("div",en,A[1]||(A[1]=[n("div",null,null,-1)]))):I("",!0),$.value&&k.value?(u(),oe(ao,{key:1,"parent-layout":k.value,offset:O.value,cursor:$.value},null,8,["parent-layout","offset","cursor"])):I("",!0),n("div",{class:"manipulation",style:me(M.value)},null,4)],512),[[dt,b.value]])]),_:3}),be(H.$slots,"container",{containerLayout:k.value},void 0,!0)],512),s.frameActive?(u(),y("div",tn,[N(_(Dt)),N(Qo,{active:b.value,class:"power-button",options:s.modelValue,onClick:m},null,8,["active","options"]),n("div",on,[N(Go,{"model-value":s.modelValue,"onUpdate:modelValue":A[0]||(A[0]=ie=>d("update:model-value",ie))},null,8,["model-value"]),n("button",{class:"cover",onClick:le},A[2]||(A[2]=[n("span",null,"Push",-1)]))])])):I("",!0)],4)],6))}}),rn=ae(nn,[["__scopeId","data-v-a1cb5f9a"]]),sn={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"260",height:"262"};function an(s,e){return u(),y("svg",sn,e[0]||(e[0]=[Oe('<path d="M258 24v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h-2V4h-2V2h-2V0H48v88h-2v2h-4v2h-4v2h-4v2h-2v2h-2v4h-2v4h-2v4h-2v6h-2v4h-2v2h-2v2h-4v2h-2v2h-2v2H8v2H6v4H4v2H2v4H0v58h2v62h102v-22h2v-2h4v-2h4v-2h4v-2h2v-2h2v-4h2v-2h2v-4h2v-2h2v-4h2v-2h4v-2h2v-2h2v-2h2v-2h2v-4h2v-2h2v-4h2v-4h2v-4h2v-4h2v-10h104V24z"></path><path fill="#77c" d="M54 4v118h4v-2h2v-2h4v-2h2v-2h2v-2h4V92h14v-4h22v2h2v2h128v76h16V24h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2v-2h-2V8h-2V6h-2V4z"></path><g fill="#fff"><path d="M116 96v24h-2v2h-2v2h-2v2h-4v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-4v2h-2v2h-2v22h2v2h144V96zM80 100h2v-4h-4v6h2zM92 172h-2v6h4v-2h2v-2h-3zM116 186v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2H96v2h4v2h4v2h2v2h2v2h2v2h2v2zM138 174h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h-2v2h4v-2h6v2h4v2h2v2h2v4h-2v4h4v-4h2v-2h2v-4h2v-4h2v-4h2v-4h2v-10h-14z"></path><path d="M134 196v-2h-4v-2h-6v2h-4v6h2v4h8v-2h4v-2h2v-4zM88 182h2v8h-2zM102 192h6v-4h2v-2h-2v-2h-2v-2h-2v-2h-8v2h-4v6h2v2h8zM90 190h4v2h-4zM94 192h8v2h-8zM130 204h4v2h-4zM130 208v4h2v-2h4v-2h2v-2h-4v2zM116 200h2v2h-2zM104 236h2v2h-2zM120 206v-2h-2v2h1z"></path><path d="M120 208h-2v-2h-2v-4h-2v-2h-2v-4H94v-2h-4v16h-2v2h-2v2h-2v2h-2v2h-2v2H66v38h34v-22h4v-2h6v-2h4v-2h4v-4h2v-2h2v-4h2v-2h2v-4h2v-4h-8z"></path><path d="M120 206h2v2h-2zM102 92h-8v-2h-6v4h-2v6h-2v4h2v2h2v2h2v2h14V94h-2zM38 134h2v2h-2z"></path><path d="M80 214h2v-2h2v-2h2v-40h-2v-4h-2v-22h2v-2h2v-2h2v-2h4v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2h2v-2h2V94h-4v-2h-4v2h2v2h2v16h-2v2H90v-2h-2v-2h-2v-2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-4v2h-4v2h-4v2h-4v2h-4v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v2h-2v2h-4v2h-2v-4h2v-2h2v-2h4v-2h2v-2h2v-2h4v-2h2v-2h2v-2h2v-2h-6v-2h-2v-2h-2v-2h-2v-2h2v2h4v2h4v2h6v-2h4V92h-4v2h-2v2h-4v2h-4v4h-2v4h-2v4h-2v4h-2v6h-2v2h-2v2h-2v2h-4v2h-2v2h-2v2h-2v4H8v2H6v4H4v56h2v60h56v-42h18z"></path><path d="M30 140h2v2h-2zM22 146h2v2h-2zM54 124.12v1.85l4 .03v-1.88z"></path></g><path fill="#333" d="M144 8h24v30h-24z"></path><g fill="#77c"><path d="M130 118v-2h-4v-2h-4v2h2v2zM132 122h6v-2h-2v-6h2v-4h2v-2h-10v2h2v4h-2v2h2zM152 112h2v-2h4v-2h-14v2h4v2h-2v2h6z"></path><path d="M144 118h10v-2h2v-4h-2v2h-2v2h-6v-2h-4v2h2zM162 118h12v-10h-6v2h-2v2h4v4h-6v-4h-4v4h2zM178 116h2v2h10v-2h2v-4h-14zm4-2h6v2h-6zM210 120v-8h-2v-2h-2v-2h-12v2h-2v2h4v4h2v2h6v-2h-4v-4h6v2h-2v2h2v6h6v-2zM198 130h-2v2h-4v-2h-2v-2h-4v14h4v-8h2v2h4v-2h2v8h4v-14h-4zM180 128h-10v2h-2v6h2v2h10v-2h2v-6h-2zm-2 8h-6v-6h6zM156 130h2v4h-2v2h2v2h6v-2h-2v-6h2v-2h-8zM152 132h-4v4h2v2h6v-2h-4zM140 132h-4v-2h-2v-2h-4v2h2v2h2v2h-2v2h-2v2h4v-2h2v-2h4v8h6v-2h-2v-10h2v-2h-6z"></path></g><g fill="#bbb"><path d="M146 160v-2h2v-6h-2v-2h-4v-2h-24v2h2v2h-8v-2h2v-2h-12v2h4v14h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v4h-2v2h10v-2h-2v-4h2v2h2v2h2v4h-2v2h-2v2h-4v-2h-2v-2h-2v6h14v-2h2v-2zm-30-4h-2v2h-2v-4h4z"></path><path d="M210 148v2h2v2h-8v-2h2v-2h-20v2h4v2h-2v2h-2v2h-2v-8h-6v4h-2v2h-2v2h-2v-4h2v-2h2v-2h-28v2h4v6h-2v4h-4v2h-2v2h28v-2h2v-2h2v-2h2v6h10v-2h-2v-4h2v-2h2v-2h2v-2h4v-2h2v14h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2zm-44 8h-2v4h-2v2h-8v-2h2v-4h2v-4h2v-2h6zm42 0h-2v2h-2v-4h4z"></path></g><path d="M108 164h2v-2h2v-2h2v-2h-6zM140 160h-2v2h4v-2h2v-2h-4zM130 158h-2v6h10v-2h-8zM154 158h-4v4h-4v2h10v-2h-2zM170 160h-2v-2h-4v4h-2v2h8v-2h2v-2h2v-2h-4zM178 164h8v-2h-2v-2h2v-2h-8zM200 158v6h2v-2h2v-2h2v-2zM98 0v48h112V0zm106 44H104V4h100z"></path><path d="M198 8h-24v30h24zm-6 26h-12V12h12z"></path><path fill="#bbb" d="M104 4v40h100V4zm94 34h-24V8h24z"></path><path d="M188 182h4v2h-2v2h-2v2h-2v2h-2v2h-2v-10h2v-2h-10v2h2v18h6v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h2v-2h4v-2h-14zM218 180h-6v2h-2v2h-2v2h4v10h-4v4h14v-4h-4zM226 196h4v4h-4zM252 188v-2h2v-2h-2v-2h-2v-2h-12v2h-2v2h-2v2h8v-2h4v4h-4v4h4v4h-4v-2h-8v2h2v2h2v2h12v-2h2v-2h2v-2h-2v-2h-2v-4z"></path>',10)]))}const ln={render:an},cn={class:"wb-env-no-disk"},vn=se({__name:"NoDisk",setup(s){return(e,r)=>(u(),y("div",cn,[N(_(ln))]))}}),un=ae(vn,[["__scopeId","data-v-8c8ee13c"]]),hn={key:0,ref:"menu",class:"menu"},pn={key:1,class:"cover"},dn="Web-Workbench release. Version 1.3",fn=se({__name:"Header",props:{core:{},parentLayout:{},title:{},showCover:{type:Boolean},items:{}},emits:["inputContextMenu"],setup(s,{emit:e}){const r={size:l(window.innerWidth,window.innerHeight)},v=s,d=e,o=p(!1),g=h(()=>{var t,c;return v.items||((c=(t=v.core)==null?void 0:t.modules.windows)==null?void 0:c.contextMenu.activeItems.items)||[]});function C(...t){d("inputContextMenu",...t)}function P(){o.value=!1}function i(t){t.button===qe.RIGHT&&(t.preventDefault(),o.value=!0)}function b(t){t.button===qe.RIGHT&&(o.value=!1)}return(t,c)=>(u(),y("header",{class:"wb-env-fragment-header",onMouseout:P,onPointerdown:i,onPointerup:b},[t.showCover||o.value?I("",!0):(u(),y("nav",hn,[N(kt,{core:t.core,items:g.value,"parent-layout":t.parentLayout||r,"onUpdate:modelValue":C},null,8,["core","items","parent-layout"])],512)),t.showCover||o.value?(u(),y("div",pn,[n("span",null,Be(t.title||dn),1)])):I("",!0)],32))}}),mn=ae(fn,[["__scopeId","data-v-e92564a5"]]),wn={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"14"};function yn(s,e){return u(),y("svg",wn,e[0]||(e[0]=[n("path",{d:"M6 4V0H0v6h4v8h8V4zM4 4H2V2h2zm6 8H6V6h4z",class:"svg-primary"},null,-1)]))}const gn={render:yn},zn={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12",viewBox:"4 4 14 12"};function bn(s,e){return u(),y("svg",zn,e[0]||(e[0]=[n("g",{class:"svg-primary"},[n("path",{d:"M4 8h2v2H4zM6 6h2v2H6zM14 6h2v2h-2zM16 8h2v2h-2zM8 4h6v2h-2v10h-2V6H8z"})],-1)]))}const Sn={render:bn},Mn={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12"};function Cn(s,e){return u(),y("svg",Mn,e[0]||(e[0]=[n("g",{class:"svg-primary"},[n("path",{d:"M0 6h2v2H0zM6 0h2v10h2v2H4v-2h2zM2 8h2v2H2zM10 8h2v2h-2zM12 6h2v2h-2z"})],-1)]))}const xn={render:Cn},Vn={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"14"};function En(s,e){return u(),y("svg",Vn,e[0]||(e[0]=[n("path",{d:"M1 2v2H0v6h1v2h2v2h3v-2H4v-2H2V8h9V6H2V4h2V2h2V0H3v2z",class:"svg-primary"},null,-1)]))}const kn={render:En},Hn={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"14"};function An(s,e){return u(),y("svg",Hn,e[0]||(e[0]=[n("path",{d:"M10 2v2h1v6h-1v2H8v2H5v-2h2v-2h2V8H0V6h9V4H7V2H5V0h3v2z",class:"svg-primary"},null,-1)]))}const _n={render:An},Pn={class:"sidebar-left"},Tn={key:0,class:"scrollbar scrollbar-right"},Wn={class:"range"},Ln={key:1,class:"scrollbar-corner"},On={key:2,class:"scrollbar scrollbar-bottom"},Bn={class:"range"},Fn=se({__name:"ScrollContent",props:{debug:{type:Boolean},options:{},setTriggerReset:{type:Boolean},setTriggerRefresh:{},embed:{type:Boolean},rootLayout:{},parentLayout:{},setParentLayout:{type:Function},parentLayoutSizeOffset:{}},emits:["click","refresh"],setup(s,{emit:e}){const r=s,v=p(r.parentLayout.size),d=e,o=p(null),g=p(null),C=p(null),P=p(null),i=p(null),b=p(!0),t=p({}),c=p({spacer:l(0,0),helper:l(0,0),content:l(0,0),wrapper:l(0,0),inner:l(0,0)}),f=p({startScroll:0,current:l(0,0),start:null,move:null}),k=ft(),O=h(()=>r.options.scrollX||r.options.scrollY||!!k.corner),$=h(()=>({"--scroll-bar-size":`${Math.max(16-De.size,0)}`,...t.value})),R=h(()=>({active:b.value,"axis-x":r.options.scrollX,"axis-y":r.options.scrollY,embed:r.embed}));re(()=>r.setTriggerReset,()=>{B()}),re(()=>r.setTriggerRefresh,w=>{w&&w.reset?q():w&&w.scroll&&B()}),ke(()=>{window.requestAnimationFrame(()=>{j()})});function j(){var G,Z,Q;const w=V(),T=l(r.options.scroll||r.options.scrollY?20:0,r.options.scroll||r.options.scrollX?20:0),D=r.parentLayout;if(D){let ee=l(r.parentLayout.size.x||w.x,r.parentLayout.size.y||w.y);ce("ScrollContent:ParentLayout:Size",r.parentLayout.size.toString()),ce("ScrollContent:innerSize",w.toString());const he=l(()=>T+r.parentLayoutSizeOffset);ce("ScrollContent:Size:1",ee.toString(),(G=r.rootLayout)==null?void 0:G.size.toString()),!r.options.scrollX&&!r.options.scrollY&&(ee=l(()=>Math.max(Math.max(ee+he,ee),w+he))),ce("ScrollContent:Size:2",ee.toString(),(Z=r.rootLayout)==null?void 0:Z.size.toString()),ee=l(()=>{var ze;return Math.min(ee,((ze=r.rootLayout)==null?void 0:ze.size)||l(1/0,1/0))}),ce("ScrollContent:Size:3",ee.toString(),(Q=r.rootLayout)==null?void 0:Q.size.toString()),r.setParentLayout({size:ee})}v.value=D.size}function q(){r.setParentLayout({size:l(0,0)}),ne(()=>{j()})}function M(){var w,T;return l(((w=o.value)==null?void 0:w.offsetWidth)||0,((T=o.value)==null?void 0:T.offsetHeight)||0)}function V(){var w,T;return l(((w=g.value)==null?void 0:w.offsetWidth)||0,((T=g.value)==null?void 0:T.offsetHeight)||0)}function L(){var w;window.requestAnimationFrame(()=>{K(),X()}),(w=r.setParentLayout)==null||w.call(r,{scrollOffset:Y()}),d("refresh",{scroll:!0})}function B(){var T,D,G,Z,Q;c.value.content=M(),c.value.wrapper=l(((T=C.value)==null?void 0:T.offsetWidth)||0,((D=C.value)==null?void 0:D.offsetHeight)||0),c.value.inner=V(),c.value.helper=l(P.value&&((G=P.value)==null?void 0:G.offsetWidth)||0,i.value&&((Z=i.value)==null?void 0:Z.offsetHeight)||0),c.value.spacer=l(()=>Math.min(c.value.wrapper/c.value.inner,1)*c.value.helper);const w=Y();r.setParentLayout({scrollOffset:w}),K(),X(),d("refresh",{}),(Q=o.value)==null||Q.scrollTo(r.options.clampLeft?0:w.x,r.options.clampBottom?c.value.inner.y:w.y)}function X(){const w=l(()=>f.value.current*(1-c.value.spacer/c.value.helper)),T=l(()=>c.value.spacer/c.value.helper);t.value=Object.assign(w.toCSSVars("helper-position"),T.toCSSVars("helper-size"))}function Y(){var w,T;return l(((w=o.value)==null?void 0:w.scrollLeft)||0,((T=o.value)==null?void 0:T.scrollTop)||0)}function K(){const w=l(r.options.scrollY?De.size:0,r.options.scrollX?De.size:0),T=Y();f.value.current=Ne(()=>T/(c.value.inner-c.value.content+w))}function ue(w){var D;Ge(w),w.preventDefault(),f.value.start=l(w.x,w.y),f.value.startScroll=((D=o.value)==null?void 0:D.scrollTop)||0;const T=U.pointerMove.subscribe(G=>{var Z;f.value&&o.value&&(f.value.move=Ne(()=>l(G.x,G.y)-(f.value.start||0)),o.value.scrollTop=f.value.startScroll+c.value.inner.y*(((Z=f.value.move)==null?void 0:Z.y)||0)/c.value.helper.y)});U.pointerUp.pipe(xe()).subscribe(()=>{T.unsubscribe()})}function E(w){if(w.preventDefault(),o.value){f.value.start=l(w.x,w.y),f.value.startScroll=o.value.scrollLeft||0;const T=U.pointerMove.subscribe(D=>{var G;f.value&&o.value&&(f.value.move=Ne(()=>l(D.x,D.y)-f.value.start),o.value.scrollLeft=f.value.startScroll+c.value.inner.x*(((G=f.value.move)==null?void 0:G.x)||0)/c.value.helper.x)});U.pointerUp.pipe(xe()).subscribe(()=>{T.unsubscribe()})}}function le(){ge(1)}function m(){ge(3)}function H(){ge(0)}function A(){ge(2)}let ie;function ye(){window.clearInterval(ie)}function ge(w){window.clearInterval(ie),ie=setInterval(()=>{if(o.value)switch(w){case 0:o.value.scrollLeft-=16;break;case 1:o.value.scrollTop-=16;break;case 2:o.value.scrollLeft+=16;break;case 3:o.value.scrollTop+=16;break}},125)}function ce(...w){r.debug&&console.debug("[ScrollContent]",...w)}return de("scrollContent",{refresh:B,setParentSize:j}),(w,T)=>(u(),y("div",{class:we(["wb-env-scroll-content",R.value]),style:me($.value)},[n("div",{ref_key:"scrollWrapperEl",ref:C,class:"wrapper"},[n("div",Pn,[be(w.$slots,"sidebarLeft",{},void 0,!0)]),n("div",{ref_key:"scrollContentEl",ref:o,class:"content",onScroll:L},[n("div",{ref_key:"scrollInnerEl",ref:g,class:"inner"},[n("div",null,[be(w.$slots,"default",{},()=>[T[0]||(T[0]=Oe('<div style="width:680px;height:100px;margin:20px;background:red;" data-v-2f2c1e47></div><div style="width:250px;height:240px;margin:20px;background:red;" data-v-2f2c1e47></div><div style="width:500px;height:240px;margin:20px;background:green;" data-v-2f2c1e47></div><div style="width:800px;height:240px;margin:20px;background:yellow;" data-v-2f2c1e47></div><div style="width:250px;height:240px;margin:20px;background:red;" data-v-2f2c1e47></div><div style="width:500px;height:3000px;margin:20px;background:green;" data-v-2f2c1e47></div><div style="width:800px;height:240px;margin:20px;background:yellow;" data-v-2f2c1e47></div>',7))],!0)])],512)],544)],512),b.value&&r.options.scrollY?(u(),y("div",Tn,[n("button",{class:"helper-top","touch-action":"none",onPointerdown:le,onPointerup:ye},[N(_(Sn))],32),n("span",Wn,[n("span",{ref_key:"scrollRightHelperEl",ref:i,class:"helper"},[n("button",{class:"spacer","touch-action":"none",onPointerdown:ue},null,32)],512)]),n("button",{class:"helper-bottom","touch-action":"none",onPointerdown:m,onPointerup:ye},[N(_(xn))],32)])):I("",!0),O.value?(u(),y("span",Ln,[be(w.$slots,"corner",{},void 0,!0)])):I("",!0),b.value&&r.options.scrollX?(u(),y("div",On,[n("button",{class:"helper-left","touch-action":"none",onPointerdown:H,onPointerup:ye},[N(_(kn))],32),n("span",Bn,[n("span",{ref_key:"scrollBottomHelperEl",ref:P,class:"helper"},[n("button",{ref:"scrollBottomSpacerEl",class:"spacer","touch-action":"none",onPointerdown:E},null,544)],512)]),n("button",{class:"helper-right","touch-action":"none",onPointerdown:A,onPointerup:ye},[N(_(_n))],32)])):I("",!0)],6))}}),In=ae(Fn,[["__scopeId","data-v-2f2c1e47"]]),Rn={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"};function Nn(s,e){return u(),y("svg",Rn,e[0]||(e[0]=[n("g",{class:"svg-primary"},[n("path",{d:"M4 4h12v12H4z"}),n("path",{d:"M0 0v20h20V0zm18 18H2V2h16z"})],-1),n("path",{fill:"#FFF",d:"M8 8h4v4H8z",class:"svg-secondary"},null,-1)]))}const Dn={render:Nn},Un={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20"};function $n(s,e){return u(),y("svg",Un,e[0]||(e[0]=[Oe('<g class="svg-primary"><path d="M0 0v20h22V0zm16 14H2V2h14z"></path><path d="M4 4h10v8H4z"></path></g><g fill="#FFF" class="svg-secondary"><path fill="#" d="M6 6h14v12H6z" class="svg-secondary"></path></g>',2)]))}const Yn={render:$n},Gn={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"20"};function Jn(s,e){return u(),y("svg",Gn,e[0]||(e[0]=[n("g",{class:"svg-primary"},[n("path",{d:"M8 6h10v10H8z"}),n("path",{d:"M0 0v20h22V0zm20 18H6V4h14z"})],-1),n("path",{fill:"#A4A5A5",d:"M2 2h14v2H6v10H2z",class:"svg-secondary"},null,-1)]))}const jn={render:Jn},qn={key:0,ref:"windowTitleWrapper",class:"title"},Xn={class:"handlers handlers-right"},Kn=se({__name:"WindowHeader",props:{close:{type:Boolean},overlay:{type:Boolean},title:{},focused:{type:Boolean}},emits:["close","up","down","click:header"],setup(s,{emit:e}){const r=s,v=e,d=h(()=>({focused:r.focused}));function o(t){t.preventDefault(),v("close",t)}function g(t){t.preventDefault(),v("click:header",Ge(t))}function C(t){t.preventDefault(),v("up",t)}function P(t){t.preventDefault(),v("down",t)}function i(t){t.target instanceof HTMLButtonElement&&t.target.blur()}function b(t){t.target instanceof HTMLButtonElement&&t.target.blur()}return(t,c)=>(u(),y("header",{class:we(["wb-env-fragment-window-header",d.value])},[n("div",{class:we(["handlers handlers-left",{"has-close":t.close}])},[t.close?(u(),y("button",{key:0,"aria-label":"Close Window",class:"control close","touch-action":"none",onClick:o},[N(_(Dn))])):I("",!0)],2),n("button",{tabindex:"-1",class:"title-wrapper",onPointerdown:g},[c[0]||(c[0]=n("span",{class:"background"},[n("span",{class:"line"}),n("span",{class:"line"}),n("span",{class:"dots"})],-1)),t.title?(u(),y("span",qn,[n("span",{ref:"windowTitle"},Be(t.title),513)],512)):I("",!0)],32),n("div",Xn,[t.overlay?(u(),y("button",{key:0,"aria-label":"Move Window Up",class:"control overlay-top","touch-action":"none",onClick:C,onPointerup:i},[N(_(Yn))],32)):I("",!0),t.overlay?(u(),y("button",{key:1,"aria-label":"Move Window Down",class:"control overlay-bottom","touch-action":"none",onClick:P,onPointerup:b},[N(_(jn))],32)):I("",!0)])],2))}}),Qn=ae(Kn,[["__scopeId","data-v-31b54484"]]),Ze=20,Zn=["data-id"],er=2,tr=se({__name:"Window",props:{window:{type:At,default:null},id:{type:String,default(){return null}},wrapper:{type:rt,default(){return null}},sidebarComponent:{type:Object,default(){return null}},sidebarComponentData:{type:Object,default(){return null}},component:{type:Object,default(){return null}},componentData:{type:Object,default(){return null}},symbolWrapper:{type:Ht,default(){return null}}},emits:["focus","ready","up","down","close","refresh"],setup(s,{emit:e}){const{core:r}=Je(),v=p(null),d=p(null),o=s,g=e,C=p(o.window.options.hideRootHeader?0:Ze),P=h(()=>l(4,o.window.options.embed?0:C.value+er)),i=p(!0),b=p({start:void 0,move:void 0,offset:void 0}),t=p({start:void 0,move:void 0});function c(){t.value.start=void 0,t.value.move=void 0,t.value.offset=void 0}const f=new Se,k=p(!1),O=p(!1),$=p(!1),R=p(),j=p(!0),q=p(0),M=h(()=>({size:l(()=>E.value.size-l(16,0)),position:E.value.position})),V=h(()=>{var x;return m.value.sidebar&&((x=r.value)==null?void 0:x.config.observable[_t.SHOW_STORAGE_SPACE])||!1}),L=h(()=>o.wrapper?{...o.wrapper.layout,size:l(()=>o.wrapper.layout.size+(o.window.options.hideRootHeader?Ze:0))}:{size:l(window.innerWidth,window.innerHeight)}),B=h(()=>({focused:m.value.focused})),X=h(()=>({close:m.value.close,overlay:m.value.overlay,title:m.value.title,focused:m.value.focused,fill:m.value.fillHeader||m.value.filled})),Y=h(()=>Object.assign({"--header-height":q.value},E.value.size.toCSSVars("size"),E.value.position.toCSSVars("position"))),K=h(()=>({moving:k.value,scaling:O.value,scale:A.value,scroll:ie.value,"scroll-x":m.value.scroll||m.value.scrollX,"scroll-y":m.value.scroll||m.value.scrollY,freeze:m.value.freeze,visible:i.value,embed:m.value.embed,focused:m.value.focused,borderless:m.value.borderless,"style-filled":m.value.filled})),ue=h(()=>L.value.size),E=h(()=>o.window.layout),le=h(()=>E.value.size),m=h(()=>o.window.options),H=h(()=>m.value.focused||!1),A=h(()=>m.value.scale||m.value.scaleX||m.value.scaleY),ie=h(()=>m.value.scroll||m.value.scrollX||m.value.scrollY);re(()=>le.value,()=>{!O.value&&t.value&&(t.value.start=E.value.position,t.value.offset=0,ze(E.value.position,T()))}),re(()=>H.value,x=>{ne(()=>{g("focus",ve())}),x?f.add(U.pointerDown.pipe(Ke(({target:a})=>a&&d.value?!Ct(a,d.value):!1),xe()).subscribe(()=>{m.value.focused=!1})):f.unsubscribe()}),ke(()=>{v.value&&(q.value=v.value.offsetHeight),o.wrapper&&j&&(j.value=!1,Q({scroll:!0}),m.value.center&&window.requestAnimationFrame(()=>{o.wrapper.centerWindow(o.id)})),H.value&&window.setTimeout(()=>{f.add(U.pointerDown.pipe(Ke(({target:x})=>x&&d.value?!!x.closest(`.wb-components-window[data-id="${o.id}"]`)&&!!x.closest(".wb-env-fragment-header"):!1),xe()).subscribe(()=>{m.value.focused=!1}))},300)}),Me(()=>{f.unsubscribe()});function ye(x){o.window.setLayout(x)}function ge(){m.value.focused=!1,m.value.freeze=!0}function ce(){ne(()=>{m.value.freeze=!1,m.value.focused=!0})}function w(){g("ready",ve())}function T(){return l(()=>ue.value-E.value.size)}function D(x){R.value=x,ne(()=>R.value=void 0)}function G(x=void 0){_e(x)}function Z(x){Q(x)}function Q(x){R.value=Object.assign({scroll:!0,resize:!0,reset:!1},x||{}),ne(()=>R.value=void 0)}function ee(){m.value.freeze||o.wrapper.setActiveWindow(o.id)}function he(x){if(!m.value.freeze){c();const a=l(x.x,x.y);t.value.start=a,t.value.offset=l(()=>a-E.value.position);const S=T();k.value=!0;const z=U.pointerMove.subscribe(F=>{ze(l(F.x,F.y),S)});U.pointerUp.pipe(xe()).subscribe(()=>{z.unsubscribe(),k.value=!1,Q(),o.wrapper.savePosition(o.id,E.value.position)})}}function ze(x,a){x=l(()=>Math.min(x,o.wrapper.layout.position+ue.value));const S=t.value.start||l(0,0),z=t.value.move||l(0,0),F=t.value.offset||l(0,0);t.value.move=l(()=>x-S);const W=l(()=>Math.round(S+z-F)),J=l(Math.max(He.value.x?Math.min(W.x,a.x):W.x,0),Math.max(He.value.y?Math.min(W.y,a.y):Math.min(W.y,a.y+E.value.size.y-C.value),0));o.window.setLayout({position:J})}const He=h(()=>{const x=m.value.clampX||m.value.clamp,a=m.value.clampY||m.value.clamp;return{x:x===void 0?!0:x,y:a===void 0?!1:a}});function ve(){return{id:o.id,scope:o.window,focused:H.value,refresh:Q}}function Ae(){g("up",ve())}function Fe(){g("down",ve())}function _e(x=void 0){ne(()=>{g("close",{...ve(),componentData:x})})}function Ie(){_e()}function Re(x){Ge(x);const a=l(x.x,x.y);b.value.start=a,b.value.offset=l(()=>a-E.value.size);const S=ue.value,z=U.pointerMove.subscribe(F=>{const W=b.value.start||l(0,0),J=l(()=>l(F.x,F.y)-W),at=b.value.offset||l(0,0);b.value.move=J;let te=l(()=>Math.round(W+J-at));const{scaleX:Pe,scaleY:Te}=m.value;(!Pe||Pe&&te.x+E.value.position.x<=S.x)&&(!Te||Te&&te.y+E.value.position.y<=S.y)&&(!Pe&&Te?te=l(E.value.size.x,te.y):Pe&&!Te&&(te=l(te.x,E.value.size.y)),te=l(()=>Math.min(te,S-o.window.layout.position)),o.window.layout.minSize&&(te=l(()=>Math.max(te,o.window.layout.minSize))),o.window.layout.maxSize&&(te=l(()=>Math.min(te,o.window.layout.maxSize))),o.window.setLayout({size:te}))});O.value=!0,U.pointerUp.pipe(xe()).subscribe(()=>{z.unsubscribe(),O.value=!1,Q(),o.wrapper.saveSize(o.id,E.value.size)})}return de("window",o.window),de("core",r.value),de("root-element",d.value),de("parentFocused",h(()=>m.value.focused)),de("parentLayout",M),de("options",B),de("window:refresh",Q),(x,a)=>(u(),y("aside",{ref_key:"rootEl",ref:d,"data-id":s.id,class:we(["wb-components-window",K.value]),style:me(Y.value),onPointerdown:ee},[n("div",null,[n("div",{ref_key:"headerEl",ref:v},[m.value.embed?I("",!0):(u(),oe(Qn,Ee({key:0},X.value,{"onClick:header":he,onUp:Ae,onDown:Fe,onClose:Ie}),null,16))],512),N(In,{options:m.value,class:"content",embed:"","set-parent-layout":ye,"parent-layout":E.value,"parent-layout-size-offset":P.value,"root-layout":L.value,"set-trigger-refresh":R.value,"set-trigger-reset":$.value,onRefresh:D},mt({sidebarLeft:Ve(()=>[V.value?(u(),oe(Le(s.sidebarComponent),Ee({key:0},s.sidebarComponentData,{class:"sidebar-left"}),null,16)):I("",!0)]),default:Ve(()=>[be(x.$slots,"default",{},()=>[(u(),oe(Le(s.component),Ee(s.componentData,{"set-trigger-refresh":R.value,onRefresh:Z,onClose:G,onFreeze:ge,onUnfreeze:ce,onReady:w}),null,16,["set-trigger-refresh"]))],!0)]),_:2},[A.value?{name:"corner",fn:Ve(()=>[n("button",{"aria-label":"Scale Window",tabindex:"-1",class:"helper-scale","touch-action":"none",onPointerdown:Re},[N(_(gn))],32)]),key:"0"}:void 0]),1032,["options","parent-layout","parent-layout-size-offset","root-layout","set-trigger-refresh","set-trigger-reset"])])],46,Zn))}}),or=ae(tr,[["__scopeId","data-v-1edbc575"]]),nr=se({__name:"WindowWrapper",props:{wrapper:{type:rt,default:null}},setup(s,{expose:e}){var q;const{core:r}=Je(),v=s,d=wt("parentLayout",p({position:l(0,0),size:l(window.innerWidth,window.innerHeight)})),o=new Se,g=p(!1),C=(q=r.value)==null?void 0:q.modules.screen,P=h(()=>C==null?void 0:C.contentLayout.size),i=h(()=>Array.from(v.wrapper.models).sort((M,V)=>(M.layout.zIndex||0)-(V.layout.zIndex||0)));re(()=>d,()=>{t()},{deep:!0}),re(()=>P.value,M=>{M&&v.wrapper.setLayout({size:M})}),re(()=>v.wrapper,()=>{t()}),ke(async()=>{o.add(U.resize.subscribe(f)),await t(!0),g.value=!0}),Me(()=>{o.unsubscribe()});const b=M=>{const{id:V,layout:L,sidebarComponent:B,sidebarComponentData:X,component:Y,componentData:K}=M;return{window:M,id:V,wrapper:v.wrapper,layout:L,sidebarComponent:B,sidebarComponentData:X,component:Y,componentData:K}},t=(M=!1)=>M?(f(),Promise.resolve()):new Promise(V=>{ne(()=>{window.setTimeout(()=>{f(),V(void 0)},500)})}),c=p(null),f=()=>{if(c.value){const{x:M,y:V,width:L,height:B}=c.value.getBoundingClientRect();v.wrapper.setLayout({position:l(M,V),size:l(L,B)})}},k=({id:M})=>{var V;v.wrapper.get(M)&&((V=v.wrapper.get(M))==null||V.ready())},O=({id:M,focused:V})=>{var L;v.wrapper.get(M)&&V&&((L=v.wrapper.get(M))==null||L.focus())},$=({id:M})=>{v.wrapper.setWindowUpDown(M,!1)},R=({id:M})=>{v.wrapper.setWindowUpDown(M,!0)},j=({id:M,componentData:V})=>{var L;v.wrapper.get(M)&&((L=v.wrapper.get(M))==null||L.close(V))};return e({refresh:t}),(M,V)=>(u(),y("div",{ref_key:"rootEl",ref:c,class:"wb-components-window-wrapper"},[be(M.$slots,"default",{},void 0,!0),s.wrapper&&g.value?(u(!0),y($e,{key:0},Ye(i.value,L=>(u(),oe(or,Ee({key:L.id},{ref_for:!0},b(L),{onReady:k,onFocus:O,onClose:j,onUp:$,onDown:R}),null,16))),128)):I("",!0)],512))}}),rr=ae(nr,[["__scopeId","data-v-8c1bc858"]]),sr=se({__name:"WebDos",props:{command:{type:String,default:null}},emits:["close"],setup(s,{emit:e}){var g;const{core:r}=Je(),v=e;Tt();const d=p([`Make by Lammpee ${new Date().getFullYear()}`,`Release ${(g=r.value)==null?void 0:g.version}`]);function o(){window.setTimeout(()=>{v("close")},1e3*(2+Math.floor(Math.random()*3)))}return(C,P)=>(u(),oe(Pt,{"show-introduction":!1,"delimiter-prefix":"","start-commands":s.command,core:_(r),class:"wb-module-core-web-dos","pre-rows":d.value,onStartCommandsComplete:o},null,8,["start-commands","core","pre-rows"]))}}),ar=ae(sr,[["__scopeId","data-v-012d5740"]]),et=""+new URL("CBfz6dJl.woff2",import.meta.url).href,tt=""+new URL("Ds3lXCLM.woff2",import.meta.url).href,ot=""+new URL("Dv51k-2y.ttf",import.meta.url).href,nt=""+new URL("C2jp1iUh.ttf",import.meta.url).href,lr="data:font/woff2;base64,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",st=""+new URL("BvxpuvYR.ttf",import.meta.url).href,ir=xt()?[{preload:!0,fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[ot,"ttf"]},{preload:!0,fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[nt,"ttf"]},{fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[ot,"ttf"]},{fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[nt,"ttf"]},{fontFamily:"BitFont",fontVariant:"normal",fontFeatureSettings:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[st,"ttf"]}]:[{preload:!0,fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[et,"woff2"]},{preload:!0,fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[tt,"woff2"]},{fontFamily:"Amiga Topaz 13",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[et,"woff2"]},{fontFamily:"Amiga Topaz 13 Console",fontVariant:"normal",fontFeatureSettings:"normal",fontStretch:"normal",fontWeight:700,fontStyle:"normal",fontDisplay:"swap",src:[tt,"woff2"]},{fontFamily:"BitFont",fontVariant:"normal",fontFeatureSettings:"normal",fontWeight:400,fontStyle:"normal",fontDisplay:"swap",src:[lr,"woff2"]}];function cr(s=0){return"SLEEP "+Number(s)}async function vr(s,{disks:e,cloudStorages:r,withWebDos:v}){var b;const d=!v,o=t=>d?void 0:cr(t),g=t=>t.length?[o(1e3),'Headline("Mount Disks…")',o(1e3),...t.reduce((c,f)=>f.hidden?c.concat([`mountDisk "${f.name}"`]):c.concat([`mountDisk "${f.name}"`,o(1e3)]),[])]:[];function C(t){const c=Object.values(Xe).filter(k=>t[k]);if(c.length>1)throw new Error("Multiple cloud storage types are not supported");const f=c[0];return{type:f,config:t[f]}}const P=t=>t.length<1?[]:[o(1e3),'Headline("Mount Cloud Storages…")',o(1e3),...t.reduce((c,f)=>{const{type:k,config:O}=C(f);if(!O)throw new Error("Invalid storage configuration");switch(k){case Xe.FIREBASE:if(!O.apiKey||!O.url)throw new Error("Missing Firebase configuration");c.push(`cloudMountFirebase "${f.name}" --api-key="${O.apiKey}" --url="${O.url}"`);break;default:throw new Error(`Unsupported cloud storage type: ${k}`)}return c.push(o(1e3)),c},[])],i=["// Functions","SUB Separator(stars) STATIC",'PRINT STRING$(stars, "*")',"END SUB","SUB Headline(title$) STATIC",'LET title$ = "*** " + title + " ***"','PRINT ""',"Separator(LEN(title$))","PRINT title$","Separator(LEN(title$))",'PRINT ""',"END SUB","// Output"];i.push(...g(e)),i.push(...P(r)),i.push(o(1e3),'PRINT ""','PRINT "<strong>Waiting is user experience …</strong>"'),await((b=s.modules.files)==null?void 0:b.fs.createTmpFile("BOOT.basic","BOOT.basic",{type:"basic",content:i.filter(t=>t!==void 0)}))}const ur=se({__name:"Core",props:{config:{},core:{}},emits:["ready"],async setup(s,{emit:e}){let r,v;const d=p(null),o=p(null),g=p(null),C=p(null),P=p(null),i=s,b=e,{registerFont:t}=Wt(),c=new FontFace("BitFontCanvas",`url(${st})`,{});document.fonts.add(c),t(ir),[r,v]=yt(()=>document.fonts.load('10px "BitFontCanvas"')),await r,v();const f=h(()=>{var a;return(a=i.core.modules.windows)==null?void 0:a.contentWrapper}),k=h(()=>{var a;return(a=i.core.modules.screen)!=null&&a.currentTheme?i.core.modules.screen.currentTheme:new ut}),O=h(()=>{var S;const a=(S=k.value)==null?void 0:S.toCSSVars();return a?`:root {
        ${Object.keys(a).map(z=>`${z}: ${a[String(z)]};`).join(`
`)}
      }`:null});gt(()=>({style:[O.value&&{key:"wb-core-vars",type:"text/css",innerHTML:O.value}].filter(Boolean)}));const $=zt();de("core",i.core);const R=h(()=>"no-boot"in $.query),j=h(()=>"no-webdos"in $.query),q=p(i.config.noDisk===Vt.FORCE),M=h(()=>q.value||"no-disk"in $.query),V=h(()=>"no-cloud-storage"in $.query),L=new Se,B=p({position:l(0,0),size:l(0,0)});de("parentLayout",B);const X=p(!1),Y=p(!1),K=p(!1),ue=p([]),E=h(()=>i.core.config.observable),le=p(fe.SEQUENCE_1),m=h({get(){return i.core.config.observable[pe.SCREEN_CONFIG]},set(a){i.core.config.set(pe.SCREEN_CONFIG,a)}}),H=h(()=>({"--default-cursor":`url(${It})`})),A=h(()=>le.value===fe.NO_DISK),ie=h(()=>m.value.horizontalCentering),ye=h(()=>i.core.modules.windows?i.core.modules.windows.contentWrapper.isHeaderVsible():!0),ge=h(()=>ve.value?fe.ERROR:le.value),ce=h(()=>i.core.modules.screen?i.core.modules.screen.cursor:null),w=h(()=>({frameActive:E.value[pe.SCREEN_1084_FRAME],hasRealLook:E.value[pe.SCREEN_REAL_LOOK],hasScanLines:E.value[pe.SCREEN_SCAN_LINES],hasActiveAnimation:!R.value&&E.value[pe.SCREEN_ACTIVE_ANIMATION]})),T=h(()=>({ready:K.value,waiting:D.value})),D=h(()=>i.core.executionCounter>0),G=h(()=>{var a;return(a=i.core.modules.windows)==null?void 0:a.contextMenu.activeItems.items});re(()=>ie.value,()=>{he()});let Z=-1;re(()=>D.value,(a,S)=>{ce.value&&(a&&!S?Z=window.setTimeout(()=>{var z;(z=ce.value)==null||z.setWait(!0)},0):a||(window.clearTimeout(Z),ce.value.setWait(!1)))}),ke(async()=>{var a,S;L.add(U.resize.subscribe(he)),window.fileSystem=(a=i.core.modules.files)==null?void 0:a.fs,o.value&&i.core.addModule(ct,{contentEl:o.value}),await i.core.setup({firebase:i.config.firebase,symbols:i.config.symbols,disks:i.config.disks}),he(),L.add(i.core.errorObserver.subscribe(z=>{Fe(z)})),await ee(),await ze(),(S=i.config.rootItems)!=null&&S.length&&await i.core.addRootItems(await i.config.rootItems({core:i.core})),window.matchMedia("(max-width: 640px)").matches?i.core.executeCommand("rearrangeIcons -root -force"):i.core.executeCommand("rearrangeIcons -root"),i.config.startCommands.length&&await Lt(Ft(i.config.startCommands).pipe(Ot(z=>i.core.executeCommand(z)),Bt()))}),Me(()=>{var a;ue.value.forEach(S=>{var z;return(z=i.core.modules.files)==null?void 0:z.fs.removeFloppyDisk(S)}),(a=i.core.modules.windows)==null||a.clear(),L.unsubscribe()});function Q(a){!K.value&&!a&&(q.value=!0),a&&ne(()=>{he()})}function ee(){var z,F;let a,S=!1;if(R.value||(E.value[pe.BOOT_WITH_SEQUENCE]?a=new Promise(W=>window.setTimeout(async()=>{var J;await((J=g.value)==null?void 0:J.turnOn(1500)),W(!0)},1e3)):E.value[pe.BOOT_WITH_WEBDOS]?a=(z=g.value)==null?void 0:z.turnOn(2e3):a=(F=g.value)==null?void 0:F.turnOn(0)),S=!!a,!S&&g.value&&(a=g.value.turnOn(2e3).then(()=>{var W;return(W=P.value)==null?void 0:W.refresh()}).catch(W=>{throw W})),a=a==null?void 0:a.then(()=>{var W;return(W=g.value)==null?void 0:W.togglePanel(!0)}),S)return a}function he(){var a,S;if(d.value&&o.value&&C.value){const{left:z,top:F,width:W,height:J}=o.value.getBoundingClientRect();B.value={position:l(z,F),size:l(W,J)},o.value&&((a=i.core.modules.screen)==null||a.updateContentLayout(o.value),(S=i.core.modules.screen)==null||S.updateScreenLayout(C.value))}}async function ze(){const a=i.core.addExecution(),S=R.value?!1:E.value[pe.BOOT_WITH_SEQUENCE]||!1;await _e(S),M.value?le.value=fe.NO_DISK:(le.value=fe.READY,he(),X.value=!0,await new Promise(z=>{ne(async()=>{var W,J;o.value&&C.value&&((W=i.core.modules.screen)==null||W.updateContentLayout(o.value),(J=i.core.modules.screen)==null||J.updateScreenLayout(C.value)),Y.value=!0;const F=j.value?!1:E.value[pe.BOOT_WITH_WEBDOS]||!1;await Ie(F),K.value=!0,z(void 0)})}),a(),b("ready"))}function He(){ve.value=Ae.value.shift()}const ve=p(),Ae=p([]);function Fe(a,S=!0){console.warn(a);const z={input:"Press left mouse button or touch to continue.",message:a.message,stack:null,code:`#${Math.floor(Math.random()*99999999)}.${Math.floor(Math.random()*99999999)}`};S||(z.input=void 0),z.userInteraction=S,ve.value?Ae.value.push(z):ve.value=z}async function _e(a){const S=[fe.SEQUENCE_1,fe.SEQUENCE_2,fe.SEQUENCE_3];if(a){let z=S.length;const F=async()=>{z--,le.value=S[S.length-Number(z)],z>0&&(await new Promise(W=>{window.setTimeout(W,je)}),await F())};await new Promise(W=>window.setTimeout(W,je/2)),await F()}else le.value=S[S.length-1]}async function Ie(a){await void 0;const S=V.value?[]:i.config.cloudStorages;await vr(i.core,{withWebDos:a,disks:i.config.disks,cloudStorages:S});const z=['remove "TMP:BOOT.basic"'];return a?await Re():z.unshift('basic "TMP:BOOT.basic"'),i.core.executeCommands(z)}function Re(){var S,z;const a=(S=i.core.modules.windows)==null?void 0:S.addWindow({component:ar,componentData:{core:i.core,command:'basic "TMP:BOOT.basic"'},options:{title:"WebDOS",scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!0,embed:!0}},{full:!0});if(a)return(z=a.wrapper)==null||z.centerWindow(a),a.focus(),a==null?void 0:a.awaitClose()}function x(){}return(a,S)=>(u(),y("div",{ref_key:"rootEl",ref:d,class:we(["wb-env-core",_(T)]),style:me(_(H))},[N(rn,Ee({ref_key:"screenEl",ref:g,modelValue:_(m),"onUpdate:modelValue":S[0]||(S[0]=z=>bt(m)?m.value=z:null),"boot-sequence":_(ge),theme:_(k),cursor:_(ce)},_(w),{onToggleScreenActive:Q}),{default:Ve(()=>{var z;return[n("div",{ref_key:"innerEl",ref:C,class:"inner"},[_(X)&&_(ye)?(u(),oe(mn,{key:0,core:a.core,"show-cover":!_(K),items:_(G),"parent-layout":(z=a.core.modules.windows)==null?void 0:z.contentWrapper.layout},null,8,["core","show-cover","items","parent-layout"])):I("",!0),n("div",{ref_key:"contentEl",ref:o,class:"content"},[_(X)?(u(),oe(rr,{key:0,ref_key:"windowWrapperEl",ref:P,core:a.core,wrapper:_(f),"clamp-y":!1},{default:Ve(()=>{var F,W,J;return[_(Y)&&((W=(F=a.core.modules.symbols)==null?void 0:F.defaultWrapper)!=null&&W.id)?(u(),oe(vt,{key:0,core:a.core,"wrapper-id":(J=a.core.modules.symbols.defaultWrapper)==null?void 0:J.id,"parent-scrollable":!1,class:"symbol-wrapper","clamp-symbols":!0,"show-storage-bar":!1},null,8,["core","wrapper-id"])):I("",!0)]}),_:1},8,["core","wrapper"])):I("",!0),_(A)?(u(),oe(un,{key:1})):I("",!0),_(ve)?(u(),oe(Et,Ee({key:2},_(ve),{onClose:He}),null,16)):I("",!0)],512)],512)]}),_:1},16,["modelValue","boot-sequence","theme","cursor"])],6))}}),ts=ae(ur,[["__scopeId","data-v-362809f5"]]);export{ts as default};

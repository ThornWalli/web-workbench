import{W as C}from"./GMYRXBC3.js";import{S as g,N as c}from"./AEwztriR.js";import{N as w}from"./Be4NCuyK.js";import{_ as p,t as s,v as i,$ as v,a0 as $,x as o,g as d,z as l}from"./Ch0O_PD7.js";import{u as N}from"./10sAnKpN.js";import"./BiYes1lM.js";import"./BxO05Tpb.js";import"./D8w95ZP5.js";import"./DwAjpAW9.js";import"./DxOVdChq.js";import"./BhIZyK9R.js";import"./C5mdboMC.js";import"./D3VVtp-3.js";import"./PIkGlXJS.js";import"./ROZ_PTPE.js";import"./CFhzTvZQ.js";import"./DvTq3dTW.js";const _={emits:["refresh"],data:function(){return{noteRenderer:null,svgNode:null,notes:[[["C#","2m"],["C#2","2m"],["C#2","2m."],["C#","1m"],["C#2","1m"],["C#2","1m."],["C#","2n."],["C#2","2n"],["C#2","2n."],["C#2","4n."]],[["","2m"],["","1m"],["","2n"],["","4n"],["","8n"],["","16n"],["","32n"]],[["C4","2m"],["C4","1m"],["C4","2n"],["C4","4n"],["C4","8n"],["C4","16n"],["C4","32n"]],[["C4","2m."],["C4","1m."],["C4","2n."],["C4","4n."],["C4","8n."],["C4","16n."],["C4","32n."]]].flat().map(([e,n])=>new w({note:e,time:n})),durations:[["1m","2m","2n","4n","8n","16n","32n"],["1m","2m","2n","4n.","8n.","16n.","32n."]].flat()}},computed:{visibleNotes(){return this.noteRenderer?this.notes:[]}},mounted(){const e=new DOMParser;window.svgNode=this.svgNode=e.parseFromString(g,"image/svg+xml").querySelector("svg"),this.noteRenderer=new c(this.svgNode),this.$nextTick(async()=>{const n=Array.from(this.$el.querySelectorAll("canvas"));await Promise.all(n.map((r,t)=>this.render(r,this.notes[Number(t)]))),this.$emit("refresh")})},methods:{async render(e,n){const r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);const t=await this.noteRenderer.render(n,{colors:{primary:"#ffffff",secondary:"#000000",tertiary:"#ff0000"}});e.width=t.canvas.width,e.height=t.canvas.height,r.drawImage(t.canvas,0,0)}}},R=["width","height"];function b(e,n,r,t,u,m){return s(),i("ul",null,[(s(!0),i(v,null,$(m.visibleNotes,a=>(s(),i("li",{key:a},[o("canvas",{width:e.noteRenderer.dimension.x,height:e.noteRenderer.dimension.y},null,8,R)]))),128))])}const y=p(_,[["render",b],["__scopeId","data-v-856c9bce"]]),x={components:{NoteCanvas:y,WbButton:C},emits:["refresh"],setup(){return{...N()}},data:function(){return{noteRenderer:new c}},mounted(){console.log("DEBUG",{noteRenderer:this.noteRenderer}),this.$nextTick(()=>{this.$emit("refresh")})}},k={class:"wb-disks-extras13-synthesizer-debug-notes"};function B(e,n,r,t,u,m){const a=d("wb-button"),h=d("note-canvas");return s(),i("div",k,[o("fieldset",null,[n[2]||(n[2]=o("legend",null,"Note Cache",-1)),l(a,{label:`Clear Cache (${e.noteRenderer.cache.size} Bitmaps)`,onClick:n[0]||(n[0]=f=>e.noteRenderer.cache.clear())},null,8,["label"])]),o("fieldset",null,[n[3]||(n[3]=o("legend",null,"Notes",-1)),l(h,{onRefresh:n[1]||(n[1]=f=>e.$emit("refresh"))})])])}const j=p(x,[["render",B],["__scopeId","data-v-d342a76d"]]);export{j as default};

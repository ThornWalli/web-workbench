var e=Object.defineProperty,__publicField=(t,s,n)=>((t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n)(t,"symbol"!=typeof s?s+"":s,n);import{C as t}from"./g1R7VqXM.js";import{u as s,p as n,a as i,b as o,m as r}from"./D1WZfvAb.js";import{d as a}from"./DdO-3S9B.js";import{i as l}from"./BHmTNEz3.js";import{D as c,W as u}from"./KaHav87i.js";import{O as m,d,k as h,y as p,z as y,A as b,C as k,G as v,_ as f,r as g,o as C,X as w,Y as N,Z as T,$ as S,I as R,B as E,g as A,P as _,E as I,S as P,ac as O,D as M,af as x,a0 as j,L as D}from"./BfpYGSxR.js";import{u as q}from"./Dkhtr-D7.js";import{a as L,M as K}from"./dA2AK5Yb.js";import B from"./ChrLlhgG.js";import{N as Y,u as $}from"./EG9l7Kw2.js";import{V as H,a as U,n as Z,h as V,N as F}from"./G8w6tKzW.js";import{T as z,r as W,c as G}from"./Bk3HlLVR.js";import{g as J,c as X,I as Q}from"./CybH7Zs2.js";import{g as ee,c as te}from"./h2NMwnbH.js";import{D as se}from"./mZmTw9Uu.js";import{T as ne}from"./Bx78nj95.js";import{T as ie}from"./v8FPNFzi.js";import{S as oe}from"./BB6FUOrg.js";import{o as re,n as ae,S as le}from"./CrNGlbV0.js";import{f as ce}from"./D3xLGof4.js";import{c as ue}from"./tbUmQ5LT.js";import{i as me}from"./Caivkp23.js";import{t as de}from"./DAKnsb8o.js";import"./jSR9Z_uS.js";import"./B1k18Rg6.js";import"./Cy0zoxeo.js";import"./CIasQYz1.js";import"./B-meQdOw.js";import"./D3MPJlJW.js";import"./D7Us3e3D.js";import"./DL1FsYWj.js";import"./BfgCdWpr.js";import"./D6fwdpc8.js";import"./CV0dHcg-.js";import"./BKiSbNd3.js";import"./C98WWl5r.js";import"./czE5BX5a.js";import"./GLWL0ZEA.js";import"./BlFo7Aw2.js";import"./BSzGBLGV.js";import"./BteAwo4N.js";import"./BVLmgizW.js";import"./Ci-h6nfG.js";import"./I81pZH22.js";import"./CY5IK1Gp.js";function debounce(e){return re(function(t,s){var n=!1,i=null,o=null,emit=function(){if(null==o||o.unsubscribe(),o=null,n){n=!1;var e=i;i=null,s.next(e)}};t.subscribe(ue(s,function(t){null==o||o.unsubscribe(),n=!0,i=t,o=ue(s,emit,ae),me(e(t)).subscribe(o)},function(){emit(),s.complete()},void 0,function(){i=o=null}))})}class TrackPlayer{constructor(e,t){__publicField(this,"track"),__publicField(this,"playing",!1),__publicField(this,"currentSequence"),__publicField(this,"autoplay"),__publicField(this,"instrument"),__publicField(this,"instruments",[]),__publicField(this,"sequenceNoteIndex",{}),__publicField(this,"instrumentIndex",-1);const{autoplay:s}=t||{};if(!(e instanceof z))throw new Error("TrackPlayer requires a Track");this.track=e,this.autoplay=void 0===s||s}createInstrument(){var e;null==(e=this.instrument)||e.dispose(),this.instrument=createInstrument(this.track.type)}refresh(){const e=this.track.notes;return this.createSequence(e,()=>{console.log("complete"),this.clearSequence(),this.playing=!1}),e}play(){if(!this.track.type)throw new Error("TrackPlayer requires an instrument");if(this.refresh(),!this.currentSequence)throw new Error("TrackPlayer requires a sequence");return this.autoplay&&(this.currentSequence.start(0),this.playing=!0),this.currentSequence}pause(){this.instruments.forEach(e=>e.context.transport.pause()),this.playing=!1}stop(){this.clearSequence(),this.playing=!1}restart(){this.stop(),this.play()}reset(){this.clearSequence(),this.stop(),this.track.notes=[]}destroy(){var e;null==(e=this.instrument)||e.dispose(),this.instruments.forEach(e=>e.dispose()),this.clearSequence()}triggerAttack(e){this.instrumentIndex++,this.getInstrument().triggerAttack(e)}triggerRelease(){this.getInstrument().triggerRelease(),this.instrumentIndex--}triggerAttackRelease(e){this.instrumentIndex++,console.log("triggerAttackRelease",this.instrumentIndex,e.getName(),e.getTime(),e.delay,1e3*(e.delay+e.toSeconds())),window.setTimeout(()=>{console.log("fertig"),this.instrumentIndex--},1e3*(e.delay+e.toSeconds()));const t=e.getName(),s=e.getTime();if(!t)throw new Error("Note name is required");if(!s)throw new Error("Note time is required");this.getInstrument().triggerAttackRelease(t,s,e.delay)}getInstrument(){return this.instrumentIndex>this.instruments.length-1&&this.instruments.push(createInstrument(this.track.type)),this.instruments[this.instrumentIndex]}createSequence(e,t){if(this.currentSequence)throw new Error("TrackPlayer already has a sequence");this.currentSequence=m(new Sequence(e,(e,t,s,n)=>{console.log(e),this.triggerAttackRelease(e),this.sequenceNoteIndex={...this.sequenceNoteIndex,[Number(t)]:n[s].index},s===n.length-1&&Reflect.deleteProperty(this.sequenceNoteIndex,t)},void 0!==t?t:void 0))}clearSequence(){var e;null==(e=this.currentSequence)||e.dispose(),this.currentSequence=void 0}}class Sequence{constructor(e,t,s){__publicField(this,"startTime",0),__publicField(this,"sequenceMap",new Map),__publicField(this,"onTick"),__publicField(this,"onComplete"),__publicField(this,"notes"),this.onTick=t,this.onComplete=s,this.notes=e}async start(e=0){var t;const s=U;s.stop(),s.seconds=0,s.start(),this.startTime=Z();const n=this.sequenceMap,i=Promise.all(Object.entries(function getGroupedNotes(e){return e.reduce((e,t)=>(e[t.delay]=e[t.delay]||[],e[t.delay].push(t),e),{})}(this.notes)).map(([,e])=>{const t=e.map((e,t)=>{const s=`${t}_${e.getTime()}`,{notes:i,part:o,complete:r}=n.get(s)||(()=>{const s=[];let n=0;const i=new se,o=new V((...r)=>{this.onTick(new F({delay:r[0],note:r[1],time:e.getTime()}),t,n,s),n++,n>o.length-1&&i.resolve()},[]);return{notes:s,part:o,complete:i.promise}})();return n.set(s,{notes:i,part:o,complete:r}),o.add(e.delay,e.getName()),i.push(e),{notes:i,part:o,complete:r}});return Promise.all(t.map(({complete:e})=>e))}));return Array.from(n.values()).forEach(({part:t})=>{t.start(e)}),await i,null==(t=this.onComplete)||t.call(this),i}pause(){Array.from(this.sequenceMap.values()).forEach(({part:e})=>{e.pause()})}cancel(){Array.from(this.sequenceMap.values()).forEach(({part:e})=>{e.cancel()})}stop(){Array.from(this.sequenceMap.values()).forEach(({part:e})=>{e.stop()})}dispose(){Array.from(this.sequenceMap.values()).forEach(({part:e})=>{e.dispose()})}}function createInstrument(e){const t=ee(e),s=new H(-100).toDestination(),n=(new t).connect(s).toDestination();return m(n)}const he={class:"wb-env-fragment-footer"},pe={ref:"menu",class:"menu"},ye=f(d({__name:"Footer",props:{parentLayout:{},title:{},items:{}},emits:["inputContextMenu"],setup(e,{emit:t}){const{core:n}=s(),i={size:l(window.innerWidth,window.innerHeight)},o=e,r=t,a=h(()=>{var e,t;return o.items||(null==(t=null==(e=n.value)?void 0:e.modules.windows)?void 0:t.contextMenu.activeItems.items)});function onUpdateModelValueContextMenu(...e){r("inputContextMenu",...e)}return(e,t)=>(y(),p("footer",he,[b("nav",pe,[k(u,{direction:v(c).TOP,items:a.value,"parent-layout":e.parentLayout||i,"onUpdate:modelValue":onUpdateModelValueContextMenu},null,8,["direction","items","parent-layout"])],512)]))}}),[["__scopeId","data-v-bc782050"]]),be=["disabled"],ke={class:"keys white"},ve=["onMouseout","onPointerdown","onPointerup"],fe={key:0},ge={key:0},Ce={class:"keys black"},we=["onMouseout","onPointerdown","onPointerup"],Ne={key:0},Te={key:0},Se={components:{TimelineCanvas:ne,Navigation:Y,Metronom:L,Keyboard:f(d({__name:"Keyboard",props:{disabled:{type:Boolean,default:!1},selectedNotes:{type:Array,default:null},size:{type:String,validator:e=>["small","medium","large"].includes(e),default:"large"},showNoteLabels:{type:Boolean,default:!1},startOctave:{type:Number,default:4},octaveCount:{type:Number,default:6}},emits:["down","up"],setup(e,{emit:t}){const s=g(),n=e,i=t,o=g([]),r=g(l(0,0)),a=h(()=>Array.from(new Set(n.selectedNotes.map(e=>W(e.getName()||"")).flat()))),c=h(()=>({small:96,medium:144,large:192}[n.size])),u=h(()=>{const e=[],t=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"];for(let s=0;s<n.octaveCount;s++)e.push(...t.map(e=>{const t=`${e}${n.startOctave+s}`;return{note:t,black:(i=t,/^[a-z]#\d+/.test(i))};var i}));return n.startOctave+n.octaveCount<=9&&e.push({note:t[0]+(n.startOctave+n.octaveCount),black:!1}),e}),m=h(()=>({disabled:n.disabled})),d=h(()=>({...r.value.toCSSVars("dimension"),"--height":c.value,"--keys":u.value.filter(({black:e})=>!e).length,"--white-keys":u.value.filter(({black:e})=>!e).length,"--black-keys":u.value.filter(({black:e})=>e).length}));function onPointerDown(e){n.disabled||(o.value.push(e),i("down",e))}function onPointerUp(e){!n.disabled&&o.value.includes(e)&&(i("up",e),o.value=o.value.filter(t=>t!==e))}return C(()=>{var e;r.value=l((null==(e=s.value)?void 0:e.offsetWidth)||0,0)}),(t,n)=>(y(),p("div",{ref_key:"rootEl",ref:s,style:T(d.value),class:S([m.value,"wb-disks-synthesizer-keyboard"]),disabled:e.disabled},[b("div",null,[b("div",ke,[(y(!0),p(w,null,N(u.value,({note:t,black:s},n)=>(y(),p("div",{key:n,class:S(["key",{black:s,white:!s,selected:a.value.includes(t.toLowerCase())}]),style:T({"--index":n}),onMouseout:e=>onPointerUp(t),onPointerdown:e=>onPointerDown(t),onPointerup:e=>onPointerUp(t)},[s?R("",!0):(y(),p("span",fe,[e.showNoteLabels?(y(),p("i",ge,E(t),1)):R("",!0)]))],46,ve))),128))]),b("div",Ce,[(y(!0),p(w,null,N(u.value,({note:t,black:s},n)=>(y(),p("div",{key:n,class:S(["key",{black:s,white:!s,selected:a.value.includes(t.toLowerCase())}]),style:T({"--index":n}),onMouseout:e=>onPointerUp(t),onPointerdown:e=>onPointerDown(t),onPointerup:e=>onPointerUp(t)},[s?(y(),p("span",Ne,[e.showNoteLabels?(y(),p("i",Te,E(t),1)):R("",!0)])):R("",!0)],46,we))),128))])])],14,be))}}),[["__scopeId","data-v-5b9ecf1b"]]),WbEnvFragmentFooter:ye},props:{model:{type:Object,default:X()},trackModel:{type:Object,default:J()},toneDestination:{type:Object,default:null}},emits:["refresh"],async setup(e){const t=x(e,"model"),s=x(e,"trackModel"),n=q();j(t,()=>{n.setContextMenu(te,{model:t.value,trackModel:s.value,preserveContextMenu:n.preserveContextMenu})},{immediate:!0,deep:!0});const i=D(s.value[r.SYNTHESIZER_TRACK]);console.log("track",i);const o=D(new K(i)),a=D(new TrackPlayer(i));console.log("trackPlayer",a);const l=await $(),c=new B;await c.start();const u=c.hasInputs;return{...n,...l,metronom:o,track:i,trackPlayer:a,midiController:c,hasMidi:u}},data(){return{windowsModule:m(this.core.modules.windows),duration:0,subscriptions:new le,midiControllerListener:null,openNotes:new Map,footerModel:{}}},computed:{styleClasses(){return{[`keyboard-align-${this.trackModel[r.SYNTHESIZER_TRACK_KEYBOARD_ALIGN]}`]:!0}},showKeyboard(){return this.trackModel[r.SYNTHESIZER_TRACK_SHOW_KEYBOARD]},inputNote(){return this.trackModel[r.SYNTHESIZER_TRACK_INPUT_NOTE]},bpm(){return Number(this.model[r.SYNTHESIZER_BPM])},trackPlayerIndex(){return Object.values(this.trackPlayer.sequenceNoteIndex).flat()},selectedNotes(){return this.track.notes.filter(e=>Object.values(this.trackPlayer.sequenceNoteIndex).flat().includes(e.index))},timelineCanvasData(){return{track:this.track,duration:this.metronom.getDuration()}},keybordData(){return{size:this.trackModel[r.SYNTHESIZER_TRACK_KEYBOARD_SIZE],showNoteLabels:this.trackModel[r.SYNTHESIZER_TRACK_SHOW_NOTE_LABELS],startOctave:this.trackModel[r.SYNTHESIZER_TRACK_START_OCTAVE],octaveCount:this.trackModel[r.SYNTHESIZER_TRACK_OCTAVE_COUNT],selectedNotes:this.selectedNotes}},metronomNavigation(){return{modelValue:this.metronom,"onUpdate:model-value":({name:e,value:t})=>{this.metronom[String(e)]=t},items:[[{icon:"skipPrev",label:"Prev Beat",hideLabel:!0,disabled:0===this.metronom.value,action:()=>{this.metronom.reset()}},{icon:"doublePrev",label:"Prev Beat",hideLabel:!0,disabled:0===Math.floor(this.metronom.currentBeat/2),action:()=>{this.metronom.prevBeat()}},{icon:"prev",label:"Prev",hideLabel:!0,disabled:0===this.metronom.value,action:()=>{this.metronom.prev()}},{icon:"reset",iconAlign:"right",label:"Next",disabled:this.metronom.value/2-Math.floor(this.metronom.currentBeat)==0,hideLabel:!0,action:()=>{this.metronom.setBeat(this.metronom.currentBeat)}},{icon:"next",iconAlign:"right",label:"Next",hideLabel:!0,action:()=>{this.metronom.next()}},{icon:"doubleNext",label:"Next Beat",hideLabel:!0,action:()=>{this.metronom.nextBeat()}},{spacer:!0},{text:`Duration: ${this.metronom.value.toFixed(2)}`},{text:`Beat: ${this.metronom.currentBeat}-${this.metronom.currentBeat+this.metronom.beatCount}`}],[...G().map(([e])=>({label:`1/${e.replace(/(\d+)[nm]/,"$1")} n`,name:"time",value:e})),{spacer:!0}]]}},navigation(){return{model:this.trackModel,items:[[{text:"Input:"},{label:"Note",value:"note",name:r.SYNTHESIZER_TRACK_INPUT},{label:"Pause",value:"pause",name:r.SYNTHESIZER_TRACK_INPUT,disabled:!0},{spacer:!0},{label:"Remove Note",action:()=>{this.track.removeNote(this.track.selectedIndex)}},{label:"Clean Range",action:()=>{this.track.removeNotesByDurationRange(this.metronom.getDuration(),this.metronom.timeDuration)}},{label:"Clean Beat",action:()=>{this.track.removeNotesFromBeat(this.track.getBeatIndex())}},{label:"Reset",action:()=>{this.reset()}}],[{text:"Note:&nbsp;"},{label:"Auto",value:"",name:r.SYNTHESIZER_TRACK_INPUT_NOTE},...G().map(([e])=>({label:`1/${e.replace(/(\d+)[nm]/,"$1")} n`,name:r.SYNTHESIZER_TRACK_INPUT_NOTE,value:e})),{spacer:!0},this.trackPlayer.playing?{selected:!0,label:"Pause",icon:"pause",disabled:!this.trackPlayer.currentSequence||!this.trackPlayer.playing,onClick:()=>this.onClickPlause()}:{label:"Play",icon:"play",disabled:this.trackPlayer.playing||0===this.track.notes.length,onClick:()=>this.onClickPlay()},{label:"Stop",icon:"stop",disabled:!this.trackPlayer.currentSequence,onClick:()=>this.onClickStop()},{label:"Restart",disabled:this.track.selectedIndex>-1,onClick:()=>this.onClickRestart()}]]}},footerData(){const e=this.track,t=this.trackModel,s=e.getDuration().toFixed(2);return{items:n([new i({options:{disabled:!this.hasMidi},title:`MIDI (${this.midiController.input?this.midiController.input.name:"OFF"})`,action:async()=>{this.midiControllerListener||await this.registerMidiListener()},items:this.midiController.ready&&this.midiControllerListener?[new i({title:"Inputs",items:this.midiController.inputs.map((e,t)=>({title:e.name,model:this.midiController,name:"activeInput",type:o.RADIO,value:e.id,action:async()=>{await this.registerMidiListener(this.midiController.listen(t))}}))}),new i({title:"Input Channel",items:Array(16).fill(null).map((e,t)=>({title:String(t+1),value:t+1,type:o.RADIO,model:this.midiController,name:"inputChannel",action:async()=>{await this.registerMidiListener(this.midiController.listen(this.midiController.input))}}))}),new i({title:"Outputs",items:this.midiController.outputs.map(e=>({title:e.name,model:this.midiController,name:"activeOutput",type:o.RADIO,value:e.id,action(){}}))}),new oe,new i({title:"Disconnect",action:()=>{var e;null==(e=this.midiControllerListener)||e.unsubscribe(),this.midiControllerListener=null,this.midiController.unlisten()}})]:[]}),new oe,new i({title:`Instr.: ${this.track.type}`,items:Object.values(Q).map(t=>new i({type:o.RADIO,title:t,model:e,name:"type",value:t}))}),new oe,new i({title:`Octave: ${t[r.SYNTHESIZER_TRACK_START_OCTAVE]}-${t[r.SYNTHESIZER_TRACK_START_OCTAVE]+t[r.SYNTHESIZER_TRACK_OCTAVE_COUNT]-1}`,items:[new i({title:"Start Octave",items:Array(9).fill({}).map((e,s)=>new i({type:o.RADIO,title:String(s+1),model:t,name:r.SYNTHESIZER_TRACK_START_OCTAVE,value:s+1,action(e){(e=Number(e))+t[r.SYNTHESIZER_TRACK_OCTAVE_COUNT]>9&&(t[r.SYNTHESIZER_TRACK_OCTAVE_COUNT]=10-e)}}))}),new i({title:"Octave Count",items:Array(10-t[r.SYNTHESIZER_TRACK_START_OCTAVE]).fill({}).map((e,s)=>new i({type:o.RADIO,title:String(s+1),model:t,name:r.SYNTHESIZER_TRACK_OCTAVE_COUNT,value:s+1}))})]}),new oe,new ie({text:`BPM: ${this.bpm}`}),new ie({text:`Dur.: ${s}`})])}}},watch:{"track.beatCount"(e){this.metronom.beatCount=e}},mounted(){console.log("TRACK",this.track),this.subscriptions.add(a.keyDown.pipe(debounce(()=>de(100)),ce(e=>"Enter"===e.key)).subscribe(()=>{this.onClickActivateMidi()})),this.subscriptions.add(a.keyDown.pipe(debounce(()=>de(100))).subscribe(e=>{switch(e.code){case"ArrowLeft":this.metronom.prev();break;case"ArrowRight":this.metronom.next();break;case"ArrowUp":this.metronom.prevBeat();break;case"ArrowDown":this.metronom.nextBeat();break;default:if(/Digit(\d+)/.test(e.code)){const t=e.code.replace(/Digit(\d+)/,"$1"),s=G()[t-1];s&&(this.metronom.time=s[0])}}console.log(e)})),this.$nextTick(()=>{this.$emit("refresh")})},unmounted(){this.subscriptions.unsubscribe(),this.midiController.destroy()},methods:{async registerMidiListener(e){var s;try{await this.midiController.start();const n=this.midiController.listen(e>-1&&this.midiController.inputs[e]||this.midiController.inputs[0]);null==(s=this.midiControllerListener)||s.unsubscribe(),this.midiControllerListener=new le,this.midiControllerListener.add(n.pipe(ce(({type:e})=>"noteOn"===e)).subscribe(this.onNoteOn.bind(this)),n.pipe(ce(({type:e})=>"noteOff"===e)).subscribe(this.onNoteOff.bind(this)),n.pipe(ce(({type:e})=>"volume"===e)).subscribe(({value:e})=>{console.log("Volume: ",e),this.core.config.set(t.SCREEN_CONFIG,{...this.core.config.get(t.SCREEN_CONFIG),soundVolume:e})}))}catch(n){console.warn(n)}},async setup(){this.tone.ready||(await this.tone.start(),this.trackPlayer.createInstrument())},onReady({render:e}){this._render=e},onRender(e,{position:t,dimension:s}){if("auto"===this.inputNote){const n=Array.from(this.openNotes.values());for(let i=0;i<n.length;i++){const o=n[Number(i)],r=(this.metronom.now()-o)/1e3/(2*this.metronom.speed)*s.x/this.track.beatCount;e.fillRect(t.x,t.y,r,s.y)}}},async onNoteOn({value:e}){await this.setup();const t=e.identifier;console.log("value.identifier",t,this.metronom.getDuration()),this.startNote(t),this.trackPlayer.triggerAttack(t)},async onNoteOff({value:e}){this.endNote(e.identifier),await this.tone.ready,this.trackPlayer.triggerRelease()},startNote(e){this.animationLoop||(this.animationLoop=function animationLoop(e){let t=0,s=0,n=!1;const loop=i=>{const o=i-t;t=i,s+=o,e(i,s),n||requestAnimationFrame(loop)};return requestAnimationFrame(loop),{stop:()=>n=!0}}(()=>{this._render&&this._render()})),this.openNotes.set(e,this.metronom.now())},endNote(e){var t;const s=[1,2,4,8,16,32].map(e=>[`${e}n`,`${e}t`,`${e}n.`]).flat().map(e=>[e,new(this.tone.getTone().Time)(e).toSeconds()]).sort((e,t)=>t[1]-e[1]),n=Math.max((this.metronom.now()-this.openNotes.get(e))/1e3,s[s.length-1][1]);this.openNotes.delete(e);const{Time:i}=this.tone.getTone();let o;o=this.inputNote?new i(this.inputNote):new i(s.map(([,e])=>e).find(e=>{const t=.2*e;return e-t<=n&&n<=e+t}));const r=this.metronom.getDuration();console.log({delay:r,name:e,time:o.toNotation()}),this.track.addNote(new F({delay:r,name:e,time:o.toNotation()})),this.openNotes.size<1&&(null==(t=this.animationLoop)||t.stop(),this.animationLoop=null)},async onClickNote({note:e,selected:t}){await this.setup(),t&&e.getName()&&this.trackPlayer.triggerAttackRelease(e)},async onClickPlay(){await this.setup(),this.trackPlayer.play()},onClickPlause(){this.trackPlayer.pause()},onClickStop(){this.trackPlayer.stop()},onClickRestart(){this.trackPlayer.restart()},async onDownKeyboard(e){await this.setup(),this.startNote(e),this.trackPlayer.triggerAttack(e)},async onUpKeyboard(e){await this.tone.awaitReady,this.endNote(e),this.trackPlayer.triggerRelease()},reset(){this.track.reset()},onClickActivateMidi(){this.registerMidiListener()}}};const Re={key:0,class:"keyboard"},Ee={class:"sheet"},Ae={class:"panel"};const _e=f(Se,[["render",function _sfc_render(e,t,s,n,i,o){const r=A("keyboard"),a=A("navigation"),l=A("timeline-canvas"),c=A("metronom"),u=A("wb-env-fragment-footer");return y(),p("div",{class:S(["wb-disks-extras13-synthesizer-track",o.styleClasses])},[b("div",null,[b("div",null,[o.showKeyboard?(y(),p("div",Re,[k(r,_({disabled:n.trackPlayer.playing},o.keybordData,{onDown:o.onDownKeyboard,onUp:o.onUpKeyboard}),null,16,["disabled","onDown","onUp"]),n.hasMidi&&!i.midiControllerListener?(y(),p("div",{key:0,class:"midi-message",onClick:t[0]||(t[0]=(...e)=>o.onClickActivateMidi&&o.onClickActivateMidi(...e))},t[2]||(t[2]=[b("div",null,[b("div",null,[b("span",null,[I("Click here, or press "),b("strong",null,"Enter"),I(" to activate the Midi Keyboard!")])])],-1)]))):R("",!0)])):R("",!0)]),k(a,P(O(o.navigation)),null,16),b("div",Ee,[k(c,{model:n.metronom,onRender:o.onRender,onReady:o.onReady,onValue:t[1]||(t[1]=e=>n.track.setCurrentDuration(e))},{background:M(({onRefresh:e})=>[k(l,_(o.timelineCanvasData,{clickable:"",onRefresh:e,"onNote:click":o.onClickNote}),null,16,["onRefresh","onNote:click"])]),_:1},8,["model","onRender","onReady"])]),b("div",Ae,[k(a,P(O(o.metronomNavigation)),null,16)])]),k(u,_(o.footerData,{"parent-layout":i.windowsModule.contentWrapper.layout}),null,16,["parent-layout"])],2)}],["__scopeId","data-v-4cbfd4ff"]]);export{_e as default};

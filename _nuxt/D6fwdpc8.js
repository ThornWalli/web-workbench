import{e as i}from"./B-meQdOw.js";import{S as e}from"./D3MPJlJW.js";import{d as t}from"./CV0dHcg-.js";var r=function(e){function ReplaySubject2(i,r,n){void 0===i&&(i=1/0),void 0===r&&(r=1/0),void 0===n&&(n=t);var o=e.call(this)||this;return o._bufferSize=i,o._windowTime=r,o._timestampProvider=n,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,i),o._windowTime=Math.max(1,r),o}return i(ReplaySubject2,e),ReplaySubject2.prototype.next=function(i){var t=this,r=t.isStopped,n=t._buffer,o=t._infiniteTimeWindow,f=t._timestampProvider,s=t._windowTime;r||(n.push(i),!o&&n.push(f.now()+s)),this._trimBuffer(),e.prototype.next.call(this,i)},ReplaySubject2.prototype._subscribe=function(i){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(i),t=this._infiniteTimeWindow,r=this._buffer.slice(),n=0;n<r.length&&!i.closed;n+=t?1:2)i.next(r[n]);return this._checkFinalizedStatuses(i),e},ReplaySubject2.prototype._trimBuffer=function(){var i=this,e=i._bufferSize,t=i._timestampProvider,r=i._buffer,n=i._infiniteTimeWindow,o=(n?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!n){for(var f=t.now(),s=0,u=1;u<r.length&&r[u]<=f;u+=2)s=u;s&&r.splice(0,s+1)}},ReplaySubject2}(e);export{r as R};

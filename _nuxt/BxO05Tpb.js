function it(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Yt(t,r){let{x:e,y:n,z:o}=r,{x:i,y:s,z:c,w:l}=t,u=l*e+s*o-c*n,a=l*n+c*e-i*o,y=l*o+i*n-s*e,d=-i*e-s*n-c*o,f=u*l+d*-i+a*-c-y*-s,w=a*l+d*-s+y*-i-u*-c,h=y*l+d*-c+u*-s-a*-i;return new r.constructor(f,w,h)}var pt=Math.PI,ct=Math.PI*2;function B(t){let r=t%ct;return r<-pt?r+=ct:r>pt&&(r-=ct),r}function cr(t){return t>-1?t<1?Math.acos(t):0:pt}function lr(t,[r,e,n]){let[o,i,s]=t;return new t.constructor(new o.constructor(o.x*r.x+i.x*r.y+s.x*r.z,o.y*r.x+i.y*r.y+s.y*r.z,o.z*r.x+i.z*r.y+s.z*r.z),new o.constructor(o.x*e.x+i.x*e.y+s.x*e.z,o.y*e.x+i.y*e.y+s.y*e.z,o.z*e.x+i.z*e.y+s.z*e.z),new o.constructor(o.x*n.x+i.x*n.y+s.x*n.z,o.y*n.x+i.y*n.y+s.y*n.z,o.z*n.x+i.z*n.y+s.z*n.z))}function ar(t,{x:r,y:e,z:n}){let[o,i,s]=t;return new o.constructor(o.x*r+i.x*e+s.x*n,o.y*r+i.y*e+s.y*n,o.z*r+i.z*e+s.z*n)}function hr(t,[r,e,n]){return new t.constructor(t.dot(r),t.dot(e),t.dot(n))}function T(t){return typeof t=="number"||(t==null?void 0:t.constructor)===Number}var fr=t=>{try{R(t),G(t,4)}catch(r){console.error("error while hijackDOMPoint"),console.error(r)}},L=0,Et=1,Ot=2,Pt=3,Z=9999999999999,tt=void 0,$t=Symbol("vector length"),ot=Symbol("get source"),Jt=Symbol("checked"),x=tt,j,U,yr=[0,1,2,6,24,120,720,5760,51840,518400,5702400,68428800,889574400,12454041600,186810624e3],dt=[],F=-1,lt=!1,It=[];function at(t,r,e){x=t,F=-1,U=1;let n=r(e);if(!T(n))throw new Error(`
      your assigned progress did not not return a primitive!
      calc() does not support logical operators (|| && ==) directly

      instead of calc(() => v1 || v2);
      use        calc(() => +v1 || +v2);

      instead of calc(() => v1);
      use        calc(v1);
      `);return n}function rt(t){let r=t[ot];return r?r(t).length:t[$t]||3}function pr(t,r){return rt(t)>rt(r)?t:r}function dr(t,r){if(U+=1,r===Z)return U;if(r>=rt(t))return 0;let e=t[ot];if(e)return 1*e(t)[r];if(r===L)return 1*t.x;if(r===Et)return 1*t.y;if(r===Ot)return 1*t.z;if(r===Pt)return 1*t.w}function Nt(t,r,e){let n=t[ot];if(n){n(t)[r]=e;return}if(r===L){t.x=e;return}if(r===Et){t.y=e;return}r===Ot&&(t.z=e),r===Pt&&(t.w=e)}function Q(t,r){if(typeof t!="function")throw new Error("no function assigned");if(x!==tt)throw new Error("something wrong, do you use calc() inside calc?");try{let e=typeof r>"u",n=typeof r=="function",o=!n&&!e?r:void 0,i=at(L,t,o);if(e&&typeof j>"u")return i;let s=j?rt(j):0;if(s===Z){if(!t[Jt]){let a=at(Z,t),y=yr[U];if(Math.abs(a-y)>Number.EPSILON)throw new Error(`
            algebraic multiplication works only in calls with *

            calc(() => v * m);
            calc(() => m * v);
            calc(() => m * m);
            calc(() => m * m * v);

            `);t[Jt]=!0}let u=dt[0];for(let a=1;a<U-1;a+=1){let y=dt[a];if(!u.multiply)throw new Error(`cannot find method multiply() on ${u}`);u=u.multiply(y)}return u}let c=n?r.length:s;if(c||(c=s),c<s)throw new Error("Your assigned result Vector cant use higher space Operands than it has");let l=new Array(c);l[0]=i,o&&Nt(o,x,l[0]);for(let u=1;u<c;u+=1){let a=at(u,t,o);l[u]=a,o&&Nt(o,x,a)}return e?new j.constructor(...l):n?r(...l):o}finally{x=tt,j=void 0}}function R(t,r){let e=t.prototype;e[ot]=r;let n=e[Symbol.toPrimitive]||function(o){return o==="string"?this.toString():this.valueOf()};e[Symbol.toPrimitive]=function(o){return x===L&&(j=j?pr(j,this):this,dt[U-1]=this),x===tt?n.call(this,o):dr(this,x)}}function _t(t){return function(...r){if(x===L){if(lt)return t.apply(this,r);try{lt=!0,F+=1;let e=t.apply(this,r);return It[F]=e,e}finally{lt=!1}}return x===Et||x===Ot||x===Pt?(F+=1,It[F]):t.apply(this,r)}}function b(t,r){let e=t.prototype,n=e[r];e[r]=_t(n)}function st(t,r){let e=t.prototype,n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(e,r,{get:_t(function(){return n.get.call(this)})})}function G(t,r){let e=t.prototype;Object.defineProperty(e,$t,{value:r})}function Bt(t){G(t,Z)}function ut(t){return _t(t)}typeof DOMPoint<"u"&&fr(DOMPoint);function mr(t){let r="";return t&&(r=`${t}-`),r}function H(t,r,e={}){let n=mr(t);return Object.entries(r).forEach(([o,i])=>{e[`--${n}${o}`]=i}),e}var mt=0,wt=1,S=Symbol("axes");function wr(t,r,e,n){let o=Math.atan2(t,r),i=Math.atan2(e,n);return B(o-i)}function kt(t){return t*t}var z=class{constructor(t,r){typeof t=="function"?Q(t,(e,n)=>{this[S]=[e,n]}):it(t)?this[S]=[...t]:t&&T(t.x)?this[S]=[t.x||0,t.y||0]:this[S]=[t||0,r||0]}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}normalize(){let{length:t}=this;return new this.constructor(this.x/t,this.y/t)}norm(){return this.normalize()}dot(t){return this.x*t.x+this.y*t.y}getRad(){return B(Math.atan2(this.y,this.x))}angleTo(t){return wr(this.y,this.x,t.y,t.x)}rotate(t){let r=Math.sin(t),e=Math.cos(t),n=this.x*e-this.y*r,o=this.x*r+this.y*e;return new this.constructor(n,o)}distance(t){return Math.sqrt(kt(this.x-t.x)+kt(this.y-t.y))}dist(t){return this.distance(t)}toArray(){return[this.x,this.y]}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y}toJSON(){return{x:this.x,y:this.y}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r){return H(t,this.toJSON(),r)}get lengthSq(){return this.dot(this)}get length(){return Math.sqrt(this.lengthSq)}get lensq(){return this.lengthSq}get len(){return this.length}get x(){return this[S][mt]}set x(t){throw new Error("set x() not implemented")}get y(){return this[S][wt]}set y(t){throw new Error("set y() not implemented")}get z(){throw new Error("get z() not implemented")}set z(t){throw new Error("set z() not implemented")}[Symbol.iterator](){return this[S].values()}};R(z);G(z,2);b(z,"dot");b(z,"angleTo");b(z,"distance");b(z,"toArray");b(z,"getRad");st(z,"length");st(z,"lengthSq");var Lt=class Qt extends z{set x(r){this[S][mt]=r}set y(r){this[S][wt]=r}get x(){return this[S][mt]}get y(){return this[S][wt]}calc(r){return Q(r,this)}clone(){return new Qt(this.x,this.y)}},Y=class extends z{toPoint(){return new Lt(this.x,this.y)}},br=ut((t,r)=>new Lt(t,r)),ee=(t,r)=>br(t,r),vr=ut((t,r)=>new Y(t,r)),Mt=(t,r)=>vr(t,r);Mt(0,0);Mt(0,-1);Mt(-1,0);var I=0,N=1,k=2,p=Symbol("axes");function ht(t){return t*t}var v=class{constructor(t,r,e){typeof t=="function"?Q(t,(n,o,i)=>{this[p]=[n,o,i]}):it(t)?this[p]=[...t]:t&&T(t.x)?this[p]=[t.x||0,t.y||0,t.z||0]:this[p]=[t||0,r||0,e||0]}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}normalize(){let{length:t}=this;return new this.constructor(this.x/t,this.y/t,this.z/t)}norm(){return this.normalize()}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new this.constructor(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}crossNormalize(t){let r=this.cross(t),{length:e}=r;return r[p][I]/=e,r[p][N]/=e,r[p][k]/=e,r}cn(t){return this.crossNormalize(t)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length)}}angleTo(t){return B(cr(this.dot(t)/(this.length*t.length)))}multiply(t){return t.x===void 0?this.multiplyMat3(t):t.w===void 0?this.multiplyVec3(t):Yt(t,this)}multiplyMat3(t){return hr(this,t)}multiplyVec3({x:t,y:r,z:e}){return new this.constructor(this.x*t,this.y*r,this.z*e)}distance(t){return Math.sqrt(ht(this.x-t.x)+ht(this.y-t.y)+ht(this.z-t.z))}dist(t){return this.distance(t)}toArray(){return[this.x,this.y,this.z]}swizzle(t){let r=t.split("").map(e=>this[e]);return r.length===2?new Y(r[0],r[1]):new this.constructor(r[0],r[1],r[2])}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}toJSON(){return{x:this.x,y:this.y,z:this.z}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r){return H(t,this.toJSON(),r)}get lengthSq(){return this.dot(this)}set lengthSq(t){throw new Error("set lengthSq() not implemented")}get length(){return Math.sqrt(this.lengthSq)}set length(t){throw new Error("set length() not implemented")}get lensq(){return this.lengthSq}set lensq(t){throw new Error("set lensq() not implemented")}get len(){return this.length}set len(t){throw new Error("set len() not implemented")}get x(){return this[p][I]}set x(t){throw new Error("set x() not implemented")}get y(){return this[p][N]}set y(t){throw new Error("set y() not implemented")}get z(){return this[p][k]}set z(t){throw new Error("set z() not implemented")}get xy(){return new Y(this[p][I],this[p][N])}set xy(t){throw new Error("set xz() not implemented")}get xz(){return new Y(this[p][I],this[p][k])}set xz(t){throw new Error("set xz() not implemented")}get yz(){return new Y(this[p][N],this[p][k])}set yz(t){throw new Error("set yz() not implemented")}[Symbol.iterator](){return this[p].values()}};R(v);G(v,3);b(v,"dot");b(v,"cross");b(v,"crossNormalize");b(v,"toAngles");b(v,"angleTo");b(v,"rotate");b(v,"distance");b(v,"toArray");st(v,"length");st(v,"lengthSq");var gr=class Gt extends v{set x(r){this[p][I]=r}set y(r){this[p][N]=r}set z(r){this[p][k]=r}get x(){return this[p][I]}get y(){return this[p][N]}get z(){return this[p][k]}calc(r){return Q(r,this)}clone(){return new Gt(this.x,this.y,this.z)}},xr=class extends v{toVector(){return new gr(this.x,this.y,this.z)}clone(){return this}},Sr=ut((t,r,e)=>new xr(t,r,e)),V=(t,r,e)=>Sr(t,r,e);V(0,0,0);var Ht=V(0,0,-1);V(0,0,1);var qt=V(-1,0,0);V(1,0,0);var Kt=V(0,1,0);V(0,-1,0);V(1,1,1);var P=Symbol("angle rad"),Wt=Math.PI/180,et=class Xt{constructor(r){r instanceof Xt?this[P]=r[P]:this[P]=B(r*Wt)}valueOf(){return this[P]}toJSON(){return{angle:this[P]}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(r,e){return H(r,this.toJSON(),e)}},Zt=class extends et{set(t){t instanceof et?this[P]=t[P]:this[P]=B((t||0)*Wt)}},zr=class extends et{toDegree(){return new Zt(this[P])}};new zr(0);function Er(t){return new Zt(t)}function Or(t){return T(t)||t instanceof et}var _=0,M=1,q=2,A=3,m=Symbol("axes"),Pr=Symbol("forward cache"),_r=Symbol("left cache"),Mr=Symbol("up cache"),qr=Symbol("inverse cache");function Ar([t,r,e,n]){return Math.sqrt(t*t+r*r+e*e+n*n)}function tr(t){let r=Ar(t);t[_]/=r,t[M]/=r,t[q]/=r,t[A]/=r}function jr(t,r){let e=t.normalize(),n=r.crossNormalize(e),o=e.crossNormalize(n),i=n.x,s=n.y,c=n.z,l=o.x,u=o.y,a=o.z,y=e.x,d=e.y,f=e.z,w=i+u+f,h=new Array(4);if(w>0){let g=Math.sqrt(w+1);return h[A]=g*.5,g=.5/g,h[_]=(a-d)*g,h[M]=(y-c)*g,h[q]=(s-l)*g,h}if(i>=u&&i>=f){let g=Math.sqrt(1+i-u-f),J=.5/g;return h[_]=.5*g,h[M]=(s+l)*J,h[q]=(c+y)*J,h[A]=(a-d)*J,h}if(u>f){let g=Math.sqrt(1+u-i-f),J=.5/g;return h[_]=(l+s)*J,h[M]=.5*g,h[q]=(d+a)*J,h[A]=(y-c)*J,h}let K=Math.sqrt(1+f-i-u),D=.5/K;return h[_]=(y+c)*D,h[M]=(d+a)*D,h[q]=.5*K,h[A]=(s-l)*D,h}function Tr(t,r){let e=new Array(4),n=r*.5,o=Math.sin(n),i=Math.cos(n);return e[_]=o*t.x,e[M]=o*t.y,e[q]=o*t.z,e[A]=i,e}function bt(t,r,e,n){if(T(t))return[t,r,e,n];if(it(t))return[...t];if(Or(r))return Tr(t,r);if(t&&r)return jr(t,r)}function rr(t,r,e,n){return t&&T(t.w)?bt(t.x,t.y,t.z,t.w):bt(t,r,e,n)||[0,0,0,1]}var $=class{constructor(t,r,e,n){this[m]=rr(t,r,e,n),tr(this[m])}set(t,r,e,n){throw new Error("set x() not implemented")}multiply(t,r,e,n){if(T(t.w))return this.multiplyQuaternion(t);let o=bt(t,r,e,n);return o?this.multiplyQuaternion(new this.constructor(o)):this.multiplyVector(t)}multiplyVector(t){return Yt(this,t)}multiplyQuaternion(t){let r=this.x,e=this.y,n=this.z,o=this.w,i=t.x,s=t.y,c=t.z,l=t.w,u=o*i+r*l+e*c-n*s,a=o*s+e*l+n*i-r*c,y=o*c+n*l+r*s-e*i,d=o*l-r*i-e*s-n*c;return new this.constructor(u,a,y,d)}mul(t,r,e,n){return this.multiply(t,r,e,n)}get inverse(){let{x:t,y:r,z:e,w:n}=this;return this.constructor(t*-1,r*-1,e*-1,n)}get inv(){return this.inverse}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}get left(){return this.multiplyVector(qt)}get dir(){return this.multiplyVector(Ht)}get up(){return this.multiplyVector(Kt)}get 0(){return this.left}get 1(){return this.dir}get 2(){return this.up}get x(){return this[m][_]}set x(t){throw new Error("set x() not implemented")}get y(){return this[m][M]}set y(t){throw new Error("set y() not implemented")}get z(){return this[m][q]}set z(t){throw new Error("set z() not implemented")}get w(){return this[m][A]}set w(t){throw new Error("set w() not implemented")}toJSON(){let{x:t,y:r,z:e,w:n}=this;return{x:t,y:r,z:e,w:n,a1:1-r*r*2-e*e*2,a2:t*r*2-e*n*2,a3:t*e*2+r*n*2,b1:t*r*2+e*n*2,b2:1-t*t*2-e*e*2,b3:r*e*2-t*n*2,c1:t*e*2-r*n*2,c2:r*e*2+t*n*2,c3:1-t*t*2-r*r*2}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r){return H(t,this.toJSON(),r)}};R($);Bt($);var Vr=class extends ${set(t,r,e,n){t instanceof $?this[m]=[...t[m]]:(this[m]=rr(t,r,e,n),tr(this[m]))}set x(t){this[m][_]=t}set y(t){this[m][M]=t}set z(t){this[m][q]=t}set w(t){this[m][A]=t}get x(){return this[m][_]}get y(){return this[m][M]}get z(){return this[m][q]}get w(){return this[m][A]}};function W(t,r,e){let n=t[r];return n||(n=e(),t[r]=n),n}var er=class extends ${get left(){return W(this,_r,()=>this.multiplyVector(qt))}get dir(){return W(this,Pr,()=>this.multiplyVector(Ht))}get up(){return W(this,Mr,()=>this.multiplyVector(Kt))}get inverse(){return W(this,qr,()=>{let{x:t,y:r,z:e,w:n}=this;return this.constructor(t*-1,r*-1,e*-1,n)})}};new Vr;var Jr=ut((t,r,e,n)=>new er(t,r,e,n)),Ir=(t,r,e,n)=>Jr(t,r,e,n);new er(qt,Er(90));Ir(0,0,0,1);var Nr=0,kr=1,Ur=2,Rr=3,O=Symbol("axes"),At=class{constructor(t,r,e,n){typeof t=="function"?Q(t,(o,i,s,c)=>{this[O]=[o,i,s,c]}):it(t)?this[O]=[...t]:t&&T(t.x)?this[O]=[t.x||0,t.y||0,t.z||0,t.w||0]:this[O]=[t||0,r||0,e||0,n||0]}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}toArray(){return[this.x,this.y,this.z,this.w]}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}toJSON(){return{x:this.x,y:this.y,z:this.z,w:this.w}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r){return H(t,this.toJSON(),r)}get x(){return this[O][Nr]}set x(t){throw new Error("set x() not implemented")}get y(){return this[O][kr]}set y(t){throw new Error("set y() not implemented")}get z(){return this[O][Ur]}set z(t){throw new Error("set z() not implemented")}get w(){return this[O][Rr]}set w(t){throw new Error("set w() not implemented")}[Symbol.iterator](){return this[O].values()}};R(At);G(At,4);b(At,"toArray");var C=Symbol("data"),nr=class ir{constructor(...r){this[C]=r}get 0(){return this[C][0]}set 0(r){throw new Error("set [0] not implemented")}get 1(){return this[C][1]}set 1(r){throw new Error("set [1] not implemented")}get 2(){return this[C][2]}set 2(r){throw new Error("set [2] not implemented")}multiplyMat(r){return lr(this,r)}multiplyVec(r){return ar(this,r)}multiply(r){if(r instanceof ir)return this.multiplyMat(r);let{x:e,y:n,z:o}=r;if(e===void 0||n===void 0||o===void 0)throw new Error(`multiply only works with mat3 and vec3, not supported ${r}`);return this.multiplyVec(r)}[Symbol.iterator](){return this[C].values()}};R(nr);Bt(nr);var vt=function(t,r){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},vt(t,r)};function jt(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");vt(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Ut=function(){return Ut=Object.assign||function(r){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ut.apply(this,arguments)};function ne(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(e[n[o]]=t[n[o]]);return e}function ie(t,r,e,n){var o=arguments.length,i=o<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,e,n);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(i=(o<3?s(i):o>3?s(r,e,i):s(r,e))||i);return o>3&&i&&Object.defineProperty(r,e,i),i}function oe(t,r,e,n){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function c(a){try{u(n.next(a))}catch(y){s(y)}}function l(a){try{u(n.throw(a))}catch(y){s(y)}}function u(a){a.done?i(a.value):o(a.value).then(c,l)}u((n=n.apply(t,r||[])).next())})}function se(t,r){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(u){return function(a){return l([u,a])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,o=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=r.call(t,e)}catch(a){u=[6,a],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function nt(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),o,i=[],s;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return i}function xt(t,r,e){if(e||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}function St(t){return this instanceof St?(this.v=t,this):new St(t)}function ue(t,r,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(t,r||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(f){return function(w){return Promise.resolve(w).then(f,y)}}function c(f,w){n[f]&&(o[f]=function(h){return new Promise(function(K,D){i.push([f,h,K,D])>1||l(f,h)})},w&&(o[f]=w(o[f])))}function l(f,w){try{u(n[f](w))}catch(h){d(i[0][3],h)}}function u(f){f.value instanceof St?Promise.resolve(f.value.v).then(a,y):d(i[0][2],f)}function a(f){l("next",f)}function y(f){l("throw",f)}function d(f,w){f(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function ce(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],e;return r?r.call(t):(t=typeof nt=="function"?nt(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=t[i]&&function(s){return new Promise(function(c,l){s=t[i](s),o(c,l,s.done,s.value)})}}function o(i,s,c,l){Promise.resolve(l).then(function(u){i({value:u,done:c})},s)}}function E(t){return typeof t=="function"}function Dr(t){var r=function(n){Error.call(n),n.stack=new Error().stack},e=t(r);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ft=Dr(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Rt(t,r){if(t){var e=t.indexOf(r);0<=e&&t.splice(e,1)}}var Tt=function(){function t(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var r,e,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var c=nt(s),l=c.next();!l.done;l=c.next()){var u=l.value;u.remove(this)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(r)throw r.error}}else s.remove(this);var a=this.initialTeardown;if(E(a))try{a()}catch(h){i=h instanceof ft?h.errors:[h]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var d=nt(y),f=d.next();!f.done;f=d.next()){var w=f.value;try{Dt(w)}catch(h){i=i??[],h instanceof ft?i=xt(xt([],gt(i)),gt(h.errors)):i.push(h)}}}catch(h){n={error:h}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}if(i)throw new ft(i)}},t.prototype.add=function(r){var e;if(r&&r!==this)if(this.closed)Dt(r);else{if(r instanceof t){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(r)}},t.prototype._hasParent=function(r){var e=this._parentage;return e===r||Array.isArray(e)&&e.includes(r)},t.prototype._addParent=function(r){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(r),e):e?[e,r]:r},t.prototype._removeParent=function(r){var e=this._parentage;e===r?this._parentage=null:Array.isArray(e)&&Rt(e,r)},t.prototype.remove=function(r){var e=this._finalizers;e&&Rt(e,r),r instanceof t&&r._removeParent(this)},t.EMPTY=function(){var r=new t;return r.closed=!0,r}(),t}(),le=Tt.EMPTY;function or(t){return t instanceof Tt||t&&"closed"in t&&E(t.remove)&&E(t.add)&&E(t.unsubscribe)}function Dt(t){E(t)?t():t.unsubscribe()}var sr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ur={setTimeout:function(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return setTimeout.apply(void 0,xt([t,r],gt(e)))},clearTimeout:function(t){var r=ur.delegate;return((r==null?void 0:r.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Cr(t){ur.setTimeout(function(){throw t})}function Ct(){}function Fr(t){t()}var Vt=function(t){jt(r,t);function r(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,or(e)&&e.add(n)):n.destination=Lr,n}return r.create=function(e,n,o){return new zt(e,n,o)},r.prototype.next=function(e){this.isStopped||this._next(e)},r.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(e){this.destination.next(e)},r.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(Tt),Yr=Function.prototype.bind;function yt(t,r){return Yr.call(t,r)}var $r=function(){function t(r){this.partialObserver=r}return t.prototype.next=function(r){var e=this.partialObserver;if(e.next)try{e.next(r)}catch(n){X(n)}},t.prototype.error=function(r){var e=this.partialObserver;if(e.error)try{e.error(r)}catch(n){X(n)}else X(r)},t.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(e){X(e)}},t}(),zt=function(t){jt(r,t);function r(e,n,o){var i=t.call(this)||this,s;if(E(e)||!e)s={next:e??void 0,error:n??void 0,complete:o??void 0};else{var c;i&&sr.useDeprecatedNextContext?(c=Object.create(e),c.unsubscribe=function(){return i.unsubscribe()},s={next:e.next&&yt(e.next,c),error:e.error&&yt(e.error,c),complete:e.complete&&yt(e.complete,c)}):s=e}return i.destination=new $r(s),i}return r}(Vt);function X(t){Cr(t)}function Br(t){throw t}var Lr={closed:!0,next:Ct,error:Br,complete:Ct},Qr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Gr(t){return t}function Hr(t){return t.length===0?Gr:t.length===1?t[0]:function(e){return t.reduce(function(n,o){return o(n)},e)}}var ae=function(){function t(r){r&&(this._subscribe=r)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(r,e,n){var o=this,i=Wr(r)?r:new zt(r,e,n);return Fr(function(){var s=o,c=s.operator,l=s.source;i.add(c?c.call(i,l):l?o._subscribe(i):o._trySubscribe(i))}),i},t.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(e){r.error(e)}},t.prototype.forEach=function(r,e){var n=this;return e=Ft(e),new e(function(o,i){var s=new zt({next:function(c){try{r(c)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});n.subscribe(s)})},t.prototype._subscribe=function(r){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(r)},t.prototype[Qr]=function(){return this},t.prototype.pipe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Hr(r)(this)},t.prototype.toPromise=function(r){var e=this;return r=Ft(r),new r(function(n,o){var i;e.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},t.create=function(r){return new t(r)},t}();function Ft(t){var r;return(r=t??sr.Promise)!==null&&r!==void 0?r:Promise}function Kr(t){return t&&E(t.next)&&E(t.error)&&E(t.complete)}function Wr(t){return t&&t instanceof Vt||Kr(t)&&or(t)}function Xr(t){return E(t==null?void 0:t.lift)}function Zr(t){return function(r){if(Xr(r))return r.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(t,r,e,n,o){return new re(t,r,e,n,o)}var re=function(t){jt(r,t);function r(e,n,o,i,s,c){var l=t.call(this,e)||this;return l.onFinalize=s,l.shouldUnsubscribe=c,l._next=n?function(u){try{n(u)}catch(a){e.error(a)}}:t.prototype._next,l._error=i?function(u){try{i(u)}catch(a){e.error(a)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=o?function(){try{o()}catch(u){e.error(u)}finally{this.unsubscribe()}}:t.prototype._complete,l}return r.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},r}(Vt);function he(t,r){return Zr(function(e,n){var o=0;e.subscribe(te(n,function(i){return t.call(r,i,o++)&&n.next(i)}))})}export{Cr as A,ce as B,le as E,Q as N,ae as O,Tt as S,Y as _,jt as a,xt as b,te as c,gt as d,Rt as e,he as f,Mt as g,ee as h,zt as i,Dr as j,Fr as k,nt as l,Gr as m,Ct as n,Zr as o,oe as p,ie as q,xr as r,E as s,Lt as t,ne as u,Ut as v,Qr as w,ue as x,se as y,St as z};

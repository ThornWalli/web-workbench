const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C1TbKe3l.js","./DhVLdAEy.js","./BhIZyK9R.js","./C5mdboMC.js","./BuOfD760.js","./C0_snZds.js","./Bk_zE6I5.js","./Ch9TGLTe.js","./CMn89ocD.js","./BeevJImz.js","./D9s5NzWA.js","./Cpj98o6Y.js","./Bl7v0_lh.js","./BRmnW_0a.js","./FormField.C-XP2HqP.css","./CheckboxGroup.CfoKKRAI.css","./B0ueQ7OP.js","./Button.DCu0A7yh.css","./CD8Wqi-R.js","./Markdown.CP1BJIQC.css","./index.Dk_nD45a.css","./Dxhlkfk9.js","./CEPbKCQa.js","./DZmL_a1M.js","./C8MKeZwm.js","./BSgbonF_.js","./C3Y4mkMC.js","./6wSmGhdE.js","./BXu4w9uO.js","./DHLvBD8g.js","./DxEktbMZ.js","./DHNzwiPc.js","./DXcjftEy.js","./D6uiLRgW.js","./CiDUhLz1.js","./_k5oUkSF.js","./KULKcsMy.js","./BddTpbO5.js","./CENTmI0i.js","./w1lO_lSI.js","./BJ4O9CAJ.js","./BNDouPl-.js","./DiAOb0jz.js","./CgItMNoW.js","./6SZz3J4X.js","./CH0sfoEg.js","./DEbNe62a.js","./CjYf1-u0.js","./D_vLbxvn.js","./BfKa2fnz.js","./BSQ-_JFY.js","./l6xUAQyC.js","./PKC0jDWx.js","./jKJytI2Y.js","./CNL_PwkH.js","./C0nQwGet.js","./C_KVQUMs.js","./D6ItyoGx.js","./DRWAcUgY.js","./DI5tIEqe.js","./CJO8iecK.js","./CKWIJa_P.js","./lxI1LeCW.js","./GwG9QUxe.js","./C8bA7BNN.js","./BrFYrF4o.js","./i4757dME.js","./DlFIBJeO.js","./B4xSonE8.js","./vY7LyxHa.js","./CYUixtrj.js","./BUKCyY1A.js","./gaf-FzT6.js","./YUuFRQ0b.js","./qYqHV2CV.js","./CtVrG6sN.js","./B2_Ycvkt.js"])))=>i.map(i=>d[i]);
var Ds=Object.defineProperty;var Ht=r=>{throw TypeError(r)};var Ps=(r,e,t)=>e in r?Ds(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var E=(r,e,t)=>Ps(r,typeof e!="symbol"?e+"":e,t),Kt=(r,e,t)=>e.has(r)||Ht("Cannot "+t);var o=(r,e,t)=>(Kt(r,e,"read from private field"),t?t.call(r):e.get(r)),h=(r,e,t)=>e.has(r)?Ht("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),b=(r,e,t,s)=>(Kt(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);var Y=(r,e,t,s)=>({set _(a){b(r,e,a,t)},get _(){return o(r,e,s)}});import{V as Ve,_ as Oe,g as C,t as R,v as V,z as x,A as H,x as g,L as Ee,$ as ms,a0 as hs,Z as Xe,a1 as vs,aa as Ls,y as Ot,C as K,F as Q,K as gt,q as Cs,r as At,H as d,a as Ws,I as he,J as Qt,a9 as xs,Y as ds}from"./DhVLdAEy.js";import{c as Ge}from"./C5mdboMC.js";import{T as Dt,g as $s,d as ps,c as Bt,A as S,f as Ne,h as Zt,i as Ms,p as Vs,l as fs,j as qt,k as Jt,r as Fs,M as kt,I as Gt,F as Bs,D as ks,m as Pt,a as es,n as Gs}from"./BuOfD760.js";import{c as N,e as Ut,g as ts,y as Ue,a as bt,I as f,S as u,z as ss,A as Us,i as zs,E as de,s as It}from"./Bk_zE6I5.js";import{h as rs,r as Ys}from"./BrQUI1fL.js";import{P as Et,D as Xs,a as js}from"./BhIZyK9R.js";import{C as y,c as Hs,a as is}from"./uY512OOx.js";import{b as Es,c as Ks,a as Qs,d as Zs}from"./Bl7v0_lh.js";import{W as qs}from"./BRmnW_0a.js";import{_ as Js}from"./CoJnnkc_.js";import{W as zt}from"./B0ueQ7OP.js";import{u as Yt,C as vt,M as q}from"./D9s5NzWA.js";import{W as er}from"./UNTsdnlX.js";import{R as tr}from"./CrQvwhUk.js";import{A as sr}from"./CD8Wqi-R.js";import{a as rr,c as ir}from"./HG1m6jKG.js";import{O as or,i as _s,g as _,h as gs,S as ar,N as oe}from"./C0_snZds.js";import{v as bs}from"./Ch9TGLTe.js";import{t as nr,d as Nt}from"./-XQioQgL.js";import{f as lr}from"./DptxkuMs.js";import{p as cr,a as ur,f as Is}from"./ByW6ry1A.js";import{b as mr,e as hr}from"./DCzE-LO6.js";import{c as dr}from"./CMn89ocD.js";var pr=Array.isArray,fr=Object.getPrototypeOf,Er=Object.prototype,_r=Object.keys;function gr(r){if(r.length===1){var e=r[0];if(pr(e))return{args:e,keys:null};if(br(e)){var t=_r(e);return{args:t.map(function(s){return e[s]}),keys:t}}}return{args:r,keys:null}}function br(r){return r&&typeof r=="object"&&fr(r)===Er}function Ir(r,e){return r.reduce(function(t,s,a){return t[s]=e[a],t},{})}function Sr(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=cr(r),s=ur(r),a=gr(r),i=a.args,l=a.keys;if(i.length===0)return Is([],t);var n=new or(yr(i,t,l?function(c){return Ir(l,c)}:_s));return s?n.pipe(mr(s)):n}function yr(r,e,t){return t===void 0&&(t=_s),function(s){os(e,function(){for(var a=r.length,i=new Array(a),l=a,n=a,c=function(p){os(e,function(){var w=Is(r[p],e),I=!1;w.subscribe(dr(s,function(k){i[p]=k,I||(I=!0,n--),n||s.next(t(i.slice()))},function(){--l||s.complete()}))},s)},m=0;m<a;m++)c(m)},s)}}function os(r,e,t){r?hr(t,r,e):e()}class wr{constructor(e){E(this,"core");E(this,"debug",!1);E(this,"consoleInterface");const{core:t,debug:s,consoleInterface:a}=Object.assign({core:null,debug:!1,consoleInterface:null},e);this.core=t,this.debug=s,this.consoleInterface=a}add(e,t){}}const Ye=class Ye extends wr{constructor(t){const{silent:s,color:a}=t=Object.assign({silent:!1,color:!1},t);super(t);E(this,"silent");E(this,"entries",[]);E(this,"color",!1);this.silent=s,this.color=a}add(t,s){const{namespace:a,type:i}=Object.assign({namespace:null,type:Ye.TYPE.INFO},s);this.entries.push(t),!this.silent&&i!==Ye.TYPE.DEBUG&&(a?this.color?console.log("%c[ %s ]%c[ %s ]","background: #000; color: #008000",i,"background: #000; color: #90ee90",a,t):console.log(`[ ${i.toUpperCase()} ][ ${a} ]`,t):t instanceof Dt?this.consoleInterface.table(t):this.consoleInterface.log(t))}};E(Ye,"TYPE",{DEBUG:"debug",INFO:"info",OUTPUT:"output"});let je=Ye;var j,ge,Ae,Ke;class Rr{constructor(e,t){h(this,j,new Map);h(this,ge,Ve({}));h(this,Ae);h(this,Ke);b(this,Ae,new($s(t||ps.NONE))({name:e})),b(this,Ke,o(this,Ae).load().then(s=>(b(this,j,new Map(s)),Object.assign(o(this,ge),Object.fromEntries(o(this,j))),this)).catch(s=>{throw s}))}setDefaults(e){Object.keys(e).forEach(t=>{this.has(t)||this.set(t,e[String(t)])})}get(e){return o(this,j).get(e)}has(e){return o(this,j).has(e)}set(e,t){return typeof e=="object"&&!(e instanceof Map)?Object.keys(e).forEach(s=>{t=e[String(s)],o(this,j).set(s,t),o(this,ge)[String(s)]=t}):(o(this,j).set(e,t),o(this,ge)[String(e)]=t),o(this,Ae).save(Array.from(o(this,j)))}get observable(){return o(this,ge)}get entries(){return o(this,j)}get ready(){return o(this,Ke)}}j=new WeakMap,ge=new WeakMap,Ae=new WeakMap,Ke=new WeakMap;class Tr{constructor(e){E(this,"core");this.core=e}ready(){}prompt(e){}log(...e){console.log(...e)}clear(...e){}destroy(){}}class Or extends Tr{prompt(e){const t=["openDialog","--prompt"];return e&&t.push(`--message="${N(e)}"`),this.core.executeCommand(t.join(" "))}}var Qe,Ze;class Nr{constructor(e){h(this,Qe);h(this,Ze,[]);b(this,Qe,e)}command(e,t){o(this,Ze).push({value:e,targetValue:t})}run(){return Promise.all(o(this,Ze).map(({value:e,targetValue:t})=>o(this,Qe).executeCommand(e).then(s=>{const a=s===t;return a||console.warn(`[ ${e} ]; ${s} === ${t}`),{value:e,targetValue:t,result:s,success:a}})))}async start(){const e=await this.run();return[[e.length,"Tests processed"],[e.filter(t=>t.success).length,"Tests success"],[e.filter(t=>!t.success).length,"Tests failed"]]}}Qe=new WeakMap,Ze=new WeakMap;const Ar={components:{WbForm:Es,WbFormField:qs,WbFormFieldRangeSlider:Js,WbFormFieldDropdown:Ks,WbButton:zt,WbButtonWrapper:Bt},emits:["close"],setup(){return Yt()},data(){const r=this.core.config.get(y.THEME)||Et[String(Xs)];return{screenModule:this.core.modules.screen,selectedColor:r.colors[1],colors:rs(r.colors[1]),saveLabel:"Save",resetLabel:"Reset",model:r,preset:"",fields:{presets:{label:"Presets",options:[{title:"Select Theme",value:""},...Object.keys(Et).map(e=>({title:Et[String(e)].title,value:e}))]},filter:{label:"Filter",options:[{title:"Invert",value:"invert(100%)"},{title:"Brightness",value:"brightness(50%)"}]}}}},watch:{preset(r){const e=Et[String(r)];this.model={name:e.name,colors:e.colors,filter:e.filter},this.selectedColor=this.model.colors[0]},selectedColor(r){this.colors=rs(r)},colors:{deep:!0,handler(r){this.selectedColor=this.model.colors[this.model.colors.indexOf(this.selectedColor)]=Ys(...Object.values(r).map(e=>Number(e)))}}},methods:{onSubmit(){const r=this.model;this.core.config.set(y.THEME,r),this.core.modules.screen.setTheme(new js("custom",r)),this.$emit("close")}}},Dr={class:"wb-module-core-color-settings"},Pr={class:"col-1"},vr={class:"colors-select-list"},Lr=["value"],Cr={class:"col-1 colors"},Wr={class:"color-controls"},xr={class:"color-preview"};function $r(r,e,t,s,a,i){const l=C("wb-form-field-dropdown"),n=C("wb-form-field"),c=C("wb-form-field-range-slider"),m=C("wb-button"),p=C("wb-button-wrapper"),w=C("wb-form");return R(),V("div",Dr,[x(w,{class:"form",onSubmit:i.onSubmit},{default:H(()=>[g("div",null,[g("div",Pr,[x(l,Ee(a.fields.presets,{modelValue:a.preset,"onUpdate:modelValue":e[0]||(e[0]=I=>a.preset=I)}),null,16,["modelValue"]),x(n,{label:"Colors",class:"color-select"},{default:H(()=>[g("div",vr,[(R(!0),V(ms,null,hs(a.model.colors,(I,k)=>(R(),V("label",{key:k,style:Xe({"--color":I})},[vs(g("input",{"onUpdate:modelValue":e[1]||(e[1]=Fe=>a.selectedColor=Fe),type:"radio",name:"color",value:I},null,8,Lr),[[Ls,a.selectedColor]])],4))),128))])]),_:1}),x(l,Ee(a.fields.filter,{modelValue:a.model.filter,"onUpdate:modelValue":e[2]||(e[2]=I=>a.model.filter=I)}),null,16,["modelValue"])]),g("div",Cr,[g("div",Wr,[g("div",xr,[g("i",{style:Xe(`background-color: rgb(${a.colors.join(", ")});`)},null,4)]),g("div",null,[g("div",null,[x(c,{modelValue:a.colors[0],"onUpdate:modelValue":e[3]||(e[3]=I=>a.colors[0]=I),"style-type":"color-select",label:"Red",class:"color-slider",max:255,min:0,step:1,"handle-size":.2},{after:H(()=>[g("span",null,Ot(a.colors[0].toString(16).toUpperCase()),1)]),_:1},8,["modelValue"])]),g("div",null,[x(c,{modelValue:a.colors[1],"onUpdate:modelValue":e[4]||(e[4]=I=>a.colors[1]=I),"style-type":"color-select",label:"Green",class:"color-slider",max:255,min:0,step:1,"handle-size":.2},{after:H(()=>[g("span",null,Ot(a.colors[1].toString(16).toUpperCase()),1)]),_:1},8,["modelValue"])]),g("div",null,[x(c,{modelValue:a.colors[2],"onUpdate:modelValue":e[5]||(e[5]=I=>a.colors[2]=I),"style-type":"color-select",label:"Blue",class:"color-slider",max:255,min:0,step:1,"handle-size":.2},{after:H(()=>[g("span",null,Ot(a.colors[2].toString(16).toUpperCase()),1)]),_:1},8,["modelValue"])])])])])]),x(p,{align:"outer",full:""},{default:H(()=>[a.saveLabel?(R(),K(m,{key:0,"style-type":"primary",label:a.saveLabel,type:"submit"},null,8,["label"])):Q("",!0)]),_:1})]),_:1},8,["onSubmit"])])}const Mr=Oe(Ar,[["render",$r],["__scopeId","data-v-60497134"]]),Vr={components:{WbForm:Es,WbButton:zt,WbButtonWrapper:Bt,WbFormFieldCheckboxGroup:Qs,WbFormFieldTextarea:er},emits:["close"],setup(){return Yt()},data(){return{saveLabel:"Save",model:{[y.SCREEN_1084_FRAME]:this.core.config.get(y.SCREEN_1084_FRAME)||!1,[y.SCREEN_REAL_LOOK]:this.core.config.get(y.SCREEN_REAL_LOOK)||!1,[y.SCREEN_SCAN_LINES]:this.core.config.get(y.SCREEN_SCAN_LINES)||!1,[y.SCREEN_ACTIVE_ANIMATION]:this.core.config.get(y.SCREEN_ACTIVE_ANIMATION)||!1,[y.BOOT_WITH_SEQUENCE]:this.core.config.get(y.BOOT_WITH_SEQUENCE)||!1,[y.BOOT_WITH_WEBDOS]:this.core.config.get(y.BOOT_WITH_WEBDOS)||!1,[y.FILE_EXTENSION_ASSIGNMENT]:(this.core.config.get(y.FILE_EXTENSION_ASSIGNMENT)||[]).map(e=>e.join(" ")).join(`
`)}}},computed:{fileTypeAssignment(){return{model:this.model,name:y.FILE_EXTENSION_ASSIGNMENT,label:"File Extension assignment to Application",placeholder:"e.g. md openPreview…"}},generalSettings(){return{model:this.model,label:null,items:[]}},screenSettings(){return{model:this.model,label:"Screen - Settings",items:[{label:"Use 1084 Frame with 640x480",name:y.SCREEN_1084_FRAME},{label:"Screen with Real-Look",name:y.SCREEN_REAL_LOOK},{label:"Screen with Scan-Lines",name:y.SCREEN_SCAN_LINES},{label:"Screen with On/Off Animation",name:y.SCREEN_ACTIVE_ANIMATION}]}},bootSettings(){return{model:this.model,label:"BOOT - Settings",items:[{label:"Boot with Sequence?",name:y.BOOT_WITH_SEQUENCE},{label:"Boot with WebDos?",name:y.BOOT_WITH_WEBDOS}]}}},methods:{onSubmit(){this.model[String(y.FILE_EXTENSION_ASSIGNMENT)]=this.model[String(y.FILE_EXTENSION_ASSIGNMENT)].split(`
`).map(r=>r.match(/^([^ ]+) +(.*)$/).slice(1,3)),this.core.config.set(this.model),this.$emit("close")}}},Fr={class:"wb-module-core-settings"},Br={class:"cols"},kr={class:"col-2"},Gr={class:"col-2"};function Ur(r,e,t,s,a,i){const l=C("wb-form-field-checkbox-group"),n=C("wb-form-field-textarea"),c=C("wb-button"),m=C("wb-button-wrapper"),p=C("wb-form");return R(),V("div",Fr,[x(p,{onSubmit:i.onSubmit},{default:H(()=>[g("div",Br,[g("div",kr,[i.generalSettings.items.length>0?(R(),K(l,gt(Ee({key:0},i.generalSettings)),null,16)):Q("",!0),i.screenSettings.items.length>0?(R(),K(l,gt(Ee({key:1},i.screenSettings)),null,16)):Q("",!0),i.bootSettings.items.length>0?(R(),K(l,gt(Ee({key:2},i.bootSettings)),null,16)):Q("",!0)]),g("div",Gr,[x(n,Ee(i.fileTypeAssignment,{"label-top":"",rows:10,resize:null}),null,16)])]),x(m,{align:"outer",full:""},{default:H(()=>[a.saveLabel?(R(),K(c,{key:0,"style-type":"primary",label:a.saveLabel,type:"submit"},null,8,["label"])):Q("",!0)]),_:1})]),_:1},8,["onSubmit"])])}const zr=Oe(Vr,[["render",Ur],["__scopeId","data-v-30662453"]]),Yr=({core:r})=>[{name:["execute"],description:"Execute file.",args:[new S({index:0,name:"path",description:"Path to the file"})],async action({path:e}){const t=new Map(r.config.get(y.FILE_EXTENSION_ASSIGNMENT));if(!e)throw Ut.get("bad_args");let s;if(t.has(ts(e))?s=await r.modules.files.fs.get(t.get(ts(e))):(s=await r.modules.files.fs.get(e),e=null),typeof s.action=="function")return s.action(r,e);if("type"in s.data){const a=[`openPreview "${s.getPath()}"`];return s.data.openMaximized&&a.push("-maximized"),r.executeCommand(a.join(" "))}}},{name:["openColorSettings"],action(){r.modules.windows.addWindow({title:"Color Settings",component:Mr,componentData:{},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}})}},{name:["openSettings"],action(){r.modules.windows.addWindow({title:"Settings",component:zr,componentData:{},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}})}},{name:["echo","print"],args:[new S({name:["newline","n"],flag:!0})],async action({newline:e},t){const s=a=>N(a).replace(/\\"/g,'"').replace(/\\n/g,`
`);if(e)t.message(t.commandArgs.map(a=>s(a)));else{let a=await t.core.executeCommand(t.commandValue);typeof a=="object"&&(a=JSON.stringify(a)),t.message(`${N(s(a))}`)}}},{name:"commands",action(e,t){const s=new Dt({headerPadding:1});return s.addColumn([{value:"Command(s)",align:"left",maxWidth:20},{value:"Description/Arguments",align:"left",maxWidth:60}]),s.addRow(Ne.items.reduce((a,i)=>{const l=i.args||[],n=[];i.description&&(n.push(i.description),n.push("")),l.length&&(n.push("Arguments:"),n.push(""));const{flagNames:c,kwargNames:m}=l.reduce((w,I)=>{const k=I.name.join(", ");return I.flag?w.flagNames.push({name:`-${k}`,description:I.description}):w.kwargNames.push({name:`--${k}`,description:I.description}),w},{flagNames:[],kwargNames:[]}),p={paddingChr:"Â",showHeaders:!1,config:{name:{minWidth:15},description:{minWidth:10,maxWidth:30}}};return n.push(Zt(c,Object.assign({},p))),c.length>0&&m.length>0&&n.push(""),n.push(Zt(m,Object.assign({},p))),a.push([i.name.join(", "),n.join(`
`)]),a},[])),t.message(["Commands:",s]),Promise.resolve()}},{name:["CLS","CLEAR"],action(){r.consoleInterface.clear()}},{name:["prompt","input","PROMPT","INPUT"],args:[new S({index:0,name:"text",description:"Text from prompt."}),new S({index:1,name:"variable",description:"Variable"})],action:({text:e,variable:t,unresolved:s},a)=>(s.text&&!s.variable?(t=s.text,e=null):t=s.variable,r.consoleInterface.prompt(e).then(i=>(Ue(i)&&(i=Number(i)),t&&r.modules.parser.memory.set(t,i),i)))},{name:["confirm","CONFIRM"],args:[new S({index:0,name:"text",description:"Text from confirm."})],action({text:e}){return r.consoleInterface.confirm(e)}},{name:["selfCheck"],async action(e,t){const s=new Dt;s.addColumn([{value:"Count",align:"left",minWidth:8},{value:"Description",align:"left",minWidth:15}]),s.addRow(await Xr(r)),t.message(["Command Tests:",s])}}];function Xr(r){const e=new Nr(r);return e.command('"foo" +"bar"','"foobar"'),e.command("(-3+-6)+1",-8),e.command("(-3-+6)+1",-8),e.command("(-3*-6)+1",-3*-6+1),e.command("(-3/-6)+1",-3/-6+1),e.command("(-3+6)+1",4),e.command("(-3-6)+1",-8),e.command("(-3*6) + 1",-3*6+1),e.command("(-3/6)+1",-3/6+1),e.command("INT(PI)",3),e.command("(POW(2,2)+1)",5),e.command('ASC("D")',68),e.command("CHR$(68)",'"D"'),e.command('LEN("ABC")',3),e.command('"a" + "b"','"ab"'),e.command("STRING$(3,0)",'"000"'),e.command("SQRT(2,2)",Math.sqrt(2,2)),e.command("128 >> (256 + 5)",4),e.command("-2+4+SQRT(2,2)",2+Math.sqrt(2,2)),e.command("-2- 2 * 2",-2-2*2),e.command("(1+1)",2),e.command("2*2",2*2),e.command("1+2+3+(POW(2,2)+1)+5*8-(50/2)",6+(2**2+1)+5*8-50/2),e.start()}const{version:jr}=Cs().public;var St,qe,Je,et,be,tt,st,rt;const fe=class fe{constructor(){h(this,St,new bt);h(this,qe,new bt);h(this,Je,!1);h(this,et,new tr(0));h(this,be,{});h(this,tt,new Or(this));h(this,st,new je({core:this,debug:!1,consoleInterface:o(this,tt)}));E(this,"executionCounter",At(0));h(this,rt,new Rr(Hs,ps.SESSION,is));this.log(`${fe.NAME}; ${fe.VERSION}`)}get version(){return fe.VERSION}addExecution(){return this.executionCounter.value++,()=>{this.executionCounter.value--}}get events(){return o(this,St)}async setup(){if(o(this,Je))return console.warn("Setup is complete!"),this;b(this,Je,!0),Ne.add(Ms(Yr({core:this}))),await o(this,rt).ready,this.config.setDefaults(is);const e=Object.values(o(this,be));return await Promise.all(e.map(t=>Promise.resolve(t.beforeSetup()))),await Promise.all(e.map(t=>Promise.resolve(t.setup()))),await Hr(this.modules.files.fs),o(this,et).next(this),this}destroy(){Ne.clear()}addModule(e,t){const s=new e(Object.assign({core:this},t));o(this,be)[Ge(s.constructor.NAME)]=s}async removeModule(e){await e.destroy(),delete o(this,be)[e.constructor.NAME]}executeCommands(e){if(e.length>0){const t=e.shift();return this.executeCommand(t).then(()=>this.executeCommands(e))}}async executeCommand(e,t){typeof e=="string"&&(e=e.replace(/(.*[^\\])\n(\S*)/gm,"$1\\n$2")),t=Object.assign({show:!1,commandBucket:Ne,core:this,logger:this.logger},t);const s=[];t.message&&s.push(...s.concat(t.message));const a=t.show;t.message=l=>{a&&s.push(...[].concat(l))};let i;try{if(e){const l=await this.modules.parser.parseCommand(e);t.commandBucket.has(l.command)?i=await as(e,l,t.commandBucket,t):Ne.has(l.command)?i=await as(e,l,Ne,t):this.modules.parser.isMathValue(e)?i=await this.modules.parser.parseMath(e):/^\w+$/.test(e)&&console.warn(`can\\'t use variable or method "${e}"`)}}catch(l){let n=l;Array.isArray(l)&&(n=new Error(l[l.length-1])),o(this,qe).next(n)}return i!==void 0&&i!=="undefined"&&typeof i=="string"&&t.show&&s.length<1&&s.push(i),s.forEach(l=>t.logger.add(l,{type:je.TYPE.OUTPUT})),i}log(e){o(this,st).add(e,{namespace:"Core"})}get consoleInterface(){return o(this,tt)}get errorObserver(){return o(this,qe)}get ready(){return o(this,et)}get config(){return o(this,rt)}get logger(){return o(this,st)}get modules(){return o(this,be)}};St=new WeakMap,qe=new WeakMap,Je=new WeakMap,et=new WeakMap,be=new WeakMap,tt=new WeakMap,st=new WeakMap,rt=new WeakMap,E(fe,"VERSION",jr||"0.0.0"),E(fe,"NAME","web-workbench");let Lt=fe;async function as(r,e,t,s){const a=t.get(e.command),i=s.show,l=await a.action(Vs(a,e),Object.assign({command:e.command,commandValue:e.commandValue,commandArgs:e.args},s));return i&&s.showCommand&&s.logger.add("> "+r,{type:je.TYPE.OUTPUT}),l}async function Hr(r){const{FONT_FAMILES:e,DEFAULT_FONT_SIZE:t}=await d(async()=>{const{FONT_FAMILES:c,DEFAULT_FONT_SIZE:m}=await import("./C1TbKe3l.js");return{FONT_FAMILES:c,DEFAULT_FONT_SIZE:m}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),import.meta.url),[s,a,i]=(await Promise.all([d(()=>import("./1CP0fhQM.js"),[],import.meta.url),d(()=>import("./DYb_MdBR.js"),[],import.meta.url),d(()=>import("./C1rnC5hf.js"),[],import.meta.url)])).map(c=>c.default||c);await r.createRootFile("Cuby_Generator.link","Cuby Generator",null,{meta:[[f.POSITION,{x:236,y:394}],[f.IGNORE_SYMBOL_REARRANGE,!0],[f.WEB_URL,"https://cuby.lammpee.de"],[f.SYMBOL,u.CUBY]]}),await r.createRootFile("Nuxt_Booster.link","Nuxt Booster",null,{meta:[[f.POSITION,{x:357,y:378}],[f.IGNORE_SYMBOL_REARRANGE,!0],[f.WEB_URL,"https://basics.github.io/nuxt-booster/"],[f.SYMBOL,u.NUXT_BOOSTER]]}),await r.createRootFile("Vue_Semantic_Structure.link","Vue Semantic Structure",null,{meta:[[f.POSITION,{x:222,y:275}],[f.IGNORE_SYMBOL_REARRANGE,!0],[f.WEB_URL,"https://basics.github.io/vue-semantic-structure/"],[f.SYMBOL,u.VUE_SEMANTIC_STRUCTURE]]}),await r.createRootFile("Github.link","Github",null,{meta:[[f.POSITION,{x:159,y:386}],[f.IGNORE_SYMBOL_REARRANGE,!0],[f.WEB_URL,"https://github.com/ThornWalli/web-workbench"],[f.SYMBOL,u.GITHUB]]});const l=[{id:"Imprint.md",name:"Imprint",content:a,position:{x:0,y:390},fontFamily:e.Monospace["Courier New"],fontSize:14},{id:"Disclaimer.md",name:"Disclaimer",content:i,position:{x:80,y:390},fontFamily:e.Monospace["Courier New"],fontSize:14},{id:"Changelog.md",name:"Changelog",content:s,position:{x:0,y:305},fontFamily:e.Monospace["Courier New"],fontSize:14}];return(await r.createRootDir("Press","Press",{meta:[[f.WINDOW_SIDEBAR,!1],[f.WINDOW_SCALE,!1],[f.WINDOW_SCROLL_X,!1],[f.WINDOW_SCROLL_Y,!1],[f.POSITION,{x:80,y:320}],[f.WINDOW_SIZE,{x:100,y:120}],[f.IGNORE_SYMBOL_REARRANGE,!0]]})).addItems([{id:"Amiga-News.link",name:"Amiga-News.de",meta:[[f.WEB_URL,"https://www.amiga-news.de/de/news/AN-2022-07-00094-DE.html"],[f.SYMBOL,u.LARGE_NOTE_RICH],[f.POSITION,{x:10,y:10}]]}]),Promise.all(l.map(({id:c,name:m,content:p,position:w,fontFamily:I,fontSize:k})=>r.createRootFile(c,m,{openMaximized:!0,type:"markdown",content:p,fontFamily:I||e.SansSerif.Arial,fontSize:k||t},{meta:[[f.POSITION,w],[f.IGNORE_SYMBOL_REARRANGE,!0],[f.SYMBOL,u.LARGE_NOTE_RICH]]}))).catch(c=>{throw new Error(c)})}const $=class ${static parse(e,t=[],s=0){let a=e;const i=Zr();let l=!1,n=0;for(;e.length>=n;){const c=e[Number(n-1)],m=e[Number(n+1)],p=e[Number(n)];if(p==="("&&i.clamp!==!1&&i.clamp++,/(^[$]{6}\d+\$)/.test(e.slice(n,e.length))&&!ae(i)){const[w]=e.slice(n,e.length).match(/(^[$]{6}\d+\$)/);n+=w.length-1}else if(/(^[$]{3}\d+)/.test(e.slice(n,e.length))&&!ae(i)){const[w]=e.slice(n,e.length).match(/(^[$]{3}\d+)/);i.startRecord=n,n+=w.length,i.stopRecord=n}else p==="-"&&(m==="-"||$.REGEX_CHAR_WORD_NON_DIGIT.test(m))&&!ae(i)?(i.parameter=!0,i.startRecord=n):p==="("&&!ae(i)?(i.clamp=0,i.startRecord=n):$.REGEX_NUMERIC.test(p)&&!ae(i)?(i.numeric=!0,i.startRecord=n):$.REGEX_CHAR_WORD_NON_DIGIT.test(p)&&!ae(i)?(i.char=!0,i.startRecord=n):p==='"'&&!ae(i)?(i.doubleQuote=!0,i.startRecord=n):p==="'"&&!ae(i)?(i.singleQuote=!0,i.startRecord=n):i.startRecord!==!1&&(i.parameter?(p==="="||!$.REGEX_CHAR_WORD_NON_DIGIT.test(m))&&(p==="="?(i.parameter=!1,i.char=!1,i.startOverride=i.startRecord):m!=="="&&!$.REGEX_CHAR_WORD_NON_DIGIT.test(m)&&m!=="-"&&(i.stopRecord=n+1)):i.clamp!==!1?p===")"&&(i.clamp===0?i.stopRecord=n+1:i.clamp--):i.numeric?$.REGEX_NUMERIC.test(c)&&!$.REGEX_NUMERIC.test(p)&&(i.stopRecord=n):i.char?$.REGEX_CHAR_WORD_NON_DIGIT.test(c)&&!($.REGEX_CHAR_WORD_NON_DIGIT.test(p)&&!/[$%]/.test(p))&&(/[ ]*\(/.test(e.slice(n,e.length))?(i.char=!1,i.clamp=0):i.stopRecord=n+1):i.doubleQuote?c!=="\\"&&p==='"'&&(i.stopRecord=n+1):i.singleQuote&&c!=="\\"&&p==="'"&&(i.stopRecord=n+1));if(!i.stopRecord&&n+1>e.length&&(i.stopRecord=n+1,l=!0),i.stopRecord&&i.startRecord===!1&&n+1!==e.length)l=!0;else if(i.stopRecord){let w=i.startRecord;i.startOverride!==void 0&&(w=i.startOverride),a=a.slice(0,w)+Qr(t,a.slice(w,i.stopRecord))+a.slice(i.stopRecord,a.length),$.DEBUG&&console.log("result",a),l||(this.parse(a,t,s),l=!0)}if(l)break;n++}return t.length>0?t.filter(c=>c.length>0):[e]}};E($,"REGEX_CHAR_WORD_NON_DIGIT",/^[^\d\W$%]|[.].$/),E($,"REGEX_NUMERIC",/^[\d+\-*\\/.<>]$/),E($,"DEBUG",!1);let He=$;function Kr(r){return`$$$$$$${r}$`}function Qr(r,e){return r.push(e),Kr(r.length-1)}function ae(r){return r.singleQuote||r.doubleQuote||r.clamp!==!1||r.char||r.numeric||r.parameter}function Zr(){return{dollarCount:0,startRecord:!1,stopRecord:!1,char:!1,numeric:!1,singleQuote:!1,doubleQuote:!1,clamp:!1,parameter:!1}}var it;const D=class D{constructor(e){h(this,it);b(this,it,e)}async parse(e){const t=e;let s=e;const a=e.match(D.REGEX_COMMAND_REPLACE);a&&(s=a[1],e=a[2]);const i=e;let l=[],n={},c;if(s!==e){const m=this.parseParameter(e);c=m.unresolved,l=await Promise.all(m.args),n=m.kwargs,await Promise.all(Object.keys(n).map(p=>n[String(p)].then(w=>n[String(p)]=w)))}return{origin:t,unresolved:c,args:l,kwargs:n,command:s,commandValue:i}}parseParameter(e){return He.parse(e).reduce((s,a)=>{if(D.REGEX_PARAM_KWARG.test(a)){const[,i,l]=a.match(D.REGEX_PARAM_KWARG);s.kwargs[Ge(String(i))]=this.parseValue(l),s.unresolved.kwargs[Ge(String(i))]=ss(l)}else D.REGEX_PARAM_ARG.test(a)?(s.kwargs[Ge(String(a.replace(D.REGEX_PARAM_ARG,"$1")))]=Promise.resolve(!0),s.unresolved.kwargs[Ge(String(a.replace(D.REGEX_PARAM_ARG,"$1")))]=Promise.resolve(!0)):(s.args.push(this.parseValue(a)),s.unresolved.args.push(ss(a)));return s},{unresolved:{kwargs:{},args:[]},kwargs:{},args:[]})}parseValue(e){return/.*(true|false).*/.test(e)?Promise.resolve(e.replace(/.*(true|false).*/,"$1")==="true"):/^".*"$/.test(e)?Promise.resolve(N(e)):/^\d+$/.test(e)?Promise.resolve(Number(e)):typeof e=="string"&&/ *([a-zA-Z_-]+) */.test(e)?o(this,it).parse(e.replace(/ *([a-zA-Z_-]+) */,"$1")):Promise.resolve(e)}static extractStrings(e){let t=!1,s;const a=[];let i=!1;for(let n=e.length-1;n>=0;n--){const c=e[Number(n)],m=e[n-1];!i&&c==='"'&&m!=="\\"?t?(t=!1,a.push(e.slice(n,s+1))):(i=!1,t=!0,s=n):(!t&&i||i)&&c==="'"&&m!=="\\"&&(t?(i=!1,t=!1,a.push(e.slice(n,s+1))):(i=!0,t=!0,s=n))}if(t)throw new Error("can't extract values; "+e);return{result:a.reduce((n,c,m)=>n.replace(c,D.resolveKey(m)),e),values:a}}static extractValues(e,t=" "){let s=!1,a;const i=[];let l=!1;for(let c=e.length-1;c>=0;c--){const m=e[Number(c)],p=e[c-1];!l&&m==='"'&&p!=="\\"?s?(s=!1,i.push(e.slice(c,a+1))):(l=!1,s=!0,a=c):(!s&&l||l)&&m==="'"&&p!=="\\"&&(s?(l=!1,s=!1,i.push(e.slice(c,a+1))):(l=!0,s=!0,a=c))}if(s)throw new Error("can't extract values; "+e);return i.forEach((c,m)=>{e=e.replace(c,D.resolveKey(m))}),{params:e.split(t).filter(c=>c),values:i}}static resolveKey(e){return`$$$$$$${e}`}static resolveValues({params:e,values:t}){return e.map(s=>D.resolveValue(s,t))}static valueUnresolved(e){return D.REGEX_VALUE_RESOLVE.test(e)}static resolveValue(e,t){if(D.valueUnresolved(e)){if(e=e.match(/[$]{3}(\d+)/g).reduce((s,a)=>s.replace(a,t[Number(a.replace(D.REGEX_VALUE_RESOLVE,"$1"))]),e),/[\w]+[$%]?[ ]*\(/.test(e))return e;if(typeof e=="string"){if(e==="undefined")return;if(Jr(e))return e;if(qr(e))return Number(e);if(!e.startsWith('"'))return Us(e)}}return e}};it=new WeakMap,E(D,"REGEX_VALUE_RESOLVE",/[$]{3}(\d+)/),E(D,"REGEX_COMMAND_REPLACE",/^([a-zA-Z]+[a-zA-Z0-9_]+) (.*)$/),E(D,"REGEX_PARAM_KWARG",/^[-]{0,2}([\\-\w]+)=(.*)$/),E(D,"REGEX_PARAM_ARG",/^[-]{1,2}([\\-\w]+)$/);let A=D;function qr(r){return!isNaN(r)}function Jr(r){return!isNaN(parseInt(r))}var ot,De,Pe,ve;class Ss{constructor(e,t,s,a){h(this,ot);h(this,De);h(this,Pe,!1);h(this,ve,!1);b(this,ot,e),b(this,De,t),b(this,Pe,s||o(this,Pe)),b(this,ve,a||o(this,ve))}get name(){return o(this,ot)}get value(){return o(this,De)}set value(e){this.readonly||b(this,De,e)}get global(){return o(this,Pe)}get readonly(){return o(this,ve)}}ot=new WeakMap,De=new WeakMap,Pe=new WeakMap,ve=new WeakMap;class ei extends Ss{constructor(e,t,s){super(e,t,s,!0)}execute(e){return this.value.apply(this,e)}}class ns extends Ss{}var W,ne,F;class Xt{constructor(){h(this,W,new Map);h(this,ne,new Map);h(this,F,[])}reset(){this.resetPrefixStack(),o(this,W).clear(),o(this,ne).clear()}resetPrefixStack(){b(this,F,[])}get prefixStack(){return o(this,F)}get currentPrefixStack(){return o(this,F)[o(this,F).length-1]}has(e){return e=e.replace(/(.*[^ ])[ ]+$/,"$1"),e=e.replace(/[$%]$/,""),(!o(this,W).get(e)||o(this,W).get(e)&&!o(this,W).get(e).global)&&(e=this.prepareName(e)),o(this,W).has(e)}add(e,t,s=!1,a=!1){e=e.replace(/(.*[^ ])[ ]+$/,"$1"),/\$$/.test(e)?t===void 0&&(t=""):/\\%$/.test(e)&&t===void 0&&(t=0),e=e.replace(/[$%]$/,""),e=this.prepareName(e),this.has(e)||o(this,W).set(e,new ns(e,t,s,a))}get(e){e=e.replace(/(.*[^ ])[ ]+$/,"$1");const t=e;e=e.replace(/[$%]$/,""),(!o(this,W).get(e)||o(this,W).get(e)&&!o(this,W).get(e).global)&&(e=this.prepareName(e));let s=o(this,W).get(e);return s?(s=s.value,/\$$/.test(t)?s=String(s):/\\%$/.test(t)||/^\d+$/.test(s)?s=parseInt(s):/^[\d.]+$/.test(s)&&(s=parseFloat(s)),s):null}set(e,t,s=!1,a=!1){if(e=e.replace(/(.*[^ ])[ ]+$/,"$1"),typeof t!="object"&&(/[$]$/.test(e)?t===void 0?t="":t=String(t):/[%]$/.test(e)&&(t===void 0?t=0:t=parseInt(t))),e=e.replace(/[$%]$/,""),e=this.prepareName(e),this.has(e)){const i=o(this,W).get(e);i instanceof ns&&i&&(i.value=t)}else this.add(e,t,s,a)}addSub(e,t){e=this.prepareName(e,!1),this.has(e)||o(this,ne).set(e,new ei(e,t))}executeSub(e,t,s=!1){return e=this.prepareName(e,!1),o(this,F).push({name:`${parseInt(Math.random()*1e4)}`,global:s}),o(this,ne).get(e).execute(t).then(a=>(o(this,W).forEach(i=>{RegExp(`[$]{3}${o(this,F)[o(this,F).length-1].name}$`).test(i.name)&&o(this,W).delete(i.name)}),o(this,F).pop(),a))}hasSub(e){return e=this.prepareName(e,!1),o(this,ne).has(e)}prepareName(e,t=!0){return typeof e=="string"&&(e=e.replace(/ /g,"")),t&&o(this,F).length&&!/[$]{3}/.test(e)&&(e=`${e}$$$${o(this,F)[o(this,F).length-1].name}`),e}get dims(){return o(this,W)}get subs(){return o(this,ne)}}W=new WeakMap,ne=new WeakMap,F=new WeakMap;var Ie,at,P,G,J,nt,lt,U,ct,Se,ee,B,le,v,L,us;let ti=(us=class{constructor(e,t,s,a=null,i=null){h(this,Ie);h(this,at);h(this,P);h(this,G);h(this,J);h(this,nt,9999999999);h(this,lt,0);h(this,U,null);h(this,ct,[]);h(this,Se,0);h(this,ee,[]);h(this,B,-1);h(this,le,[]);h(this,v,[]);h(this,L,-1);b(this,J,e),b(this,G,t),b(this,P,s||new Xt),b(this,Ie,a),b(this,at,i)}get memory(){return o(this,P)}get lines(){return o(this,J)}parse(e){e=e||[].concat(o(this,J));const t=e.shift().trim();return new Promise(s=>{if(o(this,U)&&t!=="END SUB"){o(this,U).lines.push(t),s();return}if(o(this,nt)>0&&o(this,lt)>o(this,nt))throw new Error("BASIC INTERPRETER OVERFLOW");if(Y(this,lt)._++,o(this,L)>=0){if(o(this,v).forEach(a=>{o(this,v)[o(this,L)].count===0&&a.count===0&&a.lines.push(t)}),t==="WEND"||/NEXT /.test(t))return o(this,v)[o(this,L)].condition().then(async a=>{if(o(this,v)[o(this,L)].tmpLines=o(this,v)[o(this,L)].tmpLines||e,a){const i=o(this,v)[o(this,L)].lines;return o(this,v)[o(this,L)].count++,"step"in o(this,v)[o(this,L)]&&await o(this,v)[o(this,L)].step(),i.length>0?this.parse([].concat(i)):(o(this,v)[o(this,L)]=!1,Y(this,L)._--,o(this,v).pop(),null)}else return o(this,v)[o(this,L)]=!1,Y(this,L)._--,o(this,v).pop(),null}).then(s);s()}else s()}).then(()=>{if(!o(this,U)&&o(this,B)>=-1&&(o(this,le)[o(this,B)]!==void 0&&o(this,ee)[o(this,B)]===void 0&&o(this,ee).push(!o(this,le)[o(this,B)]),t==="ELSE"&&o(this,Se)<1&&(o(this,ee)[o(this,B)]=!o(this,ee)[o(this,B)])),o(this,ee)[o(this,B)])/^IF (\((.*)\)|(.*)) THEN$/.test(t)&&Y(this,Se)._++;else return this.parseLine(t,e);return null}).then(()=>(o(this,B)>-1&&(t==="ENDIF"||t==="END IF")&&(o(this,Se)<1?(Y(this,B)._--,o(this,le).pop(),o(this,ee).pop()):Y(this,Se)._--),e.length?this.parse(e):o(this,ct)))}parseLine(e,t){return new Promise((s,a)=>{if(e=(e||"").replace(/^[ \t]+/g,""),/^ *[#/]+/.test(e)){s();return}if(/^SUB (.*) STATIC$/.test(e)){const i=e.match(/^SUB (.*) STATIC$/);return this.commandSubStatic(i[1]).then(s)}else{if(e==="END SUB")return this.commandEndSub().then(s);if(o(this,U)){s();return}}if(/^IF (\((.*)\)|(.*)) THEN$/.test(e)){const i=e.match(/^IF (\((.*)\)|(.*)) THEN$/),l=i[3]||i[2];return this.commandIfThen(l).then(s)}else if(e==="ELSE"||e==="ENDIF"||e==="END IF"){s();return}if(/^WHILE (.*)$/.test(e)){const i=e.match(/^WHILE (.*)$/);return this.commandWhile(i[1]).then(s)}else if(e==="WEND"){s();return}if(/^FOR (.*)$/.test(e)){const i=e.match(/^FOR (.*)$/);return this.commandFor(i[1]).then(s)}else if(e.startsWith("NEXT ")){s();return}if(/^([\w\d]+):$/.test(e)){s();return}if(/^GOTO +([\w\d]+)$/.test(e)){const i=e.match(/^GOTO +([\w\d]+)$/);this.commandGoto(t,i[1])}if(/^DIM( SHARED)? +(.*)$/.test(e)){const i=e.match(/^DIM( SHARED)? +(.*)$/);return this.commandDimShared(i[2],!!i[1]).then(s)}if(/^LET +([\w,$%]+)(\((.*)\))? *= *(.*)$/.test(e)){const i=e.match(/^LET +([\w,$%]+)(\((.*)\))? *= *(.*)$/);return this.commandLet(i[1],i[4],i[3]).then(()=>s())}if(/^READ +([\w, $%]+)$/.test(e)){const i=e.match(/^READ +([\w, $%]+)$/);return this.commandRead(i[1]).then(s)}if(/^END[ ]*$/.test(e))return this.commandEnd().then(s);if(/^(PAUSE|SLEEP) +(.+)/.test(e)){const l=e.match(/^(PAUSE|SLEEP) +(.+)/)[2];return this.commandPause(l).then(s)}if(/^CALL *(.*)/.test(e)){const i=e.match(/^CALL *(.*)/);return this.commandCall(i[1],t).then(s)}if(/^EXECUTE *(FILE|EVAL) *(.*)/.test(e)){const i=e.match(/^EXECUTE *(FILE|EVAL) *(.*)/);return this.commandExecute(i[1],i[2]).then(s).catch(a)}if(/^PRINT +USING +(.*);(.*)$/.test(e)){const i=e.match(/^PRINT +USING +(.*);(.*)$/);return this.commandPrintUsing(i[1],i[2]).then(s)}if(/^PRINT +(.*)$/.test(e)){const i=e.match(/^PRINT +(.*)$/);return this.commandPrint(i[1]).then(s)}if(/^DATA +(.*)$/.test(e)){const i=e.match(/^DATA +(.*)$/);return this.commandDataVar(i[1]).then(s)}o(this,G)?o(this,G).call(this,e,{show:!0}).then(i=>{i&&o(this,ct).push(i)}).then(s).catch(a):s()})}async setReadStack(e,t){let s=await this.parseValue(t,!0);return _t(s)&&(s=parseFloat(s)),o(this,P).set(e,s,!0)}async addDataStack(e){let t=await this.parseValue(e,!0);return _t(t)&&(t=parseFloat(t)),o(this,Ie).push(t)}async setStack({name:e,value:t,index:s,global:a}){let i=await this.parseValue(t,!0);return _t(i)&&(i=parseFloat(i)),s!==void 0?(s=await this.parseValue(s,!0),o(this,P).get(e)[s-1]=i):o(this,P).set(e,i,a)}async setGotoMarkStack(e,t){o(this,at).set(e,await this.parseValue(t,!0))}parseValue(e,t=!0,s=!1){if(e===void 0)return Promise.resolve(e);if(zs(e))return Promise.resolve(e);if(Array.isArray(e))return Promise.resolve(e);if(typeof e=="boolean"||/^ *(true|false|TRUE|FALSE) *$/.test(e))return typeof e!="boolean"&&(e=e.toLowerCase()==="true"),Promise.resolve(e);if(/^ *@"((.|\n)*)" *$/.test(e))return Promise.resolve(e.replace(/^ *@"((.|\n)*)" *$/,'"$1"'));if(/^ *"((\\"|[^"])*)" *$/.test(e))return Promise.resolve(e.replace(/^ *"((\\"|[^"])*)" *$/,'"$1"'));if(/^ *[\d]+ *$/.test(e))return Promise.resolve(parseFloat(e));if(/^ *([\\-]?[\d.]+(e[-+]?\d+)?) *$/.test(e))return Promise.resolve(parseFloat(e));if(e&&/^[^"]?(.*)[^"]? *$/.test(e.replace(/ /g,""))){if(e=e.replace(/^ */g,""),o(this,P).has(e.replace(/ /g,"")))return e=e.replace(/ /g,""),this.parseValue(o(this,P).get(e),!0);if(s)throw new Error(void 0);return o(this,G).call(this,e,{message:t?void 0:e}).then(a=>a)}return Promise.resolve(null)}async executeCondition(e,t,s){return e=await this.parseValue(e,!0),s=await this.parseValue(s,!0),/^[=]?==$/.test(t)?e===s:t==="<>"?e!==s:/^([<>][=]|[<>])?$/.test(t)?si(e,t,s):/^!=[=]?$/.test(t)?e!==s:null}commandIfThen(e){const t=e.match(/([^<>]*) *(<>|<=|>=|<|>|[=!]{2,3}) *([^<>].*)/);return t?this.executeCondition(t[1],t[2],t[3]).then(s=>(o(this,le).push(s),Y(this,B)._++,s)):this.parseValue(e[1],!0).then(s=>(o(this,le).push("value"in s?s.value:s),Y(this,B)._++,s))}commandWhile(e){const t=e.match(/([^<>]*) *(<>|<=|>=|<|>|[=!]{2,3}) *([^<>].*)/);return t?this.executeCondition(t[1],t[2],t[3]).then(s=>{if(s)return o(this,v).push({count:0,lines:[],condition:()=>this.executeCondition(t[1],t[2],t[3])}),Y(this,L)._++,s}):Promise.resolve()}async commandFor(e){const t=e.match(/(.*) *= *(.*) +TO +(.*) +STEP[ ](.*)/)||e.match(/(.*) *= *(.*) +TO +(.*)/);if(t){const s=await this.parseValue(t[2],!0),a=await this.parseValue(t[3],!0);o(this,P).set(t[1],s),Y(this,L)._++;const i=async(l=!0)=>{let n=1;return t[4]&&(n=await this.parseValue(t[4],!0)),l&&o(this,P).set(t[1],o(this,P).get(t[1])+n),n};return o(this,v).push({step:i,count:0,lines:[],condition:async()=>{const l=await i(!1);return l===0?!1:this.executeCondition(`(${t[1]}  )`,l<0?">":"<",a)}})}}commandSubStatic(e){const t=e.match(/^([\w,$%]+)(\((.*)\))?$/),s=t[1],a=A.resolveValues(A.extractValues(t[3]||"",","));return b(this,U,{name:s,lines:[],args:a}),Promise.resolve()}commandEndSub(){if(o(this,U)){const e=o(this,U).lines,t=o(this,U).args;o(this,P).addSub(o(this,U).name,async(...s)=>{(await Promise.all(t.map((i,l)=>this.parseValue(s[Number(l)]).then(n=>({arg:i,value:n}))))).forEach(({arg:i,value:l})=>{o(this,P).add(i,l)}),await this.parse([].concat(e))}),b(this,U,null)}else throw new Error("has no active SUB");return Promise.resolve()}commandGoto(e,t){return e.splice(0,e.length),this.parse(o(this,J).slice(o(this,J).indexOf(`${t}:`),o(this,J).length))}commandDimShared(e,t){return A.resolveValues(A.extractValues(e,",")).reduce((a,i)=>(i=i.match(/^([\w, $%]+)?(\((.*)\))?$/),o(this,P).has(i[1])||(i[3]&&(a=a.then(()=>this.parseValue(i[3],!0))),a=a.then(l=>this.setStack({name:i[1],value:l?Array(l):void 0,global:t}))),a),Promise.resolve())}commandLet(e,t,s){if(o(this,P).has(e))return this.setStack({name:e,value:t,index:s});throw new Error(`Variable ${e} not defined`)}async commandPrintUsing(e,t){const s=await this.parseValue(e,!0);try{t=await Promise.all(A.resolveValues(A.extractValues(t.trim(),",")).map(i=>this.parseValue(i,!0,!0)))}catch(i){i.message&&console.error(i),t=[await this.parseValue(t,!0)]}const a=t.reduce((i,l)=>{const n=s.match(/((#+)(\.(#+))?)/);return l=String(l),/[\d.]+/.test(l)&&(l=l.split(/\./),n[4]&&l.length>1?l[1]=fs(qt(String(l[1]),n[4].length,!1,"0"),n[4].length):l.splice(1,1),l[0]=qt(String(l[0]),n[2].length,!0," "),l=l.join(".")),i.replace(/(#+(\.#+)?)/,N(l))},s);return o(this,G).call(this,null,{message:`"${N(a)}"`})}commandDataVar(e){if(o(this,Ie).length===0)return Promise.all(e.split(",").map(t=>this.addDataStack(t)));throw new Error("DATA has already been declared")}async commandPrint(e){if(/^((".*"|[^"]*);([^;]*))$/.test(e)){const t=e.match(/(.*);(.*)$/),s=await this.parseValue(t[1],!0);let a=await Promise.all(A.resolveValues(A.extractValues(t[2]," ")).reduce((i,l)=>(i.push(this.parseValue(l,!0)),i),[]));return a=a.map(i=>`${N(s)}${N(i)}`).join(" "),o(this,G).call(this,null,{message:`"${a}"`})}else{let t=await this.parseValue(e);return t=await Promise.all(A.resolveValues(A.extractValues(String(t)," ")).map(s=>this.parseValue(s,!0))),t=t.map(s=>N(s)),t=t.join(""),o(this,G).call(this,null,{message:_t(t)?t:`"${t}"`})}}commandEnd(){return Promise.resolve()}async commandPause(e){const t=await this.parseValue(e);return new Promise(s=>window.setTimeout(()=>{s()},t))}commandRead(e){const t=e.split(",");return Promise.all(t.map(s=>{const a=o(this,Ie).shift();return this.setReadStack(s,a),Promise.resolve()}))}commandCall(e,t){const a=e.match(/([^(]+)\(.*\)/)[1];if(o(this,P).hasSub(a))return this.parseLine(e,t);throw new Error(`SUB ${a} NOT FOUND`)}async commandExecute(e,t){if(!o(this,G))throw new Error("No callback available for readfile");console.log("READFILE",e,t);let s;switch(e){case"FILE":try{s=await o(this,G).call(this,`READFILE ${t}`,{show:!1})}catch(a){throw new Error(a)}if(console.log("READFILE",s),s!==void 0)try{return o(this,G).call(this,s.value,{show:!0})}catch(a){throw new Error(a)}else throw new Error("File Content is empty");case"EVAL":try{return this.parseValue(t,{show:!0})}catch(a){throw new Error(a)}}}},Ie=new WeakMap,at=new WeakMap,P=new WeakMap,G=new WeakMap,J=new WeakMap,nt=new WeakMap,lt=new WeakMap,U=new WeakMap,ct=new WeakMap,Se=new WeakMap,ee=new WeakMap,B=new WeakMap,le=new WeakMap,v=new WeakMap,L=new WeakMap,us);function si(r,e,t){switch(e.match(/^([<>][=]|[<>])$/)[1]){case"<":return parseFloat(r)<parseFloat(t);case">":return parseFloat(r)>parseFloat(t);case"<=":return parseFloat(r)<=parseFloat(t);case">=":return parseFloat(r)>=parseFloat(t);default:return null}}function _t(r){return!isNaN(parseFloat(r))&&isFinite(r)}var Le,yt,wt,Ce;class ri{constructor(e,t){h(this,Le,new Map);h(this,yt,new Map);h(this,wt,[]);h(this,Ce);b(this,Ce,t),b(this,Le,e)}get callback(){return o(this,Ce)}get memory(){return o(this,Le)}async parse(e,t,s){if(e.length===0)return;e.length>1&&await this.readData(e);const a=[];return new ti(e,async(l,n)=>{n=Object.assign({},n,s);const c=await(t||o(this,Ce))(l,n);return n.show&&typeof c=="string"&&c!=="undefined"&&a.push(c),c},o(this,Le),o(this,wt),o(this,yt)).parse().then(()=>a)}readData(e){let t=e.find(s=>/^[ ]*DATA[ +]/.test(s));return t?(t=e.splice(e.indexOf(t),1),this.parse(t)):Promise.resolve()}}Le=new WeakMap,yt=new WeakMap,wt=new WeakMap,Ce=new WeakMap;function X(...r){if(r.includes(void 0))throw new Error("invalid arguments")}let Ct,Wt,xt,$t,Mt,Vt,Ft,ys;try{Ct=/([^\w$%]?)\(([^\\(\\)]+)\)/,Wt=/^\((.*)\)$/,xt=new RegExp("[^\\d$\\-\\w]?(?<a>([+-]?[\\w.]+e\\+\\d+)|([+-]?[\\w$%.]+)|(^[+-]?[\\w$%.]+)|([\\w$%.]+)|([$]{3}\\d+))[ ]*(?<operator>[\\^*%\\/]|MOD|XOR|AND|OR|<<|>>|>>>)[ ]*(?<b>([-]?[\\w.]+e\\+\\d+)|([-]?[\\w$%.]+)|(^[+-]?[\\w$%.]+)|([\\w$%.]+)|([$]{3}\\d+))"),$t=/([+-]?[\w.]+e\+\d+|[+-]?[\w$%.]+|[$]{3}\d+)[ ]*([+-])[ ]*([+-]?[\w.]+e\+\d+|[+-]?[\w$%.]+|[$]{3}\d+)/,Mt=/([\w]+[a-zA-Z0-9_.]+[$%]?)[ ]*\(([^\\(\\)]*)\)/,Vt=/^([\w]+[a-zA-Z0-9_.]+[$%]?)[ ]*\(([^\\(\\)]*)\)/,Ft=/^([\w]+[a-zA-Z0-9_.]?[$%]?)/,ys=/^([+-]?[\d.]+e\+\d+|[+-]?[\d.])+($|$)/}catch(r){console.error(r)}var O;class ii{constructor(e){h(this,O);this.createMemory(e)}createMemory(e){b(this,O,e||new Xt),o(this,O).addSub("RND",()=>Promise.resolve(Math.random())),o(this,O).addSub("PI",()=>Promise.resolve(Math.PI)),o(this,O).addSub("POW",(t,s)=>(X(t,s),Promise.resolve(t**(s||2)))),o(this,O).addSub("SQRT",(t,s)=>(X(t,s),Promise.resolve(Math.sqrt(t,s||2)))),o(this,O).addSub("INT",t=>(X(t),this.parse(N(t)).then(s=>parseInt(s)))),o(this,O).addSub("SPC",t=>(X(t),Promise.resolve(`"${Jt(t)}"`))),o(this,O).addSub("LEN",t=>(X(t),Promise.resolve(N(String(t)).length))),o(this,O).addSub("ASC",t=>(X(t),Promise.resolve(N(t).charCodeAt(0)))),o(this,O).addSub("CHR$",t=>(X(t),Promise.resolve(String.fromCharCode(t)))),o(this,O).addSub("LEFT$",(t,s)=>(X(t,s),Promise.resolve(`"${fs(N(t),parseInt(s))}"`))),o(this,O).addSub("RIGHT$",(t,s)=>(X(t,s),Promise.resolve(`"${Fs(N(t),parseInt(s))}"`))),o(this,O).addSub("STRING$",(t,s)=>(X(t,s),Promise.resolve(`"${Jt(N(t),N(s))}"`))),o(this,O).addSub("TIME%",()=>Promise.resolve(Date.now())),o(this,O).addSub("HEX_ENC$",t=>(X(t),t=Number(N(t)).toString(16),Promise.resolve(t))),o(this,O).addSub("HEX_DEC$",t=>(X(t),t=parseInt(N(t),16),Promise.resolve(t)))}parse(e){return new ai(this).parse(e)}validInput(e){return/[/*\-+^()]?/.test(e)}get memory(){return o(this,O)}}O=new WeakMap;const oi=5e3;var M,te,ut;class ai{constructor(e){h(this,M);h(this,te,[]);h(this,ut,0);b(this,M,e)}get parser(){return o(this,M)}get parsedValues(){return o(this,te)}async parse(e){if(o(this,ut)>oi)throw new Error(`Can't parse ${e}`);Y(this,ut)._++;const{result:t,values:s}=A.extractStrings(String(e));let a=He.parse(t);b(this,te,o(this,te).concat(s)),a=a.map(n=>/^MOD|XOR|AND|OR$/.test(n)?` ${n} `:n);let i=a.join("");Ue(i)&&(i=Number(i));const l=i;return i=await this.action(i),i!==l&&!/^".*"$/.test(i)?this.parse(i):this.$v(i)}async action(e){if(Wt.test(e)){const[t,s]=e.match(Wt);e=e.replace(t,s)}if(Mt.test(e)){const[t,s,a,i]=e.match(Mt),l=s||i;let n=He.parse(a||"");const c=a.includes(",")&&n.join("")!==a;if(c&&(n=a.split(",")),n=await Promise.all(n.map(m=>this.parse(m))),n=c?n:[await this.parse(n.join(""))],o(this,M).memory.has(l))return e.replace(t,o(this,M).memory.get(l)[Number(n[0])-1]);if(o(this,M).memory.hasSub(l))return e.replace(t,this.cacheValue(await o(this,M).memory.executeSub(l,n)))}if(Ct.test(e)){const[t,s,a]=e.match(Ct);return e.replace(t,s+await this.parse(a))}return xt.test(e)?this.operation(e,xt):$t.test(e)?this.operation(e,$t):this.$v(e)}async operation(e,t){const s=e.match(t);let a,i,l;const n=s[0];"groups"in s&&s.groups?(a=s.groups.a,i=s.groups.b,l=s.groups.operator):(a=s[1],l=s[2],i=s[3]);let c=e,m=await this.parse(a);Ue(m)||(m=N(m));let p=await this.parse(i);switch(Ue(p)||(p=N(p)),l){case"+":c=m+p;break;case"-":c=m-p;break;case"*":c=m*p;break;case"/":c=m/p;break;case">":c=m>p;break;case"<":c=m<p;break;case"^":c=m^p;break;case"%":c=m%p;break;case"MOD":c=m%p;break;case"AND":c=m&p;break;case"OR":c=m|p;break;case"XOR":c=m^p;break;case"<<":c=m<<p;break;case">>":c=m>>p;break;case">>>":c=m>>>p;break}return Ue(c)||(c=`"${c}"`),e.replace(n,n.replace(RegExp(`[${a}]{${String(a).length}}[ ]*[${l}]{${String(l).length}}[ ]*[${i}]{${String(i).length}}`),"")+this.cacheValue(c))}$v(e){if(A.valueUnresolved(e))return e=A.resolveValue(e,o(this,te)),Promise.resolve(e);if(typeof e=="string"&&(e=e.replace(/^[ ]*([^ ].*[^ ])[ ]*$/,"$1")),ys.test(e))return Promise.resolve(Number(e));if(Vt.test(String(e))){const[,t,s]=e.match(Vt);if(o(this,M).memory.hasSub(t))return o(this,M).memory.executeSub(t,A.resolveValues(A.extractValues(s,",")));throw new Error(`can't find sub "${t}" in memory`)}else if(Ft.test(String(e))){const t=e.replace(Ft,"$1");if(o(this,M).memory.hasSub(t))return o(this,M).memory.executeSub(t);if(o(this,M).memory.has(t))return Promise.resolve(o(this,M).memory.get(t))}return Promise.resolve(e)}cacheValue(e){return o(this,te).push(e),A.resolveKey(o(this,te).length-1)}}M=new WeakMap,te=new WeakMap,ut=new WeakMap;const ni=["CLS","READ max","DIM fib%(max)","LET fib(1) = 1","LET fib(2) = 2","FOR i=3 TO max","LET fib(i) = fib(i - 2) + fib(i -1)","NEXT i","FOR i=1 TO max","PRINT fib(i)","NEXT i","DATA 10","END"],li=["CLS","DIM w%,h%,a%","LET w%=12","LET h%=4","LET a%=w%*h%",'PRINT "With the width " + w%','PRINT " and the height " + h%','PRINT " you have the area " + a%'],ci=["CLS","DIM r,a","LET r=5","READ pi","LET a=r*r*pi",'PRINT USING "With the radius ##.##"; r','PRINT USING "we have the area ##.##"; a',"DATA 3.14","END"],ui=["GuessTheNumber","CLS","READ max%","DIM number%, guess%, guesses%",'PRINT "The number is between 1-1000."',"LET number% = INT(RND * max%) + 1","LET guess% = 1","LET guesses% = 0","WHILE guess%<>number%",'PRINT "Guess the number"',"INPUT guess%","IF (guess%<>number%) THEN","IF (guess%>number%) THEN",'PRINT "Your guess was too high"',"ELSE",'PRINT "Your guess was too low"',"ENDIF","ENDIF","LET guesses% = guesses% + 1","WEND",'PRINT USING "You found the number in # tries"; guesses%',"DATA 1000","END"],mi=["DIM result",'PRINT "Calculate the factorial of"',"INPUT n","LET result = 1","FOR i = n TO 1 STEP -1","LET result = result * i","NEXT i",'PRINT USING "#! = #"; n, result',"END"],hi=["CLS","DIM stars$",'PRINT "Enter the height of the pyramid"',"INPUT height",'LET stars$ = ""',"FOR i = 1 TO height",'LET stars$ = ""',"FOR j = 1 TO (i+i-1)",'LET stars$ = stars$ + "*"',"NEXT j","PRINT SPC(height - i) + stars","NEXT i","END"],di=['PRINT "Step 1"','PRINT "Step 2"','PRINT "Step 3"',"GOTO ignore",'PRINT "Step 4"',"ignore:",'PRINT "Step 5"'],pi=["DIM A, B","LET A = 2000",'LET B = "Hello World"','PRINT USING "A: #"; A','PRINT USING "B: #"; B'],fi=["DIM A, B","LET A = 1","LET B = 2","IF A == B THEN",'PRINT "true"',"ELSE",'PRINT "false"',"END","IF (A < B) THEN",'PRINT "true"',"END"],Ei=["DIM i%","FOR i% = 1 TO 5",'PRINT USING "For Number #"; i%',"NEXT i%"],_i=["DIM i%","LET i%=0","WHILE i% < 5",'PRINT USING "While Number #"; i%',"LET i% = i% + 1","WEND"],gi=["DIM duration","LET duration = 2500",'PRINT USING "Start with Pause #ms"; duration',"PAUSE duration",'PRINT "End Pause"','PRINT USING "Start with Sleep #ms"; duration',"PAUSE duration",'PRINT "End Sleep"'],bi={Fibonacci:ni,Area:li,Circle:ci,"Your Name":["CLS",'PRINT "What is your name?"',"INPUT n$",'PRINT "What is your shoe size?"',"INPUT size",'PRINT "Hello "; n$','PRINT USING "your shoe size is ##.##"; size',"END"],GuessTheNumber:ui,Factorial:mi,Pyramid:hi,"Bubble Sort":["CLS","READ max","DIM SHARED numbers(max)","SUB CreateList(max) STATIC","FOR i=1 TO max","LET numbers(i) = INT(RND * 100)","NEXT i","END SUB","SUB PrintList(max) STATIC","FOR i=1 TO max","PRINT numbers(i)","NEXT i","END SUB","SUB SwapValues(i%, j%) STATIC","LET numbers(i%) = numbers(i%) XOR numbers(j%)","LET numbers(j%) = numbers(i%) XOR numbers(j%)","LET numbers(i%) = numbers(i%) XOR numbers(j%)","END SUB","SUB Sort(max) STATIC","FOR i%=1 TO (max - 1)","FOR j%=i% TO max","IF numbers(i%)>numbers(j%) THEN","CALL SwapValues(i%, j%)","END IF","NEXT j%","NEXT i%","END SUB","CreateList(max)","Sort(max)","PrintList(max)","DATA 10","END"],Goto:di,Vars:pi,If:fi,For:Ei,"For Step":["CLS","FOR i% = 0 TO 6 STEP 2",'PRINT "For Step Number #"; i%',"NEXT i%"],While:_i,Pause:gi},Ii=({module:r,core:e})=>{const{fileSystem:t}=e.modules.files;return[{name:["basic"],args:[new S({index:0,name:"path",description:"Path to basic script"})],async action({path:s},a){if(!s)throw Ut.get("bad_args");const i=await t.get(s);if("type"in i.data&&i.data.type==="basic"&&Array.isArray(i.data.content))return r.parseBasic(i.data.content,null,{logger:a.logger});throw new TypeError(`Can't read file ${s}`)}},{name:["basicExamples"],args:[new S({index:0,name:"name",description:"Name from example"})],action({name:s}){return r.parseBasic(bi[String(s)])}}]};var We,xe,$e,Rt;class ws extends kt{constructor({core:t}){super({commands:(...s)=>[...Ii(...s)],core:t});h(this,We);h(this,xe,new Xt);h(this,$e,new ii(o(this,xe)));h(this,Rt,new A(o(this,$e)));b(this,We,new ri(o(this,xe),t.executeCommand.bind(t)))}get memory(){return o(this,xe)}parse(...t){return o(this,We).parse(...t)}parseBasic(...t){return o(this,We).parse(...t)}parseCommand(...t){return o(this,Rt).parse(...t)}parseMath(...t){return o(this,$e).parse(...t)}isMathValue(...t){return o(this,$e).validInput(...t)}}We=new WeakMap,xe=new WeakMap,$e=new WeakMap,Rt=new WeakMap,E(ws,"NAME","Parser");class Si{constructor(e){E(this,"defaultItems",new vt);E(this,"activeItems");E(this,"core",null);this.core=e,this.activeItems=this.defaultItems}addDefaultItems(e){this.defaultItems.add(e)}getActiveItems(){return this.activeItems}setActiveItems(e){return this.activeItems=e||this.defaultItems}}const yi={components:{AtomMarkdown:sr},setup(){const r=Ws().versions;return{...Yt(),versions:r}},data(){return{content:`# Web-Workbench 1.3
<nobr>Created by Thorn-Welf Walli</nobr><br>Email: lammpee@gmail.com<br>Homepage: [lammpee.de](https://lammpee.de)<br><br>Version: <strong>${this.core.version}</strong><br>Nuxt: <strong>${this.versions.nuxt}</strong><br>Vue: <strong>${this.versions.vue}</strong>`}}},wi={class:"wb-module-core-info"};function Ri(r,e,t,s,a,i){const l=C("atom-markdown");return R(),V("div",wi,[x(l,{content:a.content},null,8,["content"])])}const Ti=Oe(yi,[["render",Ri],["__scopeId","data-v-81aaaac6"]]),Oi=({core:r})=>{const{windows:e}=r.modules;return[{order:0,title:"Web-Workbench",items:[{title:"Settings",action(){return r.executeCommand("openSettings")}},{type:q.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action(){e.addWindow({title:"Info",component:Ti,componentData:{},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}})}},{type:q.SEPARATOR},{title:"Imprint",action(){return r.executeCommand('execute "Imprint.md"')}},{title:"Disclaimer",action(){return r.executeCommand('execute "Disclaimer.md"')}}]}]},Ni={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10",viewBox:"0.5 50.5 6 10"};function Ai(r,e){return R(),V("svg",Ni,e[0]||(e[0]=[g("path",{fill:"#020203",d:"M.5 50.5h6v2h-4v2h2v2h-2v4h-2z"},null,-1)]))}const Di={render:Ai},Pi={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"};function vi(r,e){return R(),V("svg",Pi,e[0]||(e[0]=[g("path",{d:"M0 10h6V8H2V6h2V4H2V2h4V0H0z"},null,-1)]))}const Li={render:vi},Ci={components:{SvgStorageBarFull:Di,SvgStorageBarEmpty:Li},props:{visible:{type:Boolean,default:!0},value:{type:Number,default:.8}},computed:{style(){return{"--bar-height":Math.min(this.value,1)}}}},Wi={class:"icon full"},xi={class:"icon empty"};function $i(r,e,t,s,a,i){const l=C("svg-storage-bar-full"),n=C("svg-storage-bar-empty");return t.visible?(R(),V("div",{key:0,class:"wb-env-atom-storage-bar",style:Xe(i.style)},[g("div",null,[g("div",Wi,[x(l)]),e[0]||(e[0]=g("span",{class:"size"},[g("span",{class:"helper"})],-1)),g("div",xi,[x(n)])])],4)):Q("",!0)}const Mi=Oe(Ci,[["render",$i],["__scopeId","data-v-d81cda0d"]]),z={NAME:0,TYPE:1,CREATED_DATE:2,EDITED_DATE:3},_e={ASCENDING:0,DESCENDING:1},T={SHOW_INVISIBLE_SYMBOLS:"symbolWrapper_showInvisibleItems",ORDER_TYPE:"symbolWrapper_iconsOrderType",ORDER_DIRECTION:"symbolWrapper_iconsOrderDirection"},Vi={[T.SHOW_INVISIBLE_SYMBOLS]:!1,[T.ORDER_TYPE]:z.NAME,[T.ORDER_DIRECTION]:_e.ASCENDING};class ls{constructor({fsItem:e=null,command:t,model:s,layout:a}){E(this,"type",null);E(this,"id",bs());E(this,"layout",Ve({position:_(0,0),size:_(0,0)}));E(this,"ignoreRearrange",!1);E(this,"model",Ve({title:"Item Title",symbol:u.DEFAULT,used:!1,visible:!0}));if(this.command=t,this.model=Object.assign(this.model,s),this.layout=Object.assign(this.layout,a),this.fsItem=e,this.fsItem){const i=this.fsItem;this.type=Fi(i),this.setProperties(i),this.fsItem.events.subscribe(({name:l})=>{l!=="addItem"&&l!=="removeItem"&&this.setProperties(e)})}}setProperties(e){if(this.model.title=e.name,this.layout.position=_(e.meta.get(f.POSITION)||_(0,0)),this.model.visible=!!e.meta.get(f.VISIBLE),this.model.symbol=e.meta.get(f.SYMBOL),this.model.url=e.meta.get(f.WEB_URL),this.model.ignoreRearrange=e.meta.get(f.IGNORE_SYMBOL_REARRANGE),e instanceof Gt){const t=[`openDirectory "${e.getPath()}"`];e.meta.get(f.WINDOW_SYMBOL_REARRANGE)&&t.push("-sort-symbols");const s=_(e.meta.get(f.WINDOW_POSITION)||_(0,0));s.length>0&&t.push(`--window-position="${_(s).toArray().join(",")}"`);const a=_(e.meta.get(f.WINDOW_SIZE)||_(0,0));a.length>0&&t.push(`--window-size="${_(a).toArray().join(",")}"`),e.meta.has(f.WINDOW_SCALE)&&t.push(`--window-scale=${e.meta.get(f.WINDOW_SCALE)}`),e.meta.has(f.WINDOW_SCROLL_X)&&t.push(`--window-scroll-x=${e.meta.get(f.WINDOW_SCROLL_X)}`),e.meta.has(f.WINDOW_SCROLL_Y)&&t.push(`--window-scroll-y=${e.meta.get(f.WINDOW_SCROLL_Y)}`),e.meta.has(f.WINDOW_SIDEBAR)&&t.push(`--window-sidebar=${e.meta.get(f.WINDOW_SIDEBAR)}`),e.meta.has(f.WINDOW_FULL_SIZE)&&t.push(`--window-full-size=${e.meta.get(f.WINDOW_FULL_SIZE)}`),this.command=t.join(" ")}else this.model.url||(this.command=`execute "${e.getPath()}"`)}}function cs(r){return r.map(e=>e instanceof ls?e:new ls(e))}function Fi(r){return r instanceof Gt?"container":r.meta.get(f.WEB_URL)?"link":"default"}var ce,Tt,ue,mt;class Te{constructor(e,t=[],s=!1){h(this,ce,new bt);h(this,Tt,bs());h(this,ue);E(this,"items",At([]));E(this,"selectedItems",At([]));h(this,mt,!1);E(this,"layout",Ve({size:_(0,0),position:_(0,0)}));E(this,"size",_(0,0));E(this,"parentSize",_(0,0));b(this,mt,s||!1),b(this,ue,e),this.items.value=cs(t||[])}get(e){return this.items.value.find(t=>t.id===e)}has(e){return!!this.items.value.find(t=>t.id===e)}add(...e){const t=cs(e);this.items.value.push(...t.map(he)),o(this,ce).next(new de("add",{wrapper:this,items:t}))}remove(e){typeof e!="object"&&(e=this.get(e)),this.unselectItem(e.id),this.items.value.splice(this.items.value.indexOf(e),1),o(this,ce).next(new de("remove",{wrapper:this,item:e}))}setup(){return Promise.resolve()}moveItem(e,t){const s=this.get(e);return t.add(s),this.remove(s),Promise.resolve()}moveItemToItem(){return Promise.resolve()}savePosition(e,t){return Promise.resolve()}isSelectedItem(e){return this.selectedItems.value.includes(e)}selectItem(e){this.isSelectedItem(e)||(this.selectedItems.value.push(e),o(this,ce).next(new de("selectItem",{wrapper:this,id:e})))}unselectItem(e){this.isSelectedItem(e)&&(this.selectedItems.value=this.selectedItems.value.filter(t=>t!==e),o(this,ce).next(new de("unselectItem",{wrapper:this,id:e})))}clearSelectedItems(){[].concat(this.selectedItems.value).forEach(e=>this.unselectItem(e))}get root(){return o(this,mt)}get events(){return o(this,ce)}get id(){return o(this,Tt)}get core(){return o(this,ue)}rearrangeIcons(e){e=Object.assign({orderType:o(this,ue).config.get(T.ORDER_TYPE),orderDirection:o(this,ue).config.get(T.ORDER_DIRECTION),onlyVisible:!o(this,ue).config.get(T.SHOW_INVISIBLE_SYMBOLS),root:!1,margin:10},e);let t=this.items.value;switch(e.root&&(e.orderType=z.NAME,e.orderDirection=_e.DESCENDING),e.onlyVisible&&(t=t.filter(n=>n.model.visible)),t=t.filter(n=>!n.model.ignoreRearrange),e.orderType){case z.TYPE:t=t.sort((n,c)=>n.type.localeCompare(c.type));break;case z.CREATED_DATE:t=t.sort((n,c)=>n.createDate===c.createDate?0:n.createDate>c.createDate?1:-1);break;case z.EDITED_DATE:t=t.sort((n,c)=>n.editedDate===c.editedDate?0:n.editedDate>c.editedDate?1:-1);break;default:t=t.sort(n=>n.model.title.localeCompare(n.model.title))}switch(e.orderDirection){case _e.ASCENDING:t.reverse();break}const s=e.margin;let a,i=s;const l=gs(0,0);return e.root?a=this.size.x:a=s,t.forEach(n=>{e.root?(n.layout.position=_(a-n.layout.size.x,i),n.layout.size.x>l.x&&(l.x=n.layout.size.x),i+n.layout.size.y<this.parentSize.y?i+=n.layout.size.y+s:(a-=l.x+s,i=s)):(n.layout.size.y>l.y&&(l.y=n.layout.size.y),n.layout.position=_(a,i),a+n.layout.size.x<this.parentSize.x||(a=s,i+=l.y+s,n.layout.position=_(a,i)),a+=n.layout.size.x+s)}),Promise.all(t.map(({id:n,layout:c})=>this.savePosition(n,c.position)))}}ce=new WeakMap,Tt=new WeakMap,ue=new WeakMap,mt=new WeakMap;class ze extends Te{constructor(){super(...arguments);E(this,"fsItem");E(this,"usedMemory",0)}async setup(t){this.fsItem=t;const s=Array.from((await t.getItems()).values());await Promise.all(s.map(async a=>this.add(await ze.fsItemToSymbol(a)))),t.events.subscribe(this.onEventItem.bind(this))}async moveItemToItem(t,s){if(t.locked)throw new Error("Items are locked!");if(s.locked)throw new Error("Destination is locked!");t.meta.set(f.POSITION,_(0,0)),await this.core.modules.files.fs.saveItem(t),await this.core.modules.files.fs.move(t,s,{override:!0})}async moveItem(t,s){const a=this.get(t);if(a.fsItem instanceof Bs||a.fsItem instanceof ks)try{return await this.moveItemToItem(a.fsItem,s.fsItem),!0}catch(i){return console.warn(i),!1}return Promise.resolve(!1)}savePosition(t,s){const a=this.get(t);a.fsItem.meta.set(f.POSITION,s),this.core.modules.files.fs.saveItem(a.fsItem)}hasFsItem(t){return this.items.value.find(s=>s.fsItem.id===t.id)}async onEventItem({name:t,value:s}){let a;switch(t){case"addItem":a=await ze.fsItemToSymbol(s),this.hasFsItem(s)||this.add(a);break;case"removeItem":this.remove(this.items.value.find(i=>i.fsItem===s));break}this.usedMemory=this.fsItem.size/this.fsItem.maxSize}static getItemsFromItem(t){return Promise.all(Array.from(t.items.values()).map(ze.fsItemToSymbol))}static async fsItemToSymbol(t){const s=await t.getPath(),a={fsItem:t,model:{title:t.name}};return typeof t.action=="function"&&(a.command=`executeFile "${s}"`),t.meta.has(f.WEB_URL)&&(a.url=t.meta.get(f.WEB_URL)),a}}const Bi={xmlns:"http://www.w3.org/2000/svg",width:"31",height:"30",class:"wb_symbol_disk_1"};function Rs(r,e){return R(),V("svg",Bi,e[0]||(e[0]=[g("path",{d:"M0 0h25v2h2v2h2v2h2v24H0z",class:"svg-secondary"},null,-1),g("path",{fill:"#FFF",d:"M2 2v26h27V6h-2V4h-2V2",class:"svg-primary"},null,-1),g("path",{fill:"#FA5",d:"M7 2h13v10H7z",class:"svg-tertiary"},null,-1),g("path",{d:"M11 2h5v8h-5z",class:"svg-secondary"},null,-1)]))}const Ts={render:Rs},ki=Object.freeze(Object.defineProperty({__proto__:null,default:Ts,render:Rs},Symbol.toStringTag,{value:"Module"})),Gi={props:{parentLayout:{type:Object,default(){return null}},clampGlobal:{type:Boolean,default:!1},container:{type:Boolean,default(){return!1}},command:{type:String,default:null},id:{type:String,default:null},model:{type:Object,default(){return{title:"Item Title",url:null,symbol:Ts,used:!1,visible:!0}}},layout:{type:Object,default(){return{position:_(0,0),size:_(50,50)}}},scrollOffset:{type:Object,default(){return _(0,0)}},wrapper:{type:Object,default(){return he(new Te)}}},emits:["click"],setup(r){return{wrapperItems:r.wrapper.items,wrapperSelectedItems:r.wrapper.selectedItems}},data(){return{globalPosition:null,moving:!1,positions:{start:null,move:null},subscription:new ar,parentEl:null,screenModul:Z.modules.screen}},computed:{linkTag(){return this.model.url?"a":"span"},linkBind(){return this.model.url?{href:this.model.url,target:this.model.url?"_blank":null,title:this.model.title}:{}},contentLayout(){return this.screenModul.contentLayout},selected(){return this.wrapperSelectedItems.includes(this.id)},styleClasses(){return{moving:this.moving,selected:this.selected,"symbol-used":this.model.used}},symbolsModule(){return Z.modules.symbols}},watch:{model:{deep:!0,handler(){this.onRefresh()}}},mounted(){this.parentEl=this.$el.parentElement,this.onRefresh()},unmounted(){this.subscription.unsubscribe(),this.wrapper.unselectItem(this.id)},methods:{onRefresh(){this.layout.size=_(200,200),window.requestAnimationFrame(()=>{this.layout.size=_(this.$el.children[0].offsetWidth,this.$el.children[0].offsetHeight)})},getRootBounds(){const{width:r,height:e,left:t,top:s}=this.parentEl.getBoundingClientRect();return{position:_(t,s),size:_(r,e)}},onPointerDown(r){nr(r);const e=this.id;if(!(this.model.url&&this.selected)&&(r.preventDefault(),!this.model.used)){if(this.command&&this.selected){const t={showCommand:!1,show:!0};return this.wrapper.unselectItem(e),this.model.used=!0,Z.executeCommand(this.command,t).then(()=>this.model.used=!1)}Nt.shiftActive?this.wrapper.isSelectedItem(e)?this.wrapper.unselectItem(e):this.wrapper.selectItem(e):(this.symbolsModule.getSelectedItems().length>0&&this.symbolsModule.clearSelectedItems(),this.wrapper.selectItem(e)),this.startMove(_(r)),this.$emit("click",this)}},onPointerUp(){const r=this.symbolsModule.getSelectedItems().filter(t=>t.id!==this.id),e=this.wrapper.get(this.id);r.length>0&&e.fsItem instanceof Gt&&r.forEach(t=>this.wrapper.moveItemToItem(t.fsItem,e.fsItem))},startMove(r){const e=this.getRootBounds();this.positions.lastPosition=_(this.layout.position),this.positions.scrollOffset=_(this.scrollOffset),this.positions.start=r,this.positions.offset=_(()=>this.positions.start-this.layout.position),this.setPosition(r,e,!0),this.moving=!0;let t=r;const s=Nt.pointerMove.subscribe(a=>{t=_(a),this.setPosition(_(a),e,!0)});this.subscription.add(Nt.pointerUp.pipe(lr()).subscribe(()=>{if(s.unsubscribe(),this.symbolsModule.getSecondaryWrapper().id!==this.wrapper.id)return this.wrapper.moveItem(this.id,this.symbolsModule.getSecondaryWrapper()).then(a=>(a||(this.layout.position=_(this.positions.lastPosition)),this.globalPosition=null,this.moving=!1,a));if(this.moving=!1,this.setPosition(t,e),!this.layout.position.equals(oe(()=>this.positions.start-this.positions.offset)))return this.wrapper.savePosition(this.id,this.layout.position)}))},setPosition(r,e,t=!1){const s={min:_(0,0),max:oe(()=>e.size-this.layout.size)};this.positions.move=oe(()=>r-this.positions.start);let a=oe(()=>Math.round(this.positions.start+this.positions.move-this.positions.offset));t?(s.min=e.position,s.max=oe(()=>s.max+this.contentLayout.position),a=oe(()=>Math.round(a+s.min)),this.clampGlobal?this.globalPosition=_(()=>Math.max(Math.min(a,this.contentLayout.position+this.wrapper.size-this.layout.size),s.min)):this.globalPosition=a):(this.wrapper.root?this.layout.position=oe(()=>Math.max(Math.min(a,this.wrapper.size-this.layout.size),0)):this.layout.position=oe(()=>Math.max(a,0)),this.globalPosition=null)}}},Ui=["data-id"],zi=["innerHTML"];function Yi(r,e,t,s,a,i){return R(),V("figure",{"data-id":t.id,class:ds(["wb-env-atom-symbol-wrapper-item",i.styleClasses]),style:Xe([t.layout.size.toCSSVars("item-size"),(a.globalPosition||t.layout.position).toCSSVars("item-position")]),"touch-action":"none",onPointerdown:e[0]||(e[0]=(...l)=>i.onPointerDown&&i.onPointerDown(...l)),onPointerup:e[1]||(e[1]=(...l)=>i.onPointerUp&&i.onPointerUp(...l))},[(R(),K(Qt(i.linkTag),gt(xs(i.linkBind)),{default:H(()=>[g("i",null,[(R(),K(Qt(i.symbolsModule.symbols.get(t.model.symbol))))]),g("figcaption",{innerHTML:t.model.title},null,8,zi)]),_:1},16))],46,Ui)}const Xi=Oe(Gi,[["render",Yi],["__scopeId","data-v-1d03926a"]]),ji={components:{WbEnvAtomSymbolWrapperItem:Xi},props:{parentLayout:{type:Object,default(){return{size:_(window.innerWidth,window.innerHeight)}}},parentScrollable:{type:Boolean,default:!0},parentFocused:{type:Boolean,default:!1},clampSymbols:{type:Boolean,default:!1},wrapper:{type:Te,default(){return he(new Te(Z,[{layout:{position:_(100,0)},model:{title:"Item 1",symbol:u.DIRECTORY}},{layout:{position:_(0,0)},model:{title:"Item 2",symbol:u.DEFAULT}},{layout:{position:_(0,0)},model:{title:"Item 3",symbol:u.DEFAULT}}]))}}},emits:["ready","refresh"],setup(r){return{wrapperItems:r.wrapper.items,wrapperSelectedItems:r.wrapper.selectedItems}},data(){const r=Z;return{core:he(r),webWorkbenchConfig:he(r.config.observable),symbolsModule:he(r.modules.symbols),selectedItems:[],layout:{size:_(0,0),position:_(0,0)}}},computed:{styleClasses(){return{"parent-scrollable":this.parentScrollable,active:(this.core.modules.symbols.primaryWrapper||{}).id===this.wrapper.id}},scrollOffset(){return this.parentLayout&&"scrollOffset"in this.parentLayout?this.parentLayout.scrollOffset:_(0,0)},style(){const r=[this.scrollOffset.toCSSVars("symbol-wrapper-scroll-offset")];return this.parentScrollable?r.push(this.size.toCSSVars("symbol-wrapper-size")):r.push(this.layout.size.toCSSVars("symbol-wrapper-size")),r},size(){return this.visibleItems.map(r=>({item:r,index:this.wrapperSelectedItems.indexOf(r.id)+1})).sort((r,e)=>r.index>e.index?1:r.index<e.index?-1:0).reduce((r,{item:e})=>{const t=e.layout.position.x+e.layout.size.x,s=e.layout.position.y+e.layout.size.y;return r.x=r.x<t?t:r.x,r.y=r.y<s?s:r.y,r},gs(0,0))},showInvisibleItems(){return this.webWorkbenchConfig[T.SHOW_INVISIBLE_SYMBOLS]},visibleItems(){return this.wrapperItems.filter(this.isItemVisible)},parentLayoutSize(){return(this.parentLayout||{}).size}},watch:{parentFocused(r){this.setFocused(r)},wrapper(){this.onResize()},parentLayoutSize(){this.onResize()},size(){this.$nextTick(()=>{this.$emit("refresh",{scroll:!0})})}},mounted(){this.$nextTick(()=>{this.onResize(),this.setFocused(this.parentFocused),this.$emit("ready")})},unmounted(){this.core.modules.symbols.getPrimaryWrapper()&&this.core.modules.symbols.getPrimaryWrapper().id===this.wrapper.id&&this.core.modules.symbols.setPrimaryWrapper(null),this.core.modules.symbols.getSecondaryWrapper()&&this.core.modules.symbols.getSecondaryWrapper().id===this.wrapper.id&&this.core.modules.symbols.setSecondaryWrapper(null)},methods:{setFocused(r){r?this.symbolsModule.setPrimaryWrapper(this.wrapper):this.symbolsModule.getPrimaryWrapper()&&this.symbolsModule.getPrimaryWrapper().id===this.wrapper.id&&this.symbolsModule.setPrimaryWrapper(null)},onResize(){const{left:r,top:e}=this.$el.getBoundingClientRect();this.wrapper.layout=this.layout={position:_(r,e),size:this.parentLayout.size},this.wrapper.size=_(this.$el.offsetWidth,this.$el.offsetHeight),this.wrapper.parentSize=this.parentLayout.size},isItemVisible(r){return this.showInvisibleItems||!this.showInvisibleItems&&r.model.visible},onPointerMove(){this.core.modules.symbols.setSecondaryWrapper(this.wrapper)},onPointerDown(r){(r.target===this.$refs.helper||r.target===this.$refs.items)&&this.wrapper.clearSelectedItems()}}},Hi={ref:"helper",class:"helper"},Ki={ref:"items",class:"items"};function Qi(r,e,t,s,a,i){const l=C("wb-env-atom-symbol-wrapper-item");return R(),V("div",{class:ds(["wb-env-symbol-wrapper",i.styleClasses]),style:Xe(i.style),onPointerdown:e[0]||(e[0]=(...n)=>i.onPointerDown&&i.onPointerDown(...n)),onPointermove:e[1]||(e[1]=(...n)=>i.onPointerMove&&i.onPointerMove(...n))},[g("div",Hi,null,512),g("div",Ki,[(R(!0),V(ms,null,hs(i.visibleItems,(n,c)=>(R(),K(l,Ee({key:c,"clamp-global":t.clampSymbols,ref_for:!0},n,{wrapper:t.wrapper,"parent-layout":a.layout,"scroll-offset":i.scrollOffset}),null,16,["clamp-global","wrapper","parent-layout","scroll-offset"]))),128))],512)],38)}const Zi=Oe(ji,[["render",Qi],["__scopeId","data-v-977393a8"]]),qi={components:{WbButton:zt,WbFormFieldTextbox:Zs,WbButtonWrapper:Bt},props:{message:{type:String,default(){return"Dialog Message"}},confirm:{type:Boolean,default:!1},prompt:{type:Boolean,default:!1},promptType:{type:String,default:"text"},promptStep:{type:Number,default:void 0},promptValue:{type:String,default:""},password:{type:Boolean,default:!1},apply:{type:Function,default(){return null}},abort:{type:Function,default(){return null}},applyLabel:{type:String,default(){return"Continue"}},abortLabel:{type:String,default(){return"Cancel"}},yesLabel:{type:String,default(){return"Yes"}},noLabel:{type:String,default(){return"No"}}},emits:["apply","abort"],data(){return{value:this.promptValue}},computed:{isNumber(){return this.promptType==="number"},type(){return this.password?"password":this.promptType},formattedMessage(){return this.message.replace(/\\n|\n/g,"<br>")}},methods:{onClickApply(){const r=this.value||!0;typeof this.apply=="function"?this.apply(r):this.$emit("apply",r)},onClickAbort(){typeof this.abort=="function"?this.abort():this.$emit("abort")}}},Ji={class:"wb-env-molecule-dialog-content"},eo=["innerHTML"],to={key:1,class:"input"};function so(r,e,t,s,a,i){const l=C("wb-form-field-textbox"),n=C("wb-button"),c=C("wb-button-wrapper");return R(),V("div",Ji,[g("div",null,[t.message?(R(),V("p",{key:0,innerHTML:i.formattedMessage},null,8,eo)):Q("",!0),t.prompt?(R(),V("div",to,[x(l,{ref:"dialogInput",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=m=>a.value=m),placeholder:null,step:t.promptStep,type:i.type,label:null},null,8,["modelValue","step","type"])])):Q("",!0),x(c,{align:t.abortLabel?"outer":"center",class:"buttons"},{default:H(()=>[t.applyLabel||t.confirm&&t.yesLabel?(R(),K(n,{key:0,"style-type":"dialog",label:t.confirm?t.yesLabel:t.applyLabel,onClick:i.onClickApply},null,8,["label","onClick"])):Q("",!0),t.abortLabel||t.confirm&&t.noLabel?(R(),K(n,{key:1,"style-type":"dialog",label:t.confirm?t.noLabel:t.abortLabel,onClick:i.onClickAbort},null,8,["label","onClick"])):Q("",!0)]),_:1},8,["align"])])])}const ro=Oe(qi,[["render",so],["__scopeId","data-v-20c899b1"]]),io=({module:r,core:e})=>{const{files:t,windows:s,symbols:a}=e.modules,i=t.fs;return[{name:["openDirectory","openDir"],description:"Opens the specified directory.",args:[new S({index:0,name:"path",description:"Path to the directory."}),new S({name:"sortSymbols",description:"Sort Symbols",flag:!0}),new S({name:"windowSize",description:"Window Size"}),new S({name:"windowPosition",description:"Window Position"}),new S({name:"windowScale",description:"Window Scale"}),new S({name:"windowScrollX",description:"Window Scroll-X"}),new S({name:"windowScrollY",description:"Window Scroll-Y"}),new S({name:"windowSidebar",description:"Window Sidebar"}),new S({name:"windowFullSize",description:"Window Full-Size"})],async action({path:l,sortSymbols:n,windowSize:c,windowPosition:m,windowScale:p,windowScrollX:w,windowScrollY:I,windowSidebar:k,windowFullSize:Fe}){if(!l)throw Ut.get("bad_args");const re=await i.get(l),dt=await a.addFileSystemWrapper(re),ie=a.symbolWrappers.get(dt),pt=Ve({value:re.size/re.maxSize}),ft=s.addWindow({title:re.name,layout:{size:_(...(c||"400,200").split(",").map(ke=>Number(ke))),position:_(...(m||"0,0").split(",").map(ke=>Number(ke)))},symbolWrapper:ie,sidebarComponent:Mi,sidebarComponentData:pt,component:Zi,componentData:{wrapper:ie,parentScrollable:w||I},options:{sidebar:k!==void 0?k:!0,scale:p!==void 0?p:!0,scrollX:w!==void 0?w:!0,scrollY:I!==void 0?I:!0,center:!m}},{active:!0,full:Fe}),Be=()=>{pt.value=re.size/re.maxSize},pe=[ie.events.subscribe(Be)];return new Promise(ke=>{ft.events.subscribe(({name:jt})=>{jt==="ready"&&n?window.requestAnimationFrame(()=>{ie.rearrangeIcons()}):jt==="close"?(pe.forEach(As=>As.unsubscribe()),a.removeWrapper(dt),ke()):Be()})})}},{name:["openDialog"],description:"Open a Dialog.",args:[new S({index:0,name:["message"],description:"Message from Dialog."}),new S({index:1,name:["title"],description:"Title from Dialog."}),new S({name:["apply"],description:"Title from apply button."}),new S({name:["abort"],description:"Title from abort button."}),new S({name:["confirm"],flag:!0,description:"Defines the confirm dialog"}),new S({name:["prompt"],flag:!0,description:"Defines the prompt dialog"}),new S({name:["promptType"],description:"Type from prompt dialog (e.g. text, number, email). (Default: text)"}),new S({name:["promptStep"],description:"Step from prompt dialog (e.g. 1, 0.1, 0.01). (Default: 1)"}),new S({name:["promptValue"],description:"Default value from prompt dialog."}),new S({name:["secret"],flag:!1,description:"Input is illegible."})],action:l=>{const{title:n=null,message:c=null,apply:m=null,abort:p=null,confirm:w=!1,prompt:I=!1,promptType:k="text",promptStep:Fe=void 0,promptValue:re=null,secret:dt=!1}=l;let ie;const pt=pe=>{ie(pe)},ft=()=>{ie(!1)},Be=r.addWindow(new Pt({title:n,component:ro,componentData:{title:n,message:c,secret:dt,confirm:w,prompt:I,promptType:k,promptStep:Number(Fe),promptValue:re,applyLabel:m||"Continue",abortLabel:p,apply:pt,abort:ft},options:{scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1,close:!1}}));return Be.awaitClose().then(()=>ft()),new Promise(pe=>{ie=pe}).then(pe=>(Be.close(),pe))}}]};var ye;class Os extends kt{constructor(t){const{core:s}=Object.assign({core:null},t);super({config:rr,commands:io,core:s});h(this,ye,new Map);E(this,"contentWrapper");E(this,"globalWrapper");E(this,"contextMenu",Ve(new Si(this)));this.contentWrapper=this.getWrapper(this.addWrapper(new es(s))),this.globalWrapper=this.getWrapper(this.addWrapper(new es(s))),Sr({contentWrapper:this.contentWrapper.events,globalWrapper:this.globalWrapper.events}).subscribe(a=>{console.log("event",a)})}addWindow(t,s){return t instanceof Pt||(t=new Pt(t)),t.componentData&&(t.componentData.core=he(this.core)),s=Object.assign({global:!1},s),s.global?t=this.globalWrapper.add(t,s):t=this.contentWrapper.add(t,s),t}getWrapper(t){return o(this,ye).get(t)}getFocusedWrapper(){return Array.from(o(this,ye).values()).map(({models:t})=>t.value).flat().find(t=>t.options.focused)}addWrapper(t){return o(this,ye).set(t.id,t),t.id}removeWrapper(t){typeof t!="string"&&(t=t.id),o(this,ye).delete(t)}isContextMenu(t){return t.id===this.getActiveContextMenu().id}setup(){this.contextMenu.addDefaultItems(new vt(Oi,{core:this.core})),this.contextMenu.addDefaultItems(new vt(ir,{core:this.core}))}clear(){this.contentWrapper.clear(),this.globalWrapper.clear()}getActiveContextMenu(){return this.contextMenu.getActiveItems()}setActiveContextMenu(t){return this.contextMenu.setActiveItems(t)}}ye=new WeakMap,E(Os,"NAME","Windows");const oo={[u.DEFAULT]:()=>d(()=>import("./Dxhlkfk9.js"),__vite__mapDeps([21,1]),import.meta.url).then(r=>r.default),[u.DIRECTORY]:()=>d(()=>import("./CEPbKCQa.js"),__vite__mapDeps([22,1]),import.meta.url).then(r=>r.default),[u.DIRECTORY_PREFS]:()=>d(()=>import("./DZmL_a1M.js"),__vite__mapDeps([23,1]),import.meta.url).then(r=>r.default),[u.CLOUD_DISK]:()=>d(()=>import("./C8MKeZwm.js"),__vite__mapDeps([24,1]),import.meta.url).then(r=>r.default),[u.HARD_DISK]:()=>d(()=>import("./BSgbonF_.js"),__vite__mapDeps([25,1]),import.meta.url).then(r=>r.default),[u.RAM_DISK]:()=>d(()=>import("./C3Y4mkMC.js"),__vite__mapDeps([26,1]),import.meta.url).then(r=>r.default),[u.TMP_DISK]:()=>d(()=>import("./6wSmGhdE.js"),__vite__mapDeps([27,1]),import.meta.url).then(r=>r.default),[u.DISK_1]:()=>d(()=>Promise.resolve().then(()=>ki),void 0,import.meta.url).then(r=>r.default),[u.DISK_2]:()=>d(()=>import("./BXu4w9uO.js"),__vite__mapDeps([28,1]),import.meta.url).then(r=>r.default),[u.DISK_WORKBENCH13]:()=>d(()=>import("./DHLvBD8g.js"),__vite__mapDeps([29,1]),import.meta.url).then(r=>r.default),[u.DISK_MARKDOWN]:()=>d(()=>import("./DxEktbMZ.js"),__vite__mapDeps([30,1]),import.meta.url).then(r=>r.default),[u.DISK_BASIC]:()=>d(()=>import("./DHNzwiPc.js"),__vite__mapDeps([31,1]),import.meta.url).then(r=>r.default),[u.WORK]:()=>d(()=>import("./DXcjftEy.js"),__vite__mapDeps([32,1]),import.meta.url).then(r=>r.default),[u.CONSOLE]:()=>d(()=>import("./D6uiLRgW.js"),__vite__mapDeps([33,1]),import.meta.url).then(r=>r.default),[u.SETTINGS]:()=>d(()=>import("./CiDUhLz1.js"),__vite__mapDeps([34,1]),import.meta.url).then(r=>r.default),[u.TRASHCAN]:()=>d(()=>import("./_k5oUkSF.js"),__vite__mapDeps([35,1]),import.meta.url).then(r=>r.default),[u.COMPUTER_1]:()=>d(()=>import("./KULKcsMy.js"),__vite__mapDeps([36,1]),import.meta.url).then(r=>r.default),[u.TELEPHONE]:()=>d(()=>import("./BddTpbO5.js"),__vite__mapDeps([37,1]),import.meta.url).then(r=>r.default),[u.CURSOR]:()=>d(()=>import("./CENTmI0i.js"),__vite__mapDeps([38,1]),import.meta.url).then(r=>r.default),[u.PREFERENCE]:()=>d(()=>import("./w1lO_lSI.js"),__vite__mapDeps([39,1]),import.meta.url).then(r=>r.default),[u.WEB_BASIC]:()=>d(()=>import("./BJ4O9CAJ.js"),__vite__mapDeps([40,1]),import.meta.url).then(r=>r.default),[u.WEB_PAINTING]:()=>d(()=>import("./BNDouPl-.js"),__vite__mapDeps([41,1]),import.meta.url).then(r=>r.default),[u.COLORS]:()=>d(()=>import("./DiAOb0jz.js"),__vite__mapDeps([42,1]),import.meta.url).then(r=>r.default),[u.PRINT_1]:()=>d(()=>import("./CgItMNoW.js"),__vite__mapDeps([43,1]),import.meta.url).then(r=>r.default),[u.PRINT_2]:()=>d(()=>import("./6SZz3J4X.js"),__vite__mapDeps([44,1]),import.meta.url).then(r=>r.default),[u.NOTEPAD]:()=>d(()=>import("./CH0sfoEg.js"),__vite__mapDeps([45,1]),import.meta.url).then(r=>r.default),[u.BASIC]:()=>d(()=>import("./DEbNe62a.js"),__vite__mapDeps([46,1]),import.meta.url).then(r=>r.default),[u.IMAGE]:()=>d(()=>import("./CjYf1-u0.js"),__vite__mapDeps([47,1]),import.meta.url).then(r=>r.default),[u.NOTE]:()=>d(()=>import("./D_vLbxvn.js"),__vite__mapDeps([48,1]),import.meta.url).then(r=>r.default),[u.NOTE_BLANK]:()=>d(()=>import("./BfKa2fnz.js"),__vite__mapDeps([49,1]),import.meta.url).then(r=>r.default),[u.LARGE_NOTE]:()=>d(()=>import("./BSQ-_JFY.js"),__vite__mapDeps([50,1]),import.meta.url).then(r=>r.default),[u.LARGE_NOTE_RICH]:()=>d(()=>import("./l6xUAQyC.js"),__vite__mapDeps([51,1]),import.meta.url).then(r=>r.default),[u.FULLSCREEN]:()=>d(()=>import("./PKC0jDWx.js"),__vite__mapDeps([52,1]),import.meta.url).then(r=>r.default),[u.CALCULATOR]:()=>d(()=>import("./jKJytI2Y.js"),__vite__mapDeps([53,1]),import.meta.url).then(r=>r.default),[u.CLOCK]:()=>d(()=>import("./CNL_PwkH.js"),__vite__mapDeps([54,1]),import.meta.url).then(r=>r.default),[u.KEYBOARD_QUESTION]:()=>d(()=>import("./C0nQwGet.js"),__vite__mapDeps([55,1]),import.meta.url).then(r=>r.default),[u.LARGE_NOTEPAD]:()=>d(()=>import("./C_KVQUMs.js"),__vite__mapDeps([56,1]),import.meta.url).then(r=>r.default),[u.LARGE_NOTEPAD_HELP]:()=>d(()=>import("./D6ItyoGx.js"),__vite__mapDeps([57,1]),import.meta.url).then(r=>r.default),[u.RABBIT]:()=>d(()=>import("./DRWAcUgY.js"),__vite__mapDeps([58,1]),import.meta.url).then(r=>r.default),[u.MORE]:()=>d(()=>import("./DI5tIEqe.js"),__vite__mapDeps([59,1]),import.meta.url).then(r=>r.default),[u.SAY]:()=>d(()=>import("./CJO8iecK.js"),__vite__mapDeps([60,1]),import.meta.url).then(r=>r.default),[u.GITHUB]:()=>d(()=>import("./CKWIJa_P.js"),__vite__mapDeps([61,1]),import.meta.url).then(r=>r.default),[u.LAMMPEE]:()=>d(()=>import("./lxI1LeCW.js"),__vite__mapDeps([62,1]),import.meta.url).then(r=>r.default),[u.CUBY]:()=>d(()=>import("./GwG9QUxe.js"),__vite__mapDeps([63,1]),import.meta.url).then(r=>r.default),[u.NUXT]:()=>d(()=>import("./C8bA7BNN.js"),__vite__mapDeps([64,1]),import.meta.url).then(r=>r.default),[u.CLOWN]:()=>d(()=>import("./BrFYrF4o.js"),__vite__mapDeps([65,1]),import.meta.url).then(r=>r.default),[u.DISALLOW_1]:()=>d(()=>import("./i4757dME.js"),__vite__mapDeps([66,1]),import.meta.url).then(r=>r.default),[u.COPY_1]:()=>d(()=>import("./DlFIBJeO.js"),__vite__mapDeps([67,1]),import.meta.url).then(r=>r.default),[u.COPY_2]:()=>d(()=>import("./B4xSonE8.js"),__vite__mapDeps([68,1]),import.meta.url).then(r=>r.default),[u.DISPLAY_KEYBOARD]:()=>d(()=>import("./vY7LyxHa.js"),__vite__mapDeps([69,1]),import.meta.url).then(r=>r.default),[u.PALETTE]:()=>d(()=>import("./CYUixtrj.js"),__vite__mapDeps([70,1]),import.meta.url).then(r=>r.default),[u.SIGN_1]:()=>d(()=>import("./BUKCyY1A.js"),__vite__mapDeps([71,1]),import.meta.url).then(r=>r.default),[u.DOCUMENT_EDITOR]:()=>d(()=>import("./gaf-FzT6.js"),__vite__mapDeps([72,1]),import.meta.url).then(r=>r.default),[u.DOCUMENT_READER]:()=>d(()=>import("./YUuFRQ0b.js"),__vite__mapDeps([73,1]),import.meta.url).then(r=>r.default),[u.SYNTHESIZER]:()=>d(()=>import("./qYqHV2CV.js"),__vite__mapDeps([74,1]),import.meta.url).then(r=>r.default),[u.VUE_SEMANTIC_STRUCTURE]:()=>d(()=>import("./CtVrG6sN.js"),__vite__mapDeps([75,1]),import.meta.url).then(r=>r.default),[u.NUXT_BOOSTER]:()=>d(()=>import("./B2_Ycvkt.js"),__vite__mapDeps([76,1]),import.meta.url).then(r=>r.default)},ao=({module:r,core:e})=>[{order:11,title:"Symbol",items:[{type:q.CHECKBOX,title:"Show Invisible Symbols",model:e.config.observable,name:T.SHOW_INVISIBLE_SYMBOLS,action(t){return e.config.set(T.SHOW_INVISIBLE_SYMBOLS,t)}},{title:"Rearrange Symbols",hotKey:"R",keyCode:82,action(){const t=r.getDefaultWrapper(),s=r.getPrimaryWrapper();return s.id!==t.id?(s.rearrangeIcons(),It(s.fsItem)):(t.rearrangeIcons({root:!0}),It(t.fsItem))}},{title:"Order Type",items:[{model:e.config.observable,type:q.RADIO,name:T.ORDER_TYPE,value:z.NAME,title:"Name",action(){return e.config.set(T.ORDER_TYPE,z.NAME)}},{model:e.config.observable,type:q.RADIO,name:T.ORDER_TYPE,value:z.TYPE,title:"Type",action(){return e.config.set(T.ORDER_TYPE,z.TYPE)}},{model:e.config.observable,type:q.RADIO,name:T.ORDER_TYPE,value:z.CREATED_DATE,title:"Created Date",action(){return e.config.set(T.ORDER_TYPE,z.CREATED_DATE)}},{model:e.config.observable,type:q.RADIO,name:T.ORDER_TYPE,value:z.EDITED_DATE,title:"Edited Date",action(){return e.config.set(T.ORDER_TYPE,z.EDITED_DATE)}}]},{title:"Order Direction",items:[{model:e.config.observable,type:q.RADIO,name:T.ORDER_DIRECTION,value:_e.ASCENDING,title:"Ascending",action(){return e.config.set(T.ORDER_DIRECTION,_e.ASCENDING)}},{model:e.config.observable,type:q.RADIO,name:T.ORDER_DIRECTION,value:_e.DESCENDING,title:"Descending",action(){return e.config.set(T.ORDER_DIRECTION,_e.DESCENDING)}}]}]}],no=({module:r})=>[{name:["rearrangeIcons"],description:"Rearrange Icons",args:[new S({name:"id",description:"Wraper id"}),new S({name:"root",description:"Use root wrapper",flag:!0})],async action({id:e,root:t}){const s=r.getDefaultWrapper(),a=r.getPrimaryWrapper();if(await new Promise(i=>window.requestAnimationFrame(i)),t)return s.rearrangeIcons({root:!0}),It(s.fsItem);{let i=a;return e&&(i=r.get(e)),i.rearrangeIcons(),It(i.fsItem)}}}];var me,we,se,Me,Re,ht;class Ns extends kt{constructor(t){const{core:s}=Object.assign({core:null},t);super({config:Vi,commands:no,contextMenu:ao,core:s});h(this,me,new bt);h(this,we,new Map);h(this,se,new Map);h(this,Me,{});E(this,"hasSelectedItems",!1);h(this,Re);h(this,ht);E(this,"activeWrapper");E(this,"defaultWrapper");E(this,"primaryWrapper");E(this,"secondaryWrapper")}addWrapper(t){return t=he(t),o(this,se).set(t.id,t),o(this,Me)[t.id]=t,t.events.subscribe(this.onEventWrapper.bind(this)),t.id}onEventWrapper({name:t,value:s}){const{wrapper:a}=s;(t==="selectItem"||t==="unselectItem")&&(this.hasSelectedItems=a.selectedItems.value.length>0,o(this,me).next(new de("hasSelectedItems",this.hasSelectedItems)))}removeWrapper(t){typeof t!="string"&&(t=t.id),o(this,se).delete(t),delete o(this,Me)[String(t)]}getActiveWrapper(t){const s=this.core.modules.windows.contentWrapper.getActiveWindow();return s&&s.symbolWrapper?s.symbolWrapper:t?null:this.activeWrapper}getSelectedItems(){return Array.from(o(this,se).values()).reduce((t,s)=>(t.push(...s.selectedItems.value.map(a=>s.get(a))),t),[])}clearSelectedItems(){return Array.from(o(this,se).values()).forEach(t=>{t.clearSelectedItems()})}async addFileSystemWrapper(t,s){const a=new ze(this.core,null,s);return await a.setup(t),this.addWrapper(a)}async setup(){await this.loadCoreSymbols(),this.setDefaultWrapper(await this.addFileSystemWrapper(this.core.modules.files.fs.root,!0))}loadCoreSymbols(){return Promise.all(Object.values(u).map(async t=>o(this,we).set(t,await oo[String(t)]())))}get(t){return o(this,se).get(t)}setDefaultWrapper(t){b(this,ht,t),this.primaryWrapper=this.secondaryWrapper=this.activeWrapper=this.defaultWrapper=this.symbolWrappers.get(t)}getDefaultWrapper(){return this.defaultWrapper}getPrimaryWrapper(){return this.primaryWrapper||this.defaultWrapper}getSecondaryWrapper(){return this.secondaryWrapper||this.defaultWrapper}setPrimaryWrapper(t){t instanceof Te&&(t=t.id),this.primaryWrapper=this.symbolWrappers.get(t),o(this,me).next(new de("setPrimaryWrapper",this.getPrimaryWrapper()))}setSecondaryWrapper(t){t instanceof Te&&(t=t.id),this.secondaryWrapper=this.symbolWrappers.get(t),o(this,me).next(new de("setSecondaryWrapper",this.secondaryWrapper))}setActiveWrapper(t){t instanceof Te&&(t=t.id);let s=this.symbolWrappers.get(o(this,Re));return t!==o(this,Re)&&(b(this,Re,t),this.activeWrapper=this.symbolWrappers.get(o(this,Re)),s=this.activeWrapper||this.symbolWrappers.get(o(this,ht)),o(this,me).next(new de("setActiveWrapper",s))),s}addSymbol(t,s){o(this,we).set(t,s)}removeSymbol(t){o(this,we).delete(t)}get wrappersObservable(){return o(this,Me)}get events(){return o(this,me)}get symbols(){return o(this,we)}get symbolWrappers(){return o(this,se)}}me=new WeakMap,we=new WeakMap,se=new WeakMap,Me=new WeakMap,Re=new WeakMap,ht=new WeakMap,E(Ns,"NAME","Symbols");const Z=new Lt;Z.addModule(ws);Z.addModule(Gs);Z.addModule(Os);Z.addModule(Ns);const Wo=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{Tr as C,wr as I,Zi as W,Z as c,Wo as i};

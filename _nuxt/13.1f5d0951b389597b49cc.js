(window.webpackJsonp=window.webpackJsonp||[]).push([[13,16,19,32,33,34,45,46],{120:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return h}));var n=r(72),o=r(99);class h extends o.default{constructor(t){super(t),this._proportinalScale=!0,this._func=n.ellipse}}},72:function(t,e,r){"use strict";function n(t,e,r,n){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=Math.abs(r-t),l=t<r?1:-1,c=Math.abs(n-e),d=e<n?1:-1,f=(h>c?h:-c)/2,v=[],i=0;0===o||i>=1?(v.push([t,e]),i=0):i+=1/o,t!==r||e!==n;){var _=f;_>-h&&(f-=c,t+=l),_<c&&(f+=h,e+=d)}return v}function line(t,e,r,o,h,l){var{density:c=0}=l;n(e,r,o,h,c).forEach(e=>{t(e[0],e[1])})}function o(t,e,r,n,o,h,l,c,d){var f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:.001,v=0,_=0,u=0;for(u=0;u<=1;u+=f)v=(1-u)**3*e+3*u*(1-u)**2*n+3*u**2*(1-u)*h+u**3*c,_=(1-u)**3*r+3*u*(1-u)**2*o+3*u**2*(1-u)*l+u**3*d,t(parseInt(v),parseInt(_))}function h(t,e,r,n,o,h){var{strokeSize:l=0,filled:c=!1,density:d}=h;if(c)for(var f=(e,r)=>t(e,r,!0),i=r;o<0?i>=r+o:i<=r+o;o<0?i--:i++)line(f,e,i,e+n,i,{density:d});if(l>0){l=Math.floor(l/2);var v=[e-(l=[n<0?-l:l,o<0?-l:l])[0],r-l[1]];[[e-l[0],r-l[1]],[e-l[0],r+o+l[1]],[e+n+l[0],r+o+l[1]],[e+n+l[0],r-l[1]],v].forEach(e=>{line(t,v[0],v[1],e[0],e[1],{density:d}),v=e})}}function ellipse(t,e,r,n,o,h){var{filled:l=!1,density:c=0}=h;n<0&&(n=Math.abs(n)),o<0&&(o=Math.abs(o));var d,f,v,_=n*n,y=o*o,m=4*_,M=4*y,i=0,N=(e,r)=>t(e,r,!0),O=[];for(d=0,f=o,v=2*y+_*(1-2*o);y*d<=_*f;d++)!c||i>=1?(O.push([e+d,r+f]),O.push([e-d,r-f]),O.push([e-d,r+f]),O.push([e+d,r-f]),i=0):i+=1/c,v>=0&&(v+=m*(1-f),f--),v+=y*(4*d+6);for(i=0,d=n,f=0,v=2*_+y*(1-2*n);_*f<=y*d;f++)!c||i>=1?(O.push([e+d,r+f]),O.push([e-d,r+f]),O.push([e+d,r-f]),O.push([e-d,r-f]),i=0):i+=1/c,v>=0&&(v+=M*(1-d),d--),v+=_*(4*f+6);if(l)for(var x=-o;x<=o;x++)for(var A=-n;A<=n;A++)A*A*o*o+x*x*n*n<=o*o*n*n&&N(e+A,r+x);O.forEach(e=>{t(e[0],e[1])})}function polygon(t,e,r,n){var o,{strokeSize:h=0,filled:c=!1,density:d=0}=n,f=Number.MAX_VALUE,v=Number.MAX_VALUE,_=Number.MIN_VALUE,y=Number.MIN_VALUE;if(e.forEach(e=>{o&&(e.x>_&&(_=e.x),e.y>y&&(y=e.y),e.x<f&&(f=e.x),e.y<v&&(v=e.y),line(t,o.x,o.y,e.x,e.y,{density:d})),o=e}),r){var m=e[0];o&&(m.x>_&&(_=m.x),m.y>y&&(y=m.y),m.x<f&&(f=m.x),m.y<v&&(v=m.y),line(t,o.x,o.y,m.x,m.y,{density:d}))}if(c){l((e,r)=>t(e,r,!0),e,{IMAGE_LEFT:f,IMAGE_TOP:v,IMAGE_RIGHT:_,IMAGE_BOTTOM:y})}}function l(t,e,r){var n,{IMAGE_LEFT:o=0,IMAGE_TOP:h=0,IMAGE_RIGHT:l,IMAGE_BOTTOM:c}=r,d=[],f=[];e.forEach(polygon=>{d.push(polygon.y),f.push(polygon.x)});var v,_,i,y,m,M=Array(e.length);for(_=h;_<c;_++){for(n=0,y=e.length-1,i=0;i<e.length;i++)(d[Number(i)]<_&&d[Number(y)]>=_||d[Number(y)]<_&&d[Number(i)]>=_)&&(M[n++]=Math.round(f[Number(i)]+(_-d[Number(i)])/(d[Number(y)]-d[Number(i)])*(f[Number(y)]-f[Number(i)]))),y=i;for(i=0;i<n-1;)M[Number(i)]>M[i+1]?(m=M[Number(i)],M[Number(i)]=M[i+1],M[i+1]=m,i&&i--):i++;for(i=0;i<n&&!(M[Number(i)]>=l);i+=2)if(M[i+1]>o)for(M[Number(i)]<o&&(M[Number(i)]=o),M[i+1]>l&&(M[i+1]=l),v=M[Number(i)];v<M[i+1];v++)t(v,_)}}r.r(e),r.d(e,"getLinePoints",(function(){return n})),r.d(e,"line",(function(){return line})),r.d(e,"curve",(function(){return o})),r.d(e,"rectangle",(function(){return h})),r.d(e,"ellipse",(function(){return ellipse})),r.d(e,"polygon",(function(){return polygon})),r.d(e,"fillPolygon",(function(){return l}))},73:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var n=r(74);class o extends n.default{constructor(t){super(t),this._brush=t.brush}get brush(){return this._brush}set brush(t){this._brush=t}static drawBrush(t){var{x:e,y:r,data:data,app:n,color:o}=t;e=Math.floor(e-data[0].length/2+1),r=Math.floor(r-data.length/2);for(var h=[],i=0;i<data[0].length;i++)for(var l=0;l<data.length;l++)data[Number(l)][Number(i)]>0&&o.alpha?(n.canvas.setPixel(e+i,r+l,o),h.push([e+i,r+l])):data[Number(l)][Number(i)]<0&&n.canvas.setPixel(e+i,r+l);return h}}},74:function(t,e,r){"use strict";function n(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}r.r(e),r.d(e,"default",(function(){return l}));var o=0;var h="__private_"+o+++"_"+"pointerDownHold";class l{constructor(t){Object.defineProperty(this,h,{writable:!0,value:!1}),this._app=t.app,this.passive=t.passive||!1,n(this,h)[h]=t.pointerDownHold||!1}get pointerDownHold(){return n(this,h)[h]}deconstructor(){}onActive(){}onPointerDown(){}onPointerUp(){}onPointerMove(){}onContextMenu(){}get app(){return this._app}get setPixel(){return this._app.activeDisplay.setPixel}}},76:function(t,e,r){"use strict";r.r(e);var n=r(77);function o(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var h=0;function l(t){return"__private_"+h+++"_"+t}var c=l("red"),d=l("green"),f=l("blue");class v{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Object.defineProperty(this,c,{writable:!0,value:0}),Object.defineProperty(this,d,{writable:!0,value:0}),Object.defineProperty(this,f,{writable:!0,value:0}),this.set(t,e,r,n)}set(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Array.isArray(t)&&(n=t[3],r=t[2],e=t[1],t=t[0]),this.red=t,this.green=e,this.blue=r,this.alpha=void 0===n?255:n}get r(){return o(this,c)[c]}get red(){return o(this,c)[c]}set red(t){o(this,c)[c]=Object(n.b)(t,0,255)}get g(){return this._green}get green(){return this._green}set green(t){this._green=Object(n.b)(t,0,255)}get blue(){return this._blue}get b(){return this._blue}set blue(t){this._blue=Object(n.b)(t,0,255)}get a(){return this._alpha}get alpha(){return this._alpha}set alpha(t){this._alpha=Object(n.b)(t,0,255)}get sum(){return o(this,c)[c]+this._blue+this._green+this._alpha}toRGB(){return"rgb(".concat(o(this,c)[c],",").concat(this._green,",").concat(this._blue,")")}toRGBA(){return"rgba(".concat(o(this,c)[c],",").concat(this._green,",").concat(this._blue,",").concat(this._alpha/255,")")}toJSON(){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}}is(t){return this.red===t.red&&this.blue===t.blue&&this.green===t.green&&this.alpha===t.alpha}invert(){return o(this,c)[c]=255-o(this,c)[c],this._green=255-this._green,this._blue=255-this._blue,this}add(t){this.red=Object(n.b)(this.red+t.red,0,255),this.green=Object(n.b)(this.green+t.green,0,255),this.blue=Object(n.b)(this.blue+t.blue,0,255)}subtract(t){this.red=Object(n.b)(this.red-t.red,0,255),this.green=Object(n.b)(this.green-t.green,0,255),this.blue=Object(n.b)(this.blue-t.blue,0,255)}multiply(t){this.red=Object(n.b)(this.red*t.red,0,255),this.green=Object(n.b)(this.green*t.green,0,255),this.blue=Object(n.b)(this.blue*t.blue,0,255)}divide(t){this.red=Object(n.b)(this.red/t.red,0,255),this.green=Object(n.b)(this.green/t.green,0,255),this.blue=Object(n.b)(this.blue/t.blue,0,255)}}v.COLOR_BLACK=[0,0,0,255],v.COLOR_WHITE=[255,255,255,255],v.COLOR_TRANSPARENT=[0,0,0,0],e.default=v},77:function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return h})),r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return c}));var n=r(71);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),r)}function h(t){return Math.atan2(t.y,t.x)+Math.PI}function l(t){var e=window.getComputedStyle(t).transform,r=new DOMMatrix(e);return Math.atan2(r.b,r.a)}function c(t,e){var r=Math.cos(e)*t.x-Math.sin(e)*t.y,o=Math.sin(e)*t.x+Math.cos(e)*t.y;return new n.c(r,o)}},80:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return c})),r.d(e,"Anchor",(function(){return d}));var n=r(72),o=r(76),h=r(81),l=r(73);class c extends l.default{constructor(t){super(t),this.COLOR_TRANSPARENT=new o.default(o.default.COLOR_TRANSPARENT),this.filled=!1,this.selectedAnchor=null,this.anchors=[],this.anchorBrush=new(Object(h.getBrushByIndex)(0))({app:this._app,size:1,primaryColor:new o.default(o.default.COLOR_BLACK),secondaryColor:new o.default(o.default.COLOR_WHITE)})}onPointerDown(t){this.startEvent=t}drawAnchors(){var data=[].concat(this.anchorBrush.data);this.anchors.forEach(t=>{this.drawAnchor(t,data)})}drawAnchor(t,data){t.intersectMap={},Object(n.rectangle)((e,r,n)=>{var o=this._app.canvas.getColorFromPixel(e,r);0===o.alpha?o=n?this.anchorBrush.secondaryColor:this.anchorBrush.primaryColor:o.invert(),t.intersectMap[Number(e)]=t.intersectMap[Number(e)]||{},t.intersectMap[Number(e)][Number(r)]=!0,l.default.drawBrush({color:o,data:data,x:e,y:r,app:this._app})},t.x-5,t.y-5,10,10,{strokeSize:1,filled:!0})}getAnchorByPosition(t,e){return this.anchors.find(r=>{if(r.intersectAnchor(t,e))return r})}addAnchor(t,e){var r=new d(t,e,this.anchorBrush);return this.anchors.push(r),r}reset(){this.anchors=[],this.selectedAnchor=null}}class d{constructor(t,e,r){this.x=t,this.y=e,this.brush=r}intersectAnchor(t,e){return this.intersectMap&&this.intersectMap[Number(t)]&&this.intersectMap[Number(t)][Number(e)]}}},81:function(t,e,r){"use strict";r.r(e),r.d(e,"getBrushByIndex",(function(){return f}));var n=r(72);class o{constructor(t){var{app:e,size:r=1,lowres:n=!0,primaryColor:o,secondaryColor:h}=t;this._app=e,this._size=r,this._lowres=n,this._data=this.getScaledData(this._size),this._primaryColor=o,this._secondaryColor=h}get lowres(){return this._lowres}get data(){return this._data}get size(){return this._size}set size(t){void 0===t&&(t=1),this._size=t,this._data=this.getScaledData(this._size)}get primaryColor(){return this._primaryColor||this._app.primaryColor}get secondaryColor(){return this._secondaryColor||this._app.secondaryColor}getData(t){return o.scale([],t)}getScaledData(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.scale(this.getData(t),this._app.density)}static scale(data,t){for(var e=[],r=0;r<data.length*t;r++){e.push([]);for(var n=0;n<data[0].length*t;n++)e[Number(r)].push(data[Math.floor(r/t)][Math.floor(n/t)])}return e}static scaleAsCopy(data,t){for(var e=[],r=0;r<data.length*t;r++){e.push([]);for(var n=0;n<data[0].length*t;n++)e[Number(r)].push(data[r%data.length][n%data[0].length])}return e}}class h extends o{getData(t){return t>1?l(t):t?[[1]]:[]}}function l(t){t=2*(t-1);for(var data=Array(t+1),i=0;i<t+1;i++)data[Number(i)]=Array(t+1).fill(0);return n.ellipse((t,e)=>{data[Math.round(t)][Math.round(e)]=1},t/2,t/2,t/2,t/2,{filled:!0}),data}class c extends o{getData(t){return function(t){for(var data=Array(t+1),i=0;i<t+1;i++)data[Number(i)]=Array(t+1).fill(0);return n.rectangle((t,e)=>{data[Math.round(t)][Math.round(e)]=1},0,0,t,t,{filled:!0}),data}(t)}}class d extends o{getData(t){return function(t){for(var data=l(t+2),i=0;i<data.length;i++)for(var e=0;e<data[Number(i)].length;e++)data[Number(i)][Number(e)]>0&&Math.random()<.15/t?data[Number(i)][Number(e)]=1:data[Number(i)][Number(e)]=0;return data}(t)}get data(){return this._data=this.getScaledData(this._size),this._data}}function f(t){return[h,c,d][Number(t)]}e.default=o},99:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return l}));var n=r(72),o=r(73),h=r(80);class l extends h.default{constructor(t){super(t),this._proportinalScale=!1}onPointerMove(t){var e=(t.x-this.startEvent.x)/2,r=(t.y-this.startEvent.y)/2;if(this._proportinalScale&&(r=e<0&&r>0||e>0&&r<0?-1*e:e),0!==e&&0!==r)return this._app.canvas.addPassiveRenderAction(()=>{Object(n.ellipse)((t,e,r)=>{var data=[].concat(this._brush.data);o.default.drawBrush({color:r?this._brush.secondaryColor:this._brush.primaryColor,data:data,x:t,y:e,app:this._app})},Math.floor(this.startEvent.x+e),Math.floor(this.startEvent.y+r),e,r,{filled:this.filled})}),{render:!0}}onPointerUp(t){var e=(t.x-this.startEvent.x)/2,r=(t.y-this.startEvent.y)/2;if(this._proportinalScale&&(r=e<0&&r>0||e>0&&r<0?-1*e:e),0!==e&&0!==r)return this._app.canvas.addRenderAction(()=>{Object(n.ellipse)((t,e,r)=>{var data=[].concat(this._brush.data);o.default.drawBrush({color:r?this._brush.secondaryColor:this._brush.primaryColor,data:data,x:t,y:e,app:this._app})},Math.floor(this.startEvent.x+e),Math.floor(this.startEvent.y+r),e,r,{strokeSize:this._brush.data.length,filled:this.filled})}),{save:!0,render:!0}}}}}]);
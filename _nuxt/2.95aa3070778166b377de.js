(window.webpackJsonp=window.webpackJsonp||[]).push([[2,15,26,33,37,38,39,42,43,45,46,47],{340:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var n=r(140),c=r(298),o=function t(e,r){Object(n.a)(this,t),this.min=Object(c.e)(0,0),this.max=Object(c.e)(0,0),this.min=e||this.min,this.max=r||this.max}},355:function(t,e,r){"use strict";r.r(e),function(t){var n=r(140),c=r(141),o=(r(40),r(301),r(14),r(442),r(443),r(444),r(445),r(446),r(448),r(449),r(450),r(451),r(452),r(453),r(454),r(455),r(456),r(457),r(458),r(459),r(460),r(461),r(462),r(463),r(464),r(465),r(466),r(29),r(298)),h=r(310),f=r(356),l=function(){function e(t){Object(n.a)(this,e),this._app=t;var r=t.options.size;this._bitmapData=new f.default(r.width,r.height),this._renderActions=[],this._passiveRenderActions=[],this.clearStack()}return Object(c.a)(e,[{key:"getActiveContext",value:function(){return this._app.display.context}},{key:"getDisplayContexts",value:function(){return this._app.displays.map((function(t){return t.context}))}},{key:"setSize",value:function(t,e){this._bitmapData=new f.default(t,e),this.clearStack(),this.render(),this._app.refresh()}},{key:"loadImage",value:function(image){var t=this.getImageDataFromImage(image);this._bitmapData=new f.default(t.width,t.height),this.clearStack(),this._stacks.push(t),this.render(),this._app.refresh()}},{key:"getImageDataFromImage",value:function(image){var canvas=document.createElement("canvas");canvas.width=image.width,canvas.height=image.height;var t=canvas.getContext("2d");t.drawImage(image,0,0);for(var r=e.createImageData(image.width,image.height),data=t.getImageData(0,0,canvas.width,canvas.height),i=0;i<data.length;i++)r.data[Number(i)]=data[Number(i)];return data}},{key:"getColorFromPixel",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=r?this._renderImageData:this._stacks[this._stacks.length-1||0],data=n.data,c=e*(4*n.width)+4*t;return new h.default(data[Number(c)],data[c+1],data[c+2],data[c+3])}},{key:"getPixel",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=r?this._renderImageData:this._stacks[this._stacks.length-1||0],data=n.data,c=e*(4*n.width)+4*t;return data[Number(c)]+data[c+1]+data[c+2]+data[c+3]}},{key:"setPixel",value:function(t,e,r){r=r||this._app.primaryColor;var i=4*(t+e*this._renderImageData.width);this._renderImageData.data[i+0]=r.red,this._renderImageData.data[i+1]=r.green,this._renderImageData.data[i+2]=r.blue,this._renderImageData.data[i+3]=r.alpha>=0?r.alpha:255}},{key:"putImageData",value:function(t,e,r){for(var n,c,o=0;o<t.width;o++)for(var h=0;h<t.height;h++)n=4*(h*t.width+o),c=4*((r+h)*this._renderImageData.width+(e+o)),d(n,t.data,c,this._renderImageData.data)}},{key:"fillPixels",value:function(t,e,r,n,c){for(var o=e;o<Math.min(e+n,this._renderImageData.width);o++)for(var h=r;h<Math.min(r+c,this._renderImageData.height);h++)this.setPixel(o,h,t)}},{key:"addRenderAction",value:function(t){this._renderActions.push(t)}},{key:"addPassiveRenderAction",value:function(t){this._passiveRenderActions.push(t)}},{key:"cleanPassiveRenderActions",value:function(){this._passiveRenderActions=[]}},{key:"getTmpStack",value:function(){return e.createImageData(this._stacks[this._stacks.length-1].width,this._stacks[this._stacks.length-1].height,this._stacks[this._stacks.length-1].data)}},{key:"render",value:function(){var e=this;this._renderImageData=this.getTmpStack(),m(this._renderActions),m(this._passiveRenderActions,!0),t.cancelAnimationFrame(this._renderWait),this._renderWait=t.setTimeout((function(){y.bind(e)(!0),e._renderWait=null}),1e3/30),t.clearTimeout(this._renderWaitDisplays),this._renderWaitDisplays=t.setTimeout((function(){y.bind(e)()}),300)}},{key:"size",get:function(){return Object(o.e)(this._renderImageData.width,this._renderImageData.height)}},{key:"width",get:function(){return this._renderImageData.width}},{key:"height",get:function(){return this._renderImageData.height}},{key:"stacks",get:function(){return this._stacks}},{key:"renderImageData",get:function(){return this._renderImageData}},{key:"clearStack",value:function(){this._renderImageData=e.createImageData(this._bitmapData.width,this._bitmapData.height),this._stacks=[this._renderImageData],this.render()}},{key:"saveStack",value:function(){this._renderImageData=this.getTmpStack(),m(this._renderActions,!0),this._stacks.push(this._renderImageData),this.render()}},{key:"revertStack",value:function(){this._stacks.length>1&&(this._renderImageData=this._stacks.pop(),this.render())}},{key:"toBlob",value:function(){var t=this;return new Promise((function(e){v(t._renderImageData).toBlob(e)}))}},{key:"toBase64",value:function(){var t=this;return new Promise((function(e){e(v(t._renderImageData).toDataURL())}))}}],[{key:"invertImageData",value:function(t){for(var i=0,e=0;e<t.width;e++)for(var r=0;r<t.height;r++)i=4*(e+r*t.width),t.data[Number(i)]=255-t.data[Number(i)],t.data[i+1]=255-t.data[i+1],t.data[i+2]=255-t.data[i+2]}},{key:"createImageData",value:function(e,r,data){return new t.ImageData(new t.Uint8ClampedArray(data||4*e*r),e,r)}},{key:"resizeImageData",value:function(t){for(var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=t.data,h=t.width,h1=t.height,f=h*n,h2=h1*n,l=Array(f*h2*4),v=Object(o.e)(parseInt((h<<16)/f)+1,parseInt((h1<<16)/h2)+1),i=0;i<h2;i++)for(var y=0;y<f;y++)r=y*v.x>>16,d(4*((i*v.y>>16)*h+r),c,4*(i*f+y),l);return e.createImageData(f,h2,l)}},{key:"cropImageData",value:function(t,r,n,c,o){for(var h=t.data,f=Array(c*o*4),i=0;i<c;i++)for(var l=0;l<o;l++){d(4*(n*t.width+r)+4*(l*t.width+i),h,4*(l*c+i),f)}return e.createImageData(c,o,f)}}]),e}();function d(t,e,r,n){n[Number(r)]=e[Number(t)],n[r+1]=e[t+1],n[r+2]=e[t+2],n[r+3]=e[t+3]}function v(t){var canvas=document.createElement("canvas");return canvas.width=t.width,canvas.height=t.height,canvas.getContext("2d").putImageData(t,0,0),canvas}function y(t){var e=this;t?this._app.display&&(this._app.display.imageData=this._renderImageData):this._app.displays.forEach((function(t){t.imageData=e._renderImageData}))}function m(t,e){if(e)for(;t.length>0;)t.shift()();else t.forEach((function(t){t()}))}e.default=l}.call(this,r(39))},356:function(t,e,r){"use strict";r.r(e);var n=r(140),c=r(141),o=r(299),h=r(300),f=r(298),l=Object(h.a)("size"),d=function(){function t(e,r){Object(n.a)(this,t),Object.defineProperty(this,l,{writable:!0,value:Object(f.e)(0,0)}),Object(o.a)(this,l)[l]=Object(f.e)(e,r)}return Object(c.a)(t,[{key:"width",get:function(){return Object(o.a)(this,l)[l].x}},{key:"height",get:function(){return Object(o.a)(this,l)[l].y}},{key:"size",get:function(){return Object(o.a)(this,l)[l]}}]),t}();e.default=d},358:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return l}));r(294);var n=r(140),c=r(297),o=r(295),h=r(296);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(h.a)(t);if(e){var c=Object(h.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var l=function(t){Object(c.a)(r,t);var e=f(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return r}(r(298).b)},368:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return v}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(76),r(306));function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var v=function(t){Object(o.a)(r,t);var e=d(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(c.a)(r,[{key:"onPointerDown",value:function(t){var e=this,r=t.x,n=t.y,data=[].concat(this._brush.data);return this._app.canvas.addRenderAction((function(){l.default.drawBrush({color:e._brush.primaryColor,x:r,y:n,data:data,app:e._app})})),{save:!0,render:!0}}}]),r}(l.default)},369:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return y}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(76),r(307)),d=r(306);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var y=function(t){Object(o.a)(r,t);var e=v(r);function r(t){var c;return Object(n.a)(this,r),(c=e.call(this,t))._proportinalScale=!1,c}return Object(c.a)(r,[{key:"onPointerMove",value:function(t){var e=this,r=(t.x-this.startEvent.x)/2,n=(t.y-this.startEvent.y)/2;if(this._proportinalScale&&(n=r<0&&n>0||r>0&&n<0?-1*r:r),0!==r&&0!==n)return this._app.canvas.addPassiveRenderAction((function(){Object(l.ellipse)((function(t,r,n){var data=[].concat(e._brush.data);d.default.drawBrush({color:n?e._brush.secondaryColor:e._brush.primaryColor,data:data,x:t,y:r,app:e._app})}),Math.floor(e.startEvent.x+r),Math.floor(e.startEvent.y+n),r,n,{filled:e.filled})})),{render:!0}}},{key:"onPointerUp",value:function(t){var e=this,r=(t.x-this.startEvent.x)/2,n=(t.y-this.startEvent.y)/2;if(this._proportinalScale&&(n=r<0&&n>0||r>0&&n<0?-1*r:r),0!==r&&0!==n)return this._app.canvas.addRenderAction((function(){Object(l.ellipse)((function(t,r,n){var data=[].concat(e._brush.data);d.default.drawBrush({color:n?e._brush.secondaryColor:e._brush.primaryColor,data:data,x:t,y:r,app:e._app})}),Math.floor(e.startEvent.x+r),Math.floor(e.startEvent.y+n),r,n,{strokeSize:e._brush.data.length,filled:e.filled})})),{save:!0,render:!0}}}]),r}(r(335).default)},403:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return y}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(76),r(307)),d=r(306);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var y=function(t){Object(o.a)(r,t);var e=v(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(c.a)(r,[{key:"onPointerDown",value:function(t){return m.bind(this)(t)}},{key:"onPointerMove",value:function(t){return m.bind(this)(t)}},{key:"onPointerUp",value:function(){return this.last=null,{save:!0}}}]),r}(d.default);function m(t){var e=this,r=(this.last||t).x,n=(this.last||t).y;return Object(l.line)((function(t,r){var data=[].concat(e._brush.data);e._app.canvas.addRenderAction((function(){d.default.drawBrush({color:e._brush.primaryColor,data:data,x:t,y:r,app:e._app})}))}),r,n,t.x,t.y,{}),this.last=t,{render:!0}}},404:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return y}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(76),r(307)),d=r(335);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var y=function(t){Object(o.a)(r,t);var e=v(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(c.a)(r,[{key:"onPointerDown",value:function(t){var e=this;if(this.selectedAnchor){var r=this.getAnchorByPosition(t.x,t.y);if(!r)return this._app.canvas.addRenderAction((function(){e.render(!1),e.reset()})),{save:!0,render:!0};this.selectedAnchor=r,this._app.canvas.addPassiveRenderAction((function(){e.render(!0)}))}return{render:!0}}},{key:"onPointerMove",value:function(t,e){var r=this;if(e.pressed)return this.anchors.length<1&&(this.addAnchor(t.x,t.y),this.selectedAnchor=this.addAnchor(t.x,t.y)),this.selectedAnchor.x=t.x,this.selectedAnchor.y=t.y,this._app.canvas.addPassiveRenderAction((function(){r.render(!0)})),{render:!0}}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.anchors.length&&(Object(l.line)((function(e,r){var data=[].concat(t._brush.data);d.default.drawBrush({color:t._brush.primaryColor,data:data,x:e,y:r,app:t._app})}),this.anchors[0].x,this.anchors[0].y,this.anchors[1].x,this.anchors[1].y,{}),e&&this.drawAnchors())}}]),r}(d.default)},405:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return O}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(29),r(76),r(301),r(336)),d=r(307),v=r(306),y=r(335);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var O=function(t){Object(o.a)(r,t);var e=m(r);function r(t){var c;return Object(n.a)(this,r),(c=e.call(this,t)).status=0,c.locked=!1,c}return Object(c.a)(r,[{key:"refreshHelperOffset",value:function(){this.primaryHelper&&(this.primaryHelperOffset=[this.primaryHelper.x-this.primaryAnchor.x,this.primaryHelper.y-this.primaryAnchor.y]),this.secondaryHelper&&(this.secondaryHelperOffset=[this.secondaryHelper.x-this.secondaryAnchor.x,this.secondaryHelper.y-this.secondaryAnchor.y])}},{key:"onPointerDown",value:function(t){var e=this;if(this.moved||this.reset(),!this.locked){this.locked=!0,1===this.anchors.length&&this.reset();var r=this.getAnchorByPosition(t.x,t.y);if(r&&this.selectedAnchor!==r)this.selectedAnchor=r;else{if(2===this.status&&!r)return x.bind(this)();1===this.status?_.bind(this)():this.selectedAnchor||(this.addAnchor(t.x,t.y),this.selectedAnchor=this.addAnchor(t.x,t.y))}return this._app.canvas.addPassiveRenderAction((function(){e.render(!0),e.locked=!1})),{render:!0}}}},{key:"primaryAnchor",get:function(){return this.anchors[0]}},{key:"secondaryAnchor",get:function(){return this.anchors[1]}},{key:"primaryHelper",get:function(){return this.anchors[2]}},{key:"secondaryHelper",get:function(){return this.anchors[3]}},{key:"onPointerUp",value:function(){var t=this;if(this.status<3&&0===this.status)return this.selectedAnchor=null,this.status++,this._app.canvas.addPassiveRenderAction((function(){t.render(!0)})),{render:!0}}},{key:"onPointerMove",value:function(t,e){var r=this;if(e.pressed&&this.selectedAnchor)return this.moved=!0,this.selectedAnchor.x=t.x,this.selectedAnchor.y=t.y,this.selectedAnchor===this.primaryAnchor&&this.primaryHelper?(this.primaryHelper.x=this.selectedAnchor.x+this.primaryHelperOffset[0],this.primaryHelper.y=this.selectedAnchor.y+this.primaryHelperOffset[1]):this.selectedAnchor===this.secondaryAnchor&&this.secondaryHelper?(this.secondaryHelper.x=this.selectedAnchor.x+this.secondaryHelperOffset[0],this.secondaryHelper.y=this.selectedAnchor.y+this.secondaryHelperOffset[1]):this.selectedAnchor!==this.primaryHelper&&this.selectedAnchor!==this.secondaryHelper||this.refreshHelperOffset(),this._app.canvas.addPassiveRenderAction((function(){r.render(!0)})),{render:!0}}},{key:"addPoints",value:function(t){var e=this;t.forEach((function(t){e.points[Object(l.b)(t[0]-1,0,e._app.canvas.width-1)][Object(l.b)(t[1]-1,0,e._app.canvas.height-1)]=!0}))}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.status>1?Object(d.curve)((function(e,r){var data=[].concat(t._brush.data);v.default.drawBrush({color:t._brush.primaryColor,data:data,x:e,y:r,app:t._app})}),this.primaryAnchor.x,this.primaryAnchor.y,this.primaryHelper.x,this.primaryHelper.y,this.secondaryHelper.x,this.secondaryHelper.y,this.secondaryAnchor.x,this.secondaryAnchor.y):Object(d.line)((function(e,r){var data=[].concat(t._brush.data);y.default.drawBrush({color:t._brush.primaryColor,data:data,x:e,y:r,app:t._app})}),this.primaryAnchor.x,this.primaryAnchor.y,this.secondaryAnchor.x,this.secondaryAnchor.y,{}),e&&(this.primaryHelper&&Object(d.line)((function(e,r){var n=t._app.canvas.getColorFromPixel(e,r);0===n.alpha?n=t.anchorBrush.primaryColor:n.invert();var data=[].concat(t.anchorBrush.data);y.default.drawBrush({color:n,data:data,x:e,y:r,app:t._app})}),this.primaryAnchor.x,this.primaryAnchor.y,this.primaryHelper.x,this.primaryHelper.y,{}),this.secondaryHelper&&Object(d.line)((function(e,r){var n=t._app.canvas.getColorFromPixel(e,r);0===n.alpha?n=t.anchorBrush.primaryColor:n.invert();var data=[].concat(t.anchorBrush.data);y.default.drawBrush({color:n,data:data,x:e,y:r,app:t._app})}),this.secondaryAnchor.x,this.secondaryAnchor.y,this.secondaryHelper.x,this.secondaryHelper.y,{}),this.drawAnchors())}},{key:"reset",value:function(){y.default.prototype.reset.apply(this,arguments),this.status=0,this.locked=!1}},{key:"intersect",value:function(t,e){for(var r=[[0,0],[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],i=0;i<r.length;i++)if(this.points[t+r[Number(i)][0]][e+r[Number(i)][1]])return!0;return!1}}]),r}(y.default);function _(){var t=this,e=j(this.primaryAnchor,this.secondaryAnchor);this.addAnchor(e[0],e[1]),e=j(this.secondaryAnchor,this.primaryAnchor),this.addAnchor(e[0],e[1]),this.refreshHelperOffset(),this._app.canvas.addPassiveRenderAction((function(){t.render(!0),t.locked=!1})),this.status++}function x(){var t=this;return this._app.canvas.addRenderAction((function(){t.render(!1),t.reset()})),{events:!1,save:!0,render:!0}}function j(t,e){var r=Object(d.getLinePoints)(t.x,t.y,e.x,e.y);return r[Math.floor(r.length/4)]}},406:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return d}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296);r(301),r(349);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var d=function(t){Object(o.a)(r,t);var e=l(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(c.a)(r,[{key:"fill",value:function(t,e,r){for(var n,i,c,o,h,f=[[t,e]],l=0,d=this._app.canvas.getColorFromPixel(t,e,!0),a=[[-1,0],[1,0],[0,-1],[0,1]];f.length;){if(l>2e6)throw new Error("FILL OVERFLOW");for(t=(n=f.pop())[0],e=n[1],this._app.canvas.setPixel(t,e,r,!0),i=0;i<a.length;i++)c=t+a[Number(i)][0],o=e+a[Number(i)][1],c>=0&&c<this._app.canvas.width&&o>=0&&o<this._app.canvas.height&&(h=this._app.canvas.getColorFromPixel(c,o,!0)).is(d)&&!r.is(h)&&f.push([c,o]);l++}}},{key:"onPointerDown",value:function(t){var e=this;if(!this._filling){this._filling=!0;var r=t.x,n=t.y,c=this._app.primaryColor;return this._app.canvas.addRenderAction((function(){e.fill(r,n,c),e._filling=!1})),{save:!0,render:!0}}return{events:!1}}}]),r}(r(308).default)},407:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return l}));r(294);var n=r(140),c=r(297),o=r(295),h=r(296);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(h.a)(t);if(e){var c=Object(h.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var l=function(t){Object(c.a)(r,t);var e=f(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,r),t.pointerDownHold=!0,e.call(this,t)}return r}(r(368).default)},408:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return y}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(76),r(307)),d=r(306);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var y=function(t){Object(o.a)(r,t);var e=v(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(c.a)(r,[{key:"onPointerMove",value:function(t){var e=this,r=t.x-this.startEvent.x,n=t.y-this.startEvent.y;return this._app.canvas.addPassiveRenderAction((function(){Object(l.rectangle)((function(t,r,n){var data=[].concat(e._brush.data);d.default.drawBrush({color:n?e._brush.secondaryColor:e._brush.primaryColor,data:data,x:t,y:r,app:e._app})}),e.startEvent.x,e.startEvent.y,r,n,{strokeSize:e.filled?0:e._brush.data.length,filled:e.filled})})),{render:!0}}},{key:"onPointerUp",value:function(t){var e=this,r=t.x-this.startEvent.x,n=t.y-this.startEvent.y;return this._app.canvas.addRenderAction((function(){Object(l.rectangle)((function(t,r,n){var data=[].concat(e._brush.data);d.default.drawBrush({color:n?e._brush.secondaryColor:e._brush.primaryColor,data:data,x:t,y:r,app:e._app})}),e.startEvent.x,e.startEvent.y,r,n,{strokeSize:e.filled?0:e._brush.data.length,filled:e.filled})})),{save:!0,render:!0}}}]),r}(r(335).default)},409:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return d}));r(294);var n=r(140),c=r(297),o=r(295),h=r(296),f=r(307);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(h.a)(t);if(e){var c=Object(h.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var d=function(t){Object(c.a)(r,t);var e=l(r);function r(t){var c;return Object(n.a)(this,r),(c=e.call(this,t))._proportinalScale=!0,c._func=f.ellipse,c}return r}(r(369).default)},410:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return m}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(76),r(307)),d=r(306),v=r(335);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var m=function(t){Object(o.a)(r,t);var e=y(r);function r(t){var c;return Object(n.a)(this,r),(c=e.call(this,t)).status=0,c}return Object(c.a)(r,[{key:"onPointerMove",value:function(t,e){var r=this;if(e.pressed&&this.selectedAnchor)return this.selectedAnchor.x=t.x,this.selectedAnchor.y=t.y,this._app.canvas.addPassiveRenderAction((function(){r.render(!0)})),{render:!0}}},{key:"onPointerDown",value:function(t){var e=this,r=this.getAnchorByPosition(t.x,t.y);switch(this.status){case 1:if(!r)return this.status=2,this._app.canvas.addRenderAction((function(){e.render(!1),e.reset()})),{save:!0,render:!0};this.selectedAnchor=r;break;default:r&&this.anchors[0]===r?(this.status=1,this.selectedAnchor=r):this.selectedAnchor=r||this.addAnchor(t.x,t.y)}return this._app.canvas.addPassiveRenderAction((function(){e.render(e.status<2)})),{render:!0}}},{key:"isClosed",value:function(){return this.status>0}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=function(e,r){var data=[].concat(t._brush.data);d.default.drawBrush({color:t._brush.primaryColor,data:data,x:e,y:r,app:t._app})};Object(l.polygon)(r,this.anchors,this.status>0,{filled:this.filled}),e&&this.drawAnchors()}},{key:"reset",value:function(){v.default.prototype.reset.apply(this,arguments),this.status=0}}]),r}(v.default)},411:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return R}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(76),r(298)),d=r(355),v=r(307),y=r(310),m=r(359),O=r(340),_=r(335),x=r(306);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var R=function(t){Object(o.a)(r,t);var e=j(r);function r(t){var c;return Object(n.a)(this,r),(c=e.call(this,t)).brushPrimaryColor=new y.default(y.default.COLOR_BLACK),c.brushSecondaryColor=new y.default(y.default.COLOR_WHITE),c.brush=new(Object(m.getBrushByIndex)(0))({app:c.app,size:1,primaryColor:c.brushPrimaryColor,secondaryColor:c.brushSecondaryColor}),c.reset(),c}return Object(c.a)(r,[{key:"intersect",value:function(t){return!!this.bounds&&(t.x>this.bounds.min.x&&t.x<this.bounds.max.x&&t.y>this.bounds.min.y&&t.y<this.bounds.max.y)}},{key:"reset",value:function(){console.log("RESET"),this.status=0,this.bounds=null,this.intersectedStartEvent=null,this.croppedImageData=null,this.startEvent=null}},{key:"onPointerDown",value:function(t){var e,r=this;switch(console.log("Status: ",this.status),this.status){case 3:break;case 2:if(this.croppedImageData&&(this.intersectedStartEvent||this.intersect(t))){if(this.intersectedStartEvent=t,!t.rightClick)return{events:!0,render:!1};console.log("Ablegen"),this.status++}break;case 1:if(e=Object(l.e)(this.bounds.max-this.bounds.min),this.status++,t.rightClick){var n=this.bounds.min.x,c=this.bounds.min.y;this.app.canvas.addRenderAction((function(){r.app.canvas.fillPixels(r._brush.secondaryColor,n,c,e.x,e.y)}))}return this.app.canvas.addPassiveRenderAction((function(){r.render(r.startEvent.x,r.startEvent.y,!0)})),{events:!0,render:!0};default:return _.default.prototype.onPointerDown.apply(this,arguments)}}},{key:"onPointerMove",value:function(t,e){var r=this;if(this.intersectedStartEvent&&e.pressed){var n=this.getRectInfo(t);return this._app.canvas.addPassiveRenderAction((function(){r.render(n.x,n.y,!0)})),{render:!0}}if(0===this.status)return this._app.canvas.addPassiveRenderAction((function(){r.render(t.x,t.y,!0)})),{render:!0}}},{key:"getRectInfo",value:function(t){return{width:this.bounds.max.x-this.bounds.min.x,height:this.bounds.max.y-this.bounds.min.y,x:this.startEvent.x+t.x-this.intersectedStartEvent.x,y:this.startEvent.y+t.y-this.intersectedStartEvent.y}}},{key:"onPointerUp",value:function(t){var e=this;if(3===this.status)return this.app.canvas.addRenderAction((function(){var r=e.getRectInfo(t);d.default.invertImageData(e.croppedImageData),e.render(r.x,r.y,!1),e.reset()})),{save:!0,render:!0};if(this.intersectedStartEvent&&2===this.status){var r=this.getRectInfo(t);return this.startEvent.x=r.x,this.startEvent.y=r.y,this.bounds=new O.default(Object(l.e)(r.x,r.y),Object(l.e)(r.x+r.width,r.y+r.height)),this._app.canvas.addPassiveRenderAction((function(){e.render(r.x,r.y,!0)})),{render:!0}}if(this.startEvent&&0===this.status){console.log(t);var n=t.x-this.startEvent.x,c=t.y-this.startEvent.y;return n>0&&c>0&&(this.bounds=new O.default(Object(l.e)(this.startEvent.x,this.startEvent.y),Object(l.e)(t.x,t.y)),this.status++,this._app.canvas.addPassiveRenderAction((function(){e.croppedImageData=d.default.cropImageData(e.app.canvas.renderImageData,e.bounds.min.x,e.bounds.min.y,n,c),d.default.invertImageData(e.croppedImageData),e.render(e.startEvent.x,e.startEvent.y,!0)}))),{render:!0}}}},{key:"render",value:function(t,e,rect){var r=this,n=Object(l.e)(0,0),c=Object(l.e)(t,e);this.bounds?n=Object(l.e)((function(){return r.bounds.max-r.bounds.min})):(n=Object(l.e)((function(){return c-r.startEvent.position})),c=this.startEvent.position),this.croppedImageData&&this.app.canvas.putImageData(this.croppedImageData,c.x,c.y),rect&&Object(v.rectangle)((function(t,e){var data=[].concat(r._brush.data),n=r._app.canvas.getColorFromPixel(t,e);0===n.alpha?n=r.brushPrimaryColor:n.invert(),x.default.drawBrush({color:n,data:data,x:t,y:e,app:r._app})}),c.x,c.y,n.x,n.y,{strokeSize:this._brush.data.length,filled:this.filled,density:3})}}]),r}(_.default)},412:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return j}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=(r(76),r(298)),d=r(307),v=r(310),y=r(359),m=r(340),O=r(335),_=r(306);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var j=function(t){Object(o.a)(r,t);var e=x(r);function r(t){var c;return Object(n.a)(this,r),(c=e.call(this,t)).brushPrimaryColor=new v.default(v.default.COLOR_BLACK),c.brushSecondaryColor=new v.default(v.default.COLOR_WHITE),c.brush=new(Object(y.getBrushByIndex)(0))({app:c.app,size:1,primaryColor:c.brushPrimaryColor,secondaryColor:c.brushSecondaryColor}),c._moving=!1,c}return Object(c.a)(r,[{key:"onPointerMove",value:function(t){var e=this,r=t.x-this.startEvent.x,n=t.y-this.startEvent.y;return this._moving||(this._moving=!0,this._app.canvas.addPassiveRenderAction((function(){Object(d.rectangle)((function(t,r){var data=[].concat(e._brush.data),n=e._app.canvas.getColorFromPixel(t,r);0===n.alpha?n=e.brushPrimaryColor:n.invert(),_.default.drawBrush({color:n,data:data,x:t,y:r,app:e._app})}),e.startEvent.x,e.startEvent.y,r,n,{strokeSize:e._brush.data.length,filled:!1}),e._moving=!1}))),{render:!0}}},{key:"onPointerUp",value:function(t){this._app.canvas.cleanPassiveRenderActions();var e=Object(l.e)(t),r=Object(l.e)(this.startEvent),n=Object(l.d)((function(){return Math.floor(e-r)}));if(n.x>0&&n.y>0){var c=new m.default(r,e),o=this.app.display,h=Object(l.d)((function(){return Math.floor(o.canvasLayout.naturalSize/n*o.zoomFactor)})),f=Object(l.d)((function(){return c.min+n/2}));this.app.display.setZoom(h.x>h.y?h.x:h.y,f)}return{render:!0}}}]),r}(O.default)},413:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return y}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296),l=r(309),d=r(358);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var y=function(t){Object(o.a)(r,t);var e=v(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(c.a)(r,[{key:"onPointerDown",value:function(t){var e=this.app.display,r=2;return e.maxZoomFactor-5<e.zoomFactor&&(r=1),r=l.a.altActive?-r:r,this.app.display.zoom(r,new d.default(t.x,t.y)),{events:!1}}}]),r}(r(308).default)},414:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return d}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var d=function(t){Object(o.a)(r,t);var e=l(r);function r(t){var c;return Object(n.a)(this,r),(c=e.call(this,t)).passive=!0,c}return Object(c.a)(r,[{key:"onActive",value:function(){this.app.canvas.revertStack()}}]),r}(r(308).default)},415:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return d}));r(294);var n=r(140),c=r(141),o=r(297),h=r(295),f=r(296);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var d=function(t){Object(o.a)(r,t);var e=l(r);function r(t){var c;return Object(n.a)(this,r),(c=e.call(this,t)).passive=!0,c}return Object(c.a)(r,[{key:"onActive",value:function(){this.app.canvas.clearStack()}}]),r}(r(308).default)},508:function(t,e,r){"use strict";r.r(e),r.d(e,"getToolByIndex",(function(){return w}));r(301);var n=r(308);r.d(e,"Tool",(function(){return n.default}));var c=r(306);r.d(e,"Brush",(function(){return c.default}));var o=r(368);r.d(e,"DottedFreehand",(function(){return o.default}));var h=r(403);r.d(e,"ContinuousFreehand",(function(){return h.default}));var f=r(404);r.d(e,"StraightLine",(function(){return f.default}));var l=r(405);r.d(e,"Curve",(function(){return l.default}));var d=r(406);r.d(e,"Fill",(function(){return d.default}));var v=r(407);r.d(e,"AirBrush",(function(){return v.default}));var y=r(408);r.d(e,"UnfilledFilledRectangle",(function(){return y.default}));var m=r(409);r.d(e,"UnfilledFilledCircle",(function(){return m.default}));var O=r(369);r.d(e,"UnfilledFilledEllipse",(function(){return O.default}));var _=r(410);r.d(e,"UnfilledFilledPolygon",(function(){return _.default}));var x=r(411);r.d(e,"BrushSelector",(function(){return x.default}));var j=r(412);r.d(e,"Magnifier",(function(){return j.default}));var R=r(413);r.d(e,"Zoom",(function(){return R.default}));var k=r(414);r.d(e,"Undo",(function(){return k.default}));var A=r(415);function w(t){return[o.default,h.default,f.default,l.default,d.default,v.default,y.default,m.default,O.default,_.default,x.default,n.default,n.default,n.default,j.default,R.default,k.default,A.default][Number(t)]}r.d(e,"Clear",(function(){return A.default}))}}]);
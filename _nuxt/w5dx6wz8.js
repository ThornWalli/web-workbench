import{W as O}from"./BPnw8H1C.js";import{W as I}from"./CPrp_Jrr.js";import{W as A}from"./CcXWfcLA.js";import{W as D}from"./DpGpKT4E.js";import{W as B}from"./D9PjJnFw.js";import{O as L}from"./PiW-z4FK.js";import{O as S,r as n,u as $,s as k}from"./Dv1mzSl-.js";import{i as o}from"./OlYXjGCK.js";import{l as F}from"./D7YMvfqk.js";import{d as H,k as s,r as d,L as G,o as P,W as M,F as Z,z as j,D as R,A as m,C as r,S as c,ac as b,G as X,_ as Y}from"./BkRx7U8b.js";import"./eRs2tlcG.js";import"./ClLpnmyR.js";import"./BTMT_sH9.js";import"./KQEr41HO.js";import"./D4lI5vpz.js";import"./OAVrZOa6.js";import"./Wv4Ty0OG.js";import"./D4b9WN8K.js";import"./CVx03s7S.js";import"./rEnmFtaA.js";import"./BnD3zOT9.js";import"./312NxIbt.js";import"./Bpi429LP.js";import"./DFTH32ee.js";import"./CTpy3bpH.js";import"./B4rpyJsK.js";import"./BtH6r1li.js";import"./QwGUwJAP.js";import"./BoZA8JgY.js";import"./Cpj98o6Y.js";import"./DG6QdPnO.js";import"./B3Wmi0DA.js";import"./CtlMGvom.js";import"./CxKYomUj.js";import"./CJzlme9J.js";import"./CcuCSIbb.js";import"./Gl1UmUM-.js";import"./CV0dHcg-.js";import"./CaAbksje.js";import"./CNkvSXuu.js";const q={class:"preview"},J=["src"],K={class:"dimension"},Q={class:"position"},ee=H({__name:"InsertImage",props:{model:{},blob:{}},emits:["close","refresh"],setup(C,{emit:E}){const{t:l}=$(),N=E,v=C,h=s(()=>v.model.app.currentDisplay!==void 0),y=d(o(0,0)),u=d(),p=d(!0),f=d(!1),w=d(S.CENTER),i=G({position:o(0,0),dimension:o(0,0),dimensionType:"px",resizeType:n.NEAREST_NEIGHBOR}),_=s(()=>p.value?y.value:i.dimension),U=s(()=>({type:"number",label:l("window.insert_image.width.label"),modelValue:g(i.dimension).x,"onUpdate:modelValue":e=>{let t=1;const a=g(o(e,0),!0).x;p.value&&(t=a/_.value.x),i.dimension=o(a,_.value.y*t)},placeholder:"Width",min:1,step:1})),V=s(()=>({type:"number",label:l("window.insert_image.height.label"),modelValue:g(i.dimension).y,"onUpdate:modelValue":e=>{let t=1;const a=g(o(0,e),!0).y;p.value&&(t=a/_.value.y),i.dimension=o(_.value.x*t,a)},placeholder:"Height",min:1,step:1})),x=s(()=>({label:l("window.insert_image.resize_type.label"),modelValue:i.resizeType,"onUpdate:modelValue":e=>{i.resizeType=e},options:[{label:l(`resize_type.${n.NEAREST_NEIGHBOR}`),value:n.NEAREST_NEIGHBOR},{label:l(`resize_type.${n.BICUBIC}`),value:n.BICUBIC},{label:l(`resize_type.${n.BILINEAR}`),value:n.BILINEAR},{label:l(`resize_type.${n.BICUBIC}`),value:n.BICUBIC},{label:l(`resize_type.${n.LANCZOS}`),value:n.LANCZOS}]}));function g(e,t=!1){return f.value?t?o(()=>e*y.value/100):o(()=>e/y.value*100):o(()=>Math.round(e))}const W=s(()=>({disabled:!h.value,label:l("window.insert_image.position_x.label"),modelValue:i.position.x||0,"onUpdate:modelValue":e=>{i.position=o(Number(e),i.position.y)},type:"number"})),z=s(()=>({disabled:!h.value,label:l("window.insert_image.position_y.label"),modelValue:i.position.y||0,"onUpdate:modelValue":e=>{i.position=o(i.position.x,Number(e))},type:"number"}));async function T(){const{data:e,width:t,height:a}=await k(v.blob);v.model.app.actions.insertImage({buffer:new Uint8ClampedArray(e),bufferDimension:o(t,a),position:i.position,dimension:i.dimension,type:i.resizeType,origin:w.value}),N("close")}return P(async()=>{u.value=URL.createObjectURL(v.blob);const e=await F(u.value);i.dimension=o(e.naturalWidth,e.naturalHeight),y.value=i.dimension}),M(()=>{u.value&&URL.revokeObjectURL(u.value)}),(e,t)=>(j(),Z(O,{class:"wb-disks-extras13-web-paint-insert-image",onSubmit:T},{default:R(()=>[m("div",q,[m("img",{src:u.value},null,8,J)]),m("div",K,[m("div",null,[r(I,c(b(U.value)),null,16),r(I,c(b(V.value)),null,16),r(A,c(b(x.value)),null,16)]),r(B,{type:"button","style-type":"primary",label:p.value?"R":"A",onClick:t[0]||(t[0]=a=>p.value=!p.value)},null,8,["label"]),r(B,{type:"button","style-type":"primary",label:f.value?"PX":"%",onClick:t[1]||(t[1]=a=>f.value=!f.value)},null,8,["label"])]),m("div",Q,[m("div",null,[r(I,c(b(W.value)),null,16),r(I,c(b(z.value)),null,16)]),m("div",null,[r(L,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=a=>w.value=a),"with-center":""},null,8,["modelValue"])])]),r(D,null,{default:R(()=>[r(B,{type:"submit","style-type":"primary",label:X(l)("window.insert_image.apply.label")},null,8,["label"])]),_:1})]),_:1}))}}),Fe=Y(ee,[["__scopeId","data-v-851183e0"]]);export{Fe as default};

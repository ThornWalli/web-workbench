import{W as l}from"./Dnkwg0NB.js";import{W as e}from"./Caob76XJ.js";import{W as s}from"./CnxF4DWy.js";import{W as a}from"./BvY_9a4j.js";import{W as o}from"./CCnhm4BD.js";import{u as t}from"./Dkhtr-D7.js";import{u}from"./D1WZfvAb.js";import{d as i}from"./BSzGBLGV.js";import{d as m,r,k as n,y as d,z as f,C as v,D as p,F as c,I as y,P as h,G as b,O as j}from"./BfpYGSxR.js";const I={class:"wb-module-files-open"};var W=(l=>(l.FILE="file",l.FOLDER="folder",l.BOTH="both",l))(W||{});const _=m({__name:"Open",props:{type:{},fsItem:{},model:{}},emits:["close"],setup(m,{emit:W}){var _,O,S,w;const{core:F}=u();if(!(null==(_=F.value)?void 0:_.modules.files))throw new Error("Files module not found");t();const P=m,g=W,k=r({...P.model,path:(null==(O=P.model)?void 0:O.path)||P.fsItem.getPath()}),C="Cancel",E="Open",x=n(()=>({label:null,placeholder:"Pathâ€¦",modelValue:k.value.path})),D=n(()=>({name:"path",modelValue:k.value.path,"onUpdate:model-value":l=>{k.value.path=l},onSelect:onSelect})),L=r(P.fsItem||(null==(w=null==(S=F.value)?void 0:S.modules.files)?void 0:w.fs.root)),V=n(()=>L.value instanceof i),z=n(()=>{const l=P.type||"file";return"both"===l||!V.value&&["file"].includes(l)||V.value&&["folder"].includes(l)}),B=n(()=>{var l,e,s;return P.fsItem?P.fsItem:(null==(e=null==(l=F.value)?void 0:l.modules.files)?void 0:e.fs.root)?null==(s=F.value)?void 0:s.modules.files.fs.root:null}),onSelect=l=>{L.value=j(l),l instanceof i&&(k.value.path=l.getPath())},onClickCancel=()=>{g("close")},onSubmit=()=>{g("close",k.value.path)};return(t,u)=>(f(),d("div",I,[v(l,{onSubmit:onSubmit},{default:p(()=>{var l,t,u;return[v(o,h(x.value,{readonly:""}),null,16),(null==(t=null==(l=b(F))?void 0:l.modules.files)?void 0:t.fileSystem)?(f(),c(a,h({key:0},D.value,{"file-system":null==(u=b(F))?void 0:u.modules.files.fileSystem,"fs-item":B.value}),null,16,["file-system","fs-item"])):y("",!0),v(s,{align:"outer",full:""},{default:p(()=>[v(e,{"style-type":"secondary",label:C,onClick:onClickCancel},null,8,["label"]),v(e,{"style-type":"primary",label:E,type:"submit",disabled:!z.value},null,8,["label","disabled"])]),_:1})]}),_:1})]))}});export{W as S,_};

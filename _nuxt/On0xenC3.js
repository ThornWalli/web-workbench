var v=Object.defineProperty;var f=(h,e,t)=>e in h?v(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var i=(h,e,t)=>f(h,typeof e!="symbol"?e+"":e,t);import{n as o}from"./CZZPvNTk.js";import{K as s}from"./B2exwp0w.js";import{s as a}from"./djI3_XgP.js";import{a as n,f as A}from"./BE-N3i2n.js";class l{constructor(){i(this,"observers",new Map);i(this,"capsLockActive",!1);i(this,"shiftLeftActive",!1);i(this,"shiftRightActive",!1);i(this,"cmdLeftActive",!1);i(this,"cmdRightActive",!1);i(this,"altLeftActive",!1);i(this,"altRightActive",!1);i(this,"pointerActive",!1);i(this,"pointerDown");i(this,"pointerUp");i(this,"pointerMove");i(this,"pointerCancel");i(this,"keyDown");i(this,"keyUp");i(this,"keyPress");i(this,"resize");var e,t,r,p;this.resize=this.get("resize",window).pipe(a()),this.pointerDown=this.get("pointerdown").pipe(n(c=>o(c))).pipe(a()),this.pointerUp=this.get("pointerup").pipe(n(c=>o(c))).pipe(a()),this.pointerMove=this.get("pointermove").pipe(n(c=>o(c))).pipe(a()),this.pointerCancel=this.get("pointercancel").pipe(n(c=>o(c)),a()),(e=this.pointerDown)==null||e.subscribe(()=>{this.pointerActive=!0}),(t=this.pointerUp)==null||t.subscribe(()=>{this.pointerActive=!1}),this.keyPress=this.get("keypress").pipe(a()),this.keyDown=this.get("keydown").pipe(a()),this.keyUp=this.get("keyup").pipe(a()),(r=this.keyDown)==null||r.subscribe(({code:c})=>{switch(c){case s.META_LEFT:this.cmdLeftActive=!0;break;case s.CONTEXT_MENU:this.cmdRightActive=!0;break;case s.SHIFT_LEFT:this.shiftLeftActive=!0;break;case s.SHIFT_RIGHT:this.shiftRightActive=!0;break;case s.ALT_LEFT:this.altLeftActive=!0;break;case s.ALT_RIGHT:this.altRightActive=!0;break;case s.CAPS_LOCK:this.capsLockActive=!this.capsLockActive;break}}),(p=this.keyUp)==null||p.subscribe(({code:c})=>{switch(c){case s.META_LEFT:this.cmdLeftActive=!1;break;case s.CONTEXT_MENU:this.cmdRightActive=!1;break;case s.SHIFT_LEFT:this.shiftLeftActive=!1;break;case s.SHIFT_RIGHT:this.shiftRightActive=!1;break;case s.ALT_LEFT:this.altLeftActive=!1;break;case s.ALT_RIGHT:this.altRightActive=!1;break}})}get(e,t){t=t||document,this.observers.has(t)||this.observers.set(t,new Map);const r=this.observers.get(t);if(r&&!r.has(e)){const p={passive:!0,capture:!1};r.set(e,A(t,e,p))}return r.get(e)}reset(){this.observers.clear()}get cmdActive(){return this.cmdLeftActive||this.cmdRightActive}get altActive(){return this.altLeftActive||this.altRightActive}get shiftActive(){return this.shiftLeftActive||this.shiftRightActive}resolveHotKey(e,t){const r=typeof t=="string"?t:t.code;return![e.shift?this.shiftActive:!0,e.alt?this.altActive:!0,e.cmd?this.cmdActive:!0,e.caps?this.capsLockActive:!0,e.code?(e==null?void 0:e.code)===r:!0].includes(!1)}}const T=new l;export{T as d};

import{W as L}from"./zN_i5VNN.js";import{W as b}from"./lhdRl-LK.js";import{W as M}from"./CEj5Oeuu.js";import{W as z}from"./B3UFr1jH.js";import{W as h}from"./5shrcVAo.js";import{p as D,k as E}from"./ZHhSaUdj.js";import{u as R}from"./jI0uH-Zs.js";import{d as U,r as _,O as i,k as o,o as $,y as G,z as J,C as a,D as y,P as F,G as N,S as O,ac as T,_ as j}from"./Bx1Gqxs7.js";import"./BDdocYin.js";import"./B4u0sjAe.js";import"./CpIyErmU.js";import"./RAasLaaH.js";import"./D4lI5vpz.js";import"./DdQrQ7-5.js";import"./6C4StZv5.js";import"./DNvW6rqi.js";import"./6jpuwjT2.js";import"./A4CL5M2A.js";const q={class:"wb-module-files-save"},A=U({__name:"Save",props:{fsItem:{},id:{},model:{}},emits:["close"],setup(W,{emit:S}){var f,d,p;const{core:s}=R();if(!((f=s.value)!=null&&f.modules.files))throw new Error("Files module not found");const t=W,m=S,l=_({path:"",filename:"",file:null,...t.model}),u=((d=s.value)==null?void 0:d.modules.files)&&i((p=s.value)==null?void 0:p.modules.files),c={cancel:"Cancel",save:"Save"},k=o(()=>({hideLabel:!0,label:"Path",placeholder:"Path…",modelValue:l.value.path})),C=o(()=>({hideLabel:!0,label:"Filename",placeholder:"Filename…",modelValue:l.value.filename,"onUpdate:model-value":e=>{l.value.filename=e}})),P=o(()=>({name:"path",modelValue:l.value.path,"onUpdate:model-value":e=>{l.value.path=e},onSelect:B})),r=_(t.fsItem||i(u.fs.root)),w=o(()=>{var e,n,v;return t.fsItem?t.fsItem:(n=(e=s.value)==null?void 0:e.modules.files)!=null&&n.fs.root?(v=s.value)==null?void 0:v.modules.files.fs.root:null}),x=o(()=>r.value?r.value.locked:!1),g=o(()=>!l.value.filename),B=e=>{r.value=i(e),e instanceof E?l.value.path=e.getPath():e.name&&(l.value.filename=e.name)};$(()=>{t.id&&(l.value.filename=t.id)});const I=()=>{m("close")},V=()=>{const e=D(l.value.path,l.value.filename);m("close",e)};return(e,n)=>(J(),G("div",q,[a(L,{onSubmit:V},{default:y(()=>[a(h,F(k.value,{readonly:""}),null,16),a(z,F(P.value,{"file-system":N(u).fileSystem,"fs-item":w.value}),null,16,["file-system","fs-item"]),a(h,O(T(C.value)),null,16),a(M,{align:"outer",full:""},{default:y(()=>[a(b,{"style-type":"secondary",label:c.cancel,onClick:I},null,8,["label"]),a(b,{"style-type":"primary",label:c.save,type:"submit",disabled:x.value||g.value},null,8,["label","disabled"])]),_:1})]),_:1})]))}}),fe=j(A,[["__scopeId","data-v-5b90e1c7"]]);export{fe as default};

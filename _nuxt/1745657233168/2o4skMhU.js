function ot(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function Ut(e,t){const{x:r,y:n,z:o}=t,{x:i,y:s,z:u,w:l}=e,c=l*r+s*o-u*n,f=l*n+u*r-i*o,y=l*o+i*n-s*r,d=-i*r-s*n-u*o,a=c*l+d*-i+f*-u-y*-s,m=f*l+d*-s+y*-i-c*-u,h=y*l+d*-u+c*-s-f*-i;return new t.constructor(a,m,h)}const dt=Math.PI,ht=Math.PI*2;function Y(e){let t=e%ht;return t<-dt?t+=ht:t>dt&&(t-=ht),t}function tr(e){return e>-1?e<1?Math.acos(e):0:dt}function rr(e,[t,r,n]){const[o,i,s]=e;return new e.constructor(new o.constructor(o.x*t.x+i.x*t.y+s.x*t.z,o.y*t.x+i.y*t.y+s.y*t.z,o.z*t.x+i.z*t.y+s.z*t.z),new o.constructor(o.x*r.x+i.x*r.y+s.x*r.z,o.y*r.x+i.y*r.y+s.y*r.z,o.z*r.x+i.z*r.y+s.z*r.z),new o.constructor(o.x*n.x+i.x*n.y+s.x*n.z,o.y*n.x+i.y*n.y+s.y*n.z,o.z*n.x+i.z*n.y+s.z*n.z))}function er(e,{x:t,y:r,z:n}){const[o,i,s]=e;return new o.constructor(o.x*t+i.x*r+s.x*n,o.y*t+i.y*r+s.y*n,o.z*t+i.z*r+s.z*n)}function nr(e,[t,r,n]){return new e.constructor(e.dot(t),e.dot(r),e.dot(n))}function P(e){return typeof e=="number"||(e==null?void 0:e.constructor)===Number}const or=e=>{try{D(e),Q(e,4)}catch(t){console.error("error while hijackDOMPoint"),console.error(t)}},G=0,Ot=1,_t=2,At=3,tt=9999999999999,rt=void 0,Xt=Symbol("vector length"),it=Symbol("get source"),Nt=Symbol("checked");let S=rt,A,J;const ir=[0,1,2,6,24,120,720,5760,51840,518400,5702400,68428800,889574400,12454041600,186810624e3],mt=[];let E=-1,at=!1;const Z=[];function ft(e,t,r){S=e,E=-1,J=1;const n=t(r);if(!P(n))throw new Error(`
      your assigned progress did not not return a primitive!
      calc() does not support logical operators (|| && ==) directly

      instead of calc(() => v1 || v2);
      use        calc(() => +v1 || +v2);

      instead of calc(() => v1);
      use        calc(v1);
      `);return n}function et(e){const t=e[it];return t?t(e).length:e[Xt]||3}function sr(e,t){return et(e)>et(t)?e:t}function cr(e,t){if(J+=1,t===tt)return J;if(t>=et(e))return 0;const r=e[it];if(r)return 1*r(e)[t];if(t===G)return 1*e.x;if(t===Ot)return 1*e.y;if(t===_t)return 1*e.z;if(t===At)return 1*e.w}function It(e,t,r){const n=e[it];if(n){n(e)[t]=r;return}if(t===G){e.x=r;return}if(t===Ot){e.y=r;return}t===_t&&(e.z=r),t===At&&(e.w=r)}function H(e,t=void 0){if(typeof e!="function")throw new Error("no function assigned");if(S!==rt)throw new Error("something wrong, do you use calc() inside calc?");try{const r=typeof t>"u",n=typeof t=="function",o=!n&&!r?t:void 0,i=ft(G,e,o);if(r&&typeof A>"u")return i;const s=A?et(A):0;if(s===tt){if(!e[Nt]){const f=ft(tt,e),y=ir[J];if(Math.abs(f-y)>Number.EPSILON)throw new Error(`
            algebraic multiplication works only in calls with *

            calc(() => v * m);
            calc(() => m * v);
            calc(() => m * m);
            calc(() => m * m * v);

            `);e[Nt]=!0}let c=mt[0];for(let f=1;f<J-1;f+=1){const y=mt[f];if(!c.multiply)throw new Error(`cannot find method multiply() on ${c}`);c=c.multiply(y)}return c}let u=n?t.length:s;if(u||(u=s),u<s)throw new Error("Your assigned result Vector cant use higher space Operands than it has");const l=new Array(u);l[0]=i,o&&It(o,S,l[0]);for(let c=1;c<u;c+=1){const f=ft(c,e,o);l[c]=f,o&&It(o,S,f)}return r?new A.constructor(...l):n?t(...l):o}finally{S=rt,A=void 0}}function D(e,t){const r=e.prototype;r[it]=t;const n=r[Symbol.toPrimitive]||function(o){return o==="string"?this.toString():this.valueOf()};r[Symbol.toPrimitive]=function(o){return S===G&&(A=A?sr(A,this):this,mt[J-1]=this),S===rt?n.call(this,o):cr(this,S)}}function Pt(e){return function(...t){if(S===G){if(at)return e.apply(this,t);try{at=!0,E+=1;const r=e.apply(this,t);return Z[E]=r,r}finally{at=!1}}return S===Ot||S===_t||S===At?(E+=1,Z[E]):e.apply(this,t)}}function w(e,t){const r=e.prototype,n=r[t];r[t]=Pt(n)}function st(e,t){const r=e.prototype,n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(r,t,{get:Pt(function(){return n.get.call(this)})})}function Q(e,t){const r=e.prototype;Object.defineProperty(r,Xt,{value:t})}function Yt(e){Q(e,tt)}function ct(e){return Pt(e)}typeof DOMPoint<"u"&&or(DOMPoint);function ur(e){let t="";return e&&(t=`${e}-`),t}function L(e,t,r={}){const n=ur(e);return Object.entries(t).forEach(([o,i])=>{r[`--${n}${o}`]=i}),r}const wt=0,bt=1,x=Symbol("axes");function lr(e,t,r,n){const o=Math.atan2(e,t),i=Math.atan2(r,n);return Y(o-i)}function $t(e){return e*e}class z{constructor(...t){typeof t[0]=="function"?H(t[0],(r,n)=>{this[x]=[r,n]}):ot(t[0])?this[x]=[...t[0]]:t[0]&&P(t[0].x)?this[x]=[t[0].x||0,t[0].y||0]:this[x]=[t[0]||0,t[1]||0]}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}normalize(){const{length:t}=this;return new this.constructor(this.x/t,this.y/t)}norm(){return this.normalize()}dot(t){return this.x*t.x+this.y*t.y}getRad(){return Y(Math.atan2(this.y,this.x))}angleTo(t){return lr(this.y,this.x,t.y,t.x)}rotate(t){const r=Math.sin(t),n=Math.cos(t),o=this.x*n-this.y*r,i=this.x*r+this.y*n;return new this.constructor(o,i)}distance(t){return Math.sqrt($t(this.x-t.x)+$t(this.y-t.y))}dist(t){return this.distance(t)}toArray(){return[this.x,this.y]}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y}toJSON(){return{x:this.x,y:this.y}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r={}){return L(t,this.toJSON(),r)}get lengthSq(){return this.dot(this)}get length(){return Math.sqrt(this.lengthSq)}get lensq(){return this.lengthSq}get len(){return this.length}get x(){return this[x][wt]}set x(t){throw new Error("set x() not implemented")}get y(){return this[x][bt]}set y(t){throw new Error("set y() not implemented")}get z(){throw new Error("get z() not implemented")}set z(t){throw new Error("set z() not implemented")}[Symbol.iterator](){return this[x].values()}}D(z);Q(z,2);w(z,"dot");w(z,"angleTo");w(z,"distance");w(z,"toArray");w(z,"getRad");st(z,"length");st(z,"lengthSq");class ut extends z{set x(t){this[x][wt]=t}set y(t){this[x][bt]=t}get x(){return this[x][wt]}get y(){return this[x][bt]}calc(t){return H(t,this)}clone(){return new ut(this.x,this.y)}}class X extends z{toPoint(){return new ut(this.x,this.y)}}const hr=ct((e,t)=>new ut(e,t)),Yr=(e,t)=>hr(e,t),ar=ct((e,t)=>new X(e,t)),Vt=(e,t)=>ar(e,t);Vt(0,0);Vt(0,-1);Vt(-1,0);const I=0,$=1,R=2,p=Symbol("axes");function yt(e){return e*e}class b{constructor(...t){typeof t[0]=="function"?H(t[0],(r,n,o)=>{this[p]=[r,n,o]}):ot(t[0])?this[p]=[...t[0]]:t[0]&&P(t[0].x)?this[p]=[t[0].x||0,t[0].y||0,t[0].z||0]:this[p]=[t[0]||0,t[1]||0,t[2]||0]}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}normalize(){const{length:t}=this;return new this.constructor(this.x/t,this.y/t,this.z/t)}norm(){return this.normalize()}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new this.constructor(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}crossNormalize(t){const r=this.cross(t),{length:n}=r;return r[p][I]/=n,r[p][$]/=n,r[p][R]/=n,r}cn(t){return this.crossNormalize(t)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length)}}angleTo(t){return Y(tr(this.dot(t)/(this.length*t.length)))}multiply(t){return t.x===void 0?this.multiplyMat3(t):t.w===void 0?this.multiplyVec3(t):Ut(t,this)}multiplyMat3(t){return nr(this,t)}multiplyVec3({x:t,y:r,z:n}){return new this.constructor(this.x*t,this.y*r,this.z*n)}distance(t){return Math.sqrt(yt(this.x-t.x)+yt(this.y-t.y)+yt(this.z-t.z))}dist(t){return this.distance(t)}toArray(){return[this.x,this.y,this.z]}swizzle(t){const r=t.split("").map(n=>this[n]);return r.length===2?new X(r[0],r[1]):new this.constructor(r[0],r[1],r[2])}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}toJSON(){return{x:this.x,y:this.y,z:this.z}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r={}){return L(t,this.toJSON(),r)}get lengthSq(){return this.dot(this)}set lengthSq(t){throw new Error("set lengthSq() not implemented")}get length(){return Math.sqrt(this.lengthSq)}set length(t){throw new Error("set length() not implemented")}get lensq(){return this.lengthSq}set lensq(t){throw new Error("set lensq() not implemented")}get len(){return this.length}set len(t){throw new Error("set len() not implemented")}get x(){return this[p][I]}set x(t){throw new Error("set x() not implemented")}get y(){return this[p][$]}set y(t){throw new Error("set y() not implemented")}get z(){return this[p][R]}set z(t){throw new Error("set z() not implemented")}get xy(){return new X(this[p][I],this[p][$])}set xy(t){throw new Error("set xz() not implemented")}get xz(){return new X(this[p][I],this[p][R])}set xz(t){throw new Error("set xz() not implemented")}get yz(){return new X(this[p][$],this[p][R])}set yz(t){throw new Error("set yz() not implemented")}[Symbol.iterator](){return this[p].values()}}D(b);Q(b,3);w(b,"dot");w(b,"cross");w(b,"crossNormalize");w(b,"toAngles");w(b,"angleTo");w(b,"rotate");w(b,"distance");w(b,"toArray");st(b,"length");st(b,"lengthSq");class Mt extends b{set x(t){this[p][I]=t}set y(t){this[p][$]=t}set z(t){this[p][R]=t}get x(){return this[p][I]}get y(){return this[p][$]}get z(){return this[p][R]}calc(t){return H(t,this)}clone(){return new Mt(this.x,this.y,this.z)}}class fr extends b{toVector(){return new Mt(this.x,this.y,this.z)}clone(){return this}}const yr=ct((e,t,r)=>new fr(e,t,r)),V=(e,t,r)=>yr(e,t,r);V(0,0,0);const Gt=V(0,0,-1);V(0,0,1);const qt=V(-1,0,0);V(1,0,0);const Ht=V(0,1,0);V(0,-1,0);V(1,1,1);const O=Symbol("angle rad"),Qt=Math.PI/180;class k{constructor(t){t instanceof k?this[O]=t[O]:this[O]=Y(t*Qt)}valueOf(){return this[O]}toJSON(){return{angle:this[O]}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r={}){return L(t,this.toJSON(),r)}}class Lt extends k{set(t){t instanceof k?this[O]=t[O]:this[O]=Y((t||0)*Qt)}}class pr extends k{toDegree(){return new Lt(this[O])}}new pr(0);function dr(e){return new Lt(e)}function mr(e){return P(e)||e instanceof k}const q=0,C=1,T=2,j=3,N=Symbol("axes"),wr=Symbol("forward cache"),br=Symbol("left cache"),gr=Symbol("up cache"),Sr=Symbol("inverse cache");function xr([e,t,r,n]){return Math.sqrt(e*e+t*t+r*r+n*n)}function zr(e){const t=xr(e);e[q]/=t,e[C]/=t,e[T]/=t,e[j]/=t}function vr(e,t){const r=e.normalize(),n=t.crossNormalize(r),o=r.crossNormalize(n),i=n.x,s=n.y,u=n.z,l=o.x,c=o.y,f=o.z,y=r.x,d=r.y,a=r.z,m=i+c+a,h=new Array(4);if(m>0){let g=Math.sqrt(m+1);return h[j]=g*.5,g=.5/g,h[q]=(f-d)*g,h[C]=(y-u)*g,h[T]=(s-l)*g,h}if(i>=c&&i>=a){const g=Math.sqrt(1+i-c-a),M=.5/g;return h[q]=.5*g,h[C]=(s+l)*M,h[T]=(u+y)*M,h[j]=(f-d)*M,h}if(c>a){const g=Math.sqrt(1+c-i-a),M=.5/g;return h[q]=(l+s)*M,h[C]=.5*g,h[T]=(d+f)*M,h[j]=(y-u)*M,h}const W=Math.sqrt(1+a-i-c),F=.5/W;return h[q]=(y+u)*F,h[C]=(d+f)*F,h[T]=.5*W,h[j]=(s-l)*F,h}function Er(e,t){const r=new Array(4),n=t*.5,o=Math.sin(n),i=Math.cos(n);return r[q]=o*e.x,r[C]=o*e.y,r[T]=o*e.z,r[j]=i,r}function gt(e,t,r,n){if(P(e))return[e,t,r,n];if(ot(e))return[...e];if(mr(t))return Er(e,t);if(e&&t)return vr(e,t)}function Or(e,t,r,n){return e&&P(e.w)?gt(e.x,e.y,e.z,e.w):gt(e,t,r,n)||[0,0,0,1]}class Ct{constructor(t,r,n,o){this[N]=Or(t,r,n,o),zr(this[N])}set(t,r,n,o){throw new Error("set x() not implemented")}multiply(t,r,n,o){if(P(t.w))return this.multiplyQuaternion(t);const i=gt(t,r,n,o);return i?this.multiplyQuaternion(new this.constructor(i)):this.multiplyVector(t)}multiplyVector(t){return Ut(this,t)}multiplyQuaternion(t){const r=this.x,n=this.y,o=this.z,i=this.w,s=t.x,u=t.y,l=t.z,c=t.w,f=i*s+r*c+n*l-o*u,y=i*u+n*c+o*s-r*l,d=i*l+o*c+r*u-n*s,a=i*c-r*s-n*u-o*l;return new this.constructor(f,y,d,a)}mul(t,r,n,o){return this.multiply(t,r,n,o)}get inverse(){const{x:t,y:r,z:n,w:o}=this;return this.constructor(t*-1,r*-1,n*-1,o)}get inv(){return this.inverse}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}get left(){return this.multiplyVector(qt)}get dir(){return this.multiplyVector(Gt)}get up(){return this.multiplyVector(Ht)}get 0(){return this.left}get 1(){return this.dir}get 2(){return this.up}get x(){return this[N][q]}set x(t){throw new Error("set x() not implemented")}get y(){return this[N][C]}set y(t){throw new Error("set y() not implemented")}get z(){return this[N][T]}set z(t){throw new Error("set z() not implemented")}get w(){return this[N][j]}set w(t){throw new Error("set w() not implemented")}toJSON(){const{x:t,y:r,z:n,w:o}=this;return{x:t,y:r,z:n,w:o,a1:1-r*r*2-n*n*2,a2:t*r*2-n*o*2,a3:t*n*2+r*o*2,b1:t*r*2+n*o*2,b2:1-t*t*2-n*n*2,b3:r*n*2-t*o*2,c1:t*n*2-r*o*2,c2:r*n*2+t*o*2,c3:1-t*t*2-r*r*2}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r={}){return L(t,this.toJSON(),r)}}D(Ct);Yt(Ct);function B(e,t,r){let n=e[t];return n||(n=r(),e[t]=n),n}class Wt extends Ct{get left(){return B(this,br,()=>this.multiplyVector(qt))}get dir(){return B(this,wr,()=>this.multiplyVector(Gt))}get up(){return B(this,gr,()=>this.multiplyVector(Ht))}get inverse(){return B(this,Sr,()=>{const{x:t,y:r,z:n,w:o}=this;return this.constructor(t*-1,r*-1,n*-1,o)})}}const _r=ct((e,t,r,n)=>new Wt(e,t,r,n)),Ar=(e,t,r,n)=>_r(e,t,r,n);new Wt(qt,dr(90));Ar(0,0,0,1);const Pr=0,Vr=1,Mr=2,qr=3,v=Symbol("axes");class Tt{constructor(t,r,n,o){typeof t=="function"?H(t,(i,s,u,l)=>{this[v]=[i,s,u,l]}):ot(t)?this[v]=[...t]:t&&P(t.x)?this[v]=[t.x||0,t.y||0,t.z||0,t.w||0]:this[v]=[t||0,r||0,n||0,o||0]}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}valueOf(){throw new Error("valueOf() not implemented, looks like you try to calculate outside of calc")}toArray(){return[this.x,this.y,this.z,this.w]}calc(t){throw new Error("calc() not implemented")}clone(){throw new Error("clone() not implemented")}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}toJSON(){return{x:this.x,y:this.y,z:this.z,w:this.w}}toString(){return JSON.stringify(this.toJSON())}toCSSVars(t,r={}){return L(t,this.toJSON(),r)}get x(){return this[v][Pr]}set x(t){throw new Error("set x() not implemented")}get y(){return this[v][Vr]}set y(t){throw new Error("set y() not implemented")}get z(){return this[v][Mr]}set z(t){throw new Error("set z() not implemented")}get w(){return this[v][qr]}set w(t){throw new Error("set w() not implemented")}[Symbol.iterator](){return this[v].values()}}D(Tt);Q(Tt,4);w(Tt,"toArray");const U=Symbol("data");class lt{constructor(...t){this[U]=t}get 0(){return this[U][0]}set 0(t){throw new Error("set [0] not implemented")}get 1(){return this[U][1]}set 1(t){throw new Error("set [1] not implemented")}get 2(){return this[U][2]}set 2(t){throw new Error("set [2] not implemented")}multiplyMat(t){return rr(this,t)}multiplyVec(t){return er(this,t)}multiply(t){if(t instanceof lt)return this.multiplyMat(t);const{x:r,y:n,z:o}=t;if(r===void 0||n===void 0||o===void 0)throw new Error(`multiply only works with mat3 and vec3, not supported ${t}`);return this.multiplyVec(t)}[Symbol.iterator](){return this[U].values()}}D(lt);Yt(lt);var St=function(e,t){return St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},St(e,t)};function Zt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");St(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Rt=function(){return Rt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Rt.apply(this,arguments)};function Gr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Hr(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function Qr(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(f){try{c(n.next(f))}catch(y){s(y)}}function l(f){try{c(n.throw(f))}catch(y){s(y)}}function c(f){f.done?i(f.value):o(f.value).then(u,l)}c((n=n.apply(e,t||[])).next())})}function Lr(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],o=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function nt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function zt(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function vt(e){return this instanceof vt?(this.v=e,this):new vt(e)}function Wr(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(a){return function(m){return Promise.resolve(m).then(a,y)}}function u(a,m){n[a]&&(o[a]=function(h){return new Promise(function(W,F){i.push([a,h,W,F])>1||l(a,h)})},m&&(o[a]=m(o[a])))}function l(a,m){try{c(n[a](m))}catch(h){d(i[0][3],h)}}function c(a){a.value instanceof vt?Promise.resolve(a.value.v).then(f,y):d(i[0][2],a)}function f(a){l("next",a)}function y(a){l("throw",a)}function d(a,m){a(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Zr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof nt=="function"?nt(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(u,l){s=e[i](s),o(u,l,s.done,s.value)})}}function o(i,s,u,l){Promise.resolve(l).then(function(c){i({value:c,done:u})},s)}}function _(e){return typeof e=="function"}function Cr(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var pt=Cr(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Jt(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var jt=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var u=nt(s),l=u.next();!l.done;l=u.next()){var c=l.value;c.remove(this)}}catch(h){t={error:h}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}else s.remove(this);var f=this.initialTeardown;if(_(f))try{f()}catch(h){i=h instanceof pt?h.errors:[h]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var d=nt(y),a=d.next();!a.done;a=d.next()){var m=a.value;try{kt(m)}catch(h){i=i??[],h instanceof pt?i=zt(zt([],xt(i)),xt(h.errors)):i.push(h)}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}if(i)throw new pt(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)kt(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Jt(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&Jt(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Br=jt.EMPTY;function Bt(e){return e instanceof jt||e&&"closed"in e&&_(e.remove)&&_(e.add)&&_(e.unsubscribe)}function kt(e){_(e)?e():e.unsubscribe()}var Tr={Promise:void 0},jr={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,zt([e,t],xt(r)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Nr(e){jr.setTimeout(function(){throw e})}function Dt(){}function Ir(e){e()}var Kt=function(e){Zt(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Bt(r)&&r.add(n)):n.destination=Jr,n}return t.create=function(r,n,o){return new Et(r,n,o)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(jt),$r=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){K(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){K(n)}else K(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){K(r)}},e}(),Et=function(e){Zt(t,e);function t(r,n,o){var i=e.call(this)||this,s;return _(r)||!r?s={next:r??void 0,error:n??void 0,complete:o??void 0}:s=r,i.destination=new $r(s),i}return t}(Kt);function K(e){Nr(e)}function Rr(e){throw e}var Jr={closed:!0,next:Dt,error:Rr,complete:Dt},kr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Dr(e){return e}function Fr(e){return e.length===0?Dr:e.length===1?e[0]:function(r){return e.reduce(function(n,o){return o(n)},r)}}var Kr=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var o=this,i=Xr(t)?t:new Et(t,r,n);return Ir(function(){var s=o,u=s.operator,l=s.source;i.add(u?u.call(i,l):l?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=Ft(r),new r(function(o,i){var s=new Et({next:function(u){try{t(u)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[kr]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fr(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=Ft(t),new t(function(n,o){var i;r.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},e.create=function(t){return new e(t)},e}();function Ft(e){var t;return(t=e??Tr.Promise)!==null&&t!==void 0?t:Promise}function Ur(e){return e&&_(e.next)&&_(e.error)&&_(e.complete)}function Xr(e){return e&&e instanceof Kt||Ur(e)&&Bt(e)}export{Br as E,X as I,Kr as O,ut as P,jt as S,Zt as _,Jt as a,nt as b,Cr as c,Dr as d,Ir as e,_ as f,Gr as g,Rt as h,Vt as i,zt as j,xt as k,kr as l,Wr as m,Lr as n,H as o,Yr as p,vt as q,Nr as r,Qr as s,Zr as t,Kt as u,Et as v,Hr as w,Dt as x};

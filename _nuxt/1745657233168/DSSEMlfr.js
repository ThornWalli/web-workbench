var l=Object.defineProperty;var d=t=>{throw TypeError(t)};var u=(t,e,r)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var a=(t,e,r)=>u(t,typeof e!="symbol"?e+"":e,r),S=(t,e,r)=>e.has(t)||d("Cannot "+r);var o=(t,e,r)=>(S(t,e,"read from private field"),r?r.call(t):e.get(t)),c=(t,e,r)=>e.has(t)?d("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);class i{constructor(e){a(this,"id");a(this,"_locked",!1);a(this,"storage");a(this,"name");a(this,"_data",[]);this.id=e.id,this._locked=e.locked||this._locked,this.storage=e.storage,this.name=e.name}get locked(){return this._locked}get data(){return this._data}set data(e){this._data=e}async mount(...e){return this}async unmount(...e){return this}getItem(e){throw new Error("not implemented")}setItem(e,r){throw new Error("not implemented")}async load(){if(!this.storage)throw new Error("no storage");return this._data}async save(e){if(!this.storage)throw new Error("no storage");return this._data=e||this._data,this._data}}class n{isLogged(){throw new Error("Method not implemented.")}getItem(e){throw new Error("Method not implemented.")}setItem(e,r){throw new Error("Method not implemented.")}removeItem(e){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}}var s;class w extends n{constructor(){super(...arguments);c(this,s,new Map)}isLogged(){return!0}getItem(r){return o(this,s).get(r)||null}setItem(r,g){o(this,s).set(r,g)}removeItem(r){o(this,s).delete(r)}clear(){o(this,s).clear()}}s=new WeakMap;class h extends i{constructor(e){super({...e,storage:new w})}}class I extends n{isLogged(){return!0}getItem(e){return localStorage.getItem(e)}setItem(e,r){localStorage.setItem(e,JSON.stringify(r))}removeItem(e){localStorage.removeItem(e)}clear(){localStorage.clear()}}class m extends i{async mount(){let e;if(this.storage instanceof i){const r=this.storage;try{if(e=r.getItem(this.name),e){if(e=JSON.parse(e),!e||!(e instanceof Object))throw new Error("json invalid")}else throw new Error("json invalid")}catch(g){console.error(g),e={}}this.storage.setItem(this.name,e)}return this}async load(){return this.storage&&this.storage instanceof n&&(this.data=JSON.parse(this.storage.getItem(this.name)||"[]")),this.data}async save(e){return this.storage&&this.storage instanceof n&&(this.data=e||this.data,this.storage.setItem(this.name,this.data)),this.data}}class p extends m{constructor(e){super({...e,storage:new I})}}class f extends n{isLogged(){return!0}getItem(e){return sessionStorage.getItem(e)}setItem(e,r){sessionStorage.setItem(e,JSON.stringify(r))}removeItem(e){sessionStorage.removeItem(e)}clear(){sessionStorage.clear()}}class y extends m{constructor(e){super({...e,storage:new f})}}class O extends i{constructor(e){super({...e})}isLogged(){throw new Error("Not implemented")}}var v=(t=>(t[t.NONE=0]="NONE",t[t.AUTO=1]="AUTO",t[t.TEMP=3]="TEMP",t[t.LOCAL=4]="LOCAL",t[t.SESSION=5]="SESSION",t[t.CLOUD=6]="CLOUD",t))(v||{});function N(t){switch(t){case 3:return h;case 4:return p;case 5:return y;case 6:return O;default:return h}}export{O as C,n as S,v as T,h as a,N as g};

var G=Object.defineProperty;var J=(t,n,e)=>n in t?G(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var h=(t,n,e)=>J(t,typeof n!="symbol"?n+"":n,e);import{M as Q}from"./viZ09Zwr.js";import{C as T,u as Z,d as ee,M as E}from"./DDYNGWqS.js";import{A as te}from"./D5ZRmSpd.js";import{u as ne}from"./Coby9kZn.js";import{d as z,r as R,a as re,j as V,t as w,v as g,z as A,D as B,_ as $,x as y,F as M,W as oe,A as ae,C as P,T as X,I as _}from"./JDFt9gvC.js";import{b as N,a as Y}from"./BLNG6mv2.js";import{c as ie}from"./B-WQSEZc.js";import{O as se,d as U,i as le}from"./2o4skMhU.js";import{d as pe,A as a}from"./CiKic5u-.js";import{h as F}from"./DhoRlVJU.js";import{W as ce}from"./BBiZ8jOH.js";import{W as j}from"./CNA4gcoN.js";import{W as me}from"./DdPQDu4V.js";import{W as ue}from"./Dnf49bBg.js";import{a as de}from"./BTKCLhcY.js";import{a as fe}from"./ey0azPGz.js";import{p as ge,a as ve,f as K}from"./ydsEyD-B.js";import{b as be,e as he}from"./C59C2sh_.js";import{c as ye}from"./DNGU8wv-.js";import"./C6aID195.js";import"./C5mdboMC.js";import"./DSSEMlfr.js";import"./CNkvSXuu.js";import"./BY0KaPQX.js";import"./CGk7t0fz.js";import"./DqSaF2M6.js";import"./DRFQJhI_.js";import"./ChPn0pbG.js";import"./BLa7cp7S.js";import"./Cxo2HVeK.js";import"./DlxYR4Yt.js";import"./CV0dHcg-.js";import"./Cpj98o6Y.js";import"./Cdp1pQ9Q.js";import"./Cb3nzVUd.js";import"./1qXVShGN.js";import"./CNtMeql4.js";import"./DlgZJE6Q.js";import"./CkllZCFh.js";import"./BmNMd0Sh.js";import"./cePB7ZwW.js";var we=Array.isArray,We=Object.getPrototypeOf,Se=Object.prototype,xe=Object.keys;function Ie(t){if(t.length===1){var n=t[0];if(we(n))return{args:n,keys:null};if(Ce(n)){var e=xe(n);return{args:e.map(function(r){return n[r]}),keys:e}}}return{args:t,keys:null}}function Ce(t){return t&&typeof t=="object"&&We(t)===Se}function Me(t,n){return t.reduce(function(e,r,o){return e[r]=n[o],e},{})}function Ae(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=ge(t),r=ve(t),o=Ie(t),i=o.args,s=o.keys;if(i.length===0)return K([],e);var p=new se(De(i,e,s?function(d){return Me(s,d)}:U));return r?p.pipe(be(r)):p}function De(t,n,e){return e===void 0&&(e=U),function(r){H(n,function(){for(var o=t.length,i=new Array(o),s=o,p=o,d=function(c){H(n,function(){var f=K(t[c],n),v=!1;f.subscribe(ye(r,function(W){i[c]=W,v||(v=!0,p--),p||r.next(e(i.slice()))},function(){--s||r.complete()}))},r)},l=0;l<o;l++)d(l)},r)}}function H(t,n,e){t?he(e,t,n):n()}class ke{constructor(n){h(this,"defaultItems",new T);h(this,"activeItems");h(this,"core");this.core=n,this.activeItems=this.defaultItems}addDefaultItems(n){this.defaultItems.add(n)}getActiveItems(){return this.activeItems}setActiveItems(n){return this.activeItems=n||this.defaultItems}}const Ve={class:"wb-module-core-info"},Le=z({__name:"Info",setup(t){Z();const{core:n}=ne(),e=R(re().versions),r=V(()=>{var o,i;return`# Web-Workbench 1.3
<nobr>Created by Thorn-Welf Walli</nobr><br>Email: lammpee@gmail.com<br>Homepage: [lammpee.de](https://lammpee.de)<br><br>Version: <strong>${(o=n.value)==null?void 0:o.version}</strong><br>Nuxt: <strong>${(i=e.value)==null?void 0:i.nuxt}</strong><br>Vue: <strong>${e.value.vue}</strong>`});return(o,i)=>(g(),w("div",Ve,[A(te,{content:B(r)},null,8,["content"])]))}}),Oe=$(Le,[["__scopeId","data-v-1593e9b8"]]),Fe=ee(({core:t})=>{const{windows:n}=t.modules;return[{order:0,title:"Web-Workbench",items:[{title:"Settings",action(){return t.executeCommand("openSettings")}},{type:E.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action(){n==null||n.addWindow({component:Oe,componentData:{},options:{title:"Info",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}})}},{type:E.SEPARATOR},{title:"Imprint",action(){return t.executeCommand('execute "Imprint.md"')}},{title:"Disclaimer",action(){return t.executeCommand('execute "Disclaimer.md"')}}]}]}),Te={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10",viewBox:"0.5 50.5 6 10"};function Be(t,n){return g(),w("svg",Te,n[0]||(n[0]=[y("path",{fill:"#020203",d:"M.5 50.5h6v2h-4v2h2v2h-2v4h-2z"},null,-1)]))}const Ne={render:Be},ze={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"};function $e(t,n){return g(),w("svg",ze,n[0]||(n[0]=[y("path",{d:"M0 10h6V8H2V6h2V4H2V2h4V0H0z"},null,-1)]))}const Ee={render:$e},Pe={class:"icon full"},_e={class:"icon empty"},Ye=z({__name:"StorageBar",props:{visible:{type:Boolean,default:!0},value:{type:Number,default:.8}},setup(t){const n=t,e=V(()=>({"--bar-height":Math.min(n.value,1)}));return(r,o)=>t.visible?(g(),w("div",{key:0,class:"wb-env-atom-storage-bar",style:oe(e.value)},[y("div",null,[y("div",Pe,[A(B(Ne))]),o[0]||(o[0]=y("span",{class:"size"},[y("span",{class:"helper"})],-1)),y("div",_e,[A(B(Ee))])])],4)):M("",!0)}}),je=$(Ye,[["__scopeId","data-v-3d4c6ce7"]]),He={class:"wb-env-molecule-dialog-content"},Re=["innerHTML"],Xe={key:1,class:"input"},Ue=z({__name:"DialogContent",props:{message:{type:String,default(){return"Dialog Message"}},confirm:{type:Boolean,default:!1},prompt:{type:Boolean,default:!1},promptType:{type:String,default:"text"},promptStep:{type:Number,default:void 0},promptValue:{type:String,default:""},password:{type:Boolean,default:!1},apply:{type:Function,default(){return null}},abort:{type:Function,default(){return null}},applyLabel:{type:String,default(){return"Continue"}},abortLabel:{type:String,default(){return"Cancel"}},yesLabel:{type:String,default(){return"Yes"}},noLabel:{type:String,default(){return"No"}}},emits:["apply","abort"],setup(t,{emit:n}){const e=t,r=n,o=R(e.promptValue),i=V(()=>e.password?"password":e.promptType),s=V(()=>e.message.replace(/\\n|\n/g,"<br>")),p=()=>{const l=o.value||!0;typeof e.apply=="function"?e.apply(l):r("apply",l)},d=()=>{typeof e.abort=="function"?e.abort():r("abort")};return(l,c)=>(g(),w("div",He,[y("div",null,[t.message?(g(),w("p",{key:0,innerHTML:s.value},null,8,Re)):M("",!0),t.prompt?(g(),w("div",Xe,[A(me,{ref:"dialogInput",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=f=>o.value=f),step:t.promptStep,type:i.value,label:null},null,8,["modelValue","step","type"])])):M("",!0),A(ue,{align:t.abortLabel?"outer":"center",class:"buttons"},{default:ae(()=>[t.applyLabel||t.confirm&&t.yesLabel?(g(),P(j,{key:0,"style-type":"dialog",label:t.confirm?t.yesLabel:t.applyLabel,onClick:p},null,8,["label"])):M("",!0),t.abortLabel||t.confirm&&t.noLabel?(g(),P(j,{key:1,"style-type":"dialog",label:t.confirm?t.noLabel:t.abortLabel,onClick:d},null,8,["label"])):M("",!0)]),_:1},8,["align"])])]))}}),Ke=$(Ue,[["__scopeId","data-v-302c1124"]]),qe=pe(({module:t,core:n})=>{var i;const e=(i=n.modules.files)==null?void 0:i.fs,r=n.modules.symbols,o=n.modules.windows;return[{name:["openDirectory","openDir"],description:"Opens the specified directory.",args:[new a({index:0,name:"path",description:"Path to the directory."}),new a({name:"sortSymbols",description:"Sort Symbols",flag:!0}),new a({name:"windowSize",description:"Window Size"}),new a({name:"windowPosition",description:"Window Position"}),new a({name:"windowScale",description:"Window Scale"}),new a({name:"windowScrollX",description:"Window Scroll-X"}),new a({name:"windowScrollY",description:"Window Scroll-Y"}),new a({name:"windowSidebar",description:"Window Sidebar"}),new a({name:"windowFullSize",description:"Window Full-Size"})],async action({path:s,sortSymbols:p,windowSize:d,windowPosition:l,windowScale:c,windowScrollX:f,windowScrollY:v,windowSidebar:W,windowFullSize:L}){if(!s)throw F.get("bad_args");const m=await(e==null?void 0:e.get(s));if(!m)throw F.get("FileSystemItem_itemNotFound",s);if(!(m instanceof de))throw F.get("FileSystemItem_itemNotContainer",s);const S=await(r==null?void 0:r.addFileSystemWrapper(m)),u=r==null?void 0:r.getWrapper(String(S)),D=X({value:m.size/m.maxSize}),I=O=>{const[k,C]=O.split(",");return le(Number(k),Number(C))},x=o==null?void 0:o.addWindow({layout:{size:I(d||"400,200"),position:I(l||"0,0")},sidebarComponent:je,sidebarComponentData:D,component:ce,componentData:{wrapperId:S,parentScrollable:f||v},options:{title:m.name,sidebar:W!==void 0?W:!0,scale:c!==void 0?c:!0,scrollX:f!==void 0?f:!0,scrollY:v!==void 0?v:!0,center:!l}},{active:!0,full:L}),b=()=>{D.value=m.size/m.maxSize},q=[u==null?void 0:u.events.subscribe(b)];return new Promise(O=>{x==null||x.events.subscribe(({name:k})=>{k==="ready"&&p?window.requestAnimationFrame(()=>{u==null||u.rearrangeIcons()}):k==="close"?(q.forEach(C=>C==null?void 0:C.unsubscribe()),S&&(r==null||r.removeWrapper(S)),O(!0)):b()})})}},{name:["openDialog"],description:"Open a Dialog.",args:[new a({index:0,name:["message"],description:"Message from Dialog."}),new a({index:1,name:["title"],description:"Title from Dialog."}),new a({name:["apply"],description:"Title from apply button."}),new a({name:["abort"],description:"Title from abort button."}),new a({name:["confirm"],flag:!0,description:"Defines the confirm dialog"}),new a({name:["prompt"],flag:!0,description:"Defines the prompt dialog"}),new a({name:["promptType"],description:"Type from prompt dialog (e.g. text, number, email). (Default: text)"}),new a({name:["promptStep"],description:"Step from prompt dialog (e.g. 1, 0.1, 0.01). (Default: 1)"}),new a({name:["promptValue"],description:"Default value from prompt dialog."}),new a({name:["secret"],flag:!1,description:"Input is illegible."})],action:s=>{const{title:p,message:d=null,apply:l=null,abort:c=null,confirm:f=!1,prompt:v=!1,promptType:W="text",promptStep:L=void 0,promptValue:m=null,secret:S=!1}=s;let u;const D=b=>{u(b)},I=()=>{u(!1)},x=t.addWindow(new N({component:Ke,componentData:{title:p,message:d,secret:S,confirm:f,prompt:v,promptType:W,promptStep:Number(L),promptValue:m,applyLabel:l||"Continue",abortLabel:c,apply:D,abort:I},options:{scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1,close:!1}}));return x.awaitClose().then(()=>I()),new Promise(b=>{u=b}).then(b=>(x.close(),b))}}]});class $t extends Q{constructor(e){super({config:fe,commands:qe,...e,name:"Windows"});h(this,"wrappers",_(new Map));h(this,"contentWrapper");h(this,"globalWrapper");h(this,"contextMenu");this.contextMenu=X(new ke(this.core)),this.contentWrapper=this.getWrapper(this.addWrapper(new Y(this.core))),this.globalWrapper=this.getWrapper(this.addWrapper(new Y(this.core))),Ae({contentWrapper:this.contentWrapper.events,globalWrapper:this.globalWrapper.events}).subscribe(r=>{console.log("event",r)})}addWindow(e,r={}){let o;return e instanceof N?o=e:o=new N(e),o.componentData&&(o.componentData.core=_(this.core)),r={global:!1,...r},r.global?o=this.globalWrapper.add(o,r):o=this.contentWrapper.add(o,r),o}getWrapper(e){return this.wrappers.get(e)}getFocusedWrapper(){return Array.from(this.wrappers.values()).map(({models:e})=>e.value).flat().find(e=>e.options.focused)}addWrapper(e){return this.wrappers.set(e.id,e),e.id}removeWrapper(e){typeof e!="string"&&(e=e.id),this.wrappers.delete(e)}isContextMenu(e){return e.id===this.getActiveContextMenu().id}setup(){this.contextMenu.addDefaultItems(new T(Fe,{core:this.core})),this.contextMenu.addDefaultItems(new T(ie,{core:this.core}))}clear(){this.contentWrapper.clear(),this.globalWrapper.clear()}getActiveContextMenu(){return this.contextMenu.getActiveItems()}setActiveContextMenu(e){return this.contextMenu.setActiveItems(e)}}export{$t as default};

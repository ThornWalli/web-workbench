import{A as O}from"./Dz_GYwrf.js";import{u as _,d as b,M as p}from"./DDYNGWqS.js";import{c as N,u as W}from"./DhoRlVJU.js";import{A as S}from"./D5ZRmSpd.js";import{_ as v,g as w,t as C,v as I,z as E,I as V,a5 as $}from"./JDFt9gvC.js";import{c as d,d as c,g as k}from"./C4dA1Cjp.js";import{C as A}from"./ey0azPGz.js";import"./BZctIkfj.js";import"./Cdp1pQ9Q.js";import"./2o4skMhU.js";import"./C59C2sh_.js";import"./1qXVShGN.js";import"./CNtMeql4.js";import"./DNGU8wv-.js";import"./Cb3nzVUd.js";import"./CkllZCFh.js";import"./BmNMd0Sh.js";import"./SdfA2v9k.js";import"./CV0dHcg-.js";import"./C6aID195.js";import"./BdxTbgrk.js";import"./BY0KaPQX.js";import"./C5mdboMC.js";import"./BLNG6mv2.js";import"./BTKCLhcY.js";import"./DSSEMlfr.js";import"./CpF9_xX9.js";import"./DlxYR4Yt.js";import"./BASt1W81.js";import"./FUWZzGg5.js";import"./cePB7ZwW.js";const R={components:{AtomMarkdown:S},setup(){return _()},data(){return{content:["# WebBasic",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},B={class:"wb-disks-extras13-web-basic-info"};function P(e,o,s,m,u,i){const r=w("atom-markdown");return I(),C("div",B,[E(r,{content:u.content},null,8,["content"])])}const M=v(R,[["render",P],["__scopeId","data-v-7c9e05f6"]]),D=b(({core:e,model:o})=>{const s=e.modules.windows||{},m=e.modules.parser||{};return[{order:0,title:"Editor",items:[{title:"New",hotKey:"N",keyCode:78,action:u},{title:"Open…",hotKey:"O",keyCode:79,action:x},{title:"Save",hotKey:"S",keyCode:83,action:i},{title:"Save As…",action:r},{type:p.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:T},{title:"Close",action:y}]},{order:1,title:"Document Settings",items:[{title:"Has Window Output",type:p.CHECKBOX,name:A.HAS_WINDOW_OUTPUT,model:o.value}]},{order:1,title:"Run",hotKey:"R",keyCode:82,action:g},{order:2,title:"Preview",type:p.CHECKBOX,name:d.WEB_BASIC_SHOW_PREVIEW,model:e.config.observable,action(t){return e.config.set(d.WEB_BASIC_SHOW_PREVIEW,t)}}];function u(){var t,n;(n=(t=o.actions).reset)==null||n.call(t)}function i(){return f()}function r(){return f(!0)}async function f(t=!1){const n={...o.value,content:o.value[c.CONTENT].split(/\n/g)},a=await N(JSON.stringify(n));let l;if(!t&&o.fsItem)return l=await e.executeCommand(`editfile "${o.fsItem.getPath()}" --data="${a}"`),l?e.executeCommand('openDialog "File saved."'):e.executeCommand('openDialog "File could not be saved."');{const h=await e.executeCommand(`saveFileDialog --data="${n}" --extension="bs"`);return h?(o.fsItem=V(h),o.fsItem):null}}async function x(){const t=await e.executeCommand("openFileDialog");if(t)if(c.CONTENT in t.value){const n={...t.value,[c.CONTENT]:[].concat(t.value[c.CONTENT]).join(`
`)};o.fsItem=t.fsItem,o.openValue=n}else throw new Error("Can't read file content")}async function g(){const t=[];await m.parseBasic(o.value[c.CONTENT].split(/\n/),async(n,a)=>{const l=await e.executeCommand(n,a);return a.message&&(Array.isArray(a.message)?t.push(...a.message):t.push(a.message)),l}),o.output=t.map(n=>W(n))}function y(){var t,n;return(n=(t=o.actions).close)==null?void 0:n.call(t)}function T(){s.addWindow({component:M,componentData:{model:o},options:{title:"Info",scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"extras13WebBasic"})}}),F={components:{AtomInputText:O},props:{model:{type:Object,default(){return{value:k(),fsItem:null,openValue:null}}},setValue:{type:Function,default(){return()=>{}}}},emits:["refresh"],setup(e){const o=$(e,"model"),s=_();return s.setContextMenu(D,{model:o.value}),s.preserveContextMenu(),{...s}},computed:{openValue(){return this.model.openValue},showPreview(){return this.core.config.observable[d.WEB_BASIC_SHOW_PREVIEW]}},watch:{"model.value"(){this.refresh()},openValue(e){e&&(this.setValue(e),this.$nextTick(()=>{this.$refs.input.resetSelection(),this.$emit("refresh",{scroll:!0})}))},showPreview(e){this.model.actions.togglePreview(e)}},mounted(){this.showPreview&&this.$nextTick(()=>{this.model.actions.togglePreview()})},methods:{onUpdateModelValue(e){this.setValue({...this.model.value,content:e})},onRefreshInputText(){this.refresh()},refresh(){this.$nextTick(()=>{this.$emit("refresh",{scroll:!0})})}}},H={class:"wb-disks-extras13-web-basic"};function K(e,o,s,m,u,i){const r=w("atom-input-text");return I(),C("div",H,[E(r,{ref:"input","override-focused":e.parentFocused,"model-value":s.model.value.content,"onUpdate:modelValue":i.onUpdateModelValue,onRefresh:i.onRefreshInputText},null,8,["override-focused","model-value","onUpdate:modelValue","onRefresh"])])}const Ie=v(F,[["render",K],["__scopeId","data-v-9b455daa"]]);export{Ie as default};

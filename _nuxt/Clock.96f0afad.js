import{Q as v,l as p,m as y,u as k,g as _}from"./index.56b43941.js";import{_ as I,f as C,k as P,l as M,q as A,m as g,t as S}from"./entry.a29c785c.js";import"./index.56665add.js";const $={components:{AtomMarkdown:v},props:{...p},emits:[...y],setup(e,t){const a=k(e,t);return a.setContextMenu(T),a},data(){return{content:["# Clock",`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},W={class:"wb-disks-workbench13-clock-info"};function D(e,t,a,r,o,l){const i=C("atom-markdown");return P(),M("div",W,[A(i,{content:o.content},null,8,["content"])])}const H=I($,[["render",D],["__scopeId","data-v-6e6ea68b"]]),T=({core:e})=>{const{windows:t}=e.modules;return[{title:"Clock",items:[{hotKey:"I",keyCode:73,title:"Info",action(){t.addWindow({title:"Info",component:H,componentData:{},options:{scale:!1,prompt:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Clock"})}}]}]};function E(e,t,a,r){e.beginPath(),e.arc(0,0,t-a,0,2*Math.PI,!1),e.fillStyle=r[0],e.fill()}function N(e,t,a){let r;for(r=0;r<60;r++){e.rotate(-Math.PI/2),e.beginPath();const o=0-t+12,l=6;e.moveTo(0,o),e.lineTo(0,o-l),e.rotate(Math.PI/3/5),e.lineWidth=2,e.strokeStyle=a[1],e.stroke()}for(e.rotate(-(Math.PI/3/5)*60),r=0;r<16;r++){e.rotate(-Math.PI/2),e.beginPath();const o=0-t+15,l=6,i=10;e.moveTo(0,o),e.lineTo(0+l/2,o-i/2),e.lineTo(0,o-i),e.lineTo(0-l/2,o-i/2),e.lineTo(0,o),e.rotate(Math.PI/3),e.fillStyle=a[1],e.fill()}e.rotate(-Math.PI/3*16)}function X(e,t,a,r,o){const l=t.getHours()*(Math.PI*2/12)+Math.PI*2/12*t.getMinutes()/60,i=t.getMinutes()*(Math.PI*2/60),u=t.getSeconds()*(Math.PI*2/60);a.rotate(l),a.drawImage(e[0],-r.x,-r.y,o.x,o.y),a.rotate(-l),a.rotate(i),a.drawImage(e[1],-r.x,-r.y,o.x,o.y),a.rotate(-i),a.rotate(u),a.drawImage(e[2],-r.x,-r.y,o.x,o.y),a.rotate(-u)}function Y(e,t,a,r){const l=e/2-5,i=_(()=>l+5);return[(s,d)=>{s.translate(i.x,i.y);const m=3,f=[.5,.34],n=0,h=0;s.beginPath(),s.moveTo(n,h),s.lineTo(n-m,h-d.width/2*f[1]),s.lineTo(n,h-d.width/2*f[0]),s.lineTo(n+m,h-d.width/2*f[1]),s.lineTo(n,h),s.strokeStyle=r[1],s.fillStyle=r[1],s.stroke(),s.fill()},(s,d)=>{s.translate(i.x,i.y);const m=4,f=[.7,.54],n=0,h=0;s.beginPath(),s.moveTo(n,h),s.lineTo(n-m,h-d.width/2*f[1]),s.lineTo(n,h-d.width/2*f[0]),s.lineTo(n+m,h-d.width/2*f[1]),s.lineTo(n,h),s.strokeStyle=r[1],s.fillStyle=r[1],s.stroke(),s.fill()},(s,d)=>{s.translate(i.x,i.y);const m=0,f=.74,n=0,h=0;s.beginPath(),s.moveTo(n,h),s.lineTo(n+m,h-d.width/2*f),s.lineTo(n,h),s.strokeStyle=r[2],s.stroke()},(s,d)=>{s.translate(i.x,i.y),E(s,l,a,r)},(s,d)=>{s.translate(i.x,i.y),N(s,l,r)}].map(s=>{const d=document.createElement("canvas");d.width=e,d.height=t;const m=d.getContext("2d");return m.imageSmoothingEnabled=!1,s(m,d),d})}const B={props:{...p},emits:[...y],setup(e,t){const a=k(e,t);return a.setContextMenu(T),a},data(){return{colors:["#888888","#000000","#FFAA55"],sprites:[],periodPM:!1,interval:null}},computed:{timeAmPm(){return this.periodPM?"PM":"AM"}},unmounted(){window.clearInterval(this.interval)},mounted(){const e=this.$refs.canvas;e.width=this.$el.offsetWidth,e.height=this.$el.offsetHeight,this.sprites=Y(e.width,e.height,2,this.colors),this.render(e,e.getContext("2d"))},methods:{render(e,t){const r=e.width/2-5,o=_(()=>r+5),l=_(e.width,e.height);t.imageSmoothingEnabled=!1,t.setTransform(1,0,0,1,0,0),t.translate(o.x,o.y),t.scale(1,1.015),t.beginPath(),t.arc(0,0,r,0,2*Math.PI,!1),t.fillStyle=this.colors[1],t.fill(),t.scale(1,.985);const i=this.sprites,u=s=>{window.requestAnimationFrame(()=>{t.drawImage(i[3],-o.x,-o.y,l.x,l.y),t.drawImage(i[4],-o.x,-o.y,l.x,l.y),t.strokeStyle=this.colors[1],t.setTransform(1,0,0,1,0,0);const d=new Date;this.periodPM=d.getHours()>12,t.translate(o.x,o.y),X(i,d,t,o,l);const m=t.getImageData(0,0,l.x,l.y),f=m.data;for(let n=0;n<f.length;n+=4){const h=f[Number(n)],w=f[n+1],c=f[n+2];if(!(h===255&&w===170&&c===85)){const b=.2126*h+.7152*w+.0722*c>=50?255:0;.2126*h+.7152*w+.0722*c>=50&&(f[Number(n)]=f[n+1]=f[n+2]=b)}}t.putImageData(m,0,0),s&&s()})};u(()=>{this.interval=window.setInterval(u,1e3)})}}},F={class:"wb-disks-workbench13-clock"},V={ref:"canvas"},q={class:"period"};function j(e,t,a,r,o,l){return P(),M("div",F,[g("canvas",V,null,512),g("span",q,S(l.timeAmPm),1)])}const J=I(B,[["render",j],["__scopeId","data-v-84db0a78"]]);export{J as default};

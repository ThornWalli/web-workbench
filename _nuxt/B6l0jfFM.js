import{M as $,a as I}from"./fGiKISgP.js";import{C as F}from"./BJmh0rUk.js";import{m as h,u as V}from"./DOMGF9Hs.js";import{T as j,g as B}from"./BgCju0y8.js";import{c as k}from"./U943cWOm.js";import{u as O,N}from"./CRwCAZ5R.js";import{T as z}from"./CY3JQROt.js";import{u as A}from"./BII7ONQG.js";import{d as D,a0 as m,r as T,k as r,o as G,a1 as v,W as Y,y as l,z as n,C as g,A as C,S as H,ac as W,I as Z,X as J,Y as K,P as L,F as U,_ as X}from"./CotJlvW-.js";import"./D4lI5vpz.js";import"./Bx1YEHQ7.js";import"./CaAbksje.js";import"./9V19AFUE.js";import"./DKrsSnpo.js";import"./DhuF9au6.js";import"./CxKYomUj.js";import"./CQXTE7NH.js";import"./D-Cgqglr.js";import"./CpIyErmU.js";import"./RAasLaaH.js";import"./DdQrQ7-5.js";import"./6C4StZv5.js";import"./DNvW6rqi.js";import"./6jpuwjT2.js";import"./Bnsp_u8C.js";import"./B2exwp0w.js";import"./Cc_Og2B_.js";import"./D9awfk1U.js";import"./CNkvSXuu.js";import"./B0Lefq6F.js";const q={class:"wb-disks-extras13-synthesizer-project"},Q={class:"tracks"},ee={key:0,class:"no-tracks"},te={class:"sheet"},oe=D({__name:"Project",props:{model:{}},emits:["refresh"],setup(E,{emit:b}){const i=b,o=E,{core:x}=V(),{tone:w}=O(),{preserveContextMenu:c,setContextMenu:f}=A();f(k,{model:o.model}),m(()=>o.model,()=>{f(k,{model:o.model,preserveContextMenu:c})},{immediate:!0,deep:!0});const u=T({}),y=r(()=>`timeline-${_.value}`),p=r(()=>o.model[h.SYNTHESIZER_PROJECT]),a=r({get:()=>p.value.tracks,set:e=>{p.value.tracks=e}}),_=r(()=>Number(o.model[h.SYNTHESIZER_BPM])),M=r(()=>({model:o.model,items:[[{text:`Project: ${p.value.name} | Tracks: ${a.value.length}`}]]})),P=r(()=>x.value.config.observable[F.SCREEN_CONFIG].soundVolume);m(()=>P.value,e=>{$.volume.value=B(e)},{immediate:!0}),m(()=>a.value,()=>{v(()=>{i("refresh")})}),m(()=>_.value,e=>{const t=I;t.stop(),t.bpm.value=120,t.seconds=0,t.bpm.value=e,t.start()}),G(()=>{v(()=>{i("refresh")})}),Y(()=>{var e;(e=o.model.actions)==null||e.closeTracks()}),T([]);function R(e){const t=e.getDuration();return{items:[[{text:e.name},{spacer:!0},{text:` ${t}`},{label:"Edit",action:async()=>{console.log("Edit track",e),await w.start(),S(new j(e))}},{label:"Remove",action:async()=>{c(!0),await o.model.actions.removeTrack(e),c(!1),i("refresh")}}]]}}async function S(e){u.value[e.id]=!0;const{close:t}=await o.model.actions.editTrack(e),s=await t;a.value=a.value.map(d=>d.id===s.id?s:d),u.value[e.id]=!1,v(()=>{i("refresh")})}return(e,t)=>(n(),l("div",q,[g(N,H(W(M.value)),null,16),C("div",Q,[a.value.length<1?(n(),l("div",ee,"No tracks availableâ€¦")):Z("",!0),(n(!0),l(J,null,K(a.value,s=>(n(),l("div",{key:s.id,class:"track"},[g(N,L({ref_for:!0},R(s)),null,16),C("div",te,[(n(),U(z,{key:y.value,track:s,static:u.value[s.id],onRefresh:t[0]||(t[0]=d=>i("refresh"))},null,8,["track","static"]))])]))),128))])]))}}),Ie=X(oe,[["__scopeId","data-v-20ee5415"]]);export{Ie as default};

(window.webpackJsonp=window.webpackJsonp||[]).push([[17,39],{285:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return h}));var r=n(247);function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(t){return Math.atan2(t.y,t.x)+Math.PI}function l(t){var e=window.getComputedStyle(t).transform,n=new DOMMatrix(e);return Math.atan2(n.b,n.a)}function h(t,e){var n=Math.cos(e)*t.x-Math.sin(e)*t.y,c=Math.sin(e)*t.x+Math.cos(e)*t.y;return new r.c(n,c)}},307:function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return y}));var r=n(253),c=function(t){function e(e,n){return t.call(this)||this}return Object(r.e)(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(311).b),o={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=o.delegate;return((null==n?void 0:n.setInterval)||setInterval).apply(void 0,Object(r.h)([],Object(r.g)(t)))},clearInterval:function(t){var e=o.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},l=n(328),h=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return Object(r.e)(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),o.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;o.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,r=!1;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Object(l.a)(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(c),f=n(346),d=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=f.a.now,t}(),v=new(function(t){function e(e,n){void 0===n&&(n=d.now);var r=t.call(this,e,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return Object(r.e)(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(d))(h),y=v},308:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));n(243);var r=n(116),c=n(246),o=n(244),l=n(245);function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var f=function(t){Object(c.a)(n,t);var e=h(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return n}(n(247).b)},419:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return m}));var r=n(116),c=n(117),o=(n(25),n(307)),l=n(293),h=n(297),f=n(331),d={leading:!0,trailing:!1};var v=n(300),y=n(287);function w(t,e,n){void 0===t&&(t=0),void 0===n&&(n=o.a);var r,c=-1;return null!=e&&((r=e)&&Object(y.a)(r.schedule)?n=e:c=e),new v.a((function(e){var r=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;r<0&&(r=0);var o=0;return n.schedule((function(){e.closed||(e.next(o++),0<=c?this.schedule(void 0,c):e.complete())}),r)}))}function x(t,e,n){void 0===e&&(e=o.b),void 0===n&&(n=d);var r,c,v,y,x,k=w(t,e);return r=function(){return k},y=(v=void 0===(c=n)?d:c).leading,x=v.trailing,Object(l.a)((function(source,t){var e=!1,n=null,c=null,o=!1,l=function(){null==c||c.unsubscribe(),c=null,x&&(w(),o&&t.complete())},d=function(){c=null,o&&t.complete()},v=function(e){return c=Object(f.c)(r(e)).subscribe(new h.a(t,l,d))},w=function(){if(e){e=!1;var r=n;n=null,t.next(r),!o&&v(r)}};source.subscribe(new h.a(t,(function(t){e=!0,n=t,(!c||c.closed)&&(y?w():v(t))}),(function(){o=!0,(!(x&&e&&c)||c.closed)&&t.complete()})))}))}var k=n(285),O=n(258),j=n(308),m=function(){function t(e){Object(r.a)(this,t),this.subscriptions=[],this._app=e}return Object(c.a)(t,[{key:"register",value:function(){this.subscriptions.push(O.a.keydown.pipe(x(200)).subscribe(_.bind(this)),O.a.keyup.subscribe(I.bind(this)))}},{key:"unregister",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}},{key:"registerDisplay",value:function(t){}},{key:"unregisterDisplay",value:function(t){}}]),t}();function I(t){switch(t.keyCode){case 17:t.preventDefault(),this.holdCrtl=!1;break;case 18:t.preventDefault(),this.holdAlt=!1}}function _(t){if(this._app.display){var e=1;switch(this.holdAlt&&(e*=10),t.keyCode){case 17:t.preventDefault(),this.holdCrtl=!0;break;case 18:t.preventDefault(),this.holdAlt=!0;break;case 37:t.preventDefault(),this._app.display.offset.x-=e;break;case 38:t.preventDefault(),this._app.display.offset.y-=e;break;case 39:t.preventDefault(),this._app.display.offset.x+=e;break;case 40:t.preventDefault(),this._app.display.offset.y+=e}var n=this._app.display;this._app.display.offset=new j.default(Object(k.b)(n.offset.x,-n.zoomBounds.min.x,n.canvasLayout.naturalSize.x-n.zoomBounds.max.x),Object(k.b)(n.offset.y,-n.zoomBounds.min.y,n.canvasLayout.naturalSize.y-n.zoomBounds.max.y)),this._app.display.renderImageData()}}}}]);
import{M as $,a as I}from"./ehWpBOkw.js";import{C as F}from"./BJmh0rUk.js";import{m as h,u as V}from"./ClLpnmyR.js";import{T as j,g as B}from"./Ds-AH-SM.js";import{c as k}from"./65p4Y1AH.js";import{u as O,N}from"./at3Qp1uu.js";import{T as z}from"./CN_ZUaAL.js";import{u as A}from"./JsFOm8c5.js";import{d as D,a0 as m,r as T,k as a,o as G,a1 as v,W as Y,y as l,z as n,C as g,A as C,S as H,ac as W,I as Z,X as J,Y as K,P as L,F as U,_ as X}from"./BkRx7U8b.js";import"./D4lI5vpz.js";import"./B1Xgq4rl.js";import"./CaAbksje.js";import"./BoZA8JgY.js";import"./BTMT_sH9.js";import"./Br3o2oUw.js";import"./CxKYomUj.js";import"./B9nPFJJ2.js";import"./Dql81Gm-.js";import"./OlYXjGCK.js";import"./B3Wmi0DA.js";import"./CtlMGvom.js";import"./D4b9WN8K.js";import"./Wv4Ty0OG.js";import"./C723tzWh.js";import"./CVx03s7S.js";import"./CoWiVqj-.js";import"./B4rpyJsK.js";import"./Bwr9avpB.js";import"./D7YMvfqk.js";import"./CNkvSXuu.js";import"./Bjf3RcYt.js";const q={class:"wb-disks-extras13-synthesizer-project"},Q={class:"tracks"},ee={key:0,class:"no-tracks"},te={class:"sheet"},oe=D({__name:"Project",props:{model:{}},emits:["refresh"],setup(E,{emit:b}){const i=b,o=E,{core:x}=V(),{tone:w}=O(),{preserveContextMenu:c,setContextMenu:f}=A();f(k,{model:o.model}),m(()=>o.model,()=>{f(k,{model:o.model,preserveContextMenu:c})},{immediate:!0,deep:!0});const u=T({}),y=a(()=>`timeline-${_.value}`),p=a(()=>o.model[h.SYNTHESIZER_PROJECT]),r=a({get:()=>p.value.tracks,set:e=>{p.value.tracks=e}}),_=a(()=>Number(o.model[h.SYNTHESIZER_BPM])),M=a(()=>({model:o.model,items:[[{text:`Project: ${p.value.name} | Tracks: ${r.value.length}`}]]})),P=a(()=>x.value.config.observable[F.SCREEN_CONFIG].soundVolume);m(()=>P.value,e=>{$.volume.value=B(e)},{immediate:!0}),m(()=>r.value,()=>{v(()=>{i("refresh")})}),m(()=>_.value,e=>{const t=I;t.stop(),t.bpm.value=120,t.seconds=0,t.bpm.value=e,t.start()}),G(()=>{v(()=>{i("refresh")})}),Y(()=>{o.model.actions?.closeTracks()}),T([]);function R(e){const t=e.getDuration();return{items:[[{text:e.name},{spacer:!0},{text:` ${t}`},{label:"Edit",action:async()=>{console.log("Edit track",e),await w.start(),S(new j(e))}},{label:"Remove",action:async()=>{c(!0),await o.model.actions.removeTrack(e),c(!1),i("refresh")}}]]}}async function S(e){u.value[e.id]=!0;const{close:t}=await o.model.actions.editTrack(e),s=await t;r.value=r.value.map(d=>d.id===s.id?s:d),u.value[e.id]=!1,v(()=>{i("refresh")})}return(e,t)=>(n(),l("div",q,[g(N,H(W(M.value)),null,16),C("div",Q,[r.value.length<1?(n(),l("div",ee,"No tracks availableâ€¦")):Z("",!0),(n(!0),l(J,null,K(r.value,s=>(n(),l("div",{key:s.id,class:"track"},[g(N,L({ref_for:!0},R(s)),null,16),C("div",te,[(n(),U(z,{key:y.value,track:s,static:u.value[s.id],onRefresh:t[0]||(t[0]=d=>i("refresh"))},null,8,["track","static"]))])]))),128))])]))}}),Fe=X(oe,[["__scopeId","data-v-db43c203"]]);export{Fe as default};

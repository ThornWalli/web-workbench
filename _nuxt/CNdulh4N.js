import{W as e}from"./Dnkwg0NB.js";import{W as l}from"./Caob76XJ.js";import{W as a}from"./CnxF4DWy.js";import{W as s}from"./BvY_9a4j.js";import{W as o}from"./CCnhm4BD.js";import{p as t,q as m,d as u}from"./BSzGBLGV.js";import{u as i}from"./D1WZfvAb.js";import{d as r,r as d,O as n,k as f,o as v,y as p,z as c,C as j,D as h,P as b,G as y,S as _,ac as S,_ as W}from"./BfpYGSxR.js";import"./CH0i9kLA.js";import"./BWKGU6Bw.js";import"./BHmTNEz3.js";import"./D3MPJlJW.js";import"./B-meQdOw.js";import"./D7Us3e3D.js";import"./CrNGlbV0.js";import"./jSR9Z_uS.js";const I={class:"wb-module-files-save"},P=W(r({__name:"Save",props:{fsItem:{},id:{},model:{}},emits:["close"],setup(r,{emit:W}){var P,k,w;const{core:C}=i();if(!(null==(P=C.value)?void 0:P.modules.files))throw new Error("Files module not found");const F=r,V=W,g=d({path:"",filename:"",file:null,...F.model}),x=(null==(k=C.value)?void 0:k.modules.files)&&n(null==(w=C.value)?void 0:w.modules.files),L="Cancel",U="Save",q=f(()=>({hideLabel:!0,label:"Path",placeholder:"Path…",modelValue:g.value.path})),z=f(()=>({hideLabel:!0,label:"Filename",placeholder:"Filename…",modelValue:g.value.filename,"onUpdate:model-value":e=>{g.value.filename=e}})),D=f(()=>({name:"path",modelValue:g.value.path,"onUpdate:model-value":e=>{g.value.path=e},onSelect:onSelect})),E=d(F.fsItem||n(x.fs.root)),G=f(()=>{var e,l,a;return F.fsItem?F.fsItem:(null==(l=null==(e=C.value)?void 0:e.modules.files)?void 0:l.fs.root)?null==(a=C.value)?void 0:a.modules.files.fs.root:null}),O=f(()=>!!E.value&&E.value.locked),X=f(()=>!g.value.filename),onSelect=e=>{E.value=n(e),e instanceof u?g.value.path=e.getPath():e.name&&(g.value.filename=e.name)};v(()=>{F.id&&(g.value.filename=F.id)});const onClickCancel=()=>{V("close")},onSubmit=()=>{const e=t(m(g.value.path),g.value.filename);V("close",e)};return(t,m)=>(c(),p("div",I,[j(e,{onSubmit:onSubmit},{default:h(()=>[j(o,b(q.value,{readonly:""}),null,16),j(s,b(D.value,{"file-system":y(x).fileSystem,"fs-item":G.value}),null,16,["file-system","fs-item"]),j(o,_(S(z.value)),null,16),j(a,{align:"outer",full:""},{default:h(()=>[j(l,{"style-type":"secondary",label:L,onClick:onClickCancel},null,8,["label"]),j(l,{"style-type":"primary",label:U,type:"submit",disabled:O.value||X.value},null,8,["label","disabled"])]),_:1})]),_:1})]))}}),[["__scopeId","data-v-f53a8acd"]]);export{P as default};

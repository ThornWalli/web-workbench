import{W as d}from"./E3_DWDMo.js";import{W as M}from"./W7H9nAKY.js";import{W as A}from"./D2cSW_QH.js";import{k as v,y as N}from"./D-Cgqglr.js";import{d as z,k as n,r as p,O as c,a0 as D,o as E,a1 as U,y as R,z as g,A as I,C as i,S as $,ac as O,D as T,F as j,I as q,_ as G}from"./CotJlvW-.js";const H={class:"wb-module-files-elements-file-select"},J=z({__name:"FileSelect",props:{modelValue:{},fileSystem:{},fsItem:{},backLabel:{},upLabel:{},downLabel:{},maxVisibleItems:{}},emits:["update:model-value","select","refresh"],setup(_,{emit:V}){const r=V,l=_,x=n(()=>l.backLabel||"../"),C=n(()=>l.upLabel||"Up"),b=n(()=>l.downLabel||"Down"),u=n(()=>l.maxVisibleItems||5),L=n(()=>({title:"",items:S.value,modelValue:l.modelValue,"onUpdate:model-value":e=>{r("update:model-value",e)}})),a=p(l.fsItem||c(l.fileSystem.root)),o=p([]),t=p(0),m=n(()=>({back:!a.value.parent,up:t.value-1<0,down:t.value+1>o.value.length-u.value})),W=n(()=>l.modelValue),S=n(()=>{const e=o.value.slice(t.value,t.value+u.value).map(s=>({label:s.id,value:s.getPath()})).concat(Array(Math.max(u.value-o.value.length,0)).fill({label:"&nbsp;",disabled:!0}));return o.value.length<1&&(e[Math.floor(e.length/2)]={label:"Empty",disabled:!0}),e});D(()=>W.value,async()=>{typeof l.modelValue=="string"&&(a.value=c(await l.fileSystem.get(l.modelValue)),a.value instanceof v&&(o.value=Array.from((await a.value.getItems()).values()).map(c),t.value=0),(a.value instanceof N||a.value instanceof v)&&r("select",a.value))}),E(async()=>{var e;o.value=Array.from((await((e=a.value)==null?void 0:e.getItems())||[]).values()).map(s=>c(s)),U(()=>{r("refresh",{reset:!0,resize:!1,scroll:!1})})});const B=()=>{var s,f,y,h,k,w;let e;if(!(a.value instanceof v)&&((f=(s=a.value)==null?void 0:s.parent)!=null&&f.parent)?e=(k=(h=(y=a.value)==null?void 0:y.parent)==null?void 0:h.parent)==null?void 0:k.getPath():a.value.parent&&(e=(w=a.value.parent)==null?void 0:w.getPath()),e)r("update:model-value",e);else throw new Error("No parent found")},F=()=>{t.value=Math.max(t.value-1,0)},P=()=>{t.value=Math.min(t.value+1,o.value.length-u.value)};return(e,s)=>(g(),R("div",H,[I("div",null,[i(A,$(O(L.value)),null,16)]),I("div",null,[i(M,{align:"outer",full:"",direction:"vertical"},{default:T(()=>[i(d,{"style-type":"secondary",label:x.value,disabled:m.value.back,onClick:B},null,8,["label","disabled"]),i(d,{"style-type":"secondary",label:C.value,disabled:m.value.up,onClick:F},null,8,["label","disabled"]),b.value?(g(),j(d,{key:0,"style-type":"secondary",label:b.value,disabled:m.value.down,onClick:P},null,8,["label","disabled"])):q("",!0)]),_:1})])]))}}),ee=G(J,[["__scopeId","data-v-b862c0ec"]]);export{ee as W};

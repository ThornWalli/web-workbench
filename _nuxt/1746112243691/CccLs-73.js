import{i as f,o as U}from"./BGIFtisS.js";import{M as y,i as Y}from"./BRK4loV1.js";import{v as q}from"./DwXabkis.js";import{d as V}from"./DtRunxS3.js";import{S as F,W as X}from"./DZFkMKFt.js";import{S as G}from"./-o7DKadN.js";import{t as m,v as a,x as B,d as J,r as c,j as s,o as Q,a1 as A,W as Z,C as b,A as D,F as u,N,L as ee,z as C,D as h,y as T,B as te,Y as oe,_ as ne}from"./DkuDmdD7.js";import{i as ie}from"./BYgsBAxz.js";import{S as ae}from"./6C4StZv5.js";import"./BTOsj3aW.js";import"./BwLK_scU.js";import"./BVsX1iIx.js";import"./D4lI5vpz.js";import"./RAasLaaH.js";import"./DdQrQ7-5.js";import"./nufkX4jA.js";import"./Ce6njBYG.js";import"./DYHHCWM9.js";import"./DN3eHOnZ.js";import"./CSlkdJUE.js";const se={xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10"};function ce(o,v){return a(),m("svg",se,v[0]||(v[0]=[B("path",{d:"M0 0h2v2h2v2h2v2H4v2H2v2H0z",class:"svg-primary"},null,-1)]))}const re={render:ce},le=["type","name","value","checked"],ue={key:1,class:"checkbox"},me={class:"title"},ve={key:2,class:"hotkey"},de={key:3,class:"indicator-context"},pe=J({__name:"Item",props:{item:{type:Object,required:!0},parentLayout:{type:Object,default(){return{size:q.screenSize}}},tag:{type:String,default:"div"},direction:{type:String,default:"bottom",validator:o=>["top","bottom"].includes(o)}},emits:["click","update:model-value"],setup(o,{emit:v}){const e=o,x=v,I=c(),O=c(),g=c(),k=c(!1),d=c(!1),r=c(f(2,3)),w=new ae,z=s(()=>e.item.type===y.RADIO?"radio":"checkbox"),l=s(()=>[y.CHECKBOX,y.RADIO].includes(e.item.type)),M=s(()=>e.item.type===y.RADIO),P=s(()=>l.value?"label":e.item.url?"a":"button"),R=s(()=>{const t={class:"inner",is:void 0};return l.value?t.is="label":e.item.url&&(t.is="a",t.href=e.item.url),t}),H=s(()=>({"force-visible":k.value,"context-ready":d.value,"context-halign-left":r.value.x===0,"context-halign-right":r.value.x===2,"context-valign-top":r.value.y===1,"context-valign-bottom":r.value.y===3,disabled:K.value.disabled})),K=s(()=>e.item.options);Q(()=>{A(()=>{e.item.hotKey&&w.add(V.keyDown.subscribe(t=>{V.cmdActive&&e.item.hotKey.charCodeAt(0)===t.keyCode&&W()}))})}),Z(()=>{w.unsubscribe()});function L(t,n){x("update:model-value",t,n)}function W(){e.item.action?e.item.action():I.value.click()}function _(t){let n;const i=t.target;M.value?n=i==null?void 0:i.value:n=i==null?void 0:i.checked,ie(n)?e.item.setValue(Number(n)):e.item.setValue(n),x("update:model-value",e.item.name,n),typeof e.item.action=="function"&&Promise.resolve(e.item.action(n)).catch(p=>{throw p})}function $(t){t.stopPropagation(),!l.value&&typeof e.item.action=="function"?Promise.resolve(e.item.action()).catch(n=>{throw n}):x("click",t)}function j(){d.value||(k.value=!0),E()}function E(){d.value||(d.value=!0,A(()=>{window.setTimeout(()=>{if(g.value){const t=g.value.$el.getBoundingClientRect(),{size:n,position:i}=e.parentLayout,p=U(()=>f(t.left,t.top)-(i.x>0?i:0)+f(t.width,t.height)),S=e.direction==="bottom";r.value=f(n.x<p.x?0:2,n.y-2<=p.y?S?1:3:S?3:1)}k.value=!1},0)}))}return(t,n)=>(a(),b(N(o.tag),{class:oe(["wb-env-atom-context-menu-item",H.value]),onMouseover:E,onTouchstart:j,onClick:$},{default:D(()=>[(a(),b(N(P.value),ee({ref_key:"clickEl",ref:I},R.value),{default:D(()=>[l.value?(a(),m("input",{key:0,ref_key:"inputEl",ref:O,type:z.value,name:o.item.name,value:o.item.value,checked:M.value?o.item.getValue()===o.item.value:o.item.getValue(),onInput:_},null,40,le)):u("",!0),l.value?(a(),m("span",ue,[C(h(G))])):u("",!0),B("span",me,T(o.item.title),1),o.item.hotKey?(a(),m("span",ve,[C(h(F)),te(" "+T(o.item.hotKey),1)])):u("",!0),o.item.items.length>0?(a(),m("span",de,[C(h(re))])):u("",!0)]),_:1},16)),o.item.items.length>0?(a(),b(X,{key:0,ref_key:"contextMenuEl",ref:g,items:h(Y)(o.item.items),"parent-layout":o.parentLayout,onInput:L},null,8,["items","parent-layout"])):u("",!0)]),_:1},40,["class"]))}}),ze=ne(pe,[["__scopeId","data-v-4c63a895"]]);export{ze as default};

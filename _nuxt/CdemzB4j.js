import{r as e}from"./BSzGBLGV.js";import{d as t,a,t as n,b as i,k as o,v as l,F as s,w as m,x as r,y as c,f as u,e as v}from"./D1WZfvAb.js";import{S as d}from"./BB6FUOrg.js";import{K as w}from"./Cy0zoxeo.js";import{O as f}from"./BfpYGSxR.js";const O=t(({core:t,model:O})=>{return[new a({order:0,title:"Document Editor",items:[new a({title:"New",hotKey:{alt:!0,code:w.KEY_N,title:"N"},action:function actionNew(){var e;null==(e=O.actions)||e.reset()}}),new a({title:"Open…",hotKey:{alt:!0,code:w.KEY_O,title:"O"},action:async function actionOpen(){const e=await t.executeCommand("openFileDialog");if(e){if(!("content"in e.value))throw new Error("Can't read file content");O.fsItem=e.fsItem,O.value=Object.assign(O.value,v(),e.value)}}}),new a({title:"Save",hotKey:{alt:!0,code:w.KEY_S,title:"S"},action:function actionSave(){return save()}}),new a({title:"Save As…",action:function actionSaveAs(){return save(!0)}}),new d,new a({hotKey:{alt:!0,code:w.KEY_I,title:"I"},title:"Info",action:()=>{var e;return null==(e=O.actions)?void 0:e.openInfo()}}),new a({title:"Close",action:function actionClose(){var e;return null==(e=O.actions)?void 0:e.close()}})]}),new a({order:1,title:"Document Settings",items:[new a({title:"Open maximized",type:i.CHECKBOX,name:n.OPEN_MAXIMIZED,model:O.value}),new a({title:"Output Format",items:[new a({title:"Markdown",type:i.RADIO,name:n.OUTPUT_TYPE,value:"markdown",model:O.value}),new a({title:"HTML",type:i.RADIO,name:n.OUTPUT_TYPE,value:"html",model:O.value})]}),new a({title:"Font Family",items:Object.values(o).map(e=>{const t=s[e];return new a({title:l[e],items:Object.entries(t).map(([e,t])=>new a({title:e,type:i.RADIO,name:n.FONT_FAMILY,value:t,model:O.value}))})})}),new a({title:"Font Size",items:m(O.value)}),new a({title:"Line Height",items:r(O.value)}),new a({title:"Modular Scale",items:c(O.value)})]}),new a({order:2,title:"Preview",type:i.CHECKBOX,name:u.DOCUMENT_EDITOR_SHOW_PREVIEW,model:t.config.observable,action:({value:e})=>t.config.set(u.DOCUMENT_EDITOR_SHOW_PREVIEW,e)})];async function save(a=!1){const i=await e(JSON.stringify(O.value));let o;if(!a&&O.fsItem)return o=await t.executeCommand(`editfile "${O.fsItem.getPath()}" --data="${i}"`),o?t.executeCommand('openDialog "File saved."'):t.executeCommand('openDialog "File could not be saved."');{const e={html:"html",markdown:"md"}[String(O.value[n.OUTPUT_TYPE])],a=await t.executeCommand(`saveFileDialog --data="${i}" --extension="${e}"`);return a?(O.fsItem=f(a),O.fsItem):null}}});export{O as c};

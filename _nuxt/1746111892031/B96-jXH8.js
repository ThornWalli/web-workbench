var R=Object.defineProperty;var b=(u,e,t)=>e in u?R(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t;var o=(u,e,t)=>b(u,typeof e!="symbol"?e+"":e,t);import{C as g}from"./BUrrky6l.js";import{r as w,j as a,a0 as W,o as j,a1 as D,W as T,T as f,D as A}from"./DoVacF4u.js";function z(){const u=w(!1),e=f("core"),t=f("window"),v=f("window:refresh"),x=a(()=>t.value.id),M=a(()=>t.value.layout),c=a(()=>t.value.options.focused||!1),p=a(()=>t.value.parentWindow),i=w(),r=w(),C=a(()=>t.value.options.embed),d=w(!1),l=(n=!0)=>{d.value=n},F=(n,s={})=>{r.value=new g(n,{core:e,mainWindow:A(t),parentWindow:A(p),preserveContextMenu:l,...s})},h=n=>{var s,m,y;r.value&&(n?i.value=(s=e.modules.windows)==null?void 0:s.setActiveContextMenu(r.value):!d.value&&((m=e.modules.windows)==null?void 0:m.getActiveContextMenu())===i.value&&!C.value&&((y=e.modules.windows)==null||y.setActiveContextMenu(null)))};W(c,n=>h(n)),W(r,n=>{var s;i.value=(s=e.modules.windows)==null?void 0:s.setActiveContextMenu(n)}),j(()=>{D(()=>{u.value=!0,h(!0)})}),T(()=>{var n,s;r.value&&((n=e.modules.windows)!=null&&n.isContextMenu(i.value))&&((s=e.modules.windows)==null||s.setActiveContextMenu(null))});const L=a(()=>u.value);return new k({isReady:L,id:x,parentFocused:c,parentLayout:M,core:e,window:t,setContextMenu:F,preserveContextMenu:l,contextMenu:r,currentContextMenu:i,refresh:v})}class k{constructor(e){o(this,"isReady");o(this,"id");o(this,"parentFocused");o(this,"parentLayout");o(this,"core");o(this,"window");o(this,"setContextMenu");o(this,"preserveContextMenu");o(this,"contextMenu");o(this,"currentContextMenu");o(this,"refresh");const{isReady:t,id:v,parentFocused:x,parentLayout:M,core:c,window:p,setContextMenu:i,preserveContextMenu:r,contextMenu:C,currentContextMenu:d,refresh:l}=e;this.isReady=t,this.id=v,this.parentFocused=x,this.parentLayout=M,this.core=c,this.window=p,this.setContextMenu=i,this.preserveContextMenu=r,this.contextMenu=C,this.currentContextMenu=d,this.refresh=l}}export{z as u};

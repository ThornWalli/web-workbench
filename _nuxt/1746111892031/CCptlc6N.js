const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BcIa8h6B.js","./BX5FD6hc.js","./DoVacF4u.js","./BOXo5Fuj.css","./B96-jXH8.js","./BUrrky6l.js","./ByT9DFw9.js","./W_y6kICn.js","./DoGjLmTD.js","./CXbNF4JJ.css","./DJnSA2vE.js","./BGIFtisS.js","./RAasLaaH.js","./D4lI5vpz.js","./DdQrQ7-5.js","./6C4StZv5.js","./CSlkdJUE.js","./BH7uj3v3.css"])))=>i.map(i=>d[i]);
import{K as d,H as T}from"./DoVacF4u.js";import{d as _,M as i,j as s,k as v,b as c,h as y,l as D,F as C,g as F}from"./ByT9DFw9.js";import{z as P}from"./DJnSA2vE.js";const M=_(({core:a,model:t})=>{return[{order:0,title:"Document Editor",items:[{title:"New",hotKey:"N",keyCode:78,action:O},{title:"Open…",hotKey:"O",keyCode:79,action:f},{title:"Save",hotKey:"S",keyCode:83,action:E},{title:"Save As…",action:p},{type:i.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:I},{title:"Close",action:m}]},{order:1,title:"Document Settings",items:[{title:"Open maximized",type:i.CHECKBOX,name:s.OPEN_MAXIMIZED,model:t.value},{title:"Output Format",items:[{title:"Markdown",type:i.RADIO,name:s.OUTPUT_TYPE,value:"markdown",model:t.value},{title:"HTML",type:i.RADIO,name:s.OUTPUT_TYPE,value:"html",model:t.value}]},{title:"Font Family",items:Object.values(y).map(e=>{const n=C[e];return{title:D[e],items:Object.entries(n).map(([o,l])=>({title:o,type:i.RADIO,name:s.FONT_FAMILY,value:l,model:t.value}))}})},{title:"Font Size",items:v.map(e=>({title:`${e}px`,type:i.RADIO,name:s.FONT_SIZE,value:e,model:t.value}))}]},{order:2,title:"Preview",type:i.CHECKBOX,name:c.DOCUMENT_EDITOR_SHOW_PREVIEW,model:a.config.observable,action(e){return a.config.set(c.DOCUMENT_EDITOR_SHOW_PREVIEW,e)}}];function m(){var e;return(e=t.actions)==null?void 0:e.close()}async function f(){const e=await a.executeCommand("openFileDialog");if(e)if("content"in e.value)t.fsItem=e.fsItem,t.value=Object.assign(t.value,F(),e.value);else throw new Error("Can't read file content")}function O(){var e;(e=t.actions)==null||e.reset()}function E(){return r()}function p(){return r(!0)}async function r(e=!1){const n=await P(JSON.stringify(t.value));let o;if(!e&&t.fsItem)return o=await a.executeCommand(`editfile "${t.fsItem.getPath()}" --data="${n}"`),o?a.executeCommand('openDialog "File saved."'):a.executeCommand('openDialog "File could not be saved."');{const l={html:"html",markdown:"md"}[String(t.value[s.OUTPUT_TYPE])],u=await a.executeCommand(`saveFileDialog --data="${n}" --extension="${l}"`);return u?(t.fsItem=d(u),t.fsItem):null}}async function I(){var n;const e=await T(()=>import("./BcIa8h6B.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url).then(o=>o.default);(n=a.modules.windows)==null||n.addWindow({component:e,componentData:{model:t},options:{title:"Info",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13DocumentEditor"})}});export{M as c};

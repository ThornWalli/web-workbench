import{c as E,d as j}from"./D4lI5vpz.js";import{i as h}from"./Ce6njBYG.js";import{S as y}from"./RAasLaaH.js";import{o as A,b as w}from"./6C4StZv5.js";var Z={now:function(){return(Z.delegate||Date).now()},delegate:void 0};function U(e){e===void 0&&(e={});var t=e.connector,i=t===void 0?function(){return new y}:t,r=e.resetOnError,s=r===void 0?!0:r,C=e.resetOnComplete,S=C===void 0?!0:C,g=e.resetOnRefCountZero,_=g===void 0?!0:g;return function(x){var o,n,u,c=0,f=!1,d=!1,v=function(){n==null||n.unsubscribe(),n=void 0},m=function(){v(),o=u=void 0,f=d=!1},R=function(){var a=o;m(),a==null||a.unsubscribe()};return A(function(a,O){c++,!d&&!f&&v();var l=u=u??i();O.add(function(){c--,c===0&&!d&&!f&&(n=p(R,_))}),l.subscribe(O),!o&&c>0&&(o=new w({next:function(b){return l.next(b)},error:function(b){d=!0,v(),n=p(m,s,b),l.error(b)},complete:function(){f=!0,v(),n=p(m,S),l.complete()}}),h(a).subscribe(o))})(x)}}function p(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var s=new w({next:function(){s.unsubscribe(),e()}});return h(t.apply(void 0,E([],j(i)))).subscribe(s)}}export{Z as d,U as s};

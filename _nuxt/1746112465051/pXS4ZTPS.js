import{W as D}from"./CgHJs8D8.js";import{W as b}from"./C8kdTkyf.js";import{W as M}from"./RHmh6MO8.js";import{W as j}from"./D-PMk-5t.js";import{W as h}from"./ouyT7PHM.js";import{p as z,j as E}from"./DcEGgYs5.js";import{u as L}from"./hgdfUW9W.js";import{d as N,r as _,K as i,j as o,o as R,t as T,v as U,B as $,z as a,y as A,A as y,L as W,D as J,O as K,aa as O,_ as q}from"./DepUWdG1.js";import"./CuslVMR9.js";import"./BGIFtisS.js";import"./RAasLaaH.js";import"./D4lI5vpz.js";import"./DdQrQ7-5.js";import"./6C4StZv5.js";import"./BDV1uWkE.js";import"./CSlkdJUE.js";import"./D5m4u8d2.js";const G={class:"wb-module-files-save"},H=N({__name:"Save",props:{fsItem:{},id:{},model:{}},emits:["close"],setup(F,{emit:S}){var f,d,p;const{core:s}=L();if(!((f=s.value)!=null&&f.modules.files))throw new Error("Files module not found");const t=F,u=S,l=_({path:"",filename:"",file:null,...t.model}),m=((d=s.value)==null?void 0:d.modules.files)&&i((p=s.value)==null?void 0:p.modules.files),c={cancel:"Cancel",save:"Save"},C=o(()=>({label:null,placeholder:"Path…",modelValue:l.value.path})),k=o(()=>({label:null,placeholder:"Filename…",modelValue:l.value.filename,"onUpdate:model-value":e=>{l.value.filename=e}})),x=o(()=>({name:"path",modelValue:l.value.path,"onUpdate:model-value":e=>{l.value.path=e},onSelect:B})),r=_(t.fsItem||i(m.fs.root)),P=o(()=>{var e,n,v;return t.fsItem?t.fsItem:(n=(e=s.value)==null?void 0:e.modules.files)!=null&&n.fs.root?(v=s.value)==null?void 0:v.modules.files.fs.root:null}),g=o(()=>r.value?r.value.locked:!1),w=o(()=>!l.value.filename),B=e=>{r.value=i(e),e instanceof E?l.value.path=e.getPath():e.name&&(l.value.filename=e.name)};R(()=>{t.id&&(l.value.filename=t.id)});const V=()=>{u("close")},I=()=>{const e=z(l.value.path,l.value.filename);u("close",e)};return(e,n)=>(U(),T("div",G,[$(" ["+A(l.value)+"] ",1),a(D,{onSubmit:I},{default:y(()=>[a(h,W(C.value,{readonly:""}),null,16),a(j,W(x.value,{"file-system":J(m).fileSystem,"fs-item":P.value}),null,16,["file-system","fs-item"]),a(h,K(O(k.value)),null,16),a(M,{align:"outer",full:""},{default:y(()=>[a(b,{"style-type":"secondary",label:c.cancel,onClick:V},null,8,["label"]),a(b,{"style-type":"primary",label:c.save,type:"submit",disabled:g.value||w.value},null,8,["label","disabled"])]),_:1})]),_:1})]))}}),de=q(H,[["__scopeId","data-v-0bccf0b2"]]);export{de as default};

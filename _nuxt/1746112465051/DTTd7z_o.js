const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BZU3QNVv.js","./Crnau0sa.js","./DepUWdG1.js","./BOXo5Fuj.css","./CJrV-oJY.js","./C9SoOunh.js","./hgdfUW9W.js","./BDV1uWkE.js","./D5m4u8d2.js","./CXbNF4JJ.css","./BGIFtisS.js","./DUnWgY8N.css"])))=>i.map(i=>d[i]);
import{i as P}from"./BGIFtisS.js";import{H as E,d as D,r as c,j as H,o as W,W as F,t as X,v as Y,x as C,y as j,_ as B}from"./DepUWdG1.js";import{d as N}from"./hgdfUW9W.js";import{u as O}from"./CJrV-oJY.js";const q=N(({core:a})=>[{title:"Clock",items:[{hotKey:"I",keyCode:73,title:"Info",async action(){var r;const u=await E(()=>import("./BZU3QNVv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url).then(o=>o.default);(r=a.modules.windows)==null||r.addWindow({component:u,componentData:{},options:{title:"Info",prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Clock"})}}]}]);function R(a,u,r,o){a.beginPath(),a.arc(0,0,u-r,0,2*Math.PI,!1),a.fillStyle=o[0],a.fill()}function V(a,u,r){let o;for(o=0;o<60;o++){a.rotate(-Math.PI/2),a.beginPath();const l=0-u+12,h=6;a.moveTo(0,l),a.lineTo(0,l-h),a.rotate(Math.PI/3/5),a.lineWidth=2,a.strokeStyle=r[1],a.stroke()}for(a.rotate(-(Math.PI/3/5)*60),o=0;o<16;o++){a.rotate(-Math.PI/2),a.beginPath();const l=0-u+15,h=6,i=10;a.moveTo(0,l),a.lineTo(0+h/2,l-i/2),a.lineTo(0,l-i),a.lineTo(0-h/2,l-i/2),a.lineTo(0,l),a.rotate(Math.PI/3),a.fillStyle=r[1],a.fill()}a.rotate(-Math.PI/3*16)}function K(a,u,r,o,l){const h=u.getHours()*(Math.PI*2/12)+Math.PI*2/12*u.getMinutes()/60,i=u.getMinutes()*(Math.PI*2/60),p=u.getSeconds()*(Math.PI*2/60);r.rotate(h),r.drawImage(a[0],-o.x,-o.y,l.x,l.y),r.rotate(-h),r.rotate(i),r.drawImage(a[1],-o.x,-o.y,l.x,l.y),r.rotate(-i),r.rotate(p),r.drawImage(a[2],-o.x,-o.y,l.x,l.y),r.rotate(-p)}function L(a,u,r,o){const h=a/2-5,i=P(()=>h+5);return[(e,d)=>{e.translate(i.x,i.y);const t=3,s=[.5,.34],f=0,n=0;e.beginPath(),e.moveTo(f,n),e.lineTo(f-t,n-d.width/2*s[1]),e.lineTo(f,n-d.width/2*s[0]),e.lineTo(f+t,n-d.width/2*s[1]),e.lineTo(f,n),e.strokeStyle=o[1],e.fillStyle=o[1],e.stroke(),e.fill()},(e,d)=>{e.translate(i.x,i.y);const t=4,s=[.7,.54],f=0,n=0;e.beginPath(),e.moveTo(f,n),e.lineTo(f-t,n-d.width/2*s[1]),e.lineTo(f,n-d.width/2*s[0]),e.lineTo(f+t,n-d.width/2*s[1]),e.lineTo(f,n),e.strokeStyle=o[1],e.fillStyle=o[1],e.stroke(),e.fill()},(e,d)=>{e.translate(i.x,i.y);const t=0,s=.74,f=0,n=0;e.beginPath(),e.moveTo(f,n),e.lineTo(f+t,n-d.width/2*s),e.lineTo(f,n),e.strokeStyle=o[2],e.stroke()},e=>{e.translate(i.x,i.y),R(e,h,r,o)},e=>{e.translate(i.x,i.y),V(e,h,o)}].map(e=>{const d=document.createElement("canvas");d.width=a,d.height=u;const t=d.getContext("2d");return t&&(t.imageSmoothingEnabled=!1,e(t,d)),d})}const U={class:"period"},$=D({__name:"Clock",setup(a){const{setContextMenu:u}=O();u(q);const r=c(null),o=c(null),l=c(["#888888","#000000","#FFAA55"]),h=c([]),i=c(!1);let p;const e=H(()=>i.value?"PM":"AM");W(()=>{if(r.value&&o.value){const t=o.value;t.width=r.value.offsetWidth,t.height=r.value.offsetHeight,h.value=L(t.width,t.height,2,l.value);const s=t.getContext("2d",{willReadFrequently:!0});if(s)d(t,s);else throw new Error("Failed to get canvas context")}}),F(()=>{window.clearInterval(p)});function d(t,s){const n=t.width/2-5,m=P(()=>n+5),g=P(t.width,t.height);s.imageSmoothingEnabled=!1,s.setTransform(1,0,0,1,0,0),s.translate(m.x,m.y),s.scale(1,1.015),s.beginPath(),s.arc(0,0,n,0,2*Math.PI,!1),s.fillStyle=l.value[1],s.fill(),s.scale(1,.985);const v=h.value,T=M=>{window.requestAnimationFrame(()=>{s.drawImage(v[3],-m.x,-m.y,g.x,g.y),s.drawImage(v[4],-m.x,-m.y,g.x,g.y),s.strokeStyle=l.value[1],s.setTransform(1,0,0,1,0,0);const S=new Date;i.value=S.getHours()>12,s.translate(m.x,m.y),K(v,S,s,m,g);const A=s.getImageData(0,0,g.x,g.y),y=A.data;for(let w=0;w<y.length;w+=4){const _=y[Number(w)],I=y[w+1],k=y[w+2];if(!(_===255&&I===170&&k===85)){const b=.2126*_+.7152*I+.0722*k>=50?255:0;.2126*_+.7152*I+.0722*k>=50&&(y[Number(w)]=y[w+1]=y[w+2]=b)}}s.putImageData(A,0,0),M&&M()})};T(()=>{p=window.setInterval(T,1e3)})}return(t,s)=>(Y(),X("div",{ref_key:"rootEl",ref:r,class:"wb-disks-workbench13-clock"},[C("canvas",{ref_key:"canvasEl",ref:o},null,512),C("span",U,j(e.value),1)],512))}}),G=B($,[["__scopeId","data-v-ee841974"]]),x=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{x as C,q as c};

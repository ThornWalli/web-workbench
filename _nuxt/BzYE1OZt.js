import{Z as W,j as _,k as w,u as f,ac as y,ad as x,aq as k,af as I,ae as v,q as M,aa as D,ar as A}from"./D5MpIc4o.js";import{_ as h,i as d,t as g,v as C,z as s,a5 as L,A as b,O as u}from"./BVOdMTUx.js";import"./CTgiTu_k.js";const K={components:{AtomMarkdown:W},props:{..._},emits:[...w],setup(e,o){const t=f(e,o);return t.setContextMenu(p),t},data(){return{content:["# Cloud",`Connect to a Firebase storage.  
`,`Version: **1.0**  
Created by **Thorn-Welf Walli**`].join(`
`)}}},E={class:"wb-disks-workbench13-cloud-info"};function P(e,o,t,i,n,l){const a=d("atom-markdown");return g(),C("div",E,[s(a,{content:n.content},null,8,["content"])])}const Y=h(K,[["render",P],["__scopeId","data-v-63779558"]]),F={components:{WbForm:y,WbButton:x,WbButtonWrapper:k,WbFormFieldTextbox:I},props:{..._,model:{type:Object,default(){return{id:null,apiKey:null,url:null}}}},emits:[...w,"close"],setup(e,o){const t=L(e,"model"),i=f(e,o);return i.setContextMenu(p,{model:t.value}),i},data(){return{cancelLabel:"Cancel",applyLabel:"Connect",fields:{id:{label:"ID",name:"id",placeholder:"ID…"},apiKey:{label:"Api Key",name:"apiKey",placeholder:"Api Key…"},url:{label:"Url",name:"url",placeholder:"https://…"}}}},computed:{disabledConnect(){return!this.model.id||!this.model.apiKey||!this.model.url}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledConnect||this.$emit("close",this.model)}}},X={class:"wb-module-files-cloud-connect"};function O(e,o,t,i,n,l){const a=d("wb-form-field-textbox"),c=d("wb-button"),r=d("wb-button-wrapper"),m=d("wb-form");return g(),C("div",X,[s(m,{onSubmit:l.onSubmit},{default:b(()=>[s(a,u(n.fields.id,{model:t.model}),null,16,["model"]),s(a,u(n.fields.apiKey,{model:t.model}),null,16,["model"]),s(a,u(n.fields.url,{model:t.model}),null,16,["model"]),s(r,{align:"outer",full:""},{default:b(()=>[s(c,{"style-type":"primary",label:n.applyLabel,type:"submit",disabled:l.disabledConnect},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const T=h(F,[["render",O],["__scopeId","data-v-5487b67a"]]),j={components:{WbForm:y,WbButton:x,WbButtonWrapper:k,WbFormFieldTextbox:I,WbFormFieldDropdown:v},props:{..._,items:{type:Array,default(){return[]}}},emits:[...w,"close"],setup(e,o){const t=L(e,"model"),i=f(e,o);return i.setContextMenu(p,{model:t.value}),i},data(){return{model:{email:null,password:null,storage:null},applyLabel:"Login",fields:{email:{type:"email",label:"Email",name:"email",placeholder:"Email…"},password:{type:"password",label:"Password",name:"password",placeholder:"Password…"},storage:{label:"Storage",name:"storage"}}}},computed:{parsedItems(){return[{title:"Select Storage",value:null},...this.items.map(e=>({title:e.name,value:e.id}))]},disabledSubmit(){return!this.model.email||!this.model.password||!this.model.storage}},methods:{onClickCancel(){this.$emit("close")},onSubmit(){this.disabledSubmit||this.$emit("close",this.model)}}},B={class:"wb-module-files-cloud-connect"};function N(e,o,t,i,n,l){const a=d("wb-form-field-dropdown"),c=d("wb-form-field-textbox"),r=d("wb-button"),m=d("wb-button-wrapper"),S=d("wb-form");return g(),C("div",B,[s(S,{onSubmit:l.onSubmit},{default:b(()=>[s(a,u(n.fields.storage,{model:n.model,options:l.parsedItems}),null,16,["model","options"]),s(c,u(n.fields.email,{model:n.model}),null,16,["model"]),s(c,u(n.fields.password,{model:n.model}),null,16,["model"]),s(m,{align:"outer",full:""},{default:b(()=>[s(r,{"style-type":"primary",label:n.applyLabel,type:"submit",disabled:l.disabledSubmit},null,8,["label","disabled"])]),_:1})]),_:1},8,["onSubmit"])])}const R=h(j,[["render",N],["__scopeId","data-v-e67ed5e8"]]),p=({core:e,model:o})=>[{title:"Cloud",items:[{title:"Connect with…",action:U(e,o)},{title:"Login with…",action:G(e,o)},{type:M.SEPARATOR},{hotKey:"I",keyCode:73,title:"Info",action:q(e)}]}];function q(e){return()=>{e.modules.windows.addWindow({title:"Info",component:Y,componentData:{},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"})}}function G(e,o){return()=>{const t=e.modules.windows.addWindow({title:"Login with",component:R,componentData:{items:o.items},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(i=>{t.events.subscribe(async({name:n,value:l})=>{if(n==="close"){if(l){const{email:a,password:c,storage:r}=l;try{await o.actions.login(a,c,r)}catch(m){debugger;alert(m)}}i()}})})}}function U(e,o){return()=>{const t=e.modules.windows.addWindow({title:"Connect with",component:T,componentData:{model:{id:null,apiKey:null,url:null}},options:{prompt:!1,scaleX:!1,scaleY:!1,scrollX:!1,scrollY:!1}},{group:"workbench13Cloud"});return new Promise(i=>{t.events.subscribe(async({name:n,value:l})=>{if(n==="close"){if(l){const{id:a,url:c,apiKey:r}=l;await o.actions.connect(a,r,c)}i()}})})}}const V={components:{WbForm:y,WbButton:x,WbButtonWrapper:k,WbItemSelect:D},props:{..._,model:{type:Object,default(){return{id:null,items:[]}}}},emits:[...w],setup(e,o){const t=L(e,"model"),i=f(e,o);return i.setContextMenu(p,{model:t.value}),i},data(){return{disconnectLabel:"Disconnect",loginLabel:"Login",logoutLabel:"Logout",fields:{itemSelect:{title:"Mounted Storages:",name:"id"}}}},computed:{parsedItems(){const e=this.model.items;return e.map(o=>{const t=o.isLogged();return{label:`${o.name} ${t?"LOGGED IN":""}`,value:o.id,isLogged:t,id:o.id}}).concat(Array(Math.max(3-e.length,0)).fill({label:null,disabled:!0}))},contextMenu(){return new A(p,{core:this.core,model:this.model})},disabledDisconnect(){return!this.model.id||this.model.items.length<1},disabledLogout(){return!this.parsedItems.find(e=>e.id===this.model.id&&e.isLogged)||this.model.items.length<1}},methods:{onClickDisconnect(){this.model.actions.disconnect(this.model.id)},onClickLogout(){this.model.actions.logout(this.model.id)}}},$={class:"wb-disks-workbench13-cloud-connect"};function z(e,o,t,i,n,l){const a=d("wb-item-select"),c=d("wb-button"),r=d("wb-button-wrapper"),m=d("wb-form");return g(),C("div",$,[s(m,null,{default:b(()=>[s(a,u(n.fields.itemSelect,{items:l.parsedItems,model:t.model}),null,16,["items","model"]),s(r,{align:"outer",full:""},{default:b(()=>[s(c,{"style-type":"secondary",label:n.disconnectLabel,disabled:l.disabledDisconnect,onClick:l.onClickDisconnect},null,8,["label","disabled","onClick"]),s(c,{"style-type":"secondary",label:n.logoutLabel,disabled:l.disabledLogout,onClick:l.onClickLogout},null,8,["label","disabled","onClick"])]),_:1})]),_:1})])}const Q=h(V,[["render",z],["__scopeId","data-v-6aaceee8"]]);export{Q as default};
